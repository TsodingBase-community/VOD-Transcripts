start,end,text
400,3440," uh so think aids in thinking about series"
3440,14640," waiting around so people have told me that two minutes compiles aren't really that bad so i"
14640,20880," figured that we should give them the freedom to waste their time wait so essentially it's just"
20880,26240," it's just waiting it's literally waiting right now right so it's literally waiting so it gives x"
26240,36400," oh yeah yeah bro it's spinning up my freaking cpu right now oh my god freaking it is really"
36400,44480," spinning on one of my freaking cores you"
44480,54000," all right chat wake up the time has come to do yet another low effort slope uh so um recently i"
54000,61760," actually found this very interesting thing um which is an alternative to llvm and i found it by"
61760,69680," actually exploring c3 source code right so at some point uh i looked into c3 and i noticed that"
69680,76880," it has an alternative back end right so originally it uses llvm as its back end uh right and then i"
76880,82800," noticed like an alternative back end i wonder if i can actually find it um so i think the back end is"
82800,92480," called tb or something like that um i wonder if i can find it so there's a code gen um but maybe i have"
92480,99040," to fetch the latest changes okay so let's actually fetch the latest thing just in case tuberculosis is"
99040,110000," that what it stands for right probably i don't know uh so and maybe we can grab uh back end i already don't quite"
110000,118640," uh okay so there's a code gen uh right so there's a ssc compiler and there is a code gen um so where is the"
118640,129520," code gen so there is a c code gen and there is a asm code gen and there was i think um tilda"
130640,138240," i i hope learner didn't actually remove that it could be actually the case that learner removed it but it"
138240,143440," was there trust me so maybe he experimented with something or maybe he created a separate branch i"
143440,152400," don't quite remember um so c branch additional code gen i think that's what it is i think that's what it is"
152400,159040," it's just this specific branch uh i wish i could just switch to it um so additional code gen"
159040,170080," uh-huh uh-huh so yeah there we go so backend tb i started looking into that and and found this thing"
170080,177280," right so uh apparently it is related to that so let's actually read about it uh tilde my llvm alternative"
177280,183520," i'm jason and i've i hope i pronounced name correctly so i'm sorry um if i didn't and i've made my uh made"
183520,188880," it my mission to produce an alternative to llvm the current king of compiler backends library of the"
188880,196080," current king of compiler backend libraries i'm calling it tilde or tb uh for tilde backend and the reasons are"
196080,202800," pretty simple i believe it's far too slow at compiling and far too big to be fixed uh from the"
202800,209600," inside it is true right so nobody at this point really compiles lvm themselves right so uh even"
209600,216080," when i needed to build c3 uh i think i just like downloaded lvm from the official website or on void i"
216080,221760," just installed it from from the repos right it's kind of like a very heavy dependency it is insanely heavy"
221760,228880," dependency so it's been 20 years and craft uh has built up time for a redo as a test case a roller"
228880,234640," c compiler and early tests show the preprocessor to be around two uh two times faster than clanks uh"
234640,242960," clanks along preprocessor isn't preprocessor right uh not related to the back end it's just like a very"
242960,249760," much front end thing but anyway so um it's uh two times faster than clanks along with being able to"
249760,255520," parse multi okay so parse multiple translation news in the same uh process without threading issues and"
255520,262960," out of the other declarations um so to clarify my project isn't some api compatible replacement to lvm"
262960,270160," is just another backend that believes in a similar vision to early lvm uh so and here is apparently"
270160,277200," the vision of the early lvm the world needs better compiler tools uh tools which are built as libraries"
277200,284240," this design point allows reuse of the tools in new and novel ways however building the tools as libraries"
284240,290560," isn't enough they must have clear apis i've just instantly remembered the clip of jonathan blow looking"
290560,298720," at the uh the documentation doxygen generated the documentation of the lvm this is like they must have"
298720,307920," clear apis it's a mess anyway uh as a decoupled from each other as possible"
309600,315920," and easy to modify extent this requires clean layering decent design and avoiding tying the"
315920,324000," libraries to a specific use oh yeah did i mention that we want um a resultant libraries to be as fast"
324000,333440," as possible well yeah chris lanter 2007 right so where's my 2007 so apparently yeah i agree with that if"
333440,342000," this was a regional vision of lvm it diverse quite a bit from it honestly like like by looking at this"
342000,348320," vision you you wouldn't think about lvm like would you think about it this is not that lvm what the"
348320,354800," are you even talking about that's like uh right so that's pretty cool that's pretty cool to go back to"
354800,363200," original vision of lvm i really respect that uh so key features c of nodes ir opposite to llvm or"
363200,372240," gcc's ssa cfg i have no idea what is c of nodes what is c of nodes like i never heard that term before"
372240,377520," so it's actually googled up so what i like about this project as well is that it uses a lot of"
377520,383040," interesting terms that i never heard before uh so that means maybe i can learn something right c of nodes"
383040,393440," um is a graph representation of a single static assignment uh opposite to ssa c of oh so opposite to"
393440,401360," ssa c of g so it's there are different kinds of ssa right single static assignment so one of them is c of"
401360,410640," nodes and another one c of g right forest of instructions uh ssa what is c of g though let me see"
411440,420480," um so that doesn't really tell us uh okay control flow graph right so we have c of nodes and control"
420480,430000," flow graph all right so and c of nodes uh that combines data flow and control flow and uh relaxes"
430000,436400," the control from from total order to partial order keeping only the ordering required by data flow"
438160,443760," thank you wikipedia very cool anyway let's put that on the back burner maybe we'll understand it later"
443760,451120," simple type system okay so that's interesting fast compile times thread safe modules can generate"
451120,456000," and compile to function at the same time that's already impressive it's almost like gi compiler"
456000,465200," codeview debug info windows debuggers will handle it just fine uh capable of both jitting and aot there is also early works on"
465200,470240," directly outputting linked executables those bypassing the need for a conventional linker"
470240,480080," okay so in progress currently i'm working with ginger bill on integrating with only oh so not only c3 uses"
480080,485600," that so odin uses that as well i think i remember somebody told me that yeah it is used to nodding so"
485600,494320," along with uh sean summa on mini vm so what is mini vm let me see let me see so i'm using uh web archive"
494320,503120," because i'm in a very stupid country that bans website left and right uh so okay so this is apparently a"
503120,510480," different branch that probably doesn't exist anymore so i really want to see what is mini vm so it's a vm that is"
510480,519680," dynamic and fast but isn't a language backend already basically a vm isn't it unless it's a it's a vm of"
519680,528720," like an existing machine right so it's a vm implemented using another vm right and by the way this is the"
528720,535600," reason why llvm is called llvm low level virtual machine because backends are basically virtual machines"
535600,544320," aren't they so yeah um so it's it's used for jeet i see i see very interesting it has just in time"
544320,550880," compiler based on okay okay that explains why you need this kind of stuff cool cool cool cool all right"
552240,559840," um so i hope to self-host uh quick so quick if i understood correctly is the essentially c compiler"
559840,565680," right so uh written using that specific backend i'm hoping to self-host quick this year which will"
565680,572240," be the most capable example of tb along with this the opt the optimizer is in progress and going good with"
572240,578240," most of the expected minimizations as a construction assistive folding gvn and code motion and stuff like"
578240,585920," that all right so that's pretty cool uh let's take a look at it right so let's take a look at it here is"
585920,593360," the github repo and um yeah so obviously i probably want to get rid of the web uh archive we don't really"
593360,603360," need it in here so we only use it as a proxy uh right already had it open apparently okay uh so so there's"
603360,609840," some third party dependencies so that means we'll have to probably clone it recursively uh let's"
609840,618000," quickly do that so git clone a recursive let's fucking go mine a friend there thousand commits almost"
618000,622960," two thousand commits okay so i hope it's not going to take too much time to download that so"
624560,631040," a lot of megabytes a lot of megabytes a lot of megabytes and i suppose so yeah it's already done"
631040,637040," look at that uh quick quick quick how do i oh"
646480,653040," oh"
653040,664320," well that's pretty based i mean does it vendor its own lure or something like that all right so if i try to"
664320,671120," find maybe a file or maybe just like anything with the name that contains lure does it vendor it"
672320,679920," no it doesn't you know what would be even more based uh if like the lure source code was actually"
679920,687840," part of the uh of the project right so then you would need only only c compiler to just build"
687840,692160," everything with the c compiler you just build lure interpreter and then with the lure interpreter you"
692160,697520," run the build script right you don't need anything except c compiler that would have been based honestly"
697520,704960," uh right even though lure source code is rather simple right so like it's insanely simple um so"
704960,712240," let me actually show you little source code and you can pretty pretty much make it part of your project"
712240,715200," if you want to maybe it is a little bit overkill"
719840,725120," who who who distributes source code like that what the am i even looking at"
725120,730960," lure are you okay like what the is this"
730960,737040," excuse me uh yeah downloads this is what i want"
737040,742560," uh this is what i want do i even have lua in here maybe maybe not"
743920,751280," so let's double get this entire thing uh right and then if i go here for instance uh right then"
751280,758400," i just do make g16 and just time it uh so yeah there we go i already built it so i just build it in"
758400,765360," 1.7 seconds the entirety of the source code right so and the amount of the of the files in here is just"
765360,770160," pretty much this this is the amount of files in lua this is the entirety of the lure interpreter"
772160,777280," seriously this is the entire that's why i say that maybe you can just make the"
777280,782800," lure interpreter part of your project right so imagine like writing build scripts in lua and then"
782800,789040," just like vendoring the lure interpreter because it's rather simple right so but maybe for simpler"
789040,795360," backend it's still a little bit of an overkill right so i don't know just just voicing out my thoughts"
795360,801840," right um anyways so let's actually uh continue do uh like exploring this entire thing and"
802480,805920," so how do you even use it do i just run it is there anything in readme"
805920,811440," uh warning unfinished and buggy okay so we're gonna keep that in mind right so we're not going to be too"
811440,816880," harsh uh in our criticism about the project rights because it's unfinished right so we have to keep"
816880,821280," that in mind there's no instructions on how to build it though well i mean i mean there is there"
821280,829120," is some instructions so it's in the docs and let's do building so we already did the recursive thing"
829120,835920," you'll need clang really why do you need ninja for so does it does it"
835920,838880," oh"
838880,847520," the lord generates ninja script i thought it's like self-contained it doesn't need additional"
849360,850160," i'm disappointed"
850160,857440," i mean it's fine it's just like it's kind of disappointed like i was hoping that it's just"
857440,861360," like literally self-contained it just like it only needs the c compiler and it's just"
861360,868560," anyways that's already maybe better than cmake honestly like generating ninja scripts with lua is"
868560,876080," better than generating them with cmake uh anyways so what do we have in here so lua build driver for the"
876080,883360," most part doing lua build the driver will build a cli app if you wish to build the library by itself add"
883360,892080," quick and the tb depending on what is wanted all right so i just expect that maybe there is a"
892080,901040," help somewhere here so what if i just run this entire thing it just builds builds pretty fast uh"
901040,907840," is there something like help in here there is no help so we don't really it's it this thing is not"
907840,913440," particularly self-explorable um so it's it's a particular coding style build system you shouldn't"
913440,919920," understand i mean it's pretty understandable so far right so it's just like it's a linear script i don't"
919920,927280," see any particular coding styles so far right so it's it's pretty straightforward uh it's pretty straightforward"
927280,933440," uh i don't quite understand like so it builds just a thing then i want to build"
933440,941120," so what did it say driver right so i want to do driver um okay so we're building driver"
944240,955680," so the cli app okay and yeah so essentially it's probably similar to qb right or llvm compiler right"
955680,962960," that just accepts the texture representation of the intermediate representation and just translate it to"
962960,968400," different executables and stuff like that uh so if i just do that it builds"
970640,977120," yeah it builds it like that uh and if i do we want to do quick um oh"
977120,986080," and the quick is not it currently not compilable okay so because it's because it's unfinished apparently"
986080,992000," all right so that means we're going to focus on the driver only right so we're going to focus on the"
992000,1000240," back-end itself just the back-end itself um all right sodium backhand i'm sure it's not it doesn't"
1000240,1005040," mean sodium back and it's still the back-end uh thank you so much uc10 for 10 months of question with"
1005040,1010160," the message yo 40 months thanks for the stream you're welcome ready 40 months oh holy it is"
1010160,1015840," 40 months indeed so element 0216 thank you so much for tier one with the message three years goes"
1015840,1021760," by quickly been watching words more recently but still enjoy what you do thank you thank you 36 months"
1021760,1027520," damn so so many ogs so many ogs vglg who took my name thank you so much for the time with the message"
1027520,1034800," never been huge fan of lvm have a great stream my frunda thank you thank you so much uh all right so"
1035840,1040800," it's kind of interesting it builds quick right but then if i"
1040800,1045760," if i provide quick"
1045760,1056400," it can't build quick but then if do driver it builds successfully but it builds a quick executable"
1060400,1063200," i can't really understand this build system"
1063200,1066960," what exactly does it build okay so what if i do tb"
1066960,1073600," this is fascinating what does it do"
1073600,1078080," okay it built tb"
1078080,1087840," right so okay if i do all of them it just builds probably all of them"
1090400,1095360," it's really interesting to see if there's an executable driver"
1095360,1104080," and a library well i don't really see different executables right so there is only quick so far"
1104080,1109760," right so there's objects in here here's the library and here is quick"
1109760,1117360," um so let's go maybe the documentation is not updated right so maybe the computation is not updated but"
1117360,1124480," it's kind of it's kind of weird no input files okay so let's create an empty file right so let's find"
1124480,1132480," out it's not a file sorry uh let's actually touch it touch empty uh-huh so and let's just provide an"
1132480,1139040," empty file what is it going to say it's trying to okay undefined reference to main how do i create"
1139040,1149520," main that's a very uh so that means the empty file is essentially a valid thing right so it's a it's a valid"
1149520,1159920," uh valid valid tb source code but is there any examples do you have there is no examples okay"
1159920,1165520," that's very interesting that is very interesting so maybe there's something in docs okay so there's ir"
1166160,1172960," uh c of nodes uh cf node is a ssa where ordering is relaxed in the form of explicit dependencies as"
1172960,1181360," opposite to local ordering okay cool uh is there any examples though uh so there's a read me code"
1181360,1189760," generation nothing particularly interesting nothing particularly interesting okay so freestanding"
1191440,1198400," tests okay so maybe there are some tests in here so here is the bar dot txt let's open it up um"
1198400,1209040," so it's just a dump apparently um okay so does it have to be oh since it's a c compiler it probably"
1209040,1215200," expects it to be yeah it probably expects a c compiler right so a c program so that means maybe it has to be"
1215200,1224960," something like c um right and then i'll have to probably do something like that right since it's a c compiler"
1224960,1233200," so okay it's kind of ironic to write a c compiler and then link with climbing"
1237440,1242080," but anyway so it the entire thing is not finished right the entire thing is not finished so we are"
1242080,1249440," not judging that so if i try to run it so it should not return anything uh right so maybe we can also"
1249440,1256240," include some stuff so let's test the hello world i wonder if the intermediate presentation actually has"
1256240,1263040," uh some sort of like a texture representation like in case of lbm or qbe right so this is one of the things i"
1263040,1273680," remember um there was an lbm qbe but anyway so we can do printf uh hello world uh and if i try to"
1273680,1281040," build the entire thing uh and then just maybe a run uh wait wait so we didn't provide any output"
1281040,1287760," name so yeah it works it's a c compiler uh it can compile a simple hello world which is kind of cool"
1288720,1294160," which is kind of cool but i'm really curious what's up with like i want to program with the"
1294160,1300880," intermediate presentation directly right so is it even possible if i try to do something like bin"
1300880,1308720," uh quick help there is no such thing as help okay so there is some sort of a help okay so that's pretty"
1308720,1318480," cool uh quick c compiler so this is just a c compiler this is just a c compiler so i suppose"
1318720,1325360," the intermediate representation is basically in the form of a library right based"
1325360,1330400," it has a beast"
1330400,1338960," it's experimental it's just like use with caution use with caution it is experimental flag"
1338960,1346160," uh so it is an api all right so kind of interesting honestly so we can take a look at this thing"
1346880,1354960," uh so here's a bunch of nodes optimizer crap okay so some of the points i should probably worry about"
1354960,1362000," uh is that the texture representation or is that a pseudocode i'm not even sure what it is"
1362000,1368480," um so there's the emit ir okay so let's actually take a look at that so you you guys noticed something"
1368480,1377440," right so emit oh that's actually cool all right let's go let's go um emit ir"
1377440,1389760," okay okay okay okay okay so that's pretty cool um so it accepts memory it's kind of similar to lvm"
1389760,1398800," honestly it's kind of similar to lvm so and so what is this symbol right and it's symbol is not particularly"
1398800,1406880," accessible uh what if i just redirect empty ir all right so i've got ir"
1409440,1421680," you you you may you may want to employ this function"
1421680,1427680," i really recommend to employ this function it's a very useful function"
1432080,1440080," um maybe i can disable the colors menu again the project isn't finished okay the project isn't"
1440080,1446560," finished it's normal it's okay it is expected uh so think aids in thinking about series"
1454160,1465200," okay waiting around so people have told me that two minutes compiles aren't really that bad"
1465200,1470080," so i figured that we should give them the freedom to waste their time wait"
1470080,1477280," so essentially it's just it's just waiting as"
1481840,1488720," wait wait is is it really right so in xk it's literally waiting right now right so it's literally"
1488720,1500880," waiting so it gave the x oh yeah bro it's spinning up my freaking cpu right now"
1500880,1510000," oh my god freaking it is really spinning on one of my freaking cores"
1511840,1518480," okay okay okay okay okay okay wait wait wait i want to make sure holy"
1518480,1530080," um so where is it where is it where is the how do i do that yeah how do i grab specifically for"
1530080,1534800," um okay so let's actually grab maybe a thing"
1535360,1545840," uh do we have thing now so maybe it's somewhere in the driver okay guys so here is the thing uh and"
1545840,1553920," this is the flag right so i suppose the way you uh search for this flag right let's remove this kind of"
1553920,1563760," stuff uh right toggle thing uh right toggle thing so let me see is it okay so maybe it's arg thing"
1563760,1567040," how do you use it even arg thing"
1567040,1580000," all right so parse code thing there should be some sort of if somewhere so here's the boolean yeah boolean thing"
1580880,1588160," um so we have some sort of um driver orgs so one of the things i want to do okay let's try to maybe put"
1588160,1594800," underscore in here i want to find all of the places uh where this uh variable is kind of used uh so let's"
1594800,1601680," try to build this entire stuff now right so it's okay so this is what i want yeah so there you go so i"
1601680,1611360," just was trying to find this specific place right um so and what does it do it's okay it's not it's not"
1611360,1616640," even fucking waiting it's not even fucking waiting it's literally spinning"
1616640,1627200," okay you you deserve the star just for that just for the great sense of humor instant like instastar"
1627840,1634240," deserves the star uh average experience uh c macros yeah exactly"
1634240,1641040," damn that that was funny that was fun my friend uh i really appreciate that"
1641040,1644160," i really appreciate a good joke"
1644160,1648800," spin for two minutes right so it's just like a"
1648800,1655760," taking a piece at compilation times over lvm and stuff like that all right so we got some easter eggs"
1655760,1660880," we got some easter eggs i already appreciate that this is really cool uh so quick uh let's take a"
1660880,1666800," look at what else do we have in here so we can think uh profile the compile times okay that's pretty cool"
1666800,1674560," enable multi-threaded compilation change the target set entry point all right so set windows subsystems"
1674560,1683200," windows only of course very sassy comments uh just like a jive so based use the tb linker"
1684080,1691280," oh it literally means based as slang right so that means it uses its own built-in linker and stuff like"
1691280,1696080," that all right that makes sense it's pretty cool choose a language"
1696080,1698800," jlsl"
1698800,1702720," you can compile jlsl"
1705440,1712560," that's very interesting uh so run compiler persistently repeats compile step whenever the input changes"
1712560,1722320," that's a very web dev like that's pretty cool that is actually pretty cool so uh if i try to maybe do"
1722320,1731920," live uh empty dot c right if i do live uh it doesn't really do anything so that's kind of weird it didn't work"
1732880,1740240," uh so emit ir what i wanted with the meter ir actually honestly in all honesty i thought maybe"
1740240,1745440," there is something to disable colors right is there something to disable call i feel like there is no way"
1745440,1755200," to disable colors uh right so we can try to do ast well i mean amt all right so here is the ast"
1756560,1760160," okay so that's that's very interesting that's very interesting"
1760160,1769760," what's funny is that it feels really very much unfinished it does in fact feel very much unfinished"
1769760,1776880," but i like don't can't really find anything interesting to look at but the same time people"
1776880,1781360," are integrating this entire thing in different projects so that means there is something to it"
1781360,1787920," right there is something to it um so that means i need to maybe look further for example maybe we"
1787920,1796000," could try to use this library right so uh because apparently i don't think it has um compilation like"
1796000,1803280," it has a texture presentation of its ar so maybe what you're supposed to do you're supposed to use it as a"
1803280,1810400," library right uh maybe tb has more work in it than the c compile yeah probably probably we have to focus"
1810400,1820320," on tb rather than quick um so yeah anyways so let me let me see let me see but the question is there's not"
1820320,1828400," that many examples on how to use tb um well we have a header okay so all right that's actually pretty"
1828400,1835760," cool so there's a glossary um i'll write all right all right so there's different things and stuff like"
1835760,1844560," that a simple example would have been kind of cool okay so here are different i suppose in uh instructions"
1844560,1854560," of the intermediate representation uh yeah note different nodes even different nodes uh but maybe"
1854560,1869440," so there is also call format linker x64 um so maybe um so there's some tests guy"
1873440,1882000," okay okay so h.c so this is just a hello world um i kind of want to try to maybe link with tb"
1882000,1890560," right so it's actually three megabytes executable so we can try to link with uh tb and try to use that"
1890560,1902000," so let's create our own compiler right so i'll create like my compiler my c right so my dot c uh and here"
1903120,1908400," so let's just do something like this i'm going to be using clang compiler right so but i'm going to be"
1908400,1920000," linking with the with tb uh right so let's create maybe make file so my dot c uh my my dot c uh clang"
1920000,1932800," oh my my let's see and let's just like literally link with tb right so if you take a look at the bin here is tb and search for this entire"
1932800,1939120," thing thing in dot bin all right all right so if we try to make uh it compiled and it linked with all of"
1939120,1944560," that uh but we didn't use any of the functions from tb so i suppose one of the things we have to do"
1944560,1956240," is do the includes so we do have includes in here uh tb dot h all right so and let's include um"
1957280,1967520," tb dot h so that also means uh we'll have to update this entire stuff uh and put include in here is it"
1967520,1974800," unclear yeah it's just an include right let's build it okay so we build it successfully uh cool uh so we"
1974800,1982960," have this type node thingy right type enum node or whatever so let's see where it is used so you can get"
1982960,1991600," the name of this entire thing um is that it i don't really see the other places where it is so this is"
1991600,1998240," just a declaration of this type okay uh but then you can also take a name and that's about it you can't"
1998240,2005120," really do anything so but there's a lot of these kind of instructions so tb inst trace from region"
2005680,2014640," save point tail call uh and so on and so forth there's an optimizer api um so it would be interesting"
2014640,2023040," it has a serious lack of examples serious lack of examples but i suppose maybe the the compiler itself"
2023040,2033120," is the example um and maybe the compiler itself is the example so sdg build primitives"
2036400,2042800," so there's a docks nothing particularly interesting so there's a main"
2042800,2054400," so this is a main driver it's kind of all over the place that's the thing it's all over the place"
2054400,2064080," and it doesn't feel like a coherent thing that you can just like properly explore um right"
2065520,2074240," maybe there is a somewhere example folder like really really nested in there right so we can just"
2074240,2082160," try to find d name example maybe it's examples or something like that no there is nothing in here okay"
2082160,2092960," um so there's also meta i'm not quite an lsp oh it's a it's a lisp there's a lot of things going on here"
2092960,2102400," there's really like a lot of different things hmm clean api well yeah it is it's unfinished right so"
2102400,2108000," it's in this intermediate step as state uh but at the same time it's already been integrated in different"
2108000,2118560," projects and stuff like that um so tb code gen uh code gen impl all right so secret for more details of the"
2118560,2124720," implementation and no i would like to just have a simple example right so that's what i would like to"
2124720,2138320," have um it's intermediate representation okay um so maybe we should like look into the um into the main"
2138320,2145440," the main driver right so let's actually start with that so in here uh quick parse args"
2145440,2155200," so there's this joke cool starting with threats and stuff like that quick build step"
2156400,2175360," um args sources um so we are iterating the sources all right and for each source which is doing quick"
2175360,2185360," driver cc hmm is it defined somewhere here it is not defined here we can do something interesting let's find"
2185360,2194800," all of the files with the name uh ch right so here are all the files and let's just put them into e tags"
2194800,2206560," let's put them into e tags um now i can try to do something like this okay so we do cc and"
2208800,2215360," so it creates a build step right so it allocates this build step and it just returns this build step"
2215360,2222800," and it seems to be postponed right it's a postponed step it just like fills up these things and returns"
2222800,2231120," this entire stuff and we'll put that into this array of steps which we then probably going to execute so yeah"
2231120,2235840," yeah so here is we are running this step and it's probably needed so we can actually run them in"
2235840,2242160," separate thread or something like that uh okay so there's a mutex in here yeah so essentially each"
2242160,2250320," individual step can be run in separate thread okay that's fair enough so and in that step uh what do we do"
2250320,2258400," so it's actually a rather recursive look at that it is rather recursive um huh oh it's probably for the"
2258400,2267920," dependencies right so step uh if it has dependencies we're first building some other dependencies okay so"
2268800,2272720," yeah that makes sense yeah that makes sense yeah that makes sense and when we're building the dependencies"
2272720,2279280," what exactly do we do in here so there are some tasks and stuff like that so there's just a build"
2279280,2289840," step info uh-huh this is used by the worker routines okay that's very interesting so we add in a task"
2291920,2302320," and this is a s invoke uh and invoke is some sort of function so maybe uh that function is actually"
2302320,2312080," specified in here so this is what is called in separate thread so it's a cc invoke uh okay so driver"
2312080,2318480," preprocessor so we preprocessing the thing then we get the token so here we're finally parsing so this is"
2318480,2326000," the token streams and stuff like that that's pretty cool uh all right and where do we pass all of that"
2326000,2337280," stuff uh so set extension and okay that's very interesting so here's the token so we got the tokens uh get"
2337280,2348400," the files okay is that it we have dump tokens so this is a preprocessor okay so this"
2348400,2354320," is probably a parser right this is probably a parser right this is probably a parser then we're doing"
2354320,2360640," compilation okay so here's the compilation unit and translation unit and stuff like that um"
2360640,2372640," so add to compilation units so translation you need to compilation units all right so what do we have"
2372640,2379760," and then we have them here i didn't really do anything particularly interesting so to you"
2379760,2391280," set to you original i'm trying to get to the point where it is emitting um the intermediate representation"
2391280,2398320," right so then i can have an example on how to work with intermediate representation so we're currently"
2398320,2405600," looking at how it is parsed i hope so uh and if we go down and down and down maybe eventually we'll reach"
2405600,2410720," the tb itself right so where it is emitting this intermediate representation and maybe we can use"
2410720,2420960," that as an example but so far i don't see it um right so let me let me see uh dump translation unit"
2422240,2428080," so maybe that's uh cannot dump translation so it's quick dump"
2428080,2437680," so translation unit it's just statement so it's a part thing um okay"
2437680,2448560," allocate a okay so we're allocating oh all right all right ir gen so we uh take okay so we're taking"
2448560,2453760," compilation unit and we're finally generating different stuff in here okay so that's that's pretty cool"
2453760,2461600," um all right all right all right uh so quick to you see you number of statements"
2461600,2474800," okay so you have ir gen task ir gen task this one is interesting"
2477920,2481680," all right all right all right that's that's that's so that's a lot to take in on this thing that's all"
2481680,2491760," to take in um so ira gen job okay so maybe that's where we do that uh tb okay so this one is"
2491760,2500080," interesting so tb symbol okay finally we're actually using we are in a code that is actually using something"
2500080,2507760," from the include tb.h right we dig down long enough that we reached the intermediate representation thing"
2508560,2512800," so uh this is a tb symbol right so uh this is a tb symbol right so this is a tb symbol and i wonder"
2512800,2517200," what is the tb symbol it could be actually yeah so it's part of this"
2517200,2527760," aha i see i see so this is uh type enumeration but it's actually not that it's this structure"
2527760,2535600," right it is this structure refers genetically to object within a module tb function tb global tb external and all"
2535600,2541920," subtiles of tb symbol and those are safely allowed to cast into symbol for operations okay so i really like"
2541920,2551760," that um so this is the symbol so time block orgs so then we take a bunch of statements and we perform"
2551760,2555680," this thing uh on this thing uh on the top level oh and there's"
2555680,2570560," so there is a ir gen and there is a sql ir gen too nice my favorite my favorite so the ir gen was so good"
2570560,2574240," that they had to make it that they had to make a sql they had to make a sql okay"
2574240,2579040," uh all right so using the new tb builder because it's better"
2579040,2581600," all right"
2581600,2585760," um that's that's very interesting"
2589840,2598240," thread local is that uh is that a thing in uc c thread local keyword wait really"
2598240,2605280," today i learned i didn't know that there is a thread local keyword in c"
2605280,2612880," that's pretty cool we're learning something we're learning something but man this project is all over"
2612880,2620640," the place this is this project is like literal definition of a dhd like damn uh so it's pretty"
2620640,2624880," cool by the way i really like this project but it's all over the place it's just like what the"
2624880,2633920," is going on it's just like it's a lot of like notes experiments and and stuff like that it's just like yo"
2635760,2642160," all right so and i suppose all right this thing"
2642160,2652240," so both of them implement irgen.h right if i understand correctly so both of them implement that"
2652240,2661680," irgen.h so i wonder is it even mentioned is it even mentioned in build.lua right so"
2663120,2671360," irgen it's not even mentioned in here so is it ir no all right probably because wait a second"
2671360,2678640," because it's like automatically generated so it probably uh traverses the folder like it looks"
2678640,2686080," into the folder and just automatically adds all of the c files into into the build so you can't really"
2686080,2696000," find the um you know the coherent list of everything build but anyway um so we're building top level"
2696000,2703280," right so we're building top level statements of the language okay uh so here is the function"
2703280,2712080," you create tb function uh so here you can also create uh some other things uh so you also create"
2712080,2717600," section so you can create different section for the module uh okay so this one is interesting so here's"
2717600,2727680," m all right and m it's a tb module all right and module how is it created okay this one is really"
2727680,2734960," interesting because i feel like this is how we're supposed to do that um right we first create a module"
2734960,2742720," but it's actually the module is created for us uh by the task so the question is how do you create a module"
2742720,2750480," uh to be so yeah it's already created i i kind of didn't notice that but i suppose the root of"
2750480,2758880," everything is literally the module so you have ir mod which comes from the compilation unit"
2759680,2767360," right and this compilation unit is created by some other functions in here so what i'm thinking is just"
2767360,2773280," like how do i create uh the tb module"
2773280,2785120," how do you create the tb module and the next question is like what then do i do with the uh tb module"
2787120,2806640," um all right so tb tb tb dot h uh tb uh tb module so i think i saw it right so it's to be symbol"
2806640,2815600," but what i'm interested in is tb module ah so struct tb yeah this one"
2817120,2820880," but i didn't see but i didn't see are you telling me this it is opaque"
2820880,2830480," are you telling me it is opaque it looks like it's opaque huh so um so this is just an include"
2830480,2843680," and here is a tb uh and if i just look for um tb module right maybe it's defined somewhere somewhere here"
2844320,2850240," um you know what i think i need to make a small break and make a cup of tea right so after i make"
2850240,2854000," a small break and make a cup of tea we're gonna continue exploring and here is an internal so it is"
2854000,2862400," apparently supposed to be uh yeah opaque it is supposed to be opaque huh very interesting for me"
2862400,2871520," there is a way to allocate this entire stuff so do you have something like a function that returns that"
2871520,2880560," stuff like there is no way to create tb module uh tb module create tb module create wait why couldn't i"
2880560,2887840," find that am i am i an idiot i think i just like mistyped something okay so you can just create okay"
2887840,2895600," so this is kind of cool so and i wonder by the way is there any functions that accept tb module and allow us"
2895600,2901520," to do different things um so i really like this function by the way so module enable"
2901520,2904960," sorry"
2904960,2918560," um so this is actually kind of cool so we create module and we create sections"
2919920,2926080," and yeah so we just like pile different things into this tb module the next question how can we"
2926080,2935040," now transform that module into something into object file or whatever um so let me actually find like all"
2935040,2941280," the places where module is used um tb module creative or create for host you can destroy that thing"
2941280,2948800," afterwards uh enable check stuck um you can do jit begin all right object x"
2948800,2955440," is that it really so then you get the expert buffer"
2955440,2964000," so do i understand correctly that i just create tb module just add a bunch of things into that module"
2964000,2969360," for example function and whatnot and then just export object out of that and i get and like some sort of"
2969360,2974960," object out of this thing so you i can even and then i can export that buffer into a file look at that"
2974960,2977360," i can then export that into a file"
2977360,2985520," sounds pretty simple right even though there was no example to do that but we can try to do exactly that"
2985520,2992560," let's actually try to do that right so i'm gonna try to do a very like naive first thing and then if it"
2992560,2998480," doesn't work we're going to go on onto the break and make a cup of tea right so let's create an empty"
2998480,3004400," module right let's see what's going to happen let's create an empty module so here's the my compiler uh so"
3004400,3010640," and uh it's pretty cool right so that we managed to kind of uh like a wrap our head around this api"
3010640,3016720," but just looking around in the in the compiler uh so that's already better than lagrange right so"
3018400,3025440," uh tb create uh what was the db module create right so here we go okay that's cool let's"
3025440,3031440," fucking go so here's the module and we managed to create a module i'm going to call it m so what kind"
3031440,3039680," of architectures do we have uh so i suppose we are at x86 64. so that also means that i can cross compile"
3039680,3047040," this entire stuff right so that also means i can cross compile okay fair enough uh so tb system so"
3047040,3055040," what is the tb system what kind of oh is it not defining why is it not defined in here bro bro what the"
3055040,3063200," for where do i get uh so there's a prelude okay yeah there we go okay so we're going to be compiling"
3063200,3068720," you can compile to wasm android not supported yet"
3068720,3079440," i wonder if you can compile to wasm32 uh right there is for host oh that's actually very interesting"
3079440,3087200," um all right so let's actually use uh system linux right so that's the system and let's not use jit for"
3087200,3093040," now right so i didn't really think we need to do that so it's going to be false so okay afterwards i'm"
3093040,3098800," going to just print um m equal p and i just want to take a look at it just i just want to see what's"
3098800,3105120," going to happen so we're going to make and let's just run the whole thing uh all right so we got some"
3105120,3113600," sort of a pointer we got some sort of point wet assembly yeah very funny and you know what let's just"
3113600,3120080," take this empty module and try to translate it into an object why not let's try the simplest possible"
3120080,3126720," thing before jumping into something more complex right um so i think it's fair i think it's fair"
3126720,3138960," um so tb module right so tb module so we created that and uh yeah so here we need these two functions"
3140160,3146480," i'm going to comment out this one for now so here we get the buffer and honestly i'm not sure what the"
3146480,3153680," hell is buffer what the hell is buffer oh okay so it's just a structure um so i suppose it's a linked"
3153680,3159200," list of chunks yeah it is a linked list of chunks believe it or not right it's literally linked list of"
3159200,3167440," chunks okay fair enough uh so here's the module that we want to provide and it accepts arena look at that"
3168000,3176880," so arena it is using arena all right so how to create arena um so i suppose i you have to explicitly"
3176880,3185200," create it apparently right it's not like it's not like my arena where zero initialized arena structure"
3185200,3191360," is actually valid you have to create it apparently so for those guys know i have my implementation like"
3191360,3197200," very simple implementation of arena uh so it's probably simpler than whatever is used in this compiler but"
3197200,3205440," i like this implementation because you can just like allocate it on the stack right in the sense that"
3205440,3214240," you can say arena a zero and this is a valid arena you don't have to have any initialization function"
3214240,3219280," or anything like that you can start allocating into that structure and it will initialize everything"
3219280,3224160," like automatically for you you don't have to worry about that i kind of like this kind of api where you"
3224160,3231280," don't have to call any special functions or anything like that you know what i mean um so but i mean it's"
3231280,3237760," not that big of a deal uh right so we can so i'm going to just assume that the way you work with this arena"
3237760,3244880," is you just allocate it somewhere for instance on the stack right so we just do tb arena and we're going to"
3244880,3250640," call it a um right so i'm going to just like zero initialize this entire thing and afterwards i have to"
3251200,3258720," create it right so i have to create it somehow uh so there's also optional tag um so i i hope"
3258720,3264400," you i can just put null in here uh and in here i'm going to just say okay create and initialize this"
3264400,3271840," specific arena that i allocated on the stack um so i hope this is how it's going to work so in all the"
3271840,3277200," allocations for this by this function are going to be done into that specific arena uh so this is going"
3277200,3283440," to be a and some sort of a debug format uh some sort of debug format so let's say that we're not going"
3283440,3289520," to have any debug format okay uh so get some subs c form thank you so much for the sub with the message"
3289520,3298880," merry christmas which one which one is that so we get some more subs uh thank you so much uh black haze"
3298880,3303840," for twitch transcription with the message long time without wasting my subprime with yet another"
3303840,3311200," recreation program session with a mr azuz and thank you thank you so much and a health h3 ut thank you so"
3311200,3315760," much for one thank you thank you thank you um all right chinese christmas"
3315760,3326880," um i i didn't know that chinese are christians honestly is there a christian chinese so as far as no"
3327440,3331280," yeah so there's many religions in china so maybe there are some christians in there"
3331280,3335600," um all right"
3335600,3342800," not that many religious people right not that many religious people but uh there is many religious"
3342800,3350880," underground i see uh anyways so uh debug fmt none"
3353760,3361200," now i suppose i don't even know so it will just export this entire thing and let's go ahead"
3361200,3367120," and try to call this entire function so i'm gonna just put buffer in here so it's gonna be it's called"
3367120,3379680," buffer so this is buffer and the path is going to be um so output right let's call it our first output dot o"
3380480,3386800," okay okay okay and i suppose if it returns false because otherwise why would you be out"
3386800,3391040," bl let's call it bl"
3391040,3401840," doubt uh so so i suppose if it returns false that means it failed right uh let's do something like uh could not"
3402400,3413360," export export export file s so let's call it output path const char output path like so"
3413360,3420800," and um yeah so maybe there is a way to actually get the proper error message but i don't know how to do"
3420800,3428720," that so i don't care uh and in here we're gonna just return one okay so i hope that's the basic usage of this api"
3429600,3437280," i think maybe that's what it is uh all right so let me let me try to just build this entire thing so"
3437280,3442000," destination really has to be a pointer i see okay that was easy that was easy to compile"
3442000,3451920," let's try to run my okay so it didn't energy generated b out so if you take a look at the type of this file"
3452960,3456640," it's an elif 64 bit lsb relocatable executable not strict"
3456640,3469520," that's pretty cool right so like it doesn't have any examples it doesn't have any examples we figured"
3469520,3474240," out how to use it not bad not bad"
3477200,3481680," simple enough api that you can just look at it and kind of understand like how to use that"
3481680,3484240," unlike lagrange"
3484240,3495600," so all right um so i wonder if we can like link this entire stuff somehow if i try to do just like ld out"
3495600,3504320," b and just b out it's probably going to fail it doesn't have any start uh so i suppose the next logical"
3504320,3512320," step would be to create a function with the name start right no particular coding style yeah exactly"
3513120,3519280," um so the project isn't finished like like look at the bigger picture look at the bigger picture the"
3519280,3525040," project isn't finished there's very little documentation it is all over the place there's"
3525040,3530240," no examples we couldn't find any examples we just look at the header we just look at the code of the"
3530240,3535680," compiler which is hardly an example because it's rather complex application you can't really use complex"
3535680,3542640," application as an example right so we look at the api and and look at the how it is in the compiler and"
3542640,3552080," figure that out this is good this is good uh obg dump um so we can do obg dump so dump specifically"
3552080,3558480," here well i mean it's empty it's empty file anyways anyways anyways anyways anyways anyways anyways"
3562720,3569520," um so what do i want to do um so what do i want to do there should be something like tb function right"
3569520,3575360," there we go tb function how do we create a tb function"
3575360,3583520," digit wasm object is there any way to just like create okay uh-huh"
3585600,3592720," so symbol as a function symbol as function"
3592720,3603120," hmm read elf a b out uh i don't think read elf is going to tell us anything particularly interesting"
3603120,3610000," um well we got some we got some sections though right"
3612800,3613360," by the way"
3613360,3626800," how does it generate all this"
3626800,3637120," we need to"
3637120,3644960," to zero"
3644960,3654400," so it's not using any assemblers or anything like that it literally generates like"
3654400,3659840," really wait i didn't think about that so it doesn't use any assemblers"
3662240,3670400," which i mean it's it's backhand by itself right road dog in x86 not only road dog in x86 64 road dog in elf"
3670400,3674960," i think i think this is a road dog in"
3674960,3679200," it is it is road dog in elf"
3682720,3696400," that is the road dog is impressive impressive impressive uh not bad no bad not bad dash based yeah dash"
3696400,3700560," dash based i really love it"
3706000,3708560," this project is something i'm telling you this is"
3708560,3717280," i love it absolutely love it uh it's definitely unfinished right so uh it's kind of i don't know if"
3717280,3721840," you can use it in production but i mean audion is trying to use it in production right so some other"
3721840,3730560," projects also use it in production um this project makes you think yeah exactly it makes you think um so"
3730560,3735360," what i want to do i want to actually kind of generate like a hello world like is it possible to generate"
3735360,3740400," some sort of a hello world like purely from the c program uh that's that's a really good question"
3740400,3749840," that's a really good question uh let me see let me see so we need to create a function uh we need"
3749840,3754880," to create a function and i wonder if we can just figure it out how to do that so there is a you can you"
3754880,3762160," can create a function from a symbol right so that's one thing um so save point get i don't know what the"
3762160,3769840," fuck it is so wasm we don't need wasm uh place function this is jit uh all of that is jit so setting"
3769840,3776320," prototypes or something attribute scope doesn't matter so this one is interesting so this one function is"
3776320,3784640," interesting so i'm gonna save it um so inst location probably not that interesting okay so you can create"
3784640,3790880," function function in the module okay okay okay okay okay okay okay so that's cool"
3790880,3799200," uh which is probably exactly what we need so we just create a function within we can already just"
3799200,3804800," go ahead and try to do that uh just try to create a function within the module"
3804800,3814400," maybe even an empty one okay so this one is going to be f um tb module we just put m in here"
3814400,3819360," i have no idea what the fuck is length what the fuck is length"
3819360,3822720," length of what"
3822720,3832400," all right so the name is going to be start obviously uh pointer div"
3832400,3834480," pointer div"
3836720,3842560," is that i i don't know it's kind of difficult to tell but we can always grab the whole source code"
3842560,3850400," and just like find it out okay so this is linkage this is public okay uh so far i can kind of understand"
3850400,3856880," how to use this function except the len what the fuck is len it's not even self-documenting really well"
3857440,3861920," um all right um all right oh by the way it is still created b so"
3861920,3867840," so lgd no the dynamic is good one so"
3867840,3874400," all right so let's remove that uh yeah we need to do"
3876240,3879680," grab let's try to grab this function"
3879680,3885040," grab rn what do we have uh"
3885040,3900320," okay cool len uh atomic len of the name ah it's a seriously what is atomic though okay"
3902160,3907040," it's just a length of the name why length is not after the name usual convention is that"
3907040,3912400," uh the length of the string is up so it's not all right"
3914320,3922160," i see it makes sense right so usually um when you write in the compiler you would have the source"
3922160,3926000," code right so you're probably not going to have new community strings right so because you're taking"
3926000,3932800," the strings from uh you know from the file and stuff like that what was that function uh character"
3932800,3938720," minus yeah that's actually in freaking pascal strings"
3938720,3941120," bro"
3944320,3953760," oh and by atom by atom he means like atoms like an erlang i thought it's like atomic values because"
3953760,3959840," it's a multi-threaded or something no no no no no it's it's at like symbols like lisp symbols or"
3959840,3970800," erlang atoms it's name that's what it is right okay and they have length as a prefix"
3973360,3979440," all right okay fair enough fair enough but anyway in our case we probably don't even need that right"
3979440,3985760," we don't really care uh so what i want to do in here is just like um start name so this is a start"
3985760,3994720," name const char um start name i'm gonna put it in here and in here we're gonna just do str len uh start"
3994720,4000400," name like so uh and i wonder if we need to do anything in here so i suppose as soon as you create"
4000400,4005360," the function it's created within that module so it's going to be added to that module uh so the only"
4005360,4012560," reason why we have this handle is that maybe we want to add more stuff into the function um so why is"
4012560,4022800," that ptr diff though maybe because you usually have const char begin of the function you know where the"
4023360,4029280," um you know where the string begins and you know where it ends right because you have a file you"
4029280,4036720," loaded file into the memory and then you found the substring and since it's a substring it's not"
4036720,4042320," multiminated but you kind of know it's begin and it's end right to quickly get the length of the"
4042320,4050240," begin and end you just subtract and like begin from end and usually the type of this difference is ptr diff"
4050240,4055520," right if you have two pointers and you subtract subtract one pointer from another one you get ptr diff"
4055520,4061520," so to kind of reflect that this is kind of what expected in here maybe that's why he put ptr diff in"
4061520,4067440," here but this is just like i'm confabulating that out of my ass like chat gpt i not back that by"
4067440,4075040," anything right so again pulling that out of my ass um so but this is just like a minor detail i don't"
4075040,4082240," usually pay too much attention to this kind of thing uh anyways all right so let me let me try"
4082240,4088720," to maybe build the whole thing those in gpt exactly okay seems to be building so now if i try to to run"
4088720,4095840," this entire thing didn't crash which is nice right so and we can take a look at the names of b out"
4098320,4105200," didn't didn't print anything look at that didn't really print anything even though i asked it to"
4105200,4111600," create the function so let's do the following thing so as soon as you create a new module we're going to"
4111600,4119360," say module is equal to p which is m right so and this has to be n and in here we're going to just say f"
4120000,4127520," f so let's rebuild everything and let's just run it okay so both of these things were successfully"
4127520,4138080," created and if i do nm still no symbols or anything like that and now if i try to do ld o b b out"
4138080,4146000," it still can't find the start so that didn't work right it didn't actually add this function to the"
4146000,4153760," module uh so we'll get some subs thank you so much alex over six for uh for the subscription uh with the"
4153760,4159120," message basis programming basis programming indeed voxel rifts thank you so much for tier one thank you"
4159120,4164320," thank you thank you um yeah that's kind of interesting maybe we have to do something else right so maybe"
4164320,4170320," creating it for the module doesn't really add it to the module uh right so it kind of associates it with"
4170320,4177680," the module but it's like not that um so tb function right maybe so let's actually take a look at what"
4177680,4189200," are the functions we have so we stopped at somewhere tb function create okay uh tb function what other"
4189200,4200080," functions do we have uh huh so instruction poison so get prototype set prototype but i'm not sure if i want to set"
4200080,4208160," that input that oh i suppose this kind of like adds and this is cool look at that this adds instruction to"
4208160,4215520," the you can kind of program like an assembly with this shit can't you look at that"
4215520,4223360," so you can just kind of like have an assembly within the c code and just like add instructions and"
4223360,4229920," that i would really like that really like that really like that okay so uh so this is array access"
4229920,4235840," member access get symbol uh instead and here are all of the instructions the if this is the actual"
4235840,4243920," interface this is based honestly this is based but i want to get past that um i want to kind of get past"
4243920,4253520," that um so instruction region all style uses region for all control flow uh okay new trace"
4253520,4274640," uh pt dump stats you can tb print so print ssa gv look in form uh-huh print svg"
4277200,4285440," print dumb all right so i want to try to do this thing so i'm going to put this stuff in here"
4285440,4296800," all right and it's sec faulted apparently fascinating so tb print like literally sec fault i wonder why though"
4300640,4307840," so if tmp is uh tmp is tmp is new it will use the functions tmp arena"
4307840,4319040," so function may have an internal arena somewhere i don't remember setting that arena anywhere but"
4324880,4336960," so it's a it's a it's a closed function yeah all right tb function code gen so uh an output goes on top"
4336960,4349360," of the code arena so maybe this is what we have to do all right so what i'm thinking is that we need to"
4349920,4357680," take a look at like more examples within the code base uh right so let's just try to grab uh this"
4357680,4364480," entire thing one more time one more time so this is our gen right so let's just see"
4364480,4375120," where this function is used so backing f okay all right so we saved it in here and then we just do that"
4375840,4384480," and how do we use this function um okay so you can set arenas for this thing all right"
4384480,4391360," so this is uh this is probably the arena seat was talking about um it's not really obvious from the"
4391360,4396480," interface of this function is that's what you have to do and it's not even available in here but maybe it's"
4396480,4405120," available in prelude it's not even available in prelude so do i have to grab it in here it's not even available in here"
4406000,4412000," that is bizarre so where is this function it's not available anywhere it doesn't exist this function"
4412000,4412720," does not exist"
4412720,4421200," so we set arenas somehow but we don't really know how we set it how do we set this arena"
4428400,4429840," okay does this code does this code even compile"
4429840,4437440," so i feel like this is not compilable code right so because it's yeah"
4437440,4449680," maybe it's in irgen2 right so it's probably the irgen itself is not even used right so create function"
4451840,4459840," tb function so here we create the function prototype but where is the okay so there is a target in here"
4459840,4463040," okay so"
4470160,4476000," oh and this is how we create instructions look at that get memory order value but i mean maybe this"
4476000,4484320," is not instructions um so there's a lot of function prototypes so here's the prototype but there's no"
4484320,4492080," function themselves i'm just thinking how do you add that to the module that's the thing how do you even add"
4492080,4492800," it to the module"
4492800,4502080," um yeah i don't see that i don't see how you add it to the module because like i would expect it to be at"
4502080,4507760," least an empty function all right let's make this break and uh i'm going to make a cup of tea and after"
4507760,4513280," the break we're going to try to figure out how to at least add an empty function to the object"
4513280,4520880," right sounds good sounds good sounds good what's wrong all right so let's continue uh so in the chat"
4520880,4527920," somebody suggested to look at this interesting place where we look at the declaration of the main"
4527920,4535120," function i wonder if there's something like a start it's okay so there's a va starts um yeah"
4537840,4543440," so and what's funny is that we don't create a function in here function is not being created in"
4543440,4551360," this gen so there's only one place where the function is created uh like explicitly with tb"
4551360,4560000," function create and that place is not even compiled at all um so here's irgen so here's that function"
4560000,4567760," and yeah so irgen like a first one is not even compiled at all we already kind of know that"
4568640,4577760," uh because it calls to some functions that don't exist essentially um but maybe maybe that is fine"
4577760,4582800," so there's a global tb global create"
4582800,4588240," wait a second what's that name"
4593120,4601520," maybe that's what we have to do maybe that's what we have to do so tb.h um global okay oh"
4601520,4611600," so it's a name debug type and debug type is what um it's a struct"
4611600,4622240," maybe that's what i have to do creating function might not be enough you have to kind of mark it as global"
4623280,4630080," so that could be the thing okay let's give it a try uh so and also also tb print is not going to work"
4630080,4638160," you need to set its arena so let's not do that uh so here is the global uh we're gonna call it g"
4639440,4644400," so we're creating it inside of the module and this is basically the name we can kind of do"
4644400,4657760," a similar thing so um size t uh is going to be um start name len str len start name right so this is going"
4657760,4668720," going to be start name len uh start name i'm not sure about this uh debug type so what the hell is debug"
4668720,4675280," type so i was thinking that maybe it is enough to just mark this thing as linkage public to make it"
4675280,4679840," like you know public but apparently it is not i think you also need to create a global thing"
4680400,4689680," so but the debug type is kind of a weird concept so and it's opaque it is completely opaque uh and if"
4689680,4696560," we take a look at the um the usage of this function so create global oh sometimes you can actually put"
4696560,4702960," a null in there yeah so i suppose it's related to the debug information and we explicitly don't generate"
4702960,4711040," it in debug information so maybe it's fine uh so let's put g in here all right so we put in g in here"
4711040,4718320," so we create a function and then we create a global with the same name hopefully that actually makes the"
4718320,4728400," function public we'll see i don't know uh one of the things we can try to do is maybe add all of"
4728400,4735920," that stuff to here so be out is my and we just called my like this right so then i can say quite easily"
4735920,4749040," uh make be out all right and it aborted nice where did it abort though"
4749040,4755520," huh okay so let's actually put some sort of output in here generated"
4755520,4764480," as and this is going to be output path generated as yeah so it aborted somewhere but i don't really know"
4764480,4771040," where uh so full uh and here is bar"
4771040,4780800," yeah so when we try to generate it didn't even tell us where exactly it aborted"
4782880,4788800," yeah i didn't know what else so to be create just aborted for whatever reason without any explanation"
4788800,4796720," uh so because it literally called the board uh if we take a look at here so here is this stuff"
4796720,4806080," it's probably has something to do with memory allocation really because here we can't really"
4806080,4815520," like a board like a board anything so where did the board um okay i swear to god this is because of the"
4815520,4827520," arena so it tried to use a symbol a lock uh-huh and within the module right so within the module what does it do"
4828560,4838320," um so it's um so it's in four so it takes the tb thread in four and it takes um the perm arena there"
4838320,4840240," and it's probably"
4840240,4847280," well yeah so there's some sort of assertion in here"
4849280,4855360," but i would expect assertion to at least tell me where it happened in our case it just aborted"
4855360,4858480," in our case it just aborted"
4858480,4869200," so this one is rather interesting this one is rather interesting maybe we do have to create this uh section"
4872080,4878880," maybe we have to create this uh the kind of section so but maybe so the the library itself was built in a"
4878880,4887120," weird way uh we can take a look at the ninja it's not particularly readable i'd say it doesn't really do"
4887120,4894720," anything special honestly all right it's just like it builds things without any additional flags or whatever"
4897760,4903920," it's kind of bizarre it's kind of bizarre it's kind of bizarre i can just go ahead and try to create"
4903920,4913280," uh this section comment that all right so section handle"
4913280,4926880," to be module get text so if it's unlinable ah well maybe maybe it doesn't matter so you don't have to do it"
4926880,4934400," like that yeah so the uh the text was already in the albus i agree with that it was already in the output"
4934400,4943840," so my hypothesis here is that we have to associate the um the arena that we created in here with the module"
4943840,4954000," i think that's what needs to happen um so to be arena uh create so you can create arena"
4956400,4962480," to be module export so when you're exporting you can't provide the arena but i feel like modules have"
4962480,4969280," their own arena your function get arena so you can also associate function with the arena um so"
4969280,4983680," to be called gen out uh goes on code arena yeah i don't know that's it's really bizarre so gen 2 gen 2"
4984960,4992720," uh-huh very funny gen 2 haha function type function name so if i take a look at the function name"
4992720,4995440," it's not even used anywhere"
4995440,5006720," all right so then you create a name length so then you create a global"
5009520,5016800," i wonder if that's because of there is already a function what if i just create a global"
5016800,5021440," it's floating point exception"
5021440,5024480," okay"
5024480,5026960," but"
5026960,5032480," so it it managed to create and then"
5037520,5043680," it doesn't even explain right so if i if i create a function"
5043680,5052160," it's aborted if i don't create a function with the same name it's a floating point exception"
5052160,5060720," debugger time maybe debugger time but i feel like it's not going to be that helpful uh but let's try to do"
5060720,5074640," that anyway uh jf2 uh main my right oh jf2 my all right so let's just run it and align up"
5074640,5083920," okay so that was at least helpful so thank you thank you for suggesting that so module object export it"
5083920,5091200," try to export object write output so layout section line up uh and"
5091200,5103120," so it only may happen if b is zero so that means a line is zero so that's that's the problem in here"
5104480,5114640," gf not found yeah exactly gf not found uh so when we create a global by the way uh when we create a global"
5114640,5119920," by the way i just exited correctly yeah so everything's fine"
5119920,5126240," how do we create alignment do we even create alignment in any way"
5127760,5134800," i don't know but by the way so maybe we can now try to do the the following thing uh i'm gonna try to do"
5134800,5146160," gf2 my uh like this let's run it and see where exactly symbol unlock right global create"
5146160,5148880," then it did symbol unlock"
5150720,5153760," and then it's just like somewhere in this in threads"
5153760,5157440," kill implementation"
5157440,5163920," it didn't really tell us where exactly it aborted it just like aborted somewhere here"
5163920,5170240," we tried to allocate the symbol but something happened so maybe there's like symbol collision"
5170240,5176400," how big is the arena i have no idea but it's supposed to grow automatically that's arena"
5177040,5182640," isn't it um so we created the arena and stuff like that"
5182640,5188960," okay so tvh create optional tag"
5188960,5196880," okay so what if i just create uh a boba so this is a boba tag"
5196880,5206240," didn't help that didn't help at all um so but if i just do something like this"
5207600,5213600," right and i just generate that it generated b out but it doesn't contain anything"
5213600,5220880," and we can also take a look at the red elf a uh it all it has all the sections tags there"
5220880,5226400," but maybe like you have to specify in which section you create all of these things otherwise it's just"
5226400,5227520," like doesn't make any sense"
5227520,5239360," well it must be simple right i i swear to god it must be simple otherwise otherwise what's the point"
5239360,5248880," to be a function so there's also function output there is where machine code and other relevant pieces go"
5248880,5251520," okay why are you selecting everything emacs stop"
5251520,5256480," tb function save points"
5256480,5260160," jit place function"
5260160,5265840," hmm symbol as a function"
5270080,5271120," set prototype"
5271120,5279280," as simple as llvm killer could be it's not finished though right so it's kind of difficult to"
5279280,5284240," like assess this project because it's only a start point right so maybe in the future it's going to be"
5284240,5284720," much better"
5284720,5291120," uh is this because there's already symbol with a stat there is no symbol with a stat"
5291920,5298320," there is no such symbol that that's the problem that we're trying to solve look look there is no"
5298320,5304240," symbol with a stat that's what we're trying to solve like where is the symbol there is no such"
5304240,5310640," symbol but maybe symbol speaking of symbols maybe we need to create a symbol for for this entire stuff"
5310640,5315920," right so let's go ahead and create a symbol uh so because i remember there was a way to create symbol"
5317120,5318160," so to be symbol"
5318160,5325680," extern create oh"
5325680,5336960," let's go ahead and do that maybe that's what we have to do um so let me see maybe there are some"
5336960,5345440," examples in here uh on how to do that maybe within the source code uh okay so here's we okay okay okay so"
5346480,5356320," there's some stuff in code gen right so backing s and there's a declaration"
5356320,5375840," yeah let's just go ahead and try to call this function external type this is fascinating main.c main.c so instead of"
5375840,5381600," global though right let's not create a global but create a symbol so this is the thing"
5381600,5391760," so start name length start name and then we grab the whole thing in here"
5391760,5397600," um so an expert outside of the shared object yeah so that's probably what we want to do in here"
5399280,5403040," all right so this one is going to be s"
5403040,5407040," be out"
5407040,5409760," okay"
5409760,5423120," it's still nothing still nothing honestly right so it didn't create anything uh so there is also a very"
5423120,5431680," interesting function um which accepts a symbol and creates a function out of that symbol uh let me see"
5431680,5444560," so here is the create oh so places reallocation oh oh this one is interesting uh places a relocation for a global at of set"
5445440,5451200," i suppose i suppose global is uh yeah i suppose global is uh yeah i don't know"
5451200,5456640," so to be symbol as function"
5458800,5463760," um to be um to be symbol as function um"
5463760,5464400," um"
5464400,5472320," so places relocation for global maybe that's what we need in here"
5472320,5482160," again a simple example would have been great but i mean the project also not finished so you can't really demand that"
5484160,5484800," um"
5484800,5489200," so kind the point um"
5489200,5492960," so here's the module g we don't really know what is g though"
5492960,5497200," so yeah gen global initialize"
5497200,5499760," um"
5499760,5502400," so maybe"
5502400,5507200," function add maybe there's something like function function add"
5507200,5508720," now"
5511520,5512240," mm-hmm"
5512240,5518160," function creates a symbol already look at that uh create from"
5518160,5523920," symbol so it's not it doesn't create it from symbol though"
5523920,5526000," it doesn't create it from symbol"
5526000,5527200," it says"
5527200,5529040," as symbol"
5529040,5533200," it doesn't imply that it's going to be created that's the thing"
5533200,5540160," so symbol as function it views symbol as function"
5541520,5543840," so it's kind of like"
5543840,5546080," it's a very vague thing"
5546080,5552080," it's a symbol as function we can take a look at maybe implementation of this entire stuff right so"
5552080,5557040," uh what exactly does it do symbol as a function and it's"
5557040,5559760," yeah so it's just like"
5559760,5562480," symbols can be different thing"
5564560,5565040," uh-huh"
5565040,5565120," uh-huh"
5565120,5567440," hmm"
5567440,5571120," so that means that symbol has to be"
5571120,5577280," marked as function what our symbol is actually marked as"
5577280,5584160," is it even marked as anything uh you know what i think i think i need to debug my thing so you have to"
5584160,5593280," main uh my right so let's just go there i'm gonna break it main i'm gonna just run uh i don't have a debug information i don't have any debug information"
5593280,5596720," i don't have any debug information so let's actually create some debug information"
5596720,5602400," um so this one is going to be ggdb i'm going to do make"
5602400,5604960," minus b all right"
5604960,5608640," so and then i'm going to just do that so break main"
5608640,5609600," run"
5609600,5613280," uh okay so we can create a bunch of things"
5613280,5620560," and i've got s in here right so here's s okay so what's funny is that"
5622480,5623440," it is a function"
5623440,5628240," how does it know that it is a function"
5628240,5634240," i don't remember explicitly saying is that because i use the same name for"
5634240,5636480," as the function that i created"
5636480,5639040," that is fascinating"
5639040,5641760," that is actually fascinating so that means"
5641760,5644480," what if i"
5644480,5648800," remove the creation of the function in here what if i remove it"
5650240,5652000," so break main run"
5652000,5657760," we can try to create symbol okay so we created the symbol"
5657760,5661600," and then if you take a look at that thing it's just an external"
5661600,5662800," so"
5662800,5664480," that means"
5664480,5667920," this symbol is related to this function"
5670320,5670720," huh"
5670720,5675520," we are kind of on the right path in here"
5675520,5677760," we're kind of on the right path"
5677760,5681680," but we still can't see anything"
5681680,5687760," all right if i just try to create this entire thing so b out has been created let me remove it"
5687760,5688560," just in case"
5689680,5692880," right so generated b out one more time"
5692880,5695440," still no external stuff"
5695440,5699280," and then b out"
5699280,5701040," right"
5701040,5704400," so something"
5707040,5711760," maybe you have to be exported in some way maybe added or something"
5711760,5715440," let's take a look at what kind of stuff you can do with symbols"
5715440,5716960," symbol"
5716960,5721760," so this is a wrong file"
5721760,5723680," tb symbol"
5727440,5728640," external create"
5728640,5734160," so and this is what we were using in my right yeah this is what we're using"
5734160,5737760," global add symbol realloc"
5737760,5741520," symbol as function"
5741520,5745600," set name bind pointer"
5748240,5749280," symbol address"
5749280,5752400," so there's this builder thing"
5752400,5755120," so it's a graph builder"
5755120,5756320," i suppose"
5756320,5769200," builder symbol"
5769200,5778080," are we sure this symbol doesn't get skipped because it has no code"
5778080,5779600," i'm not sure about that but"
5779600,5784240," we can't be sure about anything because there's no good example right"
5784240,5787920," that would have just demonstrated okay so here's how we create an empty program"
5787920,5794000," that would have been perfect honestly just like a starting point that's how we create empty thing"
5794000,5801440," but i mean we have nothing and the project is unfinished so we can't really blame the project for that"
5801440,5806880," so okay so we created an external"
5807680,5810160," do we do anything else and build"
5810160,5814000," builder symbol and we also kind of return"
5814000,5819680," that out of the function and we have a value description of some certain here"
5819680,5825600," um so and the g in our case is what"
5825600,5832800," tb graph builder right that's what it is it's a it's a graph builder"
5836640,5844240," um so i don't really know how to use that graph builder honestly maybe maybe there's there was some"
5844240,5845760," sort of documentation in there but"
5845760,5848800," um so"
5848800,5854480," oh builder enter and you provide a function"
5854480,5859680," oh oh this one is interesting this one is interesting i think that could be it"
5861200,5861920," yeah"
5861920,5866480," so um"
5866480,5868640," so um"
5868640,5876800," is there any examples okay let's actually from from dbg"
5876800,5887120," right bubba g so it pro you provide the f what was the f f is not defined here"
5888720,5898000," um it means f is defined let me see f so where is defined f there's no parameter f anywhere in here"
5898000,5900560," just f"
5903200,5914640," yeah so yeah so you enter a function uh and you just exit immediately is that what you have to do"
5914640,5920960," maybe that's what you have to do i don't mind"
5921680,5925520," i don't mind at all my c"
5925520,5932320," so we provide f and we just do that so"
5932320,5936080," it's not the one it's only to just build"
5936080,5946960," okay so arena how to provide the arena arena is this we do have arena um so we didn't like something"
5946960,5950320," too few arguments are you serious my friend"
5950320,5952880," oh"
5952880,5961440," so yeah this is completely outdated code and it's never even built anymore i should actually stop"
5961440,5968480," looking at our yeah there is a whole file in here that is never built and contains completely outdated code that has nothing to do with reality"
5969840,5979120," uh so yeah it's like i don't know what to it's definitely unfinished it's it's definitely unfinished code"
5979120,5988800," all right um so zombie code exactly exactly builder so you provide the section debug type and null"
5988800,5991920," i think it's kind of similar to that"
5991920,5997600," so a section in terms of section what kind of section do we use in here"
5997600,6001680," yeah so it's probably something that we have to do in here as well"
6002640,6006160," um all right so here's the section"
6006160,6008640," uh-huh"
6008640,6020080," so do we use the section anywhere else so we create the function and the func itself when we create the func"
6020080,6029680," uh-huh so it's it's unclear what the is this function backing f we don't really know what it is but it's just some sort of a function"
6030720,6033840," um right so we create that"
6033840,6040400," but does it really have to be dbg i don't think it has to be dbg"
6040400,6046880," uh so we just create a bunch of things in here uh and i just do that and i think i think"
6046880,6050560," dbg has to be null in our case"
6050560,6056320," um yeah so function proto"
6058560,6062160," uh this one is interesting actually because it doesn't accept proto"
6062160,6068320," yeah maybe we have to use dbg in this case so this is null and a work list"
6068320,6073600," yeah this is kind of interesting this one accepts some sort of a function prototype"
6073600,6078160," parameters are just available through parameters that are not tracked as mutable variables okay"
6079120,6085520," so and after that um so maybe we have to build the symbol within this thing"
6085520,6091600," or something else but yeah so just now we are doing exit okay"
6091600,6094960," so here it's just f"
6094960,6097680," and it's segfaulted"
6099200,6107680," okay um all right let's try to run this and i think it's segfaulted at uh function returns oh this"
6107680,6114400," is because it does want to have dbg it does want to have dbg uh babaji"
6114400,6117760," right so let's not do dbg then"
6118320,6124080," um but if we don't do dbg we have to provide the function prototype and i'm not sure what kind of"
6124080,6128880," function prototype we can provide and what is it even but maybe i can put the null in there"
6128880,6134880," i can't all right so if i try to just see where exactly it failed uh yeah so"
6136080,6144000," that's kind of it's kind of funny so from d it still uses yeah it still uses this kind of stuff"
6144000,6149440," um so that means maybe we can take dbg type"
6149440,6157920," man i i don't know like some prototypes prototype call prototype um"
6157920,6162880," is that it can we just create something else"
6164800,6174800," okay so you have targets can i just i think i can use something like this so after creating a function"
6174800,6180400," i can just try to get its prototype so can i just do something like f"
6180400,6185680," and just put it in here is that something i can do"
6185680,6191120," yeah just just use the prototype are you are you going to be happy no it's still so false but now"
6191760,6197920," let's try to run that uh yeah so it just doesn't like something about the function"
6197920,6201840," oh boy um"
6201840,6208480," mainly the second slash slash main comment is interesting i have no idea what you're talking about"
6208480,6215120," i'm moving too fast i'm moving too fast to understand"
6216880,6220480," so in case you want to check working example here to check this issue okay"
6220480,6225120," um all right let's take a look at this issue"
6225120,6233280," oh okay finally jesus christ it should be somewhere like in a in a visible place yeah this is what i"
6233280,6238800," wanted just give me an example like that uh all right thank you freaking finally"
6241840,6244240," so thank you thank you so much"
6244240,6254480," so these kind of examples are really really important really really important so we can just like"
6254480,6260880," um you know grasp them so here we created a module we already created a module and then we got the"
6260880,6266400," section uh so in our case did we get this section we kind of figured out that we have to get this"
6266400,6274240," section so we managed to figure out these things which is cool so prototype param uh printf return i"
6274240,6282240," don't want to printf return or anything that so we created a function and the main we have to create the"
6282240,6291840," prototype okay so that's understandable uh-huh so and the main return is what is the main return so it's a"
6291840,6299520," prototype param main return and then you set the prototype for the okay so on top of just creating a"
6299520,6307760," function you also have to create its prototype and set that prototype okay fair enough uh so then"
6307760,6315200," instruction call uh i'm not really sure if i care about any of that stuff i'm really curious"
6315200,6321120," like how do i add this function now so it appears to be adding some stuff into this function but i don't"
6321120,6330640," care about that uh so module object export well yeah so we know how to do that so then we're exporting"
6330640,6340880," that to file is that actually it is that actually do we need to do anything in here um to be pass"
6340880,6344960," enter oh it's it's passes"
6347360,6355440," so what the f is a pass to be pass uh to be pass uh to be pass so then there"
6355440,6365760," passes to be passes it's not even there okay uh maybe i just like referring to that incorrectly"
6370640,6378720," come on um"
6378720,6382160," am i doing that from a wrong place"
6398320,6405360," i who said who said it's a working example excuse me but how is that a working example"
6405360,6410640," it's referring to things that don't exist how did you come up with the idea that it's a working"
6410640,6411760," example i don't understand"
6411760,6423840," so another dead code it appears to be another dead code um it appears to be another dead code"
6423840,6431200," okay we can okay we can literally just copy paste this entire thing so i what i like to do is to just"
6431200,6438800," like dissect the examples right they said working somebody in the chat said working right so but it"
6438800,6444800," doesn't appear to be working because it's using type that don't exist uh right so let's do working dot c"
6445600,6452240," okay okay so let's actually see uh uh working in quote okay okay i'm sorry i'm i'm like"
6452240,6455920," listen i have to focus on too many things you cut me some slack"
6455920,6456960," um"
6461280,6466000," so working"
6466000,6469040," mm-hmm"
6469040,6470320," so make file"
6470320,6479120," working uh working uh working dot c uh and let's actually uh stupid"
6479120,6482240," all right so"
6485360,6485760," okay okay"
6485760,6490960," working working"
6490960,6498640," all right minus b and yeah obviously we can just do something like this sure"
6498640,6506320," yep um too many arguments it's it's stale code it's not relevant anymore"
6506320,6510960," it's not relevant anymore maybe i'm actually kind of"
6513280,6516080," uh maybe there's some releases in here"
6516080,6519360," there's the latest release"
6519360,6529760," surely to be ma to be passes generated by macro uh yeah but anyway one of the things we can do"
6529760,6535920," one of the things we can do we can steal some information about like prototypes and"
6535920,6546400," one of the things we can do we can create a prototype uh tb.h create a prototype uh so"
6546400,6548160," yeah"
6548160,6550880," calling convention"
6550880,6557920," so maybe it is somewhat useful maybe it is and it has to be done"
6559680,6566400," after we created a function so here is the function uh all right so and in working"
6566400,6567840," um"
6567840,6578880," so here is the it's called start f right so this is a start f uh let's not do anything but maybe"
6579600,6590640," if we can do start f and we can do start f here start f um so then this is going to be start prototype"
6590640,6594640," we provide the module call convention is going to be"
6594640,6604560," tb std call the amount of parameters is obviously zero uh since we don't have any parameters it's going"
6604560,6609360," going to be null return parameters let's actually say that it's also going to be zero"
6609360,6614720," and this is i suppose prototype parameters can be also zero has var args"
6614720,6620720," false this one is easy actually it's easier than main because we don't have to return anything"
6620720,6628880," this is pretty poggers uh okay so then we can do function set prototype right so we can do some"
6628880,6637840," function set prototype uh yeah but not from dbg right so this one function set prototype"
6637840,6649760," so this is start f section we do already have section right so we grab the section let's go text"
6649760,6654640," section text section and the prototype is the start prototype"
6656720,6663600," right so and then in working after we start the prototype so we populate this entire thing doesn't"
6663600,6671120," really matter um so then we do pass enter or whatnot maybe we don't have to do that honestly"
6671120,6683600," okay so let me get rid of the graph builders and symbol builders symbols are for the symbol minded uh so let's"
6683600,6686720," now try to compile all that stuff now try to compile all that stuff and see what's going to happen"
6686720,6697520," though i would like to maybe remove this thing right so it generated something okay cool uh and still"
6697520,6711520," does not contain shet cool um now let's bring back the symbols for the symbol minded right uh external so ex it's so"
6711520,6719120," i'm fucking expert it's insane it's fucking insane mate all right so we've got some symbols"
6719120,6729760," and uh now still can't get shet still can't get shet um so maybe there's some functions"
6729760,6737440," you know tb pass yeah so there's no tb pass entered so tb build enter"
6739520,6745360," though though though we have a function prototype"
6745360,6755200," we can try to do some yeah so we can try to do some with that i don't know why i decided not to um"
6755200,6767440," yeah yeah so there we go so we have a prototype so this is start f text section uh start prototype and then"
6767440,6772880," it also accepts work list we don't fucking know what the fuck it is so if it's not equals you i'll run the"
6772880,6779120," peepholes while you're uh why because it avoids making junk notes before okay thank you very useful"
6779120,6788080," information so then we're just doing that is it going to help us with anything at least it didn't crash at"
6788080,6793520," least it didn't crash i appreciate that no didn't create anything okay"
6793520,6797760," hmm so"
6797760,6807040," so this is a text section okay working so-called working example did we miss anything"
6808800,6819120," did we miss anything so we have parameter nodes and stuff like that was it just illuminated somehow but i"
6819120,6824480," mean i marked it as external so that's the thing i marked it as external"
6827680,6835840," so this is just a parameter prototype so this is just a parameter prototype and stuff like that"
6835840,6838880," export buff um"
6838880,6845040," maybe builder enter is a new version of pass enter yeah i also think so"
6845040,6851840," i also think so um so we also maybe have to create the global what if i make it global"
6853840,6856880," uh oh yeah so there's a little bit of that"
6856880,6866480," yeah so you can't create the global and also and honestly the working example uh you know"
6866480,6872560," doesn't have any globals maybe so external means that the linker needs to provide the function"
6872560,6879200," maybe uh i don't really know but do we do the thing"
6882720,6884960," yeah it's a print tab but for the main"
6884960,6891200," so let's not do that"
6891200,6894320," so we never have to"
6894320,6896880," actually"
6896880,6903840," yeah we never have to make main external we only made it linkage public"
6903840,6907360," so that's what's interesting"
6907360,6908240," no"
6912720,6921840," i don't know i'm really confused on what the fuck is going on"
6921840,6929440," so i can't i can't make it working"
6929440,6935920," so i just i just want to have a function like an empty function doesn't have anything"
6939920,6943920," even smaller working example okay so let's take a look at that"
6943920,6947600," let's take a look at that"
6947600,6952400," all right function linkage private"
6952400,6955840," linkage private"
6955840,6958960," so"
6958960,6965280," instruction return okay we can try to do something like that"
6967440,6970560," just add one instruction maybe that's the problem in here"
6970560,6977440," you know what's that problem here let's try to add one single instruction"
6977440,6981840," um so count and yeah"
6981840,6988720," so after we created a function so it's going to be start"
6990000,6994320," f we don't have any parameters in here and this is going to be"
6994320,6995360," null"
6995360,6998320," all right so"
6998320,7002160," empty"
7002160,7009280," everything's empty everything is freaking empty so and it's also uses passes that is not a thing anymore"
7010880,7016800," uh is missing tb prototype function tb pass code gen"
7016800,7023840," tb code gen"
7023840,7027200," the output goes into the top of the arena"
7027200,7033520," if that's what we have to do do we have to do tb code gen"
7036800,7039840," so work list arena code arena future set"
7039840,7045680," uh i i don't know i honestly don't know i'm really confused"
7045680,7048560," uh tb code gen"
7048560,7053120," so we can try to call this function but where do i call it"
7053120,7059920," where do i call it so because it's missing tb probably we can use to be separate to do that"
7060480,7066240," also emit as a flag on passcode gen does not print assembly it just emits it into the buffer you can"
7066240,7066720," then do"
7066720,7070800," all right"
7070800,7078400," to put it in a standard output you can okay but where do i do that um"
7078400,7082480," where do i do that"
7082480,7086880," uh so to print to this std output"
7088800,7095840," oh my oh my god so do i do that between building the graph or not between building the graph i"
7095840,7102480," actually thoroughly confused uh start output um so this is a start f"
7102480,7107520," uh so we have also some sort of a work list"
7107520,7116080," as the last thing as the last thing of what okay whatever uh so"
7117840,7124080," a so feature set now we have feature sets and i don't really know what the is a feature set"
7124080,7127280," uh so there was some features okay so we can"
7127280,7130720," we can maybe get"
7130720,7134080," this thing so this is features"
7134080,7137440," all right emit assembly true"
7137440,7142880," uh without the graph before the graph after the graph"
7143440,7150400," what what what what what is good i don't know bro uh okay so and it's sick sick faults if i don't do"
7150400,7157040," this kind of it doesn't sick fault what if i do that before this thing it's sick faults it always"
7157040,7164960," uh pass code gen uh at the end okay"
7164960,7171280," oh so"
7171280,7177040," what's interesting is that"
7179040,7180640," is that is that where we do that"
7180640,7184960," sick faults where does it sick fall down"
7184960,7190000," so let's close this one i run and"
7190000,7196160," uh ws it doesn't like that i gave"
7196160,7204080," work list as empty but they're using a version of api that doesn't didn't have all of this work lists and"
7204080,7209680," stuff like that that's the thing so they're using a simplified version of api now it's"
7209680,7213680," over complicated and i don't know like how to use all of this"
7213680,7218640," shit so what the fuck is that even do i have okay i can allocate a work list okay so why do i have to"
7218640,7223600," allocate it i have no idea honestly but apparently i have to allocate it um"
7224240,7233440," so yeah okay so are you are you happy now are you gonna be okay look at that uh"
7233440,7238000," holy"
7238000,7244800," it's it's a miracle"
7244800,7252880," by randomly doing different things that don't make any sense we figured out how to create an object file"
7252880,7255200," with an external symbol underscore start"
7255200,7262880," by using some outdated examples in issues in pull requests by stitching things together because"
7262880,7269120," nothing is documented but again the project isn't finished i'm not blaming the project for that"
7269120,7275680," i'm not blaming the project for that but at the same time if it's like if"
7276720,7284160," my project was at that specific state i wouldn't go out of my way trying to integrate it to other"
7284160,7290400," projects which are supposed to be production ready like for example audience by looking at all of these"
7290400,7298800," things how is this thing ready for audience i don't really know so do we have any professional audience"
7300000,7306240," developers in here or people who work in terms of audience does audience use this thing as the main"
7306240,7307520," back end of itself"
7307520,7316560," right because judging by the state of the project it's really raw and then features which is fine"
7316560,7322080," which is totally fine but it's already trying to integrate into audience audience is okay"
7325680,7331760," so audience does not use it as the main back end no it's still many ah okay so that explains it that"
7331760,7336960," explains it because it like i'm having like a kind of a dissonance i'm seeing the project in a raw"
7336960,7342880," and complete state which again is totally fine there is nothing wrong with that and yet it is integrated"
7342880,7349520," into a big project that is like production project because as far as i know audience is used in like in serious projects"
7350000,7355280," so and it's just like like what the is going how is that even possible now it makes sense right so"
7355280,7360960," it's just sort of like an experiment it's sort of an experiment it's sort of like in the flow uh so"
7360960,7365760," honestly we also need to try to do the following thing uh we need to try to link it into something"
7365760,7373520," uh all right so be out i should have called it all like all file instead of out but whatever so we can"
7373520,7380160," try to now maybe link this entire thing into the final executable so can we actually all right so and"
7380160,7387280," we got a b uh which if we take a look is not a dynamic executable but it is executable nonetheless"
7387280,7391760," and it's sec false which is expected because the body of the function doesn't contain anything useful"
7391760,7400800," all right i finally managed to do what i wanted to do right so we managed to create an empty object but now"
7400800,7408960," we managed to create an empty function at least um right audience also has its own version of tb.h"
7408960,7412320," oh okay so they have like a okay okay"
7412320,7418880," so their own copy does it have tb passes"
7418880,7423360," of course it has tb passes"
7429280,7434480," tb passes is no more i'm sorry it's it's different why are you using deprecated api"
7434480,7442240," and after that people are asking me to try this language it is using deprecated api over till the"
7442240,7447520," backend how is that a production no i'm not going to be checking odin like i mean"
7447520,7454160," it's not even using the latest version of tilde how how no i'm not going to check"
7456640,7461760," anyways uh so i wonder if we can like maybe do a sys call is that possible to"
7461760,7467600," create some sort of a sys call uh so here we do return but i want to be able to"
7467600,7473600," call exits so let me see let me see let me let me let me let me see"
7476800,7495120," um tb inst set exit location this is where the stop will be tb inst stop no we have hold exit quit"
7495840,7499440," is there any interesting instruction sysco"
7499440,7514880," so we can do syscall mother flicker mother flicker uh so let's fucking go"
7517760,7527200," uh so this is a start f data type what the fuck is a data type what the fuck is a data type okay"
7527200,7532480," oh data type of what"
7532480,7535760," i don't get it"
7539600,7543920," a return type why is it okay okay so why is it not called the return type then"
7543920,7548960," excuse me"
7548960,7555360," fucking excuse me uh okay so we're gonna assume that it's return type and maybe in this case i'm gonna"
7555360,7561680," say okay this is gonna be void i'm gonna just ignore whatever it is right so syscall number 60 i do"
7561680,7572560," remember that exit is called 60. how can i create the node though tb node um tb node uh all right"
7572560,7583280," so does anybody remember like it's tb inst something something it was something integer tb inst int um"
7583280,7588800," how do you create that so there was some in examples right so"
7590640,7594320," let's take a look it's oh my god why is it so slow um"
7594320,7600720," i already lost everything"
7600720,7604480," so int"
7604480,7615120," oh whoa whoa whoa whoa whoa this is what nice it's a function it's a function it's a function inst"
7615120,7620000," yeah but i mean it's it accepts a function right so it's it accepts a function right so it's it's"
7620000,7627600," so it's it's literal instruction but how do you create a node can you do something like tb node"
7627600,7628720," uh"
7628720,7628720," uh"
7628720,7631200," int"
7631200,7635680," if we take a look at the tb in node"
7635680,7641360," time to rewrite"
7642800,7649120," so does anybody in node so does anybody know chat chat chat be useful one time please how the"
7649120,7658000," fuck do i do that uh okay so there's something in here so maybe that's um you need to allocate an"
7658000,7663680," int in the function um all right so maybe this is what i have to do maybe this is the thing"
7664880,7677600," uh that's what i can do but what's funny is that why do i even have to provide the type in here"
7677600,7684720," like that's bizarre and why i don't have to provide the type for floats how does that make any sense"
7686720,7690800," maybe because there's several kinds of s ints that's probably what it is"
7690800,7698720," um right so i feel like this is what we have to do which also kind of implies that"
7698720,7706080," we have to do this graph thingy inside of the graph builder or something"
7707600,7714800," but that doesn't make any fucking sense doesn't make any fucking sense mate though we can just try"
7714800,7724640," let's just try so if i try to do make yeah you can't fucking do that that doesn't make any fucking sense"
7724640,7729280," so that's stupid"
7731200,7741360," uh that's fucking stupid you have to be function i do have to be function wait so to be inst"
7741360,7742880," since"
7742880,7748000," so it's an immediate value"
7748000,7756160," well okay maybe maybe maybe we can try to do that so let's go ahead and try to do that um"
7757440,7762640," i think i'm literally a little bit tight already uh my brain doesn't work properly so"
7762640,7771680," all right so to be data type let me find so it's a tag let's say that it's going to be a 64."
7771680,7778000," right so it's going to be 64. and uh it's going to be 60. and the function that we're using in here"
7778000,7783440," is start f but i don't know why do i have to provide a function in here that just doesn't make any"
7783440,7792080," fucking sense to me like how does that make any fucking sense but okay sure um i can even call it"
7792080,7801440," something interesting by the way i can call it sys exit and it's a tb node uh sys exit"
7801440,7807920," all right so we've got this prime count we're going to say that we're going to have one parameter count"
7808880,7815200," and let's create a bunch of tb oh by the way where where is that example small working example"
7815200,7821840," uh yeah i have working i have working oh yeah so it is how you do that all right all right so"
7821840,7823360," apparently i'm a little bit tired so"
7823360,7831520," uh i'm just a little bit tired i'm sorry um all right so here's the thing and in here"
7832080,7841200," we don't even yeah this is fine it's fine um so this is going to be exit code and i'm going to just"
7841200,7851600," put 69 in here and which means that i can just take a pointer to exit code and it will act sort of like"
7851600,7858560," an array anyway all right so i think this is how we have to go about that i might as well also just return"
7858560,7866320," i64 but let's ignore it so that should be it and also that means we don't have to return afterwards"
7866320,7873200," all right let's go it didn't work so what's up with that so incompatible data type"
7875360,7898800," ah fuck why didn't you like it so what what what what do you get um to be tight"
7900240,7917200," ah how do i allocate why is it all freaking different now so i brought the keys do i have to do now this"
7917200,7932800," okay so that explains it"
7932800,7937520," fuck okay"
7941600,7950880," um so if i try to do something like this it's fine okay if i try to do something like this it's not"
7950880,7956160," maybe you need the return maybe"
7961280,7970240," why it's a exit"
7970240,7974880," so is the control flow analysis not aware that the exits"
7974880,7981520," oh it is not aware that the exit sys call is not returning or something that i'm"
7981520,7984080," i swear to get it something with the control flow analysis"
7984960,7991440," how would it know hard code it if exit code if first parameter equals 60 you know"
7991440,8000480," uh you know how you solve any problems by hard coding uh it doesn't pick into syscos why"
8000480,8005520," ah because it's unfinished okay um okay so"
8012720,8020320," hell yeah hell yeah hell yeah hell yeah hell yeah we generated a working executable"
8020320,8027600," working execute the bell working execute the bell with the minimum documentation so the api"
8027600,8036000," had completely changed uh right so thank you everyone who helped in the chat right so that was actually"
8036000,8041360," i would say this is was this was collaborative effort honestly this was a collaborative effort"
8042240,8048240," uh so yeah still better than lagrange exactly still better than still better than l lvm somehow"
8048240,8058080," uh still better than lvm so yeah the project isn't finished as they stated up front"
8058080,8064720," in the readme so we can't really blame it too much right we can't really blame too much"
8064720,8071920," we can only point out you know some places to improve uh some sort of like a working simple example"
8071920,8077440," again again again so maybe examples folder which demonstrate how to create like a hello world"
8077440,8086800," executable would be kind of nice uh right and obviously the the whole code is sort of like in flux"
8086800,8093680," right so we even have an entire translation units that are outdated looking at you irgen.c"
8094400,8100880," this is an entire translation unit that is completely outdated completely it goes to the functions that"
8100880,8107120," don't exist anymore or have a different signatures and stuff like that and i suppose instead of it you're"
8107120,8114000," supposed to use gen 2 which is better and i can see why because at least it's compilable"
8115360,8123360," right have you looked into test folder the test is kind of weird honestly uh i think big boy ah what the"
8123360,8131520," fuck i think these tests are literal c programs for the uh the quick itself for the c compiler itself"
8131520,8136480," but i don't see an example that just uses tb that is there any examples that just used to be because"
8136480,8142400," here i feel i feel like they're just tests for the for the c compiler yeah there you go so these are the"
8142400,8148640," tests for the c compiler um right so but what if i want to make my own compiler maybe i just missed"
8148640,8158240," something so there's also freestanding in here uh uh right and to be honest maybe at that particular"
8158240,8163280," point of time there's no point in having this kind of examples because even the api is sort of in the"
8163280,8172080," flux right so maybe it's not going to be useful in any way but anyway i respect the ambition of this"
8172080,8179840," project i respect the end goal right so because you know lvm is kind of a little bit over bloated"
8179840,8186560," right so a lot of projects try to use it and that's usually what happens with popular projects"
8186560,8192800," they get over bloated and they get over bloated because a lot of other projects are using them and"
8192800,8200240," trying to add their own use case to the project which is which hardcodes a lot of things and it slowly"
8200240,8207600," over bloats and stuff like that right so and it's honestly it's kind of a natural process isn't it"
8207600,8212320," right so the more projects use it the more generic the project becomes the more generic project becomes"
8212320,8220000," the more bloated it needs to be right it becomes like the everything uh project essentially so it's"
8220000,8227360," kind of natural for for it to grow like that look at linux for instance right it's it's a bloat"
8227360,8234560," right it's a several hundred of megabytes of just source code several hundred megabytes it's uh dozens"
8234560,8241040," of millions lines of code so casey said that is 13 million i think uh right now it's even bigger"
8241040,8246640," right so this is because everyone is trying to use linux in all of these different use cases"
8246640,8252160," and you have to support all of these use cases hundreds of megabytes of backdoors yeah"
8253520,8258320," hundreds of megabytes of backdoors so yeah that's an interesting project it definitely deserves a star"
8258320,8265840," it definitely deserve the star uh right so and i wish all the luck to the author to achieve their goal"
8265840,8272560," seriously it's pretty cool it was fun it was a fun exploration really fun project uh great sense of"
8272560,8280400," humor i really like the based flag i really like the thing flag so yeah it's pretty funny so really really"
8280400,8289920," cool um all right so thank you so much for for the sub 147 chom 92 thank you for the good bridge prime"
8289920,8295040," all right i guess that's it for today thanks everyone who's watching me right now really appreciate that"
8295040,8300640," have a good one and i'll see you all on the next recreation programming session with who and mr azuzin so"
8300640,8301500," of you. I love you."
