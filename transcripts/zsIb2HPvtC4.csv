start,end,text
0,8640," I was just preparing for another coding session and I noticed a very interesting thing that"
8640,17240," the counter down below actually has absolutely different background color than everything else"
17240,24540," on the screen. So it's kind of interesting. So the background color that I use usually"
24540,32400," is around like 18, 18, 18 except for the Emacs. But in Emacs I recently changed the color theme."
32400,37800," The color theme I used to use actually had this background and I sort of like configured everything"
37800,45540," around that background. So I just wanted before actually starting the coding session that I was"
45540,51240," supposed to do today, I wanted to quickly go into the source code of this counter and change the"
51240,58320," background color and also explain what the hell is this counter. But for those who doesn't know,"
58320,64240," you can find the source code of this counter in here and this counter is called voidv."
64240,80840," So another one. Every time I type voidv, it increments. What the hell is that? What the hell is that?"
80840,88900," This is actually very interesting. Basically, I have an interesting tick when I'm typing things. And then"
88900,95060," that tick is sometimes, you may actually notice that if you watch any of my streams or any of my videos,"
95060,101980," sometimes I just do something, I just type in, type in and then I'm very quickly typing voidv and quickly remove it."
101980,113900," And I had that tick since I can remember doing programming. Somehow it developed like around the time when I started to learn C and C++ and never went away."
113900,120980," So from time to time I just like quickly type voidv and just remove it. And this turned into this meme."
120980,129980," So I decided to create like a special application that basically every time I type voidv, it increments the counter."
129980,132980," So you know how many times this kind of thing happens. So yeah, that's basically what it is."
132980,140060," So yeah, that's basically what it is. And the only thing I want to do here is just change the background of this entire thing."
140060,146060," I don't remember if I have the source code of this thing in here. Let me quickly do that."
146060,155380," Yeah, even if I type it unironically, well, I mean, I always type it unironically technically, even if I intend to type it, it will increment it anyway."
155380,164980," So yeah, so let's actually quickly start the Emacs. It's a very simple application. It's using SDL."
164980,182060," So let's go in here. So basically it can detect your keystrokes regardless of the focus. So the keystrokes are not gathered or not detected through the events on the window."
182060,192100," So we are reading the keyboard device from the dev folder directly. So we open that device and we listen to the events that happen there."
192100,206060," And that way we sort of bypass access and stuff like that. So technically, if this thing didn't need any graphical interface, it would probably work without access because we're reading Linux devices directly anyway."
206060,211900," So which makes it kind of not portable. Right. So it's probably not going to work anywhere except Linux. Right."
211900,219580," It's definitely not going to work on Windows and probably on other flavors of Unix, because they may have like a different ways of handling devices."
219580,222620," But I mean, I'm using Linux most of the time, so it doesn't really matter for me."
223820,233340," So as far as I know, you render the background with clear, I don't remember like clear."
233340,244700," Yeah, it's a render clear. So first we set render draw color and we have to set values for each individual component of the color from 0 to 255."
244700,255820," The color that I'm usually using for the background is 18, 18, 18, so that means it's in hexadecimal, which is not that big of a problem."
255820,263500," I can just do something like 18, 18, 18. Right. And then set FF like this."
263500,269260," And hopefully after I rebuild everything, it is going to work correctly."
269260,275820," So here's an interesting thing. The build happens in two stages. Right. It happens in two stages."
275820,286780," The first stage basically takes the image of the font and converts it into a byte array and that bakes it into the executable."
286780,292620," These days, this is a relatively old code. This day, I usually don't do that. Right."
292620,303260," I usually just, you know, generate the array once, generate the array once and just bake it into the source code."
303260,308540," But this is not a bad idea to be fair. Yeah. So this is how it goes. Whatever. Doesn't matter."
308540,312140," So let's actually try to run this entire thing and see if it changed the background."
312140,318780," This one is very interesting. So if you just try to run it, you won't be able to,"
319820,324940," you won't be able to capture any keyboard devices because you have to have permissions."
324940,329660," You have to have permissions to read those devices. So you have to run it from suda."
329660,336380," So let's quickly run it from suda. Right. And now it detected all of the devices"
336380,344060," that I can read. Right. And one of them is going to be the keyboard that I have. There we go. So now,"
344060,350220," as you can see, the background of this entire thing is a little bit brighter than the original background"
350220,355180," in here. And if I do things like that, it is actually capturing all of them. That's pretty cool."
355180,363020," So, and you may say that it's kind of dangerous to run this kind of applications in root. And I would"
363020,368220," agree with you. I would totally agree with you. And because of that, this application is not run with root."
369180,376300," Seriously. So we're utilizing the setuit functionality of Linux. And essentially,"
376300,382140," there is an explanation on how to set it up. So what you have to do, you have to put void somewhere"
382140,388460," where it's available, and you have to set its setuit. Right. And what the application will do,"
388460,397420," right. Setuit. I think it's supposed to get, yeah, there we go. It will basically open the device and"
397420,407340," then lower its privileges down to its effective UI. I hope, yeah. So basically, then it will lower its"
407340,413260," privileges down to the normal user and then function as, you know, an application with the normal user"
413260,420780," privileges. So it even supports a setgid, right. So you not necessarily have to give it like a root"
420780,427020," privileges. You can give it the privileges of the group that can read from devices, and it will still"
427020,433580," lower its privileges to the group of the user that ran the application. So yeah, it's, I guess it's"
433580,442140," relatively safe. I'm not a security specialist. Maybe it is quite unsafe. But I don't know. So I try to"
442140,448860," take as many precautions as possible while, you know, developing this entire thing. So, all right."
448860,456220," So we fixed that. Let me now quickly copy the executable to where it belongs. I think I keep it"
456220,461980," somewhere in the user local bin, right. And I'm going to put it like that. I'm going to just do it like"
461980,469180," this. Cannot create a regular file. Oh yeah, because I'm currently running this into application, I suppose."
469180,475740," Maybe that's the reason. Yeah. So now I managed to replace this entire thing. And after that, I have to"
475740,489900," set its sticky bits to the input group. So I'm going to change the owner to root and input, right. Again,"
489900,498700," I have to do that from the root. And then I'm going to set the sticky bits. There we go. So now if I just"
498700,508780," run void from a regular user, it will have an access to my keyboard. And there we go. Everything looks"
509820,521260," good. Oh yeah. I recently changed the size of the font, which actually made it look kind of crappy. So"
521260,531900," let me see if I can change that. Yeah. So I have to go back here, right. And let me actually stash"
531900,537740," everything. Go back to master. So I've been doing some experiments with the font because I wasn't happy with the"
537740,542620," size of the font. And I forgot to clean up my current folder. So that's basically what happened."
542620,548380," You know, welcome to software development, I suppose. Welcome to software development."
548380,554780," All right. So, and I'm going to do this entire thing one more time. So I'm going to be copying"
554780,558220," this thing into the folder. Then I'm going to be changing the owner"
560140,566300," of this executable. And then I'm going to be setting the sticky bits. And there we go. If I run void,"
566300,571260," I should have the access to this entire thing. And there we go. Everything seems normal,"
571260,579980," which is quite cool. And now if you compare it, I don't know, let's put this. Yeah. So this was the"
579980,585740," original image at the beginning of the video. So everything more or less with the same background color."
586620,598540," right. So, okay. That's, that's pretty much it. Thanks everyone for watching. So let's move on with"
598540,600280," and actual software development."
