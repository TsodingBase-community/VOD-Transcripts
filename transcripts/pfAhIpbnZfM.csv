start,end,text
0,9840," Hello and welcome to another certain session how about that how about that I bet you didn't expect"
9840,18780," that shit to happen yet again it's almost every day unless it's not so yeah today we're gonna"
18780,27840," continue working on this silly thing that we've been working for I don't know for five five days"
27840,35540," I think this is the fifth day right so and on the previous stream we implemented into like a very"
35540,42720," simple OpenGL integration right for our project so let's actually do a little bit of a cleanup I'm"
42720,49080," gonna do clean fdx which will remove my render dock and I will regret doing that I will have to"
49080,53820," download it yet again but I have zero motivation to actually move this entire thing to a different"
53820,59460," place you know what I think I do have motivation because it's a single command I'm gonna do something"
59460,66240," like this I'm gonna move it to my software folder right so I'm gonna do git clean fdx right so that"
66240,71820," removed everything and let's fetch the latest stuff uh right so because I did a little bit of cleanup"
71820,79460," off screen basically we wrote the whole project from scratch I'm joking I didn't uh and uh yeah so"
79460,84060," essentially I just like organized everything a little bit so now we have a scc folder and I put"
84060,92420," everything into scc folder and uh now uh we can try to build this entire thing one of the things I did"
92420,100220," uh is basically I merged together the uh previewing and the rendering version of this entire thing uh so"
100220,108260," now I can just do a preview and here is the OpenGL example that we were doing right so the the interesting"
109460,116420," example is that it doesn't use any bind uh like basically third-party bindings we implemented all"
116420,124280," of the bindings ourselves right so uh right now we're using GLFW for cross-platform creation of the Windows"
124280,132380," uh and also OpenGL for cross-platform uh rendering and we implemented a very small subset of the bindings of"
132380,139720," unsafe bindings uh that we are using right so an entire code is like 200 lines of code and what it"
139720,144680," does it just basically creates OpenGL context uh just compiles a bunch of shaders and just generates"
144680,151580," this pretty picture and all of that without using cargram right so and that's basically what we have so far"
151580,160940," right but that's not enough our main goal is to render the video we generate in real time let's take a look"
160940,166940," at the video that we're generating so let's quickly generate everything so it's going to take some time"
166940,173240," so the way we generate the video is just we are actually generating raw frames and raw sound and then"
173240,179000," using ffm pack we just merge them together and that creates the final video right so of course the entire"
179000,186200," process is rather slow uh and uh yeah after some time we should be able to take a look at the video"
186200,192280," and here is the video so as you can see it generates the video and it generates uh the sound but all of"
192280,200600," that was generated offline right all of that was generated offline so and that's the goal um of our you"
200600,207160," know of our today stream and our future streams is to learn how to generate this kind of stuff of uh online"
207160,217000," right basically in real time so we already have um you know gpu accelerated rendering um and the last"
217000,223400," thing that we need to port this uh kind of thing to real-time rendering is the sound so we'll need to"
223400,230360," integrate with some sort of a sound api so i was researching what sound api uh would be sufficient to"
230360,239240," integrate with i tried elsa uh and um i think elsa like basically directly working with elsa in 2021 is"
239240,245640," kind of completely invisible right because majority of the distros are using pulse audio and pulse audio"
245640,253960," by the way is literally x11 for sound it's actually quite bizarre uh right it's literally x11 for sound"
255240,257720," so uh we can even take a look at this kind of stuff"
257720,269160," so where is my uh stuff why am i reading chat just a second need to close the chat"
269160,279640," so uh let me let me see so basically you have x11 right so x11 server uh you have x11 server so it's going"
279640,287320," going to be x11 uh and i suppose it uses frame buffer i think it is rendering everything into the frame"
287320,297400," buffer right fb uh and then your application uh your app uh connects uh to the x11 server via some sort of a"
297400,305320," wire right so usually it is a unix domain socket right if i'm not mistaken some sort of a unix domain"
305320,311240," socket uh at least on my machine i looked into how exactly uh applications connect to x11 server and"
311240,317640," that's literally unix uh domain socket which is basically file so you just open that file and"
317640,324360," write into it not really actually you have to open that file via the connect sys call um and it's it's"
324360,330120," rather complicated so it's not just as simple as opening the file right so and i'm not sure if it's"
330120,334760," actually frame buffer maybe it's something else maybe it's just like doing some more you know direct"
334760,341240," magic or anything so and basically pulse audio apparently i looked into how it works uh pulse"
341240,351000," audio is the same level of so right uh it's the same level of um so there we go so you also connect"
351000,356760," to it via some sort of a wire uh i don't know exactly what it connects through maybe it's also unix domain"
356760,363480," socket or maybe it's a memory mapped file stuff uh but i don't know so it's the same kind of and it"
363480,369640," basically works with also uh like this right so but uh the main thing of pulse audio if i understand"
369640,376920," correctly if you have several apps it handles mixing for you right so if you connect uh two applications"
376920,383000," and they output sound it will mix all of that and output that to also also as far as i know also has"
383000,393000," it has its own mixing options uh but uh pulse audio tries to basically you know feel the place as x11 so"
393000,397240," basically everyone connects to that central place and everything is managed from a single place so that's"
397240,404600," basically what's going on here and a lot of distros use this kind of thing so we may try to depend on pulse"
404600,411400," audio uh so it doesn't really mean that it's going to be sort of locked into pulse audio and there will be no"
411400,418120," option to use anything else so we may try to um maybe abstract that away so in the future it will be"
418120,423320," easier to port to a different sound api and it will definitely will need to do that if we want to make"
423320,429800," our application work on windows so there will be some sort of abstraction later right so and i looked into"
429800,436680," api of pulse audio and it looks relatively simple so we can integrate with this entire thing uh and uh"
436680,445400," let's see how it goes see how it goes"
445400,453400," does anyone have any on topic questions"
453400,459400," pipeline versus pools audio uh i have no idea what is a pipeline"
459400,468120," um pulse audio is crap with all series sounds app well good thing that our application is not a serious"
468120,471000," sound app yet because it's unfinished"
471000,480120," why not using also um i think i already explained it right so i literally explained why i don't want to"
480120,488840," use also right now maybe later we can add support for that but i'm not sure since we're writing sort of"
488840,496840," like a throwaway code uh which we use to explore the idea space of the application that i'm developing"
496840,503800," i don't think it's that important to like rattle about specific api if you know what i'm talking about"
503800,512120," does it make sense right so because our goal is to explore what kind of other patterns visual visual"
512120,518600," and audio patterns we can generate and since i'm the only one who's doing that anyway it's important"
518600,522680," for that application to work on my machine right because you're definitely not going to be running"
522680,527960," this application on your machine because you don't give a right so and i do give a and i"
527960,535080," want to explore uh what kind of other patterns and sound um you know video and uh audio patterns i can"
535080,541160," generate and once i find something interesting i can solidify the source code and make it more cross"
541160,547080," platform and more portable and more stable and more robust and so on and so forth does it make sense"
547080,555960," uh does it explain so you see the the the situation quite often is not as simple as a is bad b is good"
555960,562440," let's use being situation is complicated you know life life is complicated does anyone have any other"
562440,583640," questions maybe about what we're doing right now okay so um let's take a look i never actually worked with"
583640,590840," pulse audio uh api but i found a pretty cool thing pa cut uh simple dot c i think that's the thing"
590840,598600," and it's a part of the uh code base of pulse audio so pulse audio code base actually ships with this very"
598600,605320," simple piece of code and what it literally does is if i understand correctly it uh basically accepts um"
606760,614840," raw oh yeah it literally accepts raw uh sound data raw sound data and just outputs it to"
614840,620040," to the pulse audio device or pulse audio sync or something like that and as you can see it's actually"
620040,628360," rather simple right and it even has the name simple in in the functions right it's yet another case of a"
628360,637720," simple api uh yet another case of a simple api right you know what guys i'm talking about because know what"
637720,647320," i'm talking about because it's like endemic to all of these like things um there's usually like a common"
647320,654920," like a usual way of doing things but then the authors of apis realize that it kind of sucks and"
654920,665160," over complicated so they create the simple version of the api right so it's kind of funny like x11 as"
665160,672520," far as i know has that um x11 manual so if you take a look at the x11 manual uh so there is a html version"
672520,680200," so is there index of function okay so uh there is a function uh x create window right so if you take"
680200,685160," a look at this thing it has a x create window and the x create window actually has a lot of attributes"
685160,691400," as you can see and uh you have to provide all of them if you want to create a window but then people"
691400,696440," realized well that kind of sucks that's a lot of arguments and you don't care about some of them"
696440,704600," and there is a function called x create simple window right so uh this is one of the case of the"
704600,713480," like you know simple version of the api curl has a similar thing uh it has easy api right so at some"
713480,719400," point uh libcurl developers realized well the the usual way of using curl is kind of over complicated"
719400,724840," let's create let's create an easy version so when using easy interface uh you you need your session"
724840,730360," to get handle and so on and so forth you see so there's a simple and easy version and apparently"
730360,736040," pulse audio has a similar situation so now i have three examples uh that actually do this"
736040,743880," i don't know why i find it so funny like i'm the only one who find it funny like when when libraries do"
743880,752440," that right so they have the api then they realize oh it's kind of crap let's actually make a simpler version"
752440,759960," anyways"
759960,769000," so uh let me see what we can do let me see what we can do i wonder if we can even compile this into"
769000,775080," i think can i download this uh i mean copy paste it if you know what i'm talking about"
775080,783880," uh let's copy paste it pa cut uh simple not sample but simple simple.c there we go"
783880,793240," uh simple.c simple.c and uh if i try to compile this entire thing i'm not even sure where i want to put"
793240,802600," it um yeah let's actually keep it in here um pa cat simple uh and i'm gonna move this entire thing in"
802600,808360," here uh and maybe i want to create like a simple make file that will compile this thing for me because"
808360,814600," the compilation uh command line is going to be rather complicated right uh the compilation command"
814600,818920," line is going to be rather complicated not really that much complicated but uh i mean you know what i'm"
818920,825560," i'm talking about right so uh what flags do we need i don't think we need too many flags uh but we'll"
825560,831800," need something that is provided by package config and the question is does package config even have"
831800,837640," anything to pulse audio related so it's gonna be at least all grab pulse uh what do we have in here so"
837640,844840," we have a lip pulse okay so uh lip pulse and let's take a look at the flags that you need to put in"
844840,853720," here so d reentrant uh maybe it is important maybe it is not i don't know uh so and the libs okay so you"
853720,859080," just link with this entire thing i'm not really sure what underscore reentrant does and why pulse audio"
859080,867880," wants it to be this way uh but i'm gonna provide that anyway speaking of by the way uh speaking of uh"
868520,874120," so i forgot to provide the source code to the project in the in the description right uh so"
874120,878360," you can find the source code in here if you're of course interested in that if you're one of those"
878360,883080," rare people who's actually interested in programming and like to read someone else's source code"
883080,890120," um as much as i do i do that quite often all the time i rather prefer reading someone else source code"
890120,896280," rather than someone else documentation right so and in that case if you're one of those people i'm"
896280,902440," provided the source code for you because i like you i like people who like to read uh other people's code"
902440,910280," okay so uh let me see so this is going to be c flags uh and it's going to be leave the pulse and uh we're"
910280,917720," going to compile this entire thing like that uh there we go and let's actually copy paste this entire thing"
918280,925240," there we go and it's going to be lips look at that look at that and um now i can try to compile the"
925240,931080," entire thing and is it going to compile it did not compile because we have undefined reference to pa"
931080,938520," simple drain white free so maybe we didn't link with something something important uh wait a second where is"
938520,946360," the list all uh oh okay that that makes sense so you probably need to link with uh lip polls simple"
946360,955880," simplified synchronous interface okay so uh maybe that's exactly what i need to do in here please"
955880,961880," neighbors please don't start this yet again please please i beg you i want to have"
961880,968120," like a com stream at least once okay so it seems to be compelling i don't even need a non-simple"
968120,973240," version that's what's cool about all of that you don't even need non-simple one uh all right so if i"
973240,978520," try to run this entire thing uh prepare your ears and you won't be able to hear anything i think"
978520,985400," okay what if i type something in there oh i cannot type anything in there because i'm in emacs emacs is a"
985400,993960," a piece of okay so pa cat sim oh well i need to go there uh all right pa cat simple right so it's"
993960,1002280," listening to input what if i do something like and uh okay invalid argument that is very interesting"
1002280,1012600," so the question is can i just take my raw sound file and play that sound file with pa cut um so i'm gonna"
1013320,1023800," wait what am i doing i forgot how to use headphones i'm really sorry uh so and i suppose i can do"
1023800,1030280," something like uh maybe i need to read how this entire shit works right so does it accept"
1030280,1040680," yeah it accepts the file yeah you can just provide the file in here so output pcm prepare your ears"
1043320,1047560," i really apologize for that"
1047560,1054280," okay"
1054280,1059320," so"
1059320,1069400," i didn't do it intentionally so you see working with uh sound apis is rather dangerous"
1072040,1077240," uh i warned you by the way i warned you right so because i know that working with"
1077240,1086600," with this kind of apis is really dangerous um oh i know i know why i know why it is like that"
1086600,1095640," because it expects a completely different format it expects uh 16 le oh fuck okay do you have like"
1095640,1097080," something like um"
1097080,1105240," f32 le because that's basically the format that we're using in here"
1105240,1112200," uh so f32 le uh all right so let's actually recompile and no no no no no no that's really"
1112200,1119000," fucking scary meat that's very fucking scary uh okay so it doesn't even have that really"
1120360,1127080," it doesn't it doesn't have that it it's it's it's incapable of doing floating point formats disgusting"
1127080,1139560," okay so let me see uh include polls uh and it's gonna be a simple uh a simple simple simple as 16 le"
1141080,1147720," okay so it doesn't even have them uh let me find the place where it is used in here so here are the"
1147720,1153720," uh be and some other stuff oh it's called float"
1158600,1168120," of course of course signed uh two bars signed 16 bit integers integer is called s16 but float is not"
1168120,1173800," called f32 no no no we don't care about consistency of our naming it has to be called float"
1173800,1181160," okay whatever doesn't matter sure whatever you fancy um so"
1185960,1196440," so it has to be float uh okay so what are we doing here uh okay so at least now it compiles okay i'm"
1196440,1203960," going to actually bring the sound down way more right so hopefully everything is going to be fine"
1203960,1208920," we recompile the entire thing so i'm going to actually put minus b to ensure that we recompile"
1208920,1214840," everything so and now i'm going to try to play the sound i actually going to keep my uh"
1215480,1217240," hand on the volume"
1217240,1230280," okay that's already closer to what i would expect the frame the uh the sample rate is incorrect i can"
1230280,1238440," clearly see here that the sample rate is incorrect uh so um where was that okay so this is a useless"
1238440,1244440," uh and uh so oh yeah sample rate is definitely incorrect so we're using completely different sample"
1244440,1251480," right this can be 48 uh okay so that makes sense and now uh if i try to play this into i think"
1251480,1259880," okay so i think it also assumes yeah two channels all right so let's actually make it one channel"
1259880,1266280," so the it's kind of funny how the assumptions about the format are completely incorrect we're using"
1266280,1270920," completely different format completely different sample rate completely different amount of channels it's"
1270920,1278280," just beautiful so it's just like yeah uh anyway let's try to recompile into i think and now"
1283640,1287240," so it yeah i hope it wasn't too loud right"
1287240,1300840," what if it's a find whatever um okay so and this is roughly how it's supposed to sound right so if we go"
1300840,1301560," go somewhere here"
1301560,1313320," so that that's basically what's supposed to happen uh so uh yeah this entire thing is working and what's"
1313320,1319080," interesting here is that it basically allows us to generate this kind of sound uh in real time"
1319080,1327000," which is which is kind of cool isn't it and the simplicity of the of this api is actually astonishing in my opinion"
1327000,1333640," because it just has a pa simple right right and you just give it the buffer and it just writes that"
1333640,1342040," buffer into into the sink or whatever uh so yeah make sure that every single last drop of sample is drained"
1342040,1349960," uh so yeah i think we can use that i think we can use that maybe that's pretty cute"
1351160,1359480," okay so uh i really like the simplicity of this api it is truly simple api it is what it's uh advertised"
1363080,1367400," it wasn't too bad this time because i was doing a different thing uh all right"
1367400,1378120," so let's do a preview right so here's the preview so and we're going to continue working on our preview"
1378120,1384600," thingy uh all right so on top of uh generating some visual effects in here we're going to be also"
1384600,1391320," generating a sine wave uh to test the pulse audio integration right so we're going to be doing that"
1392200,1399320," we're going to be doing that um did you put a marker on my uh vod yeah so it's quite important"
1399320,1404360," like i want to also put a marker in my world to warn people in the comments who's going to watch this"
1404360,1408920," video on youtube right because i think it's pretty important because nobody expects this kind of though"
1408920,1418040," uh i warned everyone beforehand so um maybe i don't even need to learn in the comments but maybe i will just"
1418040,1429480," think it's uh okay so here is the open gl stuff and um yeah let's introduce the pulse audio uh where are"
1429480,1432760," we going to be putting the pulse audio i think i'm going to put it somewhere here so it's going to be"
1432760,1443720," external and uh what kind of functions do we need in here uh pa cut uh so the first thing we do we need to"
1443720,1453560," have a structure for pa simple spec pa simple spec let's find where this thing is defined so it's pulse"
1453560,1460840," something something something something something is this going to be like npcpp i have no idea what it"
1460840,1472840," is uh okay uh no uh let's actually find uh this entire thing so where is the definition of the structure uh maybe i"
1472840,1478120," should have actually said something like this because that's how usually people yeah there we go i found"
1478120,1483000," it this is how people usually define the structures and i like that the structure in here is extremely"
1483000,1490760," simple so we'll need to make sort of an analog of that structure uh right so an analog of that structure"
1490760,1498040," it's actually really strangely defined why would you define it like that because it will be padded"
1498040,1505560," anyway to a particular to a particular size if you know what i'm talking about right uh let's actually"
1505560,1516600," go to preview right so and i'll have to probably put this thing in here all right uh so struct pa sample"
1516600,1523640," spec right and uh as far as i know we have to do something like a wrapper c if i remember correctly right"
1523640,1531000," so something like wrapper c uh maybe we need to open the rust reference api so i can uh you know constantly"
1531000,1535880," check it out oh by the way uh i also am going to put the link to the source code to this thing in the"
1535880,1549000," description if you're interested uh if you're interested um pa cat simple.c it's an mpd client i have no idea what is"
1549000,1561000," the mpd that allows visualization of music cool uh so uh two two two two so rust uh reference"
1561000,1567480," very interesting visualization of music really fascinating thank you thank you so much"
1568600,1578200," so uh a wrapper uh to the type system type layout yeah you do it like a wrapper c so i'm not really"
1578200,1585240," sure how you do stuff with this kind of thing when you have a pa sample format uh right so"
1585240,1594600," where is it defined is that a typedef of some sort uh it is not a type of it's an enumeration right and as"
1594600,1603080," as far as i know in c enumerations are just like integers right so that means i can just use uh c int"
1603080,1604200," for for this thing"
1604200,1614040," so maybe we also need to bust out rastonomicon i think"
1614040,1621400," let's actually bust it out and let's take a look at what we have in here"
1621400,1627880," so enumeration do you have anything about immersion data layout wrapper uh rust"
1627880,1639000," so i think it has to be somewhere in ffi i'm pretty sure right so ffi and do they say anything"
1639000,1645160," about enumerations okay so rust guarantees that the layout of struct is compatible with the platform"
1645160,1651800," representation in c only if represent attribute is applied it uh can be used uh to lay out struct"
1651800,1657240," member without padding or purpose you can also apply to enumerations okay so that's pretty cool that"
1657240,1665240," means i can basically take this entire enumeration right and uh say a wrapper c and it's going to be"
1665240,1672920," correspondent to uh you know whatever you have in c i suppose right except an invalid thing but i'm not"
1672920,1679560," really sure how to do like this invalid thing in here so a sample max the maximum limit of uh"
1679560,1684520," valid sample uh types or something like that i don't know i think it would be easier to just like"
1684520,1689080," do we see int right and for some of these constants define something something else"
1694840,1703400," so is there anything a special case immersion is a no pointer initialization uh colin rascal from ffi"
1703400,1710520," ffi panics uh okay so notice that they're really bad idea to use an empty num as a ffi type the"
1710520,1717400," compiler relies on the empty numbers being uninhabited so handle values of uh empty huge for again okay so it"
1717400,1722920," maybe it doesn't really matter that much maybe it doesn't really matter that much so let's just copy"
1722920,1729080," paste this into i think and uh just enjoy our lives just enjoy our lives"
1729080,1737800," so uh i'm gonna put it in here so yeah here is the enumeration"
1737800,1748680," so this is gonna be a rep for c like rep for c and uh i wonder if you can just literally do that in"
1748680,1754440," enumeration in rust let's actually find out i know nothing about rust right so uh i'm only learning"
1754440,1762520," okay so i'm only learning so let's do something like build and uh what do we have in here uh expected"
1762520,1766200," yeah you you cannot just do it like that you cannot just like assign this thing in here"
1766760,1771160," um so and that's what makes me worried a little bit so"
1771160,1783640," that's what makes me worried a little bit uh so as far as i know you can cast enumerations to integers"
1786520,1800200," okay rust see in them at the file it's actually uh google up is there any like uh you know established"
1800200,1804280," conventions on how to to do this entire thing i wanted to"
1806840,1813720," we need to put like a uh sub mode to prevent backseating but backseaters actually stepped up"
1813720,1818440," their game they're now subscribers okay it's very cool uh so"
1821320,1823240," uh okay"
1823240,1833400," presentation i32 so there's too much stuff in here uh unsafe code guides"
1833400,1845320," okay so layout of rust enumeration uh some parts of this section will decide categories of nums uh empty"
1845320,1851880," enums uh enums the no variant will be fieldless enums the simplest form of enum is one where non"
1851880,1858520," variants have any fields uh such enough correspond quite closely to uh with enums in c though then"
1858520,1865720," potta presumably a fields enums may also specify the value of their discriminating explicitly but that's"
1865720,1871240," exactly what we're doing right that's exactly what we're doing we're doing minus one is that because"
1871800,1878120," it's negative and you cannot do negative uh representation annotation accepts on enums um"
1878120,1887240," compatible c compatible layout um it's kind of strange right so if i did c compatible"
1887240,1894440," all right if i did c compatible right so that should just work so let's actually see what uh you know it"
1894440,1901160," says um found in the condition coming that doesn't document anything okay whatever"
1902680,1907720," uh let's remove this entire thing right let's remove this entire thing i don't think it's useful"
1907720,1915800," uh i hope i didn't remove anything god damn it uh so i need to be super careful"
1915800,1917800," to not remove anything"
1926520,1932120," you can enable emotes only mode but even then it will find a way to backseat well i mean i can ban"
1932120,1932520," everyone"
1932520,1937880," uh so what do we have in here um"
1937880,1947080," okay so uh let's actually try to compile this entire thing and okay it is working all right all right"
1947080,1953080," so it seems to be working so it was about something documentation or whatnot uh so and"
1953640,1963400," also if i remember correctly non-camel case types so can i just go ahead and allow uh this thing here uh"
1963400,1963880," there we go"
1963880,1970520," uh okay enum is never used okay so that's precisely what i wanted to see hopefully"
1970520,1980920," hopefully that will work uh so and now i can try to define uh the rest of this stuff all right so this is"
1980920,1988840," going to be a uh a wrapper scene right so this is a wrapper scene uh then we have a format uh of this"
1988840,1999480," entire thing um a rate uh i suppose we can do i32 and the channels is going to be uh what was it i8"
1999480,2008360," it's a user to turn right it's like a user to turn and this one is u8 which is a really strange way of"
2008360,2013800," doing that because it's going to be padded kind of weirdly but it is what it is and it isn't what it"
2013800,2017880," means all right so we have everything that we probably need in here right"
2017880,2028200," uh so you have a first warning e032 eric please stop back sitting"
2028200,2032360," you have a first warning after the second warning your permanent"
2033640,2040920," uh okay so what do we have in here so this is the format uh it's actually wasn't called t right"
2040920,2042600," so maybe we don't even need to call it t"
2046440,2052120," okay looks cool looks cool looks cool looks cool"
2052120,2066680," uh pa cat dot c uh all right so maybe i'm gonna actually start in a separate uh in a separate"
2066680,2072200," thingy uh so this one is gonna be like this and uh we're gonna create another one"
2072200,2081800," pa cat i really really don't want to ban people but you're really ruining my uh my mood today"
2082360,2093880," so pa simple what is pa simple uh pa simple pa simple okay so it seems to be it's an opaque okay"
2093880,2098760," that that's actually pretty cool i really like a big stuff uh right because i don't have to deal with"
2098760,2106760," this kind of bullshit so this one is going to be pa simple right so it's going to be pa simple uh and"
2106760,2117160," it's going to be c void uh star like this uh so not really star um right cool"
2117160,2128520," uh so now uh the next thing we have to do um we're not doing anything particularly special in here we need"
2128520,2136360," to pa simple new okay let's actually see what this function is all about right what's this function"
2136360,2143400," is all about uh that's a pretty huge function not gonna lie uh but maybe it is worth it uh so there's"
2143400,2148520," a couple of specs and stuff like that majority of these things uh we probably won't need them for a"
2148520,2154200," simple case right so and maybe we're gonna mark them as a big pointers because as far as you can see"
2154200,2160520," um majority of them are just set to null anyway right so it doesn't really matter um"
2160520,2166280," so that means i'm gonna just make them opaque to some extent right"
2166280,2174440," we're gonna just make them a peak to some extent um so server name"
2175000,2180120," uh yeah it's it's literally x11 as you can see as already said it's just basically x11"
2180120,2188280," so it's gonna be like that this is gonna be like that and this is gonna be the error"
2188280,2197640," uh pa is simple um what does opaque mean in this specific context um it means that you don't know"
2198280,2206360," uh what's inside of the structure right so it's private to some sense uh right so let me actually"
2206360,2217400," show you uh what i mean like that so you have a structure um like this right and it has a bunch of"
2217400,2228840," fields right it has a bunch of fields uh right and um if you have a pointer to the structure you can"
2228840,2238040," still access those fields uh like so right uh so i wonder if i can even try to compile the entire thing"
2238040,2240360," here"
2240360,2248840," the gcc main main dot c and i'm gonna just run this entire thing in here right uh and uh it's"
2248840,2252920," defaulted of course maybe i didn't even have to run it because it doesn't really matter right"
2252920,2258360," of course this entire code is going to sec fold because you're dereferencing the uh null pointer"
2258360,2263160," it's very very bad i know all of that but that's the point of the that's not the point of the"
2263160,2267720," explanation the explanation is whether this entire thing is visible from the compiler point of view"
2267720,2275960," or not so this entire thing is in fact visible right so you can always actually declare uh sort"
2275960,2284760," of fool up front right you can declare it up front and you can uh work with the pointers to fool"
2284760,2291240," it's going to be totally fine you see i never actually defined fool right so i just declared it said"
2291240,2297400," that there is such thing as fool but it's not defined here it's defined somewhere else and i can"
2297400,2302920," even create a variable of the type fool and i can uh take a pointer to it well i mean define a pointer"
2302920,2308120," to this thing and assign it to null right and it still compiles look look look look this entire thing"
2308120,2315240," still compiles even though we don't know what is fool we don't know it like but it compiles perfectly"
2315240,2320120," because what you're doing essentially you're saying that i have a pointer that points to something that is"
2320120,2325640," fool but since i never try to access what's inside of it it doesn't really matter compiler doesn't care"
2325640,2331320," because the pointer is just like a uh you know an address in the memory so it just says somewhere"
2331320,2339480," there there is something okay i'm pretty glad that somewhere there there is something so that's fine"
2339480,2343800," uh but if you try to do something like this now you're not just saying that somewhere there there's"
2343800,2348840," something that you say somewhere there there's something that contains x but the compiler doesn't know that"
2349640,2358760," right you see the compiler doesn't know that and uh this is quite often used uh for the by the um"
2358760,2366520," designers of apis of libraries so essentially you can have a bunch of functions that's for example create"
2366520,2374840," fool right and uh they return you a pointer to fool right uh then uh they also have a destructor like"
2374840,2381240," destroy fool right they accept this entire thing and they destroy it and then for instance you can"
2381240,2390120," render or like print fool right uh and there we go so at any point you can quite easily create fool"
2390120,2400440," right you can then print fool uh and then you can destroy for notice how nowhere in here you actually need to"
2400440,2407000," look inside of fool you you never need to look inside so you never need to know what is fool"
2407000,2413880," you only need to know that there is something called fool and these kind of functions they accept something"
2413880,2419160," called fool but you never need to know what's inside of it you don't even need to know the size of this"
2419160,2426200," entire structure you don't know it's just a pointer for you it's an opaque structure that's what it is"
2426200,2433240," it's an opaque structure right so uh the only thing you need to know is that to get fool you have this"
2433240,2439080," function and the implementation the place where these functions are implemented they do know what is fool"
2439080,2442120," but you don't so you don't have to worry about it"
2450920,2456200," can you basically compare this to interfaces in c shop you can compare anything with anything it's not useful"
2456200,2461560," uh so it's basically hide away implementation details"
2461560,2469320," probably but uh unlike abstraction features in the higher level languages"
2469320,2477480," this entire thing have very specific technical implications we're not just talking about"
2477480,2483800," abstract interfaces factories and some weird unicorn things in the sky no"
2483800,2489880," we're talking about addressing the memory and whether you know the size of the chunk of a memory"
2489880,2495320," this address points to or not we're talking a very specific low level thing here"
2495320,2503160," so that's a very important distinction in my opinion so basically what you're saying in here is that"
2503160,2508200," you have a very specific address in a memory right very specific address in the memory you don't know"
2508200,2514200," the size of it but at the same time you don't need to so this entire thing has a very direct"
2514200,2522040," translation to assembly so this entire thing have a like just precise directly translation to the machine"
2522040,2528280," code of the machine you're running in all these abstract shared interfaces factories beans whatever the"
2528280,2533000," fact people use these days it doesn't really have to it can translate to all sorts of crap this entire"
2533000,2540680," thing has like a very specific like yeah this is how assembly would look like uh so yeah so that's"
2540680,2541880," the main difference i suppose"
2541880,2550760," um does calling plus plus cause problems in this example this is a finally this is a good question i have no"
2550760,2558600," idea actually holy shit somebody asked a good question right so yeah you see uh because if you"
2558600,2564200," don't know that it has very specific technical implications you wouldn't even think about such"
2564200,2568760," question right you never would think about such question in case of a c-sharp interfaces or something"
2568760,2573640," like that because it doesn't have any specific technical implications this thing does and that's what's"
2573640,2578920," important and that's what's cool okay so it basically cooling like plus one or something like that so"
2578920,2583240," what will happen i think it will complain i'm pretty sure compiler has to complain"
2583240,2586520," yeah so invalid use of undefined type there we go"
2586520,2594520," so since it doesn't know the size of the of the structure it doesn't know by how much it needs to"
2594520,2600680," increment that address yeah that's a very good question thank you you give a google finally i'm"
2600680,2605800," really glad when people actually listen to me and just ask like uh informed questions that's"
2605800,2615320," says thank you so much all right so um yeah so i suppose what you'll have to do like you need to"
2615320,2619480," know the size to perform any sort of pointer arithmetics but since you don't know the size there's"
2619480,2630760," yeah um pretty cool so that's what we usually mean by opaque uh structures in c right so um you have a"
2630760,2637000," structure somewhere you know where it starts you don't know the size of it but you also know the"
2637000,2643560," procedures that do know size of it so you can just uh you delegate a handling of the structures to those"
2643560,2656760," procedures and never care about the size of this entire thing in memory"
2656760,2665080," beans also have some translation to machine code everything uh in programming world have some"
2665080,2672280," translation to machine code the um the question is whether it is useful for you to know about exactly"
2673560,2680680," in case of beans it's not useful to know that in case of c it is in fact very useful to know that so um"
2680680,2687800," okay um"
2695640,2700120," so let's continue actually like defining this entire thing so here is going to be a procedure"
2700120,2708200," like in here uh and uh it's going to return i suppose the mutable pointer to this opaque type"
2708200,2712360," right as you can this is literally what it does what i just explained we have a constructor"
2712360,2717800," that constructs uh this opaque structure and give us the pointer to where that structure begins in the"
2717800,2721480," memory right and we're starting to work with this entire thing"
2721480,2726040," okay"
2726040,2735240," uh so uh let's actually start doing this kind of thing uh this is going to be the name"
2740840,2748360," so pa stream direction this one is rather interesting uh right so and it's not even defined"
2748360,2755000," in here so it's a sample i should probably look at the uh sample the is this"
2755000,2763720," inclusion cards why did you put food in there i mean it's it's fine it works i suppose um so stream"
2763720,2770440," direction okay so there's no stream direction in here uh right so this is going to be something like this"
2770440,2776840," right uh right uh and here is another case of um you know enumeration of our nation"
2776840,2786840," so preview rs more like preview my ass am i right oh i'm sorry"
2786840,2795800," uh can i just put this thing like in here i think i should be able to um so it's going to be"
2800040,2804920," here we go"
2804920,2807480," there we go okay"
2807480,2819560," pa stream direction and uh so i'm not quite sure if i want to put c in there so i think i should be"
2819560,2824280," able to put t like not put t in here i don't think it matters it can be changed at any point anyway"
2829000,2837240," i wish my c plus plus lecturer spoke as casual as you well your c plus plus lecturer basically have no"
2837240,2838280," choice right"
2838280,2847160," they probably can speak but they just have no choice because they are in very formal environment"
2847160,2852760," uh here i am in a very informal environment and furthermore i in my settings i even marked"
2853240,2860600," uh my channel as for mature audience so that means there will be swearing in here and um which should"
2860600,2864120," actually warn you before you join the stream that this is a stream for mature audience"
2864120,2871240," so i do have a choice to you know be more casual your lecturer probably does not otherwise they will be"
2871240,2880520," basically fired from their job um it is what it is and it isn't what it isn't it's not um"
2880520,2891240," uh so we have a bunch of in here which we don't really care about so i'm probably going to mark them"
2891240,2899480," as um as um uh as opaque pointers right so we don't really know what they are so i don't really care"
2899480,2907720," about them so it's in the ph channel map uh mutable c void and"
2916680,2927960," okay so this is a constant pointers this is the constant pointers"
2927960,2930440," so there's some sort of a buffer"
2930440,2943480," and error okay so it means here we're going to be accepting the mutable uh c int there we go that's a"
2943480,2950440," pretty big huge juicy function look at it look at this big juicy function let's try to compile it"
2950440,2955560," into i think and see if it's gonna do what i think it will um"
2955560,2968520," okay so what do we have in here um no semicolon um so pa simple so this uh oh we already okay so this"
2968520,2976920," one is not opaque so we don't need to do that uh uh so convert the identity to uppercase uh"
2976920,2981480," so okay"
2981480,2984360," whatever um"
2984360,2996200," rust allow uh attribute on whole module how can you do that attributes"
2998520,3003480," um"
3003480,3008280," okay"
3008280,3014280," okay whatever we'll have to suffer then"
3014280,3017560," uh so"
3017560,3021240," generate metadata"
3024040,3031720," hole why doesn't say that i need to find confirmation in the documentation uh entire module"
3031720,3033080," entire"
3033080,3034760," attribute"
3034760,3038920," let's call it like a module attribute"
3038920,3041560," maybe that will find early there"
3041560,3045000," google is useless holy"
3047560,3055960," uh so attributes uh some module creates conditional compilation disable when attributes uh apply to the"
3055960,3057000," whole crate"
3057000,3059960," but i don't need the whole crate"
3059960,3067720," when attributes apply to a whole crate and as far as i know whole crate is just like a collection of all"
3067720,3072280," of the modules in inside of a crate right i don't want to apply it to the whole crate that would be"
3072280,3078360," stupid i want to apply it to a very specific module and when they apply to a module or item the syntax is"
3078360,3082680," uh okay so not just the missing bank so there should be no bang"
3083320,3088040," uh for the module okay so that makes sense but it's not particularly attribute right so"
3088040,3097320," so it's kind of"
3097320,3101880," it's kind of dumb um it's kind of dumb"
3106520,3108840," anyways i guess i guess i guess i will have to suffer uh"
3108840,3117080," so because i want to do that only specifically on that module but i don't want it to and why do i even care"
3117080,3124920," like for sake it's yet another case of rust just basically roping me into discussing something"
3124920,3131560," that is not important why i find myself discussing a style naming in the middle of"
3131560,3140280," doing an actual work why like it's in rust is like always like that like why do i find myself stuck"
3140280,3147080," in this useless loop of useless it's just like so annoying why is that a thing in the first place"
3147080,3150280," uh i shouldn't be wasting my time on this kind of stuff"
3150280,3157400," like it shouldn't be a thing that i have to even discuss that it's not even has to be discussable"
3157960,3164280," right so it's like not a thing to discuss um so whatever um"
3164280,3173880," it's just like i'm like no i don't even know what to say"
3173880,3185080," so uh like this language is literally designed to waste your time it's designed to do that um"
3186200,3193560," okay so this is a pa simple so and uh so this is going to be something like that and let's actually"
3193560,3200280," go through all of these things right so let's go through all of these things uh and um so the first"
3200280,3210200," one has to be null right uh the first one has to be null uh and the name i suppose you're using the name"
3210200,3218120," of the program right so you're using the name of the program uh so let me actually go to rust"
3218120,3225960," um i need the api docs i suppose i need some sort of api docs so so this is the uh"
3225960,3232840," rustonomicon this is that thing and i need the api now so let's actually close all of that useless crap"
3232840,3242280," right so this has been the rust uh api docs uh let me find the api docs uh and uh so we're gonna have"
3242280,3249080," in here is essentially arcs let's find the arcs so this is part of the environment"
3251080,3265880," um okay so um let me to build arcs uh and std environment arcs right so that gives me that so"
3265880,3274440," in the program should be located somewhere in here or so if i do arcs next uh and i expect um"
3275960,3283640," um program name right so this is going to be expect program name uh so then that entire thing should"
3283640,3291320," return me a string as far as i know arcs item is a string uh right so let me take a look um no i need"
3291320,3296840," to take a look at the implementation of the iterator uh yeah item is a string okay i can clearly see that"
3296840,3303080," so it's a string but can i convert easily the string into c string because i then will have to pass this"
3303080,3313240," entire stuff in there so you can do from role from vec unchecked uh from vec with null right so something"
3313240,3321720," like that uh into string you can convert that into string uh so you can do new and it takes something"
3321720,3328760," that is convertible okay so maybe uh string is convertible into vec8 whatever the it is and"
3328760,3336920," where are all the implementations uh so maybe maybe it is so navigating through all of this stuff not"
3336920,3341880," particularly convenient but the one thing i can do i can just check if it will compile or not right"
3341880,3349240," uh so and then i can unwrap this finally right thank you thank you so much and is it gonna work is"
3349240,3359400," it gonna work now you uh right so uh yeah this entire part is not compilable yet it is not compilable"
3359400,3365160," and uh it is in fact compilable it is in fact compilable would you look at that isn't that amazing"
3365160,3374360," i think it's goddamn amazing uh all right so what i wanted to do in here now on emacs so uh name right i just"
3374360,3383960," wanted a program program as ptr there we go so this is going to program as ptr and there we go so pa"
3383960,3391160," stream direction so pa stream direction in the case of a c program in the case of a c program uh what was"
3391160,3399960," that um right what was that pa stream playback uh right so this is going to be just a playback and as far"
3399960,3406440," as far as i know um i'll have to also import this entire thing so it's going to be a stream direction"
3406440,3412120," right and maybe i can just use something like this right so import everything from here"
3412120,3423640," uh so device in case of a device uh it's going to be null right so device here is null so um i'm going"
3423640,3429080," to be just yeah of course it has to be new mutable i'm pretty sure uh this one is also going to be"
3429080,3437640," new mutable right so stream name uh i can give it a name right so i can give it some sort of a name"
3437640,3446680," uh so it's gonna be a stream name c string new uh play back and we're gonna unwrap this entire thing right"
3448040,3459320," uh stream name um as ptr so then we have a thing called ss i have no idea what is the"
3459320,3465320," fuck is that supposed to mean so oh it's a spec parameters okay so now we need to fill"
3465320,3474920," this structure in all right so uh let's go ahead and do that uh so this is the structure very specific"
3474920,3475480," structure"
3475480,3486360," pa sample format in our case we already established that it's going to be pa sample float 32 la right"
3486360,3493080," so pl 32 la the rate is going to be 48 00 and the amount of channels is going to be one that's"
3493080,3502360," basically the format that we have in here uh all right so we have that and uh so i also need to"
3504920,3516200," use pa format info right so this is no it's not a format info it was a sample format yeah it was a"
3516200,3526120," sample format uh sample format okay so and in here i'll have to take the pointer to this entire thing"
3526120,3529720," is that a constant point yeah i can just take the constant one in here so it's gonna be this"
3529720,3537560," so the rest of this stuff uh the rest of this stuff is going to be null null okay that makes sense so"
3537560,3544280," this one is going to be just null and this one is going to be just null we have a go so in the error"
3544280,3550520," uh we'll probably have to uh create a special thing for the error uh where is the error and it's just the"
3550520,3558440," integer in here so we'll have to do something like uh mutable error uh which is just c int and this is"
3558440,3564200," going to be zero and i'll have to give the mutable pointer to this entire thing right so this is going"
3564200,3571880," to be the error okay finally finally so you see how much you can do by just ignoring all that stupid"
3571880,3578120," shit that rust wants you to to care about uh so you don't have to worry about that stuff anymore"
3578760,3589000," okay so this entire thing may return you uh i suppose null right so um that means i can check if s is"
3589000,3600600," null right if s is null we have to panic so we have to panic and let's say that uh pa's uh simple new"
3600600,3607240," failed and we can get the reason why it failed and the reason uh why it failed can be found through this"
3607240,3615000," function the str error okay so we'll have to map that function as well uh right so let's actually find"
3615000,3623400," this entire stuff all right so where is that it's a very simple function uh right so preview there we go"
3623400,3629800," there we go so here is the function we'll have to put it in here uh so and it will return the row point or"
3629800,3639800," something so by the way oh this is dangerous yeah you need to use c char in here it's quite important"
3639800,3652040," so and it's gonna be const uh c char and it will accept the error that we got from that entire thing"
3652040,3660600," right it will accept the error and uh yep and now i should be able to do all over that right i should"
3660600,3668600," be able to do all of that so uh uh it's gonna be like this i provide the error right i provide the error"
3668600,3675480," and i think i should be able to construct sister from uh from that right uh i should provide the sister and"
3675480,3685880," it's just like literally from pointer okay uh cstr from ptr all right from ptr and um no"
3690760,3705400," so as str str okay so how can i compile the entire so i'm in the wrong folder okay so uh replace it sure"
3705400,3715000," i don't care whatever just work um okay similar path exists self okay so you want self there you go here's"
3715000,3721720," self if that's what you want i don't know why why it is that it's important uh okay so this is going to be"
3721720,3729320," no uh okay so what do we have in here uh as str um"
3729320,3741160," found for the reference no method to str right is that what you want what do you want um"
3742920,3746760," doesn't implement display okay so now i have to unroll this entire thing"
3746760,3750920," what else do you want and i have to go through all this crap"
3750920,3757000," okay unsafe function sure i don't care uh"
3757000,3759320," unsafe"
3767400,3774840," okay okay finally finally holy fucking uh okay so what do we have in here uh so now i need to actually"
3774840,3783560," link this thing with a specific thing right so it's gonna name uh so what was that lib maybe pulse"
3783560,3791640," simple i think that's what we have to link with right so that's what we have to link with uh okay so it"
3791640,3799400," didn't uh undefined simple pa str error okay that one is actually rather interesting so um"
3799400,3807240," is that because pa str error is located not in pa simple i think it's located in why do they have so"
3807240,3814600," many libraries uh pool sodio what the is wrong with you can i provide several of these things that's a good"
3814600,3824040," question can i just do something like this okay i can cool so that's pretty cool so let's let's now uh"
3824040,3830840," try to check if we manage to successfully create the uh you know the connection or whatever the"
3830840,3840760," fuck it is so we're gonna print ln um create it uh the what is it called is that a handle is that a"
3840760,3848440," file is that a channel uh it's a playback stream okay created the playback stream right and i'm gonna"
3848440,3854120," provide it like this it's gonna be a debuggable thing and we're gonna just put s in here and let's"
3854120,3862040," try to compile the entire thing and i'm going to try to run a preview right and it created the playback"
3862040,3868680," stream it created the play playback stream and we can see exactly the pointer right i wonder if i can"
3868680,3876200," make it fail for whatever reason for instance if i provide a null instead of the program in here what's"
3876200,3882040," going to happen right is it going to fail because of that uh let's find out so this is going to be a"
3882040,3888440," build and then i'm gonna try to run it uh is it gonna fail it's still created look at that it actually"
3888440,3896040," still created this entire stuff how can i make it not work uh stream name can i provide the null for"
3896040,3907480," this thing as well no mute i i think i know how i can do that i can basically provide null for the parameters"
3907480,3911800," right i'm pretty sure i can i will be managed to able to like break this into i think if i provide"
3911800,3920520," new here uh there we go okay so uh yeah pa simple new failed invalid arguments okay so that means it"
3920520,3927560," actually created things successfully so uh yeah there we go it seems to be working so we managed to"
3927560,3934840," successfully create the uh the playback stream so isn't that cool isn't that cool i think it's pretty cool"
3937720,3941480," so does anyone have any questions about what just happened on the screen"
3941480,3951880," so we just supported like a small piece of this application"
3951880,3960520," uh and no they are trying to get like a latency or something like that but i'm not sure if that's"
3960520,3964840," important to the fair i'm not sure that's important"
3964840,3976440," so then we use pa simple right uh what do we use latency for uh oh they're using the latency to"
3976440,3981720," display it so we're not going to be getting that we're definitely not going to be getting that and then"
3981720,3988280," they just use pa simple right right and they just write that buffer in there um and that's probably"
3988280,3997000," where we can start generating the sine wave all right so yeah that's probably the only function"
3997000,4004120," that we need that we need in here we don't really need anything else we don't really need anything else uh"
4004120,4006600," right so pa simple"
4016200,4035560," so it's either very localized"
4039160,4049800," but i suppose it's why why is that what i have to do ready wait are you freaking serious do i have"
4049800,4050760," to do it like this"
4050760,4056280," don't tell me that i have to do it like that this is this is dumb"
4059320,4063160," uh don't tell me"
4063160,4067720," are you serious ready"
4067720,4080120," the function is never used but it is used ah this is because of that okay"
4085880,4092440," really okay and if i put something like a comma"
4092440,4095480," and it actually disabled this is so dumb i really hate it"
4095480,4108520," and like it keeps you like wind up on this useless discussion because it's not even that important"
4108520,4114600," it's not important but it why why do you care about that holy"
4115880,4120680," oh maybe maybe i do need to enable it for the whole application but"
4120680,4125480," okay any questions so far"
4125480,4134280," there is a flag in rustc to disable all these linkedin warnings so far if any"
4134280,4138680," but i don't want to disable all of them i want to disable it on a specific module that's the point"
4138680,4143640," like that's the point that chat cannot understand i don't want to disable it everywhere can i how can i"
4143640,4148840," say disable it on that specific module i don't want to disable it everywhere so all the solutions just"
4148840,4155240," disable on the whole crate uh and again why am i even discussing that it shouldn't be a thing that i"
4155240,4162680," discuss all right so um put this inside of module but the documentation says if you put a bang it"
4162680,4167640," applies it to the whole crate and the whole crate if i understand correctly includes all of the modules"
4167640,4172600," doesn't it or maybe i misunderstand you what is a crate so i will look into the documentation the"
4172600,4177240," commission station said if you want to apply to the whole crate put a bang and then compilation"
4177240,4181240," in slacks in building environment create okay"
4181240,4184920," all right let's make this"
4184920,4194040," all right let's continue so uh we already ported one function right we already ported one function"
4194040,4201240," and it successfully creates the playback stream right it successfully does that uh so the next thing we"
4201240,4211000," need to do is to basically uh call pa right thing right so this is going to be pa right uh and let me let"
4211000,4225160," me see so uh where is that pa right uh so so it's probably located somewhere uh so this should be sample"
4225160,4232600," right so this is the sample uh or n and what do we have in here so we need to port these things"
4233880,4243880," uh so this is the preview and let's take a look at that stuff uh huh so that will return c integer right"
4243880,4249800," so it also accepts that playback stream so i'm gonna do it like that"
4249800,4256280," so the data is basically the pointer to the beginning of the buffer that we need to play"
4256280,4261080," in the playback stream so it actually takes it as a void which is kind of strange"
4262040,4269160," but maybe it's fine because yeah the the size of a single sample depends on the format that we"
4269160,4274040," specify in here right so that's the size of a single sample in our case it's going to be four"
4274040,4281240," bytes so and we'll probably have to take the the pointer to the beginning of a particular buffer and"
4281240,4287560," then sort of cast it like pawn it it to to a particular maybe not even pun it if you you're"
4287560,4292760," casting things to avoid star are you really punning it you're not really punning you're basically erasing"
4292760,4298680," the type information about the pointer that's essentially what you're doing um so yeah we'll"
4298680,4306120," have to do that anyway so this is going to be the data uh so it accepts the constant pointer to c void"
4306120,4312280," all right so then it accepts the bytes and i wonder if well size t is more of a"
4314200,4321800," is more of a leap c concept rather than c concept all right so i'm not even sure if uh we'll have that"
4321800,4329960," thing in there right so let me let me see so where is the uh the stuff so i remember that if you have a c"
4329960,4335400," int does it have something like c size so that's the the most important question i'm pretty sure it"
4335400,4342200," does it doesn't uh because yeah again size is more of a uh is more of a lip sequence uh concept rather than"
4342200,4353080," the c one so i suppose uh what we can do in here is just to have c long u long long"
4353080,4363560," because i think that's the type of this size t on 64-bit platforms i'm pretty sure that's what it is and"
4363560,4369800," see you long long has to be like u64 uh maybe just in case i'm gonna just say that the bytes is gonna"
4369800,4382680," be u64 just in case who knows um right so and uh this one is basically c int right this is basically c int"
4382680,4392840," okay all right so we have a function that writes data into the uh into the playback buffer"
4393560,4409560," uh and what we have to do uh in here is uh in the loop we are basically organizing everything so"
4409560,4414120," what's the buffer size they're using here so buffer they're using one kilobyte we might as well actually"
4414120,4421480," do a similar thing um okay maybe i'm not gonna do that so we're gonna have some sort of a loop in here"
4421480,4428360," right so this is gonna be the loop and uh let's have a buffer um it's probably need to be mutable right"
4428360,4436200," it's definitely needs to be beautiful mutable uh so this is gonna be simply an array of f32 right f32"
4437000,4442600," and the size is gonna be like around like this uh we might as well also a zero initialize the entire"
4442600,4450760," thing uh right 924 so here's the buffer and uh we need to keep track of the global time"
4450760,4458920," right we need to keep track of the global time as we advance like this sine wave and whatnot oh boy um"
4460760,4467880," so the sample rate the sample rate where is the sample rate um so we can put the constant in here"
4467880,4478360," so it's gonna be const sample rate 48 000 uh so this is the sample uh rate but i want it to be use size"
4478360,4485880," right and i'm only going to be casting that to something else as i um just something there's"
4485880,4495800," something in here so this is going to be the build the sample rate as u32 as u32 there we go do we have"
4495800,4505560," anything else any other errors uh okay so uh two to the two let me let me see"
4512040,4521880," the amount of samples is the samples per second so knowing that we can compute the sample duration right"
4521880,4526600," sample uh duration and the sample duration is going to be something like this so we have a single"
4526600,4536280," second and we divide the sample uh single second by this sample rate uh right as uh f32 right as f32"
4538120,4543880," so this is a sample duration and as we fill everything up right as we fill everything up"
4543880,4549880," uh we're going to be advancing the time by that sample duration so um maybe because of that we'll"
4549880,4556280," need to keep track of the time right so this is going to be f32 and we're starting the time at zero"
4556280,4563320," right and as we go further and further we're going to be advancing this thing by sample duration uh maybe"
4563320,4567480," because of this thing i want to call delta time right so this is going to be delta time"
4567480,4574200," uh this is going to be delta time um"
4574200,4587080," i also need to know the frequency of the thing that i'm going to be playing um frequency uh sound frequency"
4587080,4594120," and it's going to be the classical uh 440 right so it's going to be a tone right so this is the a tone"
4594120,4600680," uh so let's go ahead and fill it up finally uh right i'm going to be iterating through um"
4600680,4608280," well i also want to enumerate this kind of stuff so we're going to do like that so this is the sample"
4608280,4616360," uh this one is going to be samples right samples uh in samples iterate i'm not sure if i need to"
4616360,4622840," iterate maybe i don't need to iterate iterate in mutable way and also enumerate uh right something like"
4622840,4646200," uh so and uh in a sample we're going to be using something like two pi right so this is a two pi uh"
4646200,4653160," multiplied by the uh frequency that you're playing right so uh how did i call that sound frequency"
4653160,4655000," right so this is gonna be oh my god"
4655000,4666360," sound frequency all right i take this entire thing and i also need to multiply that by the time right i"
4666360,4674440," also multiply by the by the time and i take this sign of this entire thing so uh after that uh i update"
4674440,4678680," the time by delta time and this is how i fill up the whole buffer"
4678680,4687000," right let's try to now build the entire thing right so it doesn't really work because uh we don't have"
4688280,4697800," uh so this one probably has to be as you know what frequency can be actually fractional i don't see any"
4697800,4704520," reason for frequency not to be f32 if you know what i'm talking about so there's no reason for it to be"
4704520,4712520," not f32 so it could be float it is totally fine it is in fact that we find okay so pi is not in the scope"
4712520,4720920," uh we can try to bring it to the scope uh somewhere here use std i think it's f32"
4720920,4727480," consts right f32 const um pi if i'm not mistaken right so that's the way you do that"
4727480,4735880," uh there we go and now it compiles okay cool um so and after that i need to write this entire thing"
4735880,4741880," into the buffer right i'm writing that into the buffer though i have to be super careful because"
4742360,4750200," again it may produce a very loud sound and maybe to you know make it a little bit more safe since"
4750200,4756920," we're programming in the rust i need to multiply the whole volume by like quarter right maybe i can even"
4756920,4764440," make it like 10 so it's not really harsh uh so here i have to provide the sync and now comes the data"
4764440,4772200," okay this is the interesting part so uh i can try to take samples as the slice right and"
4772200,4779640," and if i remember correctly slice has a very cool feature you can take it as a pointer yeah so we can"
4779640,4788920," take it as a pointer i wonder if you can just do something like samples as uh as ptr uh as ptr there"
4788920,4797000," we go and uh though it also accepts bytes this one is interesting so it's not in elements it's in bytes"
4798280,4805880," it's in bytes so that means we'll have to compute the bytes uh so this is going to be four multiplied by"
4805880,4813000," uh this sample samples length right so this is going to be sample length and then we can also provide the"
4813000,4821480," pointer to the error right so and this entire thing will either fail or not uh i'm not 100 sure but yeah"
4822200,4830760," uh i'm not sure if i want to handle any errors in here um so that should be it uh unless we'll have to"
4830760,4836920," cast the pointer to a different type if you know what i'm talking about uh so let's actually save this"
4836920,4843640," entire thing and apparently we do need to uh local variable with the similar it's a sample c"
4845960,4863480," uh so c void f32 okay so what's the easiest way to cast the um the pointer um i'm we'll try to maybe"
4863480,4873240," assume it's essentially as a const c void but maybe there is a better way to do that uh yeah expected to"
4873240,4881480," use size buffon u64 so use size is not the same as u64 if i understand correctly right so it's not the"
4881480,4889560," alias there are not aliases uh it's literally a primitive type okay oh yeah it's it's literally"
4889560,4896600," primitive type that is not aliased to anything else okay that is totally fine i can probably live with that"
4898920,4909960," and maybe i can convert it to us 64. so is it working okay so it seems to be fine uh so in the"
4909960,4921400," original uh application in here right so we write everything into this thing um and we do the drain"
4921400,4926840," at the end but the drain is needed to just ensure that we uh outputted everything so we don't really have"
4926840,4933480," to do that if we just want to test how the thing works right so and i think we're kind of ready to"
4933480,4941320," do that so prepare your ears because i'm about to actually run this application uh right so um let's"
4941320,4950600," see if i run it like that uh okay so we should hear the 440 hertz uh tone sine wave tone hopefully uh so i'm"
4950600,4966280," gonna prepare a control c does anyone have any questions about what just happened on the screen"
4966280,4977640," uh so we did a couple of things that were not about the style and naming tabs versus spaces camel case snake case"
4977640,4984280," we did the actual work does anyone have any questions about that not accepting any questions"
4984280,4991400," about style uh some other that has nothing to do with integrating our application with pools audio"
4991400,4996120," does anyone have any questions about that about the important part of the application"
4996120,4999320," not not the crap that majority of people care about"
5000120,5006520," um so because you you see that crap didn't help us to uh to produce the sound wave"
5006520,5016280," uh so my keyboard has died apparently so sad uh so the mouse still works though"
5016280,5024680," this is yeah this is literally what it feels like right so you're trying to tell me guys guys"
5024680,5029240," here's the important thing all of that is not important they're don't listen they're just like"
5029240,5037240," children screaming around and running so i didn't even know i didn't even know what to how to like"
5037240,5042680," like i'm i'm literally showing people that this is not important they're not listening"
5043400,5048200," there no no no no no no you have to align it in particular we have to use this package manager"
5048200,5054680," yeah you have to do none of that is important listen people i'm just showing you that it's not"
5054680,5059720," important you can do all of that without it it's not the point does anyone have any questions about"
5059720,5062920," what just happened on the screen right uh so"
5065720,5072200," okay so this is a sign wave we can try different tones now it's actually pretty cool now i have a"
5072200,5082520," tool in my toolbox uh to generate sounds uh directly using sound api um integrating with pulsadio at"
5082520,5087160," least on linux and it's going to work at least on linux uh which is good"
5090680,5095160," okay so i can multiply this thing by two and i suppose it's going to be twice as"
5095160,5098120," much"
5098120,5102760," okay um"
5109800,5115720," do you have to completely fill 1k buffer before a sound place i think so um because"
5115720,5127320," well yeah this entire api is uh synchronous as far as i know right so you give it this"
5127320,5132920," entire thing and if i understand correctly this entire thing blocks until it finishes and then"
5132920,5139800," well no otherwise you wouldn't have a drain this is this one is really interesting maybe it actually"
5139800,5149640," cues uh but yeah you have to fill 1k of data and is that a problem you think uh so i'm not really in"
5149640,5155880," this don't really understand what's your concern uh i guess the answer is yes you have to fill 1k buffer"
5155880,5162360," before playing the sound uh it is true but what's the concern is there any concern with that um"
5162360,5171240," so that's why i'm actually not really sure what you're trying to say or yeah is there any particular"
5171240,5176920," concern about filling 1k buffer before actually playing the sound oh you don't have any concern"
5176920,5183160," okay so maybe you it felt like uh maybe you had concern with the latency right so you have a"
5183160,5187480," little bit of latency before playing the sound because you need to fill up the the buffer or"
5187480,5195400," something like that but uh i didn't see any concern in here because 1k bytes literally fits into l1 cache"
5195400,5202040," i think of the processor right does it not i think it fits into the like l1 cache which is like the"
5202040,5207720," fastest memory that you can ever imagine it doesn't it i might be wrong actually i'm not a hardware"
5207720,5215800," person but i think filling up 1k uh for uh for a computer for a modern cpu is just like literally"
5215800,5222520," nothing uh l13 oh okay so it's uh okay"
5222520,5232600," so doesn't even have any other on topic questions about what just happened on the screen so"
5234680,5239560," what do you use to connect to pulse audio is it a channel loopback module constructed or something"
5239560,5246200," is it automatically destroyed when the program close uh i use something called uh pulse audio simple"
5246200,5252600," right and uh it's a pa simple new i'm not sure if it's automatically destroyed"
5252600,5258040," but if i understand correctly pulse audio is like a similar to x11 right"
5260680,5261400," quite a second"
5261400,5269400," i would assume that it cleans all of the resources after i quit it"
5269400,5277240," so we can actually try to do something in here so i'm gonna try to play the thing"
5277240,5287480," and here is this stuff and then i do ctrl c and it automatically destroyed i didn't really destroy this"
5287480,5293720," thing explicitly so but pulse audio now knows that this thing does not exist anymore"
5293720,5301560," so i suppose it's like x11 uh the lifetime of the resources is tied to the lifetime of the connection"
5301560,5309960," so since the application has quit the connection to whatever is ipc was closed so all of the resources"
5309960,5314040," will automatically uh the time will automatically uh de-initialize but that's my assumption it's just a"
5314040,5320760," hypothesis at least this is how i would expect a pulse audio to work um at least this is how x11 works"
5320760,5328520," and it does make sense so i might be wrong actually i i started to use pulse audio like today so i never used it"
5328520,5347640," before today um so um and um basically i ported uh this application uh this uh this small application to"
5347640,5354520," rust that's basically what i did so i'm not doing anything that is not done in here"
5357080,5365640," all right so uh let's continue um so we have that and what i'm thinking is that maybe we need to merge"
5365640,5369800," uh to like both of these applications and here i'm gonna sneak by the way"
5377800,5387160," okay so this entire code is a little bit messy i do realize that uh but i do plan to actually clean"
5387160,5394840," it up after i uh finished it right so basically i'm just throwing everything into the file uh until it"
5394840,5403160," works and produces something right and then uh i'll think about uh cleaning it up maybe also uh i'm not"
5403160,5408600," gonna even say anything about the naming convention but yeah you get the point um"
5408600,5420680," so we have that uh all right so here we are initializing the stream stuff"
5420680,5431000," uh uh so created playback and here is the samples and here is the interesting stuff right so i want to"
5431000,5436360," integrate this entire stuff with the visual application that we developed yesterday right"
5436360,5441480," with the visual application and i wonder how exactly we're going to be doing all of that so"
5441480,5451880," so here's the loop uh and in here essentially what we do we handle the events"
5452520,5458200," then we are rendering the frame swapping the buffers and whatnot and i think"
5458200,5465240," bit somewhere in between we can try to play the sound right i'm not sure what would be the best"
5465240,5471560," way to do this kind of stuff if you know what i'm talking about um but i guess it makes sense to"
5471560,5476920," play it between the things furthermore i actually disabled vsync for now right so vsync is completely"
5476920,5485080," turned off so um i think it's not gonna block anywhere in here hopefully uh so now we should be able to"
5485080,5491240," see the visualization and the sound simultaneously hopefully it's not the best way to do that but"
5491240,5499720," it's a way that kind of works for now uh okay so let me recompile the entire thing uh uh-huh and uh"
5499720,5508520," and we can't hear anything uh which is rather strange right because it kind of blocked for whatever"
5508520,5516520," reason and where exactly did it block i'm not kind of sure okay so i'm gonna disable pa simple right"
5516520,5520920," right i'm disabling this entire thing and i'm gonna try to recompile it one more time right"
5520920,5530120," and oh yeah the graphics stuff completely broke uh so i don't know what is what is blocking here"
5530120,5535560," what is blocking and see what's blocking here oh i see"
5539000,5548840," uh so yeah okay so here is an interesting thing here is the interesting effect of a lot of warnings"
5548840,5557480," in rust right so you show so many useless warnings to the point that the user of your language doesn't"
5557480,5565640," care about warnings anymore and even if you provide a useful warning nobody gives a shit anymore so"
5567720,5574600," right so nice way to make warnings useless it's like no warnings at all"
5574600,5578440," i don't even know what to say"
5578440,5591080," okay so here is the uh the visual part of the application right here's the visual part of the"
5591080,5594040," application and here is the audio part of the application um"
5597720,5603560," uh the frequency that you need to update the sign wave is the same that you need to update the screen"
5603560,5611080," uh probably uh probably not uh i'm actually frequency at which i update the sign wave is actually smaller"
5611080,5621400," you see uh i actually update sound 1024 times per frame if that makes any sense"
5622680,5630680," i can extend this buffer actually um but i can yeah probably i need i will need to synchronize it with"
5630680,5636440," the frame right right now synchronization uh with the frames is not really needed if you know what i'm"
5636440,5643240," talking about like but then as we start integrating with the simulation uh maybe we'll start actually"
5643240,5647720," thinking about synchronizing the sound right now it does not need it i'm just trying to make something work"
5647720,5649800," okay uh so um"
5649800,5653960," so there we go"
5653960,5662840," okay that seems to be working uh where is the frequency so it was four four i don't want to multiply by two"
5664760,5675240," okay okay all right so we're playing the sound and uh the visual part simultaneously"
5675240,5691240," um and my keyboard has died yet again i don't know i don't know why"
5694760,5699560," does anyone have any questions about note warnings or some other useful"
5699560,5702120," uh"
5702120,5708040," okay uh so"
5708040,5718440," so does anyone have any questions about nuclear plants you know not the bike"
5718440,5723560," shit uh all right so what do we have in here"
5723560,5730840," so i suppose i'm going to be just compiling this into i think"
5730840,5736840," this is so exhaustive holy shit okay"
5740760,5749720," integrate preview with the pulse audio and i'm going to push that right at the repo for anyone who"
5749720,5754200," might be giving a shit about what i'm doing right now here's the source code just in case"
5754200,5762440," uh so all right the next thing is going to be yeah we have all of the necessary parts"
5762440,5769160," essentially almost i'm not 100 sure if we have all the necessary parts uh because the problem with"
5769160,5774600," the simulation right the problem with the simulation that we're playing in here uh so let's actually"
5774600,5777880," take a look at the simulation one more time uh right"
5777880,5783720," i don't know what the is going on in here but it's not supposed to be like that"
5783720,5791320," right so the thing about the simulation is that it generates the frames uh pixel by pixel right and this"
5791320,5801320," is not precisely how the open gl render works right so with the open gl render you have to go through"
5801320,5806840," this entire pipeline and stuff like that you cannot just give it the pixels and it will display them"
5806840,5815080," you can but you have to put extra work into doing so right so uh what we'll have to probably do we'll have to"
5816680,5825400," generate uh a texture right so we have to create open gl texture we'll have to render the frame then we"
5825400,5831720," have to put that frame into the texture and display that texture using open gl and continuously update"
5831720,5839240," that texture so that's probably what we'll have to do which is not particularly a fast way of doing that"
5839240,5849000," but it's a the way we can apply right now because that's how our renderer works right so it is crappy"
5849000,5855240," but it's okay for now because more like better implementation requires more work right you know"
5855240,5859320," what i'm talking about so it would be better because if you take a take a look at the renderer that we"
5859320,5865000," have in here we have a bunch of rectangles it would be nice to actually have a specialized renderer"
5865640,5872280," which uh collects all the rectangles that you want to render in a vertex buffer object right and then"
5872280,5878200," sends it to the uh to the gpu and then on the shader level would unpack all of that properly render the"
5878200,5883880," vertices of the rectangles and then properly color the rectangles in a in a fragment shader so it's a"
5883880,5891400," completely different way of rendering things that we do right now right make sense so and that would be the"
5891400,5896280," best way to do that but since our renderer works differently it is better to just do that through"
5896280,5901800," the texture right it would be better to do that through a texture right"
5901800,5912040," so um i need to think what's going to be the next step because uh i'm kind of done with the sound with"
5912040,5919640," integration to pulse audio for now uh so uh i i just have to move on to a texture and this is like a"
5919640,5924600," completely different topic and i'm thinking do i want to split this into two videos or something"
5924600,5929240," because yeah i'm kind of done with integrating with pulse audio so maybe it could be a separate video"
5929240,5935320," uh we'll see we'll see so for now we'll basically do the software rendering and only use opengl to"
5935320,5943080," display stuff yeah pretty much uh pretty much i don't even use opengl to display stuff that's the point here"
5943960,5952520," so i you to use opengl to display stuff you still need we still need to put some effort into doing"
5952520,5958760," that so far we managed to create opengl window uh welcome to the modern computer graphics by the way"
5958760,5965880," uh we spend the whole day just creating opengl window so we can't even use it to display things yet"
5966680,5973400," uh so we'll have to spend a separate effort connecting these two things together and then"
5973400,5980920," maybe just maybe we'll see things moving on the screen uh that is similar to uh what we have in here"
5980920,5987080," right right now what we see on the screen when we do a preview is not even close to to that thing right"
5987640,5995640," so but we you need to spend some some additional uh you know time and effort all right so uh i want to"
5995640,6004280," make a small break right i need to make a small break uh and after the break maybe we'll uh do something"
6004280,6010440," i don't know yeah after the break we're going to try to connect uh you know the renderer with the texture"
6010440,6023320," so um all right so uh let's try to integrate with the uh texture rendering right so how are we going"
6023320,6032520," to be doing all of that well i suppose we'll have to first create the simulation context right so here's"
6032520,6039720," the simulation context and uh what we have to do here we just need to create uh create this thing providing"
6039720,6043800," the width and height of the simulation width and height of the rectangle within which"
6043800,6050520," all of these things are going to be bouncing like around and stuff like that uh so what i need to do is"
6050520,6064200," probably um to do to uh so i'm gonna put it in here uh maybe i'm gonna use uh self i think it's"
6064200,6072520," actually located in super uh right so yeah so in the main uh we basically put all of these modules as"
6072520,6078440," sub modules so rendering and preview and the simulation are located on the same level the same"
6078440,6084600," level right so because uh preview render are going to be reusing the simulation uh so uh to access this"
6084600,6089880," entire thing we'll have to do uh something like this simulation super and we're going to import everything"
6089880,6096360," and as far as i know in the simulation itself only the state is visible outside right only the state"
6096360,6101800," is visible outside so uh let's create the state so this is going to be in the state and it's going to"
6101800,6107160," be mutable state new uh and the question is do we have width and height we do have width and height"
6107160,6115560," so let's actually provide it in here so it's going to be width as f32 uh height as f32 uh there we go so"
6115560,6122280," and that creates a new state that we can probably use we don't know yet but we can probably use that"
6122280,6129320," so the next thing we need to do we need to uh render the state right so we usually render it into a canvas"
6129320,6138360," right so all of that is rendered into a canvas uh so for that we'll have to allocate a memory for the"
6138360,6149560," canvas right so we can be canvas um canvas vector so we're gonna fill everything with zero and it's"
6149560,6158120," going to be width multiplied by height width multiplied by height so that's the canvas so"
6158120,6163560," and uh for now i'm not going to be running any simulation i'm not going to be stepping simulation"
6163560,6169240," what i want to do right now i just want to render the current frame of the simulation right so i'm going"
6169240,6176600," to be doing state uh then i'm going to say please render yourself go render yourself into this canvas"
6176600,6182920," and the canvas stride is actually width right so this entire thing will render uh the state"
6182920,6189320," into this canvas and now what i want to try to do i want to try to make a texture out of that canvas"
6189320,6196280," right so i don't remember how to create textures in opengf to be fair um so we'll have to find out"
6196280,6203960," so if i try to recompile the entire thing uh everything seems to be recompiling right and uh if i run"
6205000,6209720," there we go seems to be working so i hope it's not too loud please tell me if the of this thing too"
6209720,6217880," loud uh as far as i can tell in obs it is not that loud it doesn't even uh reach the yellow area right"
6217880,6223640," so it's it's lovely okay thank you thank you so much guys really appreciate it uh okay so um"
6223640,6230840," yeah so we rendered that and let's go to the opengl as far as i know uh you need to first generate the"
6230840,6239720," texture right so you need to generate the texture uh gel extension gel again texture uh textures and"
6239720,6248840," it's extension so it's with ext so which actually leads me to view that maybe uh i yeah it's not an"
6248840,6253000," extension so you have to do it like that okay so let's actually bring this function into the"
6253640,6262840," uh open gel bindings uh right so we're gonna have it somewhere here uh to do generate texture so this"
6262840,6269480," is going to be n uh and then the texture itself is going to be a mutable pointer to this entire thing"
6271560,6274520," so uh let's go ahead and do that"
6274520,6286360," so here we do initialization so vao uh then we're doing shaders and i'm not sure maybe i'm going to"
6286360,6293560," actually initialize the texture after i've done the shaders uh but i'm not 100 sure maybe before"
6293560,6297960," can i cannot decide i don't know i don't know why i cannot decide i think there's something over there"
6297960,6308840," uh so this is going to be mute frame uh texture uh glu int is zero so this is going to be one and uh"
6308840,6314680," then i'm going to take the pointer to frame texture there we go so we generated the texture"
6314680,6321720," so after that i need to bind the texture right so i need to bind it saying that that's the current texture"
6323000,6332200," that's the current texture so let's actually put it in here um if and you'll bind uh right something"
6332200,6343160," like this something like this gl game texture uh the target oh the target is rather interesting so"
6343160,6349720," i think it's something like gl texture uh 2d yeah that's that's the thing you need to have in here"
6349720,6358200," right it's it's a gl texture 2d uh so it can be const uh gl enum"
6358200,6361960," it's gonna be"
6361960,6370440," equal to that and there we go gl bind texture there we go"
6373240,6383480," gl texture to d and then i provide the frame texture so i don't quite remember what's going to be the"
6383480,6391560," next step do you have to uh huh i suppose you have to provide some parameters you also have to"
6391560,6398040," uh initialize the data so i'm gonna actually go to docs gl just to get a reminder on how to work with"
6398040,6404680," textures gl again texture because they usually have some sort of like a piece of code down below that"
6404680,6410600," you can like refer to uh for the whole thing okay so we generate and then we have to provide some"
6410600,6417640," parameters in here uh are they really matter i'm not quite sure so this is a linear interpolation"
6418520,6427480," uh some other stuff uh let's actually don't use any interpolation at least for now all right so for that"
6427480,6433960," one i'm gonna be using nearest right so it's gonna be very pixel pixelated to be fair in our case it is"
6433960,6440200," already pixelated because our render doesn't do any interpolation anyway so uh it doesn't really matter"
6441640,6447800," so uh what we have in here what we need in here is this constants right uh all right so"
6447800,6455800," meg and min uh so comes to jl so let's define this thing in here"
6455800,6466280," so and as far as i can tell so this thing has to be gl uint right maybe"
6468120,6475640," maybe it's maybe it's it's actually enumeration more of a uh it's more of a enumeration of our nation"
6475640,6484440," so does it compile uh okay so i also didn't provide this function as well so let's actually go and provide"
6484440,6487320," it uh so"
6487320,6493640," so that's what we're gonna have in here"
6493640,6496120," target"
6496120,6505560," anything else nearest"
6511560,6515960," const"
6515960,6519480," so const nearest i would assume that it's also gl now"
6519480,6524760," uh though in c the specific type is not visible anyway so"
6524760,6530600," it doesn't really matter that much okay uh expected i32 oh okay"
6530600,6535320," so this thing expects i32 so"
6537000,6540360," does that mean uh gl text param"
6540360,6545240," uh gl int so that means this thing has to be jailed"
6545240,6551160," sure does it work seems to be working seems to be talking"
6551160,6561800," okay so there's that and then we have to provide the data okay so now uh we come to the point where we"
6561800,6572680," we need the gel texture image 2d um so uh no texture image 2d this one is going to be rather hard uh because"
6572680,6579320," it has a lot of parameters but i think we're not afraid of hard problems right that's kind of the"
6579320,6586200," point that's kind of the point uh a lot of people are afraid of the hard problems and they're trying to"
6586200,6589720," switch the topic and talk about for instance different like"
6589720,6595880," namings or like taps versus spaces because that kind of topics give them the comfort"
6595880,6599800," so they have an opportunity not to think about actually hard problems"
6599800,6604760," but we are not afraid of thinking about actually hard problems and trying to solve"
6605320,6620840," actually hard problems so that's what we're doing in this channel right so uh let's go ahead and do that"
6620840,6630920," so this is the type so i think we'll have to do something like this so in pixels is going to be"
6630920,6642200," literally avoid which is rather interesting do we have a thing for the void gl uh gl void okay"
6642200,6645720," type gl void"
6645720,6654120," okay so that's the function all right let's see"
6657400,6663880," target is going to be um gl texture 2d"
6663880,6675320," the level as far as i know the level is let's actually go to gl texture 2d level is basically"
6675320,6681160," specific a meat map level right so since we don't really care about meat maps or any of this uh we're"
6681160,6687240," gonna say that it's zero internal format specifies the number of color components in the texture might be"
6687240,6693880," one two uh three or four uh so i think i'm gonna just literally say four right so we have four of"
6693880,6700760," them uh width and height we do know width and height right so this is gonna be something like this uh huh"
6700760,6708520," the border uh the border could be zero we don't care about the border the format um all right so the format"
6710520,6716360," i guess we can say i guess we can say glrgba because it's like four components or something"
6716360,6727880," glrgba so uh we're gonna get the components uh the format completely incorrect because uh i'm actually"
6727880,6735800," rendering everything in the format that is convenient for me right so uh and i think the format because of that is"
6736440,6746120," something like zero x a a r r g g b b so and i wonder do i have to i can always like fix that myself"
6746120,6751880," i can always like change it myself but maybe there is a way to actually tell opengl interpret this thing"
6751880,6759080," like that um right so i think i don't know for now i'm gonna just say that the format is glrgba"
6759080,6764680," it's probably going to be incorrect and that is fine it is totally fine to uh write first like"
6764680,6771240," incorrect approximation and then fix it that's kind of the point uh specify the data type of the pixel"
6771240,6780680," data the following symbol like i can never remember um i think it's unsigned byte uh specifies the data"
6780680,6786360," type of the pixel data and what is the pixel data i suppose i'll have to put inside but"
6787080,6794600," uh we'll see how it goes uh and the pixels is basically the canvas right so this is the canvas"
6794600,6804680," and i need to take it as a pointer and then i will have to cast it to uh gl void so that's how i can"
6804680,6811800," fill up this entire texture hopefully and it does not compile uh because oh yeah this entire thing has to be"
6811800,6826920," i32 as uh to where is this glint as uh glint as glint as glint all right so glrgba okay so let's"
6826920,6837880," actually define glrgba right the glrgba const and um uh what is it supposed to be glrgba so it's supposed to be"
6837880,6849560," gl glenum right so glrgba that's the value of this entire thing okay do we have anything else uh unsigned"
6849560,6857720," byte uh where is unsigned byte uh where is unsigned byte here it is let me bring it in here uh const gl"
6858520,6867800," right const and this one i don't really know i think it's also glenum uh and let's put it in here"
6867800,6876760," okay uh do we have anything else and it seems to be compiling how about that how about that but we"
6876760,6882040," won't be able to see anything if i just run this entire thing right now it's the same as it was before"
6882040,6889080," it's absolutely the same so the reason is because we're not like using this texture at all right so"
6889080,6898440," i can now go to the preview right and uh in here so i suppose in this thing we don't have to do anything"
6898440,6906840," special right but in here we have to set up uniform uh uniform uh and i think it's a sampler 2d"
6906840,6914600," right and this is going to be the frame this is our frame so it's actually tied to the texture units"
6914600,6918680," and the default texture unit is zero and by default when you're going to structure is going"
6918680,6923240," to be tied to the texture unit zero so i don't really have to do anything in here by default it will"
6923240,6928440," work and let's see if it's going to do anything particularly special so if i compile it okay so"
6928440,6934840," everything seems to be working now instead of generating these stupid colors right what i need"
6934840,6941800," to do i might as well actually comment out the entire thing right right so this is going to be something"
6941800,6954120," like uh cola um so glsel texture glsel texture that's what i need to do uh so it provides the sampler"
6954120,6962920," and uh a particular vector so i suppose i can just do texture frame uv and that will just use the texture"
6962920,6969080," right away hopefully we'll see i'm not sure so here's the thing what are we doing uh just to recap right"
6969080,6974200," before we actually try to run it we create the simulation state we create the simulation state"
6974200,6980120," we create a big enough canvas buffer to render that state in there and we're just rendering the first"
6980120,6984600," frame of the simulation we don't advance the simulation we don't do anything with the simulation"
6984600,6989480," we just render that frame in there then we initialize opengl sound and stuff like that and"
6989480,6995480," what we did uh what we added to the open challenges initialization we created open gel texture"
6995480,7001720," with the same size as the canvas into which we render the state once we did that we took all of"
7001720,7008760," the pixels of the canvas and we uploaded it to open geo texture then we updated the shader to actually use"
7008760,7014600," that texture which contains the frame of the simulation and just colors the quad with that frame"
7014600,7019320," right so and let's see if it's going to work right away and it doesn't work so that's pretty cool"
7023480,7030040," so maybe the time has come to bust out the render talk right because who knows what the"
7030040,7036680," has happened there so maybe the the texture was not uh uploaded properly uh but maybe another thing"
7036680,7044920," we can do we can enable debug output for the opengl so if there are any problems uh it will probably log"
7044920,7050680," something in there but i don't know let's try a render dog first uh so i already actually yeah i"
7050680,7058520," remember that i actually moved to render dog to uh here so let's actually copy it in here and uh tar fvx"
7058520,7064680," render dog uh render dog there we go okay render dog"
7064680,7075880," q render oh boy i don't really want to run it in a sync manner but i hope i'm afraid it can look a"
7075880,7081560," shit tonic stuff i really hate when like these applications you want to run in the background"
7081560,7087160," but they start logging like shaking right into your console it's just like so unpleasant anyway so"
7087160,7096600," why is it so slow okay so do you have a command line parameters okay so i can provide the preview and uh"
7096600,7103160," let's actually try to launch and i want to capture oh i just remembered it cannot capture"
7103160,7113880," core profile not explicitly requested compatibility profile is not supported okay so oh we also need"
7113880,7120360," need to enable the core profile explicitly so render dog is not gonna work that easily"
7120360,7123160," all right that dog is not gonna work that easily"
7123160,7129560," dog is not gonna work that easily oh"
7129560,7137080," truly such"
7137080,7150040," so it could be also because of some alpha shit you know"
7150040,7159480," so i have an idea uh what if i go into the simulation"
7159480,7167480," so and here's the fuel gay rectangle okay right so it's a rainbow rectangle"
7167480,7176760," so what if i feel this entire thing not with this kind of color but rather with f f f f f f f f"
7176760,7183560," so basically all of the components are going to be uh 255 right so uh and then i'm going to try to"
7183560,7192280," recompile the entire thing right and just run uh this stuff so kill the render dog it's useless uh and"
7192280,7200680," let's preview uh yeah it still doesn't show anything it still doesn't show anything but uh okay so"
7201320,7207800," we also need to eliminate the case that maybe the first frame doesn't contain anything that also could"
7207800,7213320," be the case but i really really doubt that i really really doubt that so what we can try to do we can"
7213320,7221160," try to dump that rendered frame as a ppm image speaking of using ppm for debugging purposes this is"
7221160,7226680," literally the case right you have some sort of a frame and you need to see if is there anything there"
7227320,7232440," so and uh since our application is not allowed to use any third party dependencies we can just dump it"
7232440,7243400," as a ppm image right so save uh pixels as ppm so we're going to provide the pixels right so it's going"
7243400,7249720," to be uh like a reference to i32 and we're going to have a stride in here uh it's going to be use size"
7249720,7253960," and then we'll have to provide the file path i suppose so this is going to be file path"
7253960,7258680," uh and uh this is going to be just a string or something"
7258680,7265960," so now i need to open the file rather create the file right so it's going to be file path"
7265960,7270680," uh maybe i'm going to actually return something like io"
7271400,7280840," uh result a new result like this uh and let's do something like sync right"
7280840,7296360," all right so write ln uh mutable sync uh p6 uh p6 then width height 255 uh width"
7297320,7308680," height so width is effectively stride uh but height is uh pixels uh len divided by width so we have that"
7308680,7316200," so this is the width and height we don't really need it as much so i might as well actually do"
7316200,7320760," something like this right because we don't really need these parameters as soon as we like"
7322600,7325320," save them as soon as time we don't really need them"
7325320,7333880," so after that i'm going to be iterating the pixels uh right i'm going to be iterating the pixels and i'm"
7333880,7341160," need to i need to save this entire thing in there right so uh two two two two"
7349640,7353880," i guess i need to extract the bytes right so this is going to be r"
7353880,7359960," pixel um eight multiply by two"
7359960,7365160," g"
7370920,7384600," sync write rgb uh so after that i suppose i want to explicitly say that this thing has u8"
7397480,7400440," okay so and then i'm going to say okay"
7400440,7408520," so iors so we'll probably have to import all of these things so it's going to be std io"
7408520,7415000," uh right do we need anything else in here so file as far as i know file is located in"
7415000,7423960," something like this right so pixel uh pixel uh okay so this has to be like that there we go"
7424920,7431960," uh what else do we have in here so there's no errors only warnings all right so now uh right"
7431960,7441720," method not found mutable sync uh okay so this gets to be something like right uh there we go"
7441720,7451400," oh my god so let's go ahead and do that cannot borrow as mutable because it's not mutable yet"
7452200,7457080," uh-huh do we have anything else okay so it seems to be working all right so we have a function that"
7457080,7465960," can dump the thing in the frame into the file system right so uh let me let me see so save a"
7465960,7474200," pixels as ppm and so save pixels as ppm uh all right so the file path and this is going to be the frame"
7475080,7482840," frame ppm uh canvas it has to be a mutable canvas of course and the stride is going to be width right"
7482840,7490920," this stride is going to be width uh what else do we have in here all right so and if i try to run this"
7490920,7497480," entire thing uh it did the thing but did it also create the frame okay so it created frame let's actually"
7497480,7505720," open it it does exist in there okay so the texture uh the frame does in fact contain some stuff which"
7505720,7511880," makes sense uh but it doesn't display anything right it doesn't really display anything but we illuminated"
7511880,7520440," that case right we definitely illuminated that case which is nice all right uh we definitely eliminated that"
7520440,7529560," so that means the problem is with the texture right so with the texture itself uh gl texture okay let me"
7529560,7537000," let me think um so maybe i'm gonna take a look at the uh piece of code they provide in here one more time"
7537000,7546440," right so uh to to the two so rgba uh rgba so in both of the cases they use rgba maybe i'm"
7546440,7554680," gonna also put rgba in here i don't know gel rgba so uh zero texture width texture height"
7554680,7562680," the border is zero rgba and sign in and then we provide the data and everything's okay so i don't"
7562680,7571880," see any mistakes in here per se um everything looks okay to me at least so maybe we have to do that after"
7571880,7577640," we like it's probably it's quite unlikely but maybe you have to do that after you allocated the program"
7577640,7587320," or something uh i actually really doubt that but uh rgba uh expected okay so i can try to do as i said it to"
7587320,7594920," uh all right so oh okay it worked"
7598200,7605800," interesting interesting interesting interesting well also it's actually uh upside down as you can see"
7605800,7612120," it is actually upside down is it really because i doing i'm doing that before the program because"
7612120,7620520," i'm relying on some default behavior which is probably a bad idea to do uh right so uh right"
7626440,7629800," is that because what was the cause of the problem"
7629800,7637160," that's really strange oh okay um"
7637160,7644520," so where is that"
7650120,7654200," one two three four one of the following constant"
7654200,7665560," uh-huh okay that means i don't have to use one okay sure so that was the problem i don't know"
7665560,7668680," maybe i'm just not understanding something but"
7668680,7677800," it's kind of it's kind of strange but you see it's it works now so um so this is the first frame right"
7678520,7686360," so this is just the first frame uh no uh it's upside down so we probably want to actually invert"
7686360,7695960," the coordinates we can do that in the shader itself right so we can do something like vec2 uh x uv uh y"
7695960,7700120," and we're just basically inverting the uh y coordinates so it's gonna be upside down now"
7701400,7708600," uh so uh now it's exactly in the place where it's supposed to be right so everything's okay"
7708600,7715800," uh and uh let's try to color it with a rainbow right as i already said we are not interpreting the"
7715800,7724440," format the way um so opengl may not reinterpret the format the way we interpreted it right so uh we'll"
7724440,7727400," have to probably have to probably adjust something but i'm not really sure"
7727400,7733320," uh okay so game erect where's the gear act i don't remember so i think it's a simulation"
7733320,7741640," uh i already was there okay so let's go back to the rainbowish stuff and see how it's gonna work now"
7741640,7745320," let's see how it's gonna work now uh"
7746680,7756440," okay so you may say that maybe that's it uh maybe that is working but it's not really working exactly"
7756440,7769560," as you want uh right it's not gonna work exactly as you want so uh i want to disable the"
7772680,7776680," the sound because it's kind of annoying to listen to the sound"
7776680,7783960," uh it's kind of annoying to listen to that sound so maybe no we're not going to be doing that"
7783960,7788360," i'm not going to be doing that"
7788360,7792120," so what i want you to do chat"
7792120,7801640," so we're saving that frame uh okay so there's no sound anymore and if i take a look at"
7802520,7809400," this thing uh you see you see the problem"
7809400,7820840," so it's interpreting them incorrectly right so uh but since it's a rainbow wish it doesn't really matter"
7820840,7827800," um but i think i i think i do care i think i do care about how it interprets this entire thing"
7828440,7835400," so can i specifically say the format is there any way for me to say to tell the format"
7835400,7836840," uh"
7836840,7841640," so there is"
7841640,7844200," luminance"
7844200,7850760," well we can reinterpret the format on the shader if you know what i'm talking about"
7852840,7858520," right we can reinterpret it on the shader so let's actually go to the shader um"
7858520,7862200," and uh do the preview"
7862200,7872120," so we're gonna have the pixel in here uh right so it's gonna be pixel and this is gonna be back four"
7874200,7884520," like this so this is the pixel so the format is something like a a r r g g b b b and r g b because"
7884520,7894120," of the little engine is going to be right it's going to be r r g g b b a a but since it's a little"
7894120,7903400," indian the first one is going to be r so that means the first one"
7903400,7912760," so the first one is alpha that means i have to do y"
7913960,7921800," uh z w y z w back four and i don't really care about alpha so i might as well try to do something"
7921800,7927320," like this all right i think that's the way to do that what do you guys think"
7927320,7933160," right let's see if it's gonna actually produce something something reasonable"
7936760,7942440," and it crashed because why uh so the shader didn't compile properly because if i got a semicolon"
7942440,7950440," all right so let's try to recompile one more time um and a boom okay so it's completely wrong"
7950440,7960840," uh okay um so maybe it's w z"
7964280,7980600," um"
7980600,7987240," so r gba"
7992360,7997240," oh okay so indian is actually screws up with my brain so"
7997240,7999960," yeah"
7999960,8013880," i see so that means rgba is a a b b g g r r uh right so this is rgba and essentially"
8018680,8024360," this is the first one so x is going to be blue x is going to be blue"
8024360,8031240," y is going to be green uh pixel y uh"
8031240,8036360," and z is going to be a red so it's going to pixel z so"
8036360,8041880," zix i think it's a zix i think it is in fact zix"
8046200,8050040," yes it is"
8050040,8050600," to the two"
8050600,8054920," yeah there we go"
8068680,8070200," so uh no"
8070200,8079080," that's pretty cool so the the next thing we want to do actually we want to try to like actively"
8079080,8085080," simulate the entire thing but to actively simulate the entire thing we need to update the texture"
8085080,8090360," as far as i know you update the texture via the texture sub image 2d right so that's what you do sub"
8090360,8100520," image to do so we need that function in here uh so specify to do a texture sub image uh a portion of"
8100520,8106200," specified texture image onto each graphical primitive uh to enable disable two dimensional texturing or"
8106200,8111800," whatever whatever it's kind of strange uh texture to do"
8111800,8121880," texture to dim"
8121880,8128200," all right so let's actually bring this into i think and see if we're going to do something about that"
8129880,8134680," uh so that's a pretty huge god damn signature no even the way"
8134680,8137720," uh okay"
8137720,8144600," so where is the jl uh all right"
8148040,8153880," so this is going to be the target"
8153880,8157880," and this is going to be the level"
8157880,8177400," so it's basically the same as geotexture image 2d right it's basically the same but it allows you to update it"
8178040,8182840," uh"
8182840,8183960," so dumb okay"
8183960,8197800," so this is the format and we also need to have the type"
8201400,8205800," so and this is the data right so this is the data"
8205800,8213000," so the thing is for offset and some other stuff we're gonna just keep using like zero zero and width"
8213000,8215080," and height so it's not really needed per se"
8215080,8219400," all right so it's gonna be the data and there we go"
8223400,8231000," oh boy okay so i need to do that on each frame essentially but i also need to synchronize that to"
8231000,8239640," like 60 fps or something um so we'll see how we can do all that one of the things i can do i can basically for now"
8240280,8246920," uh do swap interval right so where is the swap interval and i basically turn on uh vsync"
8246920,8249960," uh turn on vsync"
8249960,8258920," and uh that will ensure that it's 60 fps and i can just do that at 60 fps"
8259080,8270840," uh right so um let me see state um state update when update this state by the way uh simulation update the state"
8270840,8274840," i provide the delta time right so that's what we're providing here"
8279880,8290520," the delta time is going to be essentially one uh over 16 right over 60."
8290520,8298600," so then we do state render all right so we do state render do i need to clean the canvas i think i need"
8298600,8305320," to clean it just in case canvas uh fill with zero essentially right so this is going to be"
8306440,8310760," do you really fill it with zero or do i fill it with the background i don't quite remember i think"
8310760,8319480," uh in the rendering i do canvas feel with the background and the background is uh this thing"
8319480,8325560," i will have to actually bring these parameters to both of these places but i'll do that a little bit"
8325560,8333160," later at some point so we render this and i think so we need to do gel texture uh sub image right gel"
8333160,8341480," texture sub image uh right and there we go so this is going to be the target and uh gl"
8341480,8349160," texture 2d level is going to be zero we don't we're not going to have any offsets then uh we need"
8349160,8356200," to have width uh and then height uh the format um i forgot what's going to be the format do i have to use"
8356200,8362440," the format i'm going to use glrgb it doesn't really matter the type uh what's the type uh what's the"
8362440,8371240," type i think it's unsigned byte right gel unsigned byte and then i have to provide the pixels so it's"
8371240,8382120," going to be canvas uh as ptr as uh const uh gl void that's what we're gonna have in here and this thing will"
8382120,8389160," create this ship for us hopefully we'll see so uh let me see if it's going to be doing all that"
8392280,8402440," okay"
8417560,8422840," it's actually sustainable at uh at 60 fps i think"
8422840,8430440," yeah it's actually sustainable all right very cool"
8430440,8440680," does anyone have any questions about what's just happened on the screen"
8442920,8446760," does anyone have any questions about what we just did like"
8446760,8453960," it's pretty cool just happened does anyone have any questions about that cool that just happened"
8453960,8472760," yeah i created the texture on the cpu right right i literally did exactly what i said i created the"
8472760,8479320," texture on the cpu and i passed it to the gpu and the way i passed it is through the uh gl subtextual"
8479320,8482840," image right so it allows me to constantly update the currently bound texture"
8482840,8489800," so and yeah as you can see i just basically rendered and i say like get these bytes and update"
8489800,8495560," this entire thing and surprisingly it's fast it's sustainable 60 fps well i mean it looks smooth as"
8495560,8503720," uh i didn't expect it to be this smooth but it works so that's pretty cool that is extremely smooth"
8503720,8510280," i'm not going to lie so uh yeah does anyone have any other questions about the cool"
8510280,8519080," shed that we just did so uh we had a renderer so yeah we have a simulation module and the simulation module"
8519080,8526280," is uh completely platform independent seriously it's completely platform independent it doesn't care"
8526280,8532840," or what operating system do you use what api what graphics api do you use what sound api do you use"
8532840,8543640," this entire module doesn't care what it does uh it exposes three methods update sound render update accepts"
8543640,8549240," delta time basically the amount of time that has passed since the previous update so you're updating"
8549240,8557560," the simulation then it accepts a render method that accepts array of pixels and this state renders itself"
8557560,8567160," pixel by pixel into that array right so it renders itself pixel by pixel then it accepts a sound like it"
8567160,8573560," exposes sound method that accepts a buffer of samples and it renders the sound that it needs to play"
8573640,8580520," into that buffer so that way you can take that module and uh integrate it into any platform you want"
8580520,8589880," right so uh does anyone have any questions about this cool shed that we just did so here is another"
8589880,8597000," interesting thing you can render this entire uh video this entire simulation into a video file by doing"
8597000,8603560," render right so it will generate basically take all of the output of the simulation and dump them into"
8603560,8609560," raw video files right it dumps them into raw video files and you can view them uh separately i should have"
8609560,8614040," actually done uh slightly differently just a second i should have actually called this script right"
8614040,8622040," because then it will call ffmpeg to merge both of the files together right so you see you can hook"
8622040,8631880," it up anywhere so right now i hook it up into the renderer that saves it into a file right into a video file and uh audio file and uh audio file and then merges them together"
8631880,8637240," so uh so uh we'll need to wait a little bit until mfmpeg actually does all that"
8637240,8640040," right"
8640040,8647080," so if i do mplayer uh mp4 and that's the final result"
8647080,8656040," everything you see and hear right now was generated by these three methods"
8658040,8663800," so we update the simulation to the next frame we render the frame the sequence of these frames that"
8663800,8672600," you can see right we render them pixel by pixel and we generate a sound sample by sample 48 000 samples"
8672600,8679560," per second actually drawing the uh the sound waves that's what we're doing here and then what we did"
8679560,8686760," recently we actually ported the entire simulation into opengl plus pulse audio api we haven't integrated it"
8686760,8692760," with pulse audio api yet uh but we integrated the rendering with the pulse audio api so now we can"
8692760,8700040," do something like preview and uh this entire thing now is rendered in the real time into opengl texture"
8701960,8709560," you see we're using the same code to generate the video and to generate uh to actually play the simulation"
8709560,8716040," in real time with opengl texture does anyone have any questions about this cool shit that we just managed"
8716040,8716760," to pull off"
8716760,8726600," what's the simulation similarity i don't think it's simulating anything particular but it's just like"
8726600,8732520," bouncing things around just like trying to get something cool uh right"
8737880,8746840," so uh we hooked up the renderer into opengl texture uh now let's try to hook it up into the uh pulse audio"
8746840,8753880," right so let's also do the sound updates and whatnot so uh because i want to see how it will play out"
8753880,8756760," in uh like with them with the sound"
8756760,8763080," so you're playing the sound and it renders the sound away from it"
8765560,8772920," how to say that i'm generating the sound wave that's what i'm doing not just playing the sound"
8772920,8779080," i'm generating the sound wave completely from scratch um i don't know how to explain that it's"
8779080,8786760," just like have you worked with graphics api with the sound apis so with the sound apis uh you give them"
8786760,8795240," a buffer of samples and sample is basically like a pixel of sound if you know what i'm talking about"
8796120,8802280," right do you do you know what is a sample in in in terms of the sound api okay um"
8802280,8813320," what is the sound first of all what is the sound a sound is like a wave right so here is the wave uh"
8813320,8822120," and um basically sample is a specific value at any point of time of this wave right like this"
8824040,8830600," right so this is the sample it's like a pixel of sound so and we're generating sound by generating"
8830600,8834920," the sequence of these samples that's what we're doing uh one by one"
8834920,8846520," let's generate uh let's integrate with pulse audio um okay so i think i'm gonna take the buffer from the"
8846520,8859080," preview actually random so yeah we have to do it like that uh right so this is gonna be the uh where"
8859080,8868360," is the canvas where is the canvas okay so this is the sound and as we play the sound yeah we're gonna be"
8868360,8874680," doing that in a similar uh fashion i think uh we're gonna be doing that in a very similar fashion so we"
8874680,8887400," could do that and um so instead of this stuff we're gonna just basically ask the simulation uh right"
8887400,8896920," please feel all of that stuff in here oh yeah so we take the sound uh sound buffer then we give that sound buffer"
8896920,8910120," to this state and then uh i can just use samples like sound uh sound theoretically that should be it"
8910120,8916920," if i'm not mistaken so in the in the render how do we do things we first render the video okay so let's"
8916920,8925640," actually do it like this uh so we fill the canvas with zero we fill the canvas with zero um all right"
8925640,8933720," so here it is so we render this entire thing and we upload it to the texture all right then uh we uh"
8933720,8941720," fill the sound buffer and we play the sound then we update the simulation and after that we're effectively"
8941720,8946760," yeah so we're just displaying this entire thing so it's kind of resembles the original uh the original"
8946760,8953720," structure in here right so if i try to recompile this entire thing let's see how many errors we'll have"
8953720,8959160," so the delta time is effectively let's actually put the data times away here maybe i'm going to actually"
8959160,8966520," steal this kind of stuff uh from here so i can probably steal all that stuff from here"
8966520,8978520," yeah so this is more of a related to the rendering uh and here this is more of a global thing"
8979640,8987160," all right this is more of a global thing the sound sample rate so we already have a sound sample rate"
8987160,8995000," but we don't need that stuff uh okay so we have a width okay so it will tell me if there's something"
8995000,9002280," wrong of course uh previously defined so where was it defined uh 2027"
9005240,9014920," like this let's remove that anything else uh sample rate do we have anything else sample rate"
9014920,9026360," is that it okay i think we integrated the uh sound uh the pulse uh the sound with the pulse pulse audio"
9026360,9034120," so get ready so because it might turn out very loud right because i don't know if i introduced any bugs"
9034120,9039720," into the sound system so if you have headphones with like a loud sound take them off just in"
9039720,9042920," case as i run this application and let's see if it actually produces the sound"
9042920,9056120," okay it does produce the sound there are some bugs but it does in fact produce the sound that is"
9056120,9068120," you know uh you know uh what we hear in the original video um so it starts to clip a lot if you know what"
9068120,9068760," i'm talking about"
9068760,9078520," but holy shit it works we have the same simulation core that you can hook up into"
9079960,9082520," like a file renderer and real-time renderer"
9082520,9096280," i'm curious how synchronization works we don't really synchronize anything right now"
9096280,9102440," specific sample rate for the sound wave which is different from the image update right yes it is"
9102440,9107560," different we're not doing anything particularly special to synchronize anything i'm just allocating the buffer is"
9107560,9112680," equal to the delta time of the frame so and i'm filling up that buffer specifically"
9112680,9121320," so it of course yeah so there's nothing specific in in the way it's implemented it's just"
9121320,9126920," the conceptually this proof of concept fucking works right so"
9126920,9134600," the the cross-platform engine right so the thing is completely cross-platform it only exposes the way to"
9134600,9141000," update itself the render itself pixel by pixel and render its sound sample by sample and you can hook"
9141000,9147880," it up into different sources you can render hook it up into the file saver or into real-time thing it has"
9147880,9153880," bugs it has rough edges it doesn't handle synchronization but proof of concept here it works it's so"
9153880,9161960," fucking cool holy shit uh it's the same like thing and it just can do i don't know how to like i feel like"
9161960,9166280," i'm the only person who's excited about this stuff and maybe it's not even world being excited about"
9166280,9178280," so and yeah sure there's some video audio bugs but all of that can be basically smoothed out over like"
9178280,9184280," time and as you as you do this thing so yeah and now as you can see you don't have to wait"
9184920,9188600," uh like half of an hour to generate this entire thing"
9188600,9199240," can it render music not auto-generated what do you mean by that"
9207240,9218920," uh"
9233560,9240360," i will surrender"
9240360,9241800," so you don't have to do that anymore"
9241800,9249400," it's kind of interesting that"
9249400,9252600," i don't even know"
9254120,9264440," is it overwhelmed by it i think"
9264440,9270360," so i probably need to read more um source audio from outside the app"
9270360,9274040," you can source well i mean"
9276600,9281080," what do you mean can eat a render music not out well i mean"
9281080,9288680," i don't know how to explain"
9288680,9295560," it's easy to implement it's not implemented in our application"
9298360,9302680," i mean because it's not needed because that's not the point of the application"
9302680,9306040," but it's not that hard to implement because the music"
9306040,9309400," file music is just a file that contains"
9309400,9316280," sound waves the same sound waves that we generate not the same but it's it's the sound wave and instead"
9316280,9321160," of generating them you just send them from the file but why would we do that it's outside of the scope of the project"
9321320,9335320," okay so"
9335320,9347800," okay so"
9347800,9373240," i want to save a little commutable event"
9377800,9391800," uh"
9405960,9412840," uh does anyone have any questions any more questions about about this thing maybe some"
9412840,9418040," something you can find the source code in here if you're interested um like in the chat"
9418040,9420360," um so"
9420360,9422760," you can find the source code in here"
9422760,9429400," so there also you can go to the what's channel we have a playlist of"
9429400,9433160," of this entire project where we started it from scratch and"
9435960,9450200," uh"
9450200,9450760," so there was"
9450760,9456920," yeah to impact for you so this is how the project has been studied this is basically the fifth episode"
9457720,9461560," and uh you can watch how we develop this entire thing from scratch"
9461560,9465640," um so if if if anyone is interested"
9465640,9471880," is that is anyone interested"
9474200,9477960," why do you want to do that so let's make a small break um"
9477960,9486360," all right let's continue so uh i wanted to try one thing uh i wanted to try one thing"
9486360,9492200," i wanted to actually bring down the amount of squares we have in here"
9492200,9497080," right so i used to have i think like bounce method"
9497080,9506360," uh so it was like split uh bounce right so split actually every time you hit the wall it splits the"
9506360,9512360," rectangle in into right so and i used to have like a bounce method which basically does not do that"
9512360,9520680," right uh so and it also accepts orientation at which it's going to do this kind of stuff right so it's going to rectangle"
9520680,9528440," so and in here i'm going to just take that stuff uh all right so copy paste it in here"
9529080,9538440," uh and i'm going to only return one of them like the left one now there we go right so"
9538440,9548360," so i'm going to return that and that's going to be the bounce right so i think i'm going to say"
9548360,9558600," allow uh that code right allow that code uh huh and uh there we go so it seems to be compiling"
9559080,9565080," so now every time i call a split uh where do i call the split okay so here i call the split"
9565080,9569880," um so instead of calling the split i'm going to be doing like a bounce um"
9569880,9579080," i suppose uh erect bounce on the particular orientation oh and when i do the bounce"
9579080,9585560," uh i do not decrease the size of the rectangle that's quite important uh i do"
9587640,9595880," increase this uh the the note but maybe i should not increase the note at all as well"
9595880,9601400," right so let's not do that so essentially what we're doing we're just modifying one of those things"
9601400,9612120," uh which means that i can actually do something like mutable self uh and save on the lines a little"
9612120,9617560," bit not that it matters but it's just going to be more readable you know what i'm talking about so"
9617640,9625000," self is there any way to modify structures in a like a more immutable way if you know what i'm"
9625000,9635000," talking about like in haskell uh right rust um struct modification is there any special syntax defining"
9635000,9642760," uh how to modify struct instance in a function uh struct update syntax yeah yeah so struct update"
9642760,9648520," syntax because the functional programming languages like to have shit like that in an immutable man"
9648520,9653160," okay"
9653160,9668280," that's what i was talking about though i didn't think it's gonna make it more concise right uh so what we"
9668280,9679640," could do in here well uh we could do dy equal self dy minus right and then something like uh self"
9679640,9687800," okay so that's basically what i wanted to do in here you see um"
9690360,9694120," so it basically creates a completely new structure and this one is going to be for the x"
9694120,9703560," all right let's take a look at the errors and uh it's colons whatever syntactical nonsense"
9703560,9708520," doesn't matter uh remove this comma"
9708520,9711480," uh okay"
9713560,9716120," oh okay so we should not trust this article then"
9716120,9722600," okay so uh here we have that and uh maybe"
9722600,9726200," um"
9726200,9726200," uh"
9726200,9736040," rect area threshold i have a feeling that maybe the um"
9739000,9742360," pushing a new rectangle should actually perform this kind of check"
9742360,9744840," i think that's where it has to be uh performed"
9744840,9746760," right so"
9746760,9750920," we have new we have update"
9750920,9757400," uh and so maybe i need to introduce something like a new rect if you know what i'm talking about"
9762920,9766600," ah so what i want to have in here is basically a fan um"
9766600,9775640," push rect right so and it will accept uh mutable self and the rectangle that you want to push a new"
9775640,9782680," rectangle and it's going to perform that that specific check in there so you're not directly"
9782680,9788280," doing it if you know what i'm talking about right so this is going to be that so self"
9788280,9795400," rects len left than that and then the rect area is dead and that means we're pushing this rect"
9795400,9803400," so in here i don't have to do that anymore so it's gonna be self erect a push uh rect left and then"
9803400,9811560," right and that simplified this entire ship okay but i might as well also comment out this thing right i'm"
9811560,9823480," commenting now this thing uh and uh why as well uh so push correct can i do it like that i think i should"
9823480,9830120," be able to do it like that all right so we bounce and we push a new one in there okay"
9830120,9841240," okay is it gonna work is it gonna work now uh compilation where's the error uh immutable"
9841240,9848760," borrowed blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah uh so the one"
9848760,9855240," immutable occurs in here oh you already borrow the self oh for fuck's sake"
9855240,9867240," ah this is annoying"
9870120,9878280," okay okay absolutely correct quote by the way it's just like yeah"
9878280,9892280," it's just rust needs to be an annoying piece of of of course"
9894200,9895160," for whatever reason"
9895160,9900520," okay okay are you happy now good"
9900520,9904120," oh that was weird"
9904120,9907160," uh wait a second"
9907160,9909080," oh"
9909080,9913880," did it break everything by the way"
9913880,9918760," uh i think i think everything is everything okay by the way"
9919800,9926600," uh does anyone even watch me it feels like nobody's watching me because i don't have any feedback from the"
9926600,9935640," chat that's all uh so i don't know if something happened uh so i can see okay was there anything weird"
9935640,9936920," uh"
9936920,9940360," uh all right"
9944440,9946840," i don't know why i don't know why is it doing that that's so weird"
9946840,9947960," uh"
9947960,9954920," why is it doing this it's actually stuck"
9954920,9958200," but why is it stuck"
9961080,9961640," um"
9961640,9967880," oh i think so okay it's it's a different bounce"
9967880,9970920," so if it's a"
9970920,9974840," well it should work"
9974840,9979320," you know this is stupid"
9982360,9987080," this is stupid"
9987080,9990920," so self d y"
9990920,9993640," multiply by minus one"
9993640,9996280," right"
9996280,10000920," d x"
10000920,10005480," uh integer"
10005480,10006680," sure"
10011160,10011560," okay"
10011560,10017320," why is it stuck"
10017320,10017400," why is it stuck"
10017400,10022040," what the"
10022040,10026440," was it always i don't remember it being stuck"
10026440,10033480," but it's all"
10033480,10037560," man"
10038840,10039240," what the"
10039240,10041240," the"
10041240,10042200," okay so here's the rect"
10042200,10044200," um"
10044200,10045160," so"
10045160,10049800," bounced erect"
10049800,10052040," uh"
10052040,10054120," bounced erect"
10054120,10056520," well i mean"
10056520,10058440," uh"
10058440,10064040," i might as well push it right away i don't really need to check the caps or anything so"
10064680,10065720," i can just do it like that"
10065720,10065720," i can just do it like that"
10065720,10066760," uh"
10066760,10068360," bounced"
10068360,10069080," erect"
10069080,10072200," right so i don't need to check"
10072200,10072600," shit"
10072600,10075160," it used to work"
10075160,10078360," but it stopped it used to work what the"
10078360,10078760," fuck"
10078760,10081880," the fuck it it used to work"
10081880,10086920," i remember so if i render the video let's actually try to render this thing"
10086920,10093080," uh right it used to work perfectly so why did it stop working so is that"
10093880,10099080," is there any discrepancy between the preview and the actual rendering so that's the question"
10099080,10100920," um"
10100920,10104600," so let's see"
10116760,10120760," okay so that means the bouncing is implemented incorrectly"
10120760,10125480," so something is wrong with the orientation i suppose"
10125480,10136200," um"
10136200,10136200," so"
10136200,10138200," so"
10138200,10138200," so"
10138200,10151320," uh"
10151320,10159960," oh i remember i think i kind of remember"
10161160,10161880," uh"
10161880,10170840," i'm really tired"
10170840,10183240," okay so what if i don't put the right one"
10185800,10189560," i'm gonna not put the right one right so and"
10189560,10196200," well it becomes smaller every time but that's fine"
10196200,10202280," right uh but i don't want it to become smaller that's precisely what i'm doing so"
10205880,10208440," and that's what i wanted with the bounce though right"
10208440,10221480," is that what i need to do i don't remember like why split works but the bounce doesn't work so"
10221480,10226280," what's the difference between these two things why it doesn't work it's the same"
10226280,10232680," shit i do bounce right and essentially what i'm returning i'm returning on the left one i'm not"
10232680,10239560," returning the right one why does it work the fuck right i'm just returning the left one right"
10239560,10245080," not the right one and on top of returning the left one i'm not modifying it so that's one of the"
10245080,10249080," the things i'm doing that's the main difference in here right so"
10249080,10256280," why why doesn't it work so okay again on the on the left one not the right one um"
10256280,10265240," so no modification in here right so no any of that shit so on the left one it's a little bit verbose"
10265240,10271800," but that's kind of like otherwise otherwise it doesn't want to work for some reason uh so"
10271800,10277160," in here right so we have erect and on top of that i just do self erect"
10277160,10285560," um right push erect bounce"
10285560,10295720," bounce please for a particular orientation right so that should work why doesn't that work uh okay so"
10298120,10303400," useless okay bounce uh duplicate definition"
10303400,10311400," yeah so i'm gonna remove that thing in here right so i'm removing that in here"
10311400,10322600," now it worked what was the difference in here am i am i stupid"
10325320,10334280," okay well at least at least at least it works uh and now uh i wasted so much time and i still don't"
10334280,10341320," understand why the it didn't work um so i probably made a very stupid mistake somewhere and i don't"
10341320,10350680," understand where i made a mistake um i still don't see it i literally don't see the mistake but okay sure um"
10351240,10355800," whatever uh because i'm i'm tired i'm really really tired right now"
10355800,10362200," okay"
10378680,10389640," um um"
10389640,10391640," um"
10391640,10395640," um"
10395640,10399640," um"
10399640,10418600," um"
10418600,10420600," um"
10420600,10422600," um"
10422600,10435560," why did it become lower"
10435560,10440600," it became lower all of a sudden"
10440600,10449160," what happened what i mean did you hear something what did you hear i heard that it became lower"
10449160,10452120," um"
10452120,10457800," what was that what was that what was that oh yeah sound because you will react like there was some"
10457800,10463080," ear rape or something i don't understand uh that was weird but"
10463080,10470120," pitch dropped yeah so i don't know it shouldn't drop"
10472760,10475640," i don't know why i dropped"
10475640,10482120," so yeah"
10482120,10487640," we're starting to we probably have a huge bug in our"
10487640,10495160," mixing uh and this is a real-time preview right so you can preview this animation in real time or you"
10495160,10501560," can render this entire thing into a final video right and rendering into the final video final video does"
10501560,10503000," not require um"
10503000,10508760," any open geo or anything like that all right so we're just generating thing"
10510120,10513160," and that's it"
10513160,10523960," so let's take a look at the final video"
10533960,10539720," yep so it's generated by the same renderer right it's just outputted into the file"
10539720,10545480," this is a very cool exercise in software architecture"
10545480,10550360," this this entire thing is a very cool exercise in software architecture"
10550360,10553400," that you have a module that is completely independent from"
10553400,10561400," the output not only video output but also audio output and you can hook it up into different sort of"
10561400,10566440," syncs right you we hooked it up into the rendering the video which we implemented first by the way we"
10566440,10571480," first implemented the rendering of the video and then we hooked it up into the open gel pulse audio"
10571480,10576360," right so open your pulse audio probably won't work on windows because there's no pulse audio on windows"
10576360,10583240," but then this entire architecture makes it easy to port this kind of thing to windows right"
10583880,10588920," so i would call this entire um you know experiment a success"
10588920,10595000," simple bounce i'm gonna push that right into the repo"
10595000,10600520," all right"
10600520,10612600," i guess this is the last episode in the series because um yeah it's the last episode of the series"
10613880,10620040," i suppose hope the series for two impact for you were interested interesting uh"
10620040,10627080," hopefully maybe you learned something more uh i definitely learned a lot of things but that's"
10627080,10631240," that's the final episode i'm not going to be doing this kind of anymore that's for sure"
10632600,10636200," because it is extremely extremely tiring"
10636200,10643720," it is extremely extremely tiring so yeah thanks everyone for watching"
10643720,10650200," have a good one and i see you next time i don't know when i don't know where"
10653400,10671480," but they gotta go thanks for my unfortunately value you"
