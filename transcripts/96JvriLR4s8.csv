start,end,text
0,5420," Hello everyone and welcome to yet another recreation programming session with Amista Azuzin."
5420,11960," We continue developing this raycasting engine aka game. Right, so we can take a look at how it looks"
11960,18380," like. It looks actually kind of cool. I recently changed, you know, the colors and stuff like that"
18380,23260," so it looks kind of epic. When I'm streaming it's actually kind of slow, right? So as you can see we"
23260,30760," have 15 fps. The reason why it is so slow is because we're rendering without OpenGL, without WebGL,"
30760,36520," without any hardware acceleration whatsoever. We're rendering pixel by pixel into image data of the"
36520,42200," canvas because we're trying to be cool, right? So we're trying to be cool, we're trying to show off"
42200,47940," our math skills and shit like that, right? So we're trying to piece off the web devs, right? So look what"
47940,54440," we can do. You can't do that. You don't even have a CS degree. Fuck you. So yeah, anyway, so to actually"
54440,60060," speed it up a little bit while I'm streaming, I can maybe reduce the resolution. So let's actually put"
60060,64340," something like 30. Let's put something like 30. Let's actually refresh this kind of shit and it"
64340,68260," should be a little bit faster hopefully. Yeah, it's actually a little bit faster. So around like maybe"
68260,73780," even 20. For 20 it's going to be like maybe 60. Yeah, there we go. That's actually pretty good."
73780,78200," It's actually pretty good and it's actually super fast. Look at that. Look at me go. And hopefully"
78200,82960," at some point I'll turn it into a game, right? So at some point we're going to turn it into a game."
82960,89460," So people already started to spam pull requests as you can see. So this is what I, this is what happens"
89460,93780," every time I start new series and for whatever reason forget to close my source code."
96960,102200," So yeah, that's what happens. People start to spam with pull requests. So anyway, so one of the pull"
102200,106900," requests that people submitted is actually kind of interesting. So it's called at hot reloading,"
106900,111720," which caught my curiosity. So let's actually take a look at this pull request by auto 200."
111720,117120," And it's not really that big of a pull request, but it does something very interesting. So let's take a"
117120,123680," look at it. So first of all, it introduced the dev server dot JS, some sort of a dev server."
123680,130400," And what it does, it actually creates a web socket server. Look at that. It creates a web socket server."
130400,136480," It listens to the connections, right? And stuff like that. And then it watches the files,"
136480,143120," the development files. And if they change, it actually sends to the client command reload, right?"
143120,149200," And on the, on the client, we're actually connecting to this server. If we receive reload,"
149200,155440," we reload the entire page. And it's not even that much with the new dependencies. So the only dependency"
155440,160560," that we had to add is a web socket is a development dependency. And it's kind of cool. So for some"
160560,168800," reason, they enabled incremental build for whatever freaking reason, we literally have one file of"
170080,177520," for the entirety of the game. Incremental build is when you have a lot of small files. So to not"
177520,181520," rebuild all of them, you rebuild only the ones that changed. And it's kind of like pointless, but"
181520,194320," okay. So whatever. Anyways, so let me go ahead and maybe clone this pull request and maybe even accept"
194320,200800," this pull request and see how it works on our machine. So let me actually find the clone in"
200800,207680," here. Super quick. So here's the clone and we'll have to add that clone to my system. All right. So"
207680,214480," maybe I'm going to close the ray casting. So my laptop today is especially slow because it is hot,"
214480,220560," right? So it's not like I'm streaming. It's also pretty hot in here. Right. So can I just add a new"
221280,226720," origin? I'm going to add origin 200. There we go. So, and this is going to be the remote URL."
226720,232160," All right. So let's actually fetch the changes. So I suppose we change it. So we're updating this"
232160,238320," and typing. Okay. So let's see. Aha. So there we go. So there is a hot reloading branch. So if we switch"
238320,242000," to the hot reloading branch, so what we're going to have in here, so I have some local changes. So we'll"
242000,247680," get rid of the local changes, right? Because I reduced the resolution. So let's actually now switch to hot."
247680,254240," Well, I want you to switch to hot reloading. Yeah. So let's create a new branch. Yeah. There we go."
254240,261840," So now we have hot reloading. So the interesting thing about the hot reloading is that it also modified,"
261840,269680," the pull request also modified the watch.js. So now we are running three things simultaneously in here."
269680,276000," We are running the TypeScript compiler in a watch mode. We are running the HTTP server with all of the"
276000,280560," caches disabled and stuff like that. So there's quite a few parameters in here. And we're also running the"
280560,290240," dev server, right? So we're kind of slowly building up our own framework. So we're going to create our own"
290240,296080," web framework. We're going to post it on Hacker News and get on top of the Hacker News. Holy"
296080,302800," fucking shit. We're going to get so many fucking internet points. Holy... I'm sorry. But this is"
302800,309760," basically the the culture of web developers that I see. So this is basically web culture, isn't it?"
309760,315120," Right? So it's just like they're implementing something like this and they post it like holy"
315120,319520," fucking shit. This is going to be the next big thing, guys. This is going to be the next big thing."
319520,326480," So yeah, that's what we're going to do. That's what we're going to do. Anyways, so we have a dev server,"
326480,332800," right? So let's actually restart the watch mode. So run watch and see if it's going to work at all."
336880,342640," Did you guys see that? Okay, I think I forgot to install dependencies, right? So it actually crashed"
342640,347760," with the exception. It's kind of funny how it's just like instantly crashed with the exception."
347760,354960," So just a second. Let me only run the dev server, right? So go ahead and just run only the dev server"
354960,360160," because I want to see what the fuck is going on there. Yeah, so we cannot find the module ws, right?"
360160,363840," So that's basically what happened. So let's actually quickly install the new dependencies that we're"
363840,371120," editing there. Right, so zero vulnerabilities. Look at that. We didn't get hacked today."
371120,374880," We didn't even get hacked today because as you can see, zero vulnerabilities."
374880,381120," You can trust that, right? So if npm says there's no vulnerabilities on and in the packages,"
381120,388000," that means it's true. That means it is true. So anyway, let's go ahead and enable back all of that"
389520,393520," all right. So and hopefully that is going to work. So watch."
393520,400000," Seems to be working. Seems to be working. No exceptions has been seen so far."
400000,405440," All right. So let's actually open localhost 6969."
407840,416320," All right, so it's pretty slow right now. But now if I go ahead and try to reduce the resolution,"
416320,423120," so let's actually set the screen factor to 10 and it automatically reloaded. I didn't even do anything."
423120,431440," Okay, so I'm gonna show you this as a proof, right? So I change it to 20. I save it and I switch to the next window."
434240,440400," It refreshed itself. Holy fucking shock. It connected to the server."
440400,445360," Server notices that the file changed it and sent it back and it reloaded. Holy fucking. This is the"
445360,451760," next big thing, guys. We're gonna build an entire framework out of that. All of these startups are"
451760,457600," gonna use this shit from now. Anyway, so but here's the problem. This is not really a hot reloading,"
457600,464000," honestly. This is not really a hot reloading because it refreshes the entire page. Like, for instance,"
464240,470240," I want to stay here. And then in here, I want to kind of change the color of the floor. I don't really"
470240,476400," like the color of the floor. The color of the floor fucking sucks. It fucking sucks. Okay, I'm gonna go"
476400,483520," into the scene, right? So where is the scene? And maybe I'm gonna just like for the floor, I'm gonna add"
483520,489120," a little bit of the... Let's remove the blue component, right? So I've removed the blue component. I want to just"
489120,496560," look how it looks like. And it actually teleported me. Why the fuck this motherfucker teleported me? I didn't"
496560,503680," want it. I wanted to look at the scene from that specific angle. Wait a fucking second. This is not hot reloading."
505600,511920," This is not a fucking hot... It just refreshes the entire thing. It's a cold reload. Yeah. Is that the"
511920,516800," term, by the way? I think that's the term, right? So it's a cold reloading when you just reload the entire"
516800,524800," thing. But yeah. So the thing about game development and actually any kind of creative development is that"
524800,530560," you want... When you hot reload, you want to preserve the state of the application."
531520,537440," Why you want to do that? For example, if you have a very complicated state, right? So you're playing"
537440,542960," your game, you're wandering around, like looking for the bugs and stuff like that. And you notice some"
542960,548640," little things. For example, the color of the particular box doesn't match the color of the background,"
548640,555120," so it looks like shit. You want to quickly modify it. But getting to that state of the game, getting to this"
555120,561280," camera angle and stuff like that, it takes a lot of work. So you don't want to modify, restart and go back and"
561280,568400," check. You want to just modify, reload the code and instantly see without like restoring the state of"
568400,576560," the game what changed. So it allows you to maintain this creative flow. You know what I'm talking about?"
576560,583440," An ability to just tweak a lot of small parameters while hot reloading and retaining the state of the game"
583440,590960," is very crucial for maintaining this creative flow. And without maintaining creative flow, your development,"
590960,596480," your development of the game turns into a nightmare. It's like you're constantly breaking out of that floor."
596480,602400," It's very painful. And it's also very demotivating. You can't really continue doing all that."
602400,609200," So yeah, this is not really hot reloading. But the whole idea, the whole setup is actually kind of cool, right?"
609200,612080," So with the web socket and stuff like that. So maybe we're going to retain that."
612080,619520," But personally, I would like to do something that I did in Panim or Musualizer, right?"
619520,624800," So do you guys familiar with this kind of things? Right? So Panim is just basically my own,"
624800,634320," you know, animation framework that I post developing recently. But anyway, so it allows you to do different things."
634320,640400," So can I actually run build? What kind of things do I even have in here? So what kind of animation?"
640400,644880," So I have busy occurs. I have, I have this kind of thing, right? So there you go."
644880,652320," Yeah. So this kind of animations. And what's funny is that it allows me, for example, I don't really like"
652320,660640," that this thing is red. So what I can do is, so I stopped the animation, as you can see, right?"
660640,668240," I stopped the animation at some particular point. And maybe what I want to do now is go into the square"
668240,677280," and find where I render all of those things. Or maybe I just don't like that those things are like"
677280,682160," rectangles, right? So maybe that's what I don't like. I don't like that they are rectangles."
683280,689440," One of the things I can try to do maybe is to make them like frames, right? So as far as I know,"
689440,701760," in Raylib, in Raylib, do I have Raylib in here? I do in fact have Raylib. I do have draw rectangle lines."
701760,708960," I think, I think that's how it's called. Like draw rectangles lines. Yeah, extend it."
709600,716640," So here now I can draw the boundary. I can draw the line thickness. Let's put something like 10."
716640,723440," And the color is supposed to be like this kind of thing. And here's the thing. Now I can recompile"
723440,732960," the whole thing. Hopefully. Let's see. Let's see. Oh yeah. That fucking killed everything."
732960,738720," Because I run my thing in the compilation mode. So just a second. So it's not supposed to happen."
739280,745440," Right. Because I just run it. Yeah. So now, as you can see, it is plain. Right. So, but then I..."
745440,752800," I just keep pressing the exit button. I'm sorry."
756240,762000," So now it should not stop. Everything's fine, Chad. Everything's fine. I just do it incorrectly."
762000,768560," Right. So I stopped the animation. Now let's go ahead and quickly switch"
769440,773920," how we render this entire thing. Right. How we render this entire thing. And I'm going to"
773920,783120," rebuild it. And then, yeah, now it is like that. And while it is plain, I can modify it. And I'm"
783120,788560," not restarting the whole application. Right. I'm not restarting the whole application. I'm just"
788560,793600," recompiling it. And then it keeps running. But then it changes how it renders those things."
794240,798720," See what I'm talking about? It retains its own state. This is what I'm trying to do. Right."
798720,802880," So this is what I actually want. This is what I actually want. So this example was not particularly"
802880,809200," great. Right. But I was trying to demonstrate what exactly I want from this entire thing. So how can"
809200,817840," we implement that? Right. So the main idea, the main idea of hot reloading of anything is that you have a"
817840,827600," state. You have some sort of a state. And you have the code that transforms this state. Right."
827600,833280," So let's say that state is some sort of a variable. And code is some sort of a function that you usually"
833280,842320," call on the state. Right. And that code transforms the state. So that code comes from some sort of a"
842320,848240," module. Right. So you basically included the script and the code was there. And you created this state"
848240,852880," somehow. So essentially what you want to do, when you're hot reloading, when you're hot reloading,"
852880,861920," you want to load a new version of code, maybe something like code 2. Right. And then quickly replace the"
861920,870240," code 2. Right. So quickly replace the code, the original code with code 2. And continue executing code state"
870240,877600," without touching the state. This is sort of like a high level of idea of how you do that. The specific"
877600,884240," details will vary depending on the environment, the language, the technology, the API, and stuff like that."
884240,891760," It doesn't freaking matter, honestly. The specific details don't really matter as much as this entire idea."
891760,898240," You have state, you have state. You have code that transforms the state. You want to hot reload something,"
898240,904720," you hot reload, you replace the code function, but you retain this state. So always there is a question"
904720,911280," like what if the new version of the function, the code 2, expects a different layout of the state?"
911280,917680," Right. So in that case you can do a variety of things. You can maybe implement some sort of a migration scheme"
917680,925280," that identifies the version of the state and migrates it to the next version of the state. Or we can say that if the"
925280,931920," new version of the code throws an exception for whatever freaking reason, we just do code reload."
931920,937040," So in case of a JavaScript, I think this is the easiest thing to do. It's a little bit more complicated"
937040,941520," with C, with low level languages, right? Because there's no exceptions in there and everything is so"
941520,946480," low level, right? So you have to be super careful with this kind of stuff. But since this is a dynamic"
946480,951600," to a language, we can do something about that, right? So we can do some kind of stuff about that."
951600,958000," And in case of a JavaScript, the most straightforward thing would be maybe, I don't know, just like"
958000,965120," download the new version of the script, evolve it, put it into the evolve function, right? And that gives"
965120,970480," you the new version of the function and just replace it and stuff like that. Or we can try to do something"
970480,978400," with modules, right? Because recently, not really recently, like, again, okay, okay, guys, guys, guys,"
978400,986720," guys, guys, listen, listen, listen. I'm a veteran web developer. I was programming JavaScript when"
986720,994400," Internet Explorer 6 was the main browser of everyone at home, basically before you were born."
995680,1003360," Okay, I was already programming in JavaScript and I was already developing WebApplicate, okay? I'm a veteran"
1003360,1013280," web dev. ES6 modules that were added to browser, it's a recent feature for me, okay? It was it was"
1013280,1022720," added yesterday. It was added yesterday. Yes, it's a fucking recent feature. So anyway, recently,"
1023760,1031600," browsers added this ES6 module things, right? And maybe we can do something with them, right?"
1031600,1036800," Maybe we can do something with them. So because they allow you to, like, you know, import the modules"
1036800,1041920," and stuff like that. So there's very interesting functions, like a dynamic, dynamic import or something,"
1041920,1052160," like GS dynamic import. Maybe we can even, maybe we can even look at that in, in a TypeScript or something"
1052160,1059600," like that. So it's sorting, array casting, index TS. And I know that there is import in here, which I can"
1059600,1064880," try to just, oh, I can't even do that. So TypeScript doesn't allow me to go there. But anyway, so this is what"
1064880,1074000," I'm talking about. Can I do dark theme? Let's go. So we have dark theme, everyone. Look at that. Isn't that a progress?"
1074000,1081280," Right. So something like this. There's a very interesting function. So it allows you to, yeah, it's a dynamic"
1081280,1087440," import. It's a function-like expression. It's not even function. That's very interesting. That's a very"
1087440,1093600," interesting wording that they choose in here. It's a function-like expression. So that there is no such fun,"
1093600,1099680," there's no import function. There's literally no import function. It's a function-like expression."
1099680,1104960," That's probably why I can't find the definition of import in TypeScript. Like I'm trying to jump to"
1104960,1109920," the definition of it. Like I can't do that because there's no such function. It's a function-like expression."
1109920,1115280," So that allows loading ECMAScript modules asynchronously dynamically into potentially not"
1115280,1121760," module environments. Right. So, and this is something that we can try to do. So, and the idea is going to be"
1121760,1132240," the following. The game is going to be a module that exports a function that creates a new state for the"
1132240,1140480," game, new fresh state of the game, and a function that is supposed to be called on each frame of the game"
1140480,1148880," with that state. Right. On each frame of the game with that state. And then when it's time to hot reload this"
1148880,1158480," entire thing, we just call import again, getting a new version of the module, throw away the previous"
1158480,1167040," module and keep using it on the previous state. So that's my basic idea, high level idea. I don't know"
1167040,1172720," if it's a good idea. I don't know if it's going to work out. My hypothesis, the problem we're going to"
1172720,1177920," share with my experience is that probably something with the browser caches. Right. So I'm pretty sure"
1177920,1184800," these freaking asshole browsers are going to cache the modules. I like, I fucking know them. These"
1184800,1190240," asshole browsers are going to freaking cache the module and I won't be able to easily hot reload it."
1190240,1196320," But we can always try to do the trick where you maybe add this a little bit of a garbage,"
1196320,1202960," garbage, you know, into the get parameters. Right. So garbage, garbage, something like that. Right."
1202960,1208000," And we're going to be regenerating that garbage every time we do hot reloading. So to trick this"
1208000,1214320," asshole cache into, you know, loading the new version and stuff like that. So that's basically my idea."
1215120,1222480," We do a little cache trolling. Yeah, exactly. Right. So that's the plan for today. Chat. Sounds good."
1222480,1230000," Sounds Gucci. Sounds what? Tamaguchi. Let's go. Using cache headers could also work. Sounds good idea. Like,"
1230000,1235040," yeah, sounds like a good idea. So anyway, I think I'm going to actually merge this entire thing. So I think it"
1235040,1242800," looks fine. Uh, right. So, um, so we're going to keep it as sort of the base because we definitely will need"
1242800,1248720," uh, this, uh, web socket server and stuff like that. Um, right. And we're going to just basically build on"
1248720,1257280," top of that. Uh, looks good to me. Uh, thank you. Boom. Right. So I'm going to merge that right into the repo."
1258480,1264800," Let's go. Chat. Let's go. Let's fucking go, mate. Let's fucking go. All right. So let's actually"
1264800,1272640," fetch the latest changes and maybe actually, by the way, just the second chat. That's very important."
1272640,1279360," There's something weird about GitHub is that it actually doesn't load the divs for index.js,"
1279360,1284480," probably because they're too big. So I just want to make sure that in all of these unloaded things,"
1284480,1292000," there's nothing fishy going on. Uh, yeah, I suppose everything's fine. I suppose everything's fine."
1292000,1300640," Okay. Okay. Right. So let me get rid of that stuff and I'm going to go to the main, uh, and I'm going to"
1300640,1307360," just like do it like that. Uh, so we fetch the latest changes. We're going to merge origin, uh, master,"
1307360,1313280," not master, main. These days it's supposed to be called main. Uh, the master branch has been canceled."
1314160,1320080," So now you're supposed to use main. Okay. So how are we going to start with all that? I don't want to"
1320080,1326560," actually go in, uh, like, and implement all of that on top of the existing game because it's quite complex."
1326560,1332320," Honestly, it's already like almost 600 lines. It's not that big, but I mean, I don't want to be messing"
1332320,1337600," with this kind of stuff because none of that was really developed with, developed with hot reloading in"
1337600,1343600," mind, unfortunately. Um, maybe because at the time I wasn't not treating that seriously and didn't want to really"
1343600,1348560," make a game out of that, but I'm not sure. So what I want to do, I want to actually create like, um, like"
1348560,1355280," a copy of the center. I think I want to have like a smaller and simpler interactive application. And I'm"
1355280,1361040," going to implement this kind of stuff for that. I used to work on a JS code base, which cached files on the"
1361040,1368960," server side. So adding garbage as diverse to, uh, query string still, um, returned old file content. Yeah. But in our case,"
1368960,1375600," we have our own development service server, uh, and we actually explicitly said that do not"
1375600,1381440," do any caching. So I think for, in our case, adding garbage will work. Right. But, but in your case, yeah,"
1381440,1389440," obviously, usually, uh, in enterprise code basis, like there's a lot of things like that beyond your control and it's"
1389440,1398800," extremely annoying. So I do understand that. Luckily, luckily we have full control over this entire thing,"
1398800,1404160," so we can do all the things in here. I've seen hash has been, uh, appended to the query string."
1404800,1412240," Not also a good idea. Yeah. So some sort of hash, um, anyways, um, so kind of interesting that the"
1412240,1417440," amount of com of the commands that we run in here grows and grows, right? So I hope it's not going to"
1417440,1424880," be too complex in the future. All right. So what I want to do, uh, I want to copy the index.html. So how"
1424880,1430160," we're going to call this entire thing? I'm going to call it hot.html, right? So, or maybe even hot reload,"
1430160,1437760," because we're going to be testing hot reloading in here. Okay. Uh, right. Hot, uh, reloading,"
1437760,1444400," hot reloading in type script. There we go. So controls WSDA, blah, blah, blah. So this is the game."
1444400,1451200," And here we're just including index JS, right? So we're including the index JS and I'm probably going to"
1451200,1459280," do hot, uh, reload the JS. All right. So, and let's actually create a hot reload TS. So, uh, so it's sort"
1459280,1463760," of like a parallel project that I have in here, right? So it's kind of like a game, but it's,"
1463760,1469280," it's in, in a parallel universe. Uh, so where I can experiment with this in that thing. So,"
1469280,1474640," and obviously we're probably going to have just like an asynchronous function in here that we call,"
1474640,1483920," uh, right. So in here, I'm going to do hello from hot, uh, hot reload, like so. And I'm going to"
1483920,1488640," wrap this into, I think I'm going to call it. And there we go. I think we're, we're Gucci and"
1488640,1495040," Tamaguchi. Okay. So here's the hot reload.js. Uh, yeah. What's the target we're compiling to?"
1495040,1503520," What's the target we're compiling to? Target ES 2016. Okay. So maybe I should actually pick, um,"
1503520,1508960," like a fresher target, right? Because it's kind of old, so it doesn't have these kind of features."
1508960,1515600," So it needs some sort of special avoider, uh, a waiter, uh, but it's fine. Whatever. It doesn't"
1515600,1523760," really matter. Okay. So let's go ahead and open hot reload HTML and see what's going on in there."
1523760,1530320," All right. So nothing really happened in here. Let's take a look at the dev tools. Uh, hello from"
1530320,1538880," hot reload. Look at that. Look at that. Everything is set up perfectly. All right. So hot reload TS. Uh,"
1538880,1545680," so here we need to actually get the canvas, get the context and so on and so forth. Right. So I think I"
1545680,1552720," can copy paste some stuff from the main game. Uh, all right. So yeah, here it is. So as you can see,"
1552720,1557360," the first thing we do, we get the game and we check that the game does in fact exist. If it doesn't exist,"
1557360,1562000," we just throw an exception, nothing particularly special. Then we initialize the size of the game."
1562000,1568240," So as you can see right now, the size of the canvas is not initialized. It's very, very small. Uh, right."
1568240,1575920," So you can kind of see it. So here, this is 300 by 150. So this is not ideal. So in here, it's rather big."
1575920,1581600," Uh, I wouldn't say it's super big, but I mean, it's fine. Uh, yeah, there we go. So now the canvas is"
1581600,1586560," actually much bigger, which is good, which is Gucci. Uh, and the next thing we try to do,"
1586560,1592880," we're trying to create the to do com, uh, context. There we go. So, and once we get the 2d context,"
1592880,1598960," we can try to fill erect, uh, and let's actually fill erect with, I don't know, some sort of bright color"
1598960,1605440," to confirm that everything is working as we expected. Uh, so let's do the canvas with CTX canvas height."
1606080,1611120," Right. So, and maybe we also want to do fill style and let's actually use the red color"
1611120,1618320," and let's take a look. Uh, is that red? Oh, what the fuck? I actually did the oopsie doopsie. Yeah,"
1618320,1624000," there we go. So this is right now. Okay. Everything seems to be working correctly. So one of the things"
1624000,1629840," we want to do, we want to have like a interactive application, right? Not really interactive, but I mean,"
1629840,1634000," something that plays animations and stuff like that. So how are we going to, uh, how are we going to"
1634000,1640320," organize the animations? So we're going to be using the require animation frame. So the first frame is"
1640320,1646400," actually going to be an empty frame. And the purpose of the first frame is to get the previous timestamp,"
1646400,1654160," right? So, because we don't really know the timestamps in absolute values. So we just skip one first frame"
1654160,1659840," to obtain the previous timestamp. So we know the delta time, so we can play animations and stuff like that."
1660400,1666320," Right. So, and after that, after that, we finally have, uh, frames. So as you can see,"
1666320,1672720," the next frame that we schedule is the frame, uh, from the frame function like this. And within that"
1672720,1678240," frame, the most important thing we do, we instantly compute the delta time that is going to be used"
1678240,1684080," throughout of the frame for animations. Right. And then we also remember the previous, uh, timestamps so we can"
1684080,1689920," compute delta time in the next frame that we schedule at the end of that frame in here."
1689920,1693280," So, and that's how we're going to be playing animations. So this is where you're supposed to"
1693280,1699360," play all of these animations. So, um, okay. So how are we going to be doing all that? So let me maybe"
1699360,1708880," move the cleaning of this entire stuff to here. Let's say that the color is going to be something like,"
1709440,1717120," uh, 80, 80, 80. Right. So this is what I want, but, um, let's just create a moving circle."
1717120,1724640," Uh, drawing circles with the canvas is kind of a pain in ass. So yeah. So let's actually grab a function"
1724640,1731120," that does that from the game. So it's going to accept the context and it also accepts the vector,"
1731120,1734160," right? So in our case, we don't really have vectors in here. So what I'm going to be doing,"
1734160,1740800," and I'm going to be actually accepting maybe, uh, like X and Y and Y, uh, something like this."
1740800,1745120," Maybe I can inline this entire stuff, right? So let's actually inline this entire stuff,"
1745120,1751440," because I feel like the compilation is not going to work, uh, properly if I define it like globally"
1751440,1758080," somewhere there. Um, so in here, so what's going to be the position? I suppose we can place the position"
1758080,1769360," somewhere at canvas width divided by two, uh, canvas canvas height divided by two. The radius is going"
1769360,1776560," to be, uh, radius is going to be, let's say maybe something like 100. And that's about it. I think"
1776560,1782880," that's everything that we want to have in here. So it is going to actually render this entire thing at the"
1782880,1788160," center, but it didn't because we also need to set the style of the rendering. Let's actually set it to"
1788160,1793680," red. So do we have a, yeah, there we go. So we've got a circle at the center. We've got a circle at the"
1793680,1802240," center. Isn't that good? Isn't that Gucci? Isn't that freaking Tamaguchi? Hmm. Okay. This is pretty cool."
1802960,1810640," Uh, so let's define maybe X and Y. The maybe position X is going to be around like, let's put it at, uh, at zero."
1810640,1819920," Maybe I want to have a radius actually somewhere here. So I can say that, uh, yeah, the position is a radius"
1819920,1827360," and position Y is also a radius. So then I can say that the position of this thing is X"
1828320,1835680," and the position of this thing is Y. So, uh, we also need to have the velocity of this entire thing."
1835680,1841360," So the velocity is going to be, um, let's say it's going to be 100, right? So, and Y is also going"
1841360,1846400," to be 100. So, and what we're going to be doing, we're going to be updating the velocity, updating the"
1846400,1852400," position according to the velocity. So position X is going to be equal to, uh, or plus equal velocity"
1852400,1858320," X multiplied by delta time, right? So repeat this entire thing for Y as well. Uh, there we go."
1858320,1862160," So we have this kind of stuff. So now we should have the thing moving."
1862160,1868720," So the thing is moving, right? So, but it was going to go outside of the thing, right? So let's actually"
1868720,1875840," do the DVD stuff, right? Where we bounce off of the, uh, off of the edges and stuff like that. So to do that,"
1875840,1884080," let's actually create maybe a new position X, which is basically, uh, position X plus velocity. And the"
1884080,1892160," same thing is going to happen to, uh, Y new position Y, and this is position, uh, Y plus this entire thing."
1892160,1899760," So now we have to check whether the new position is actually, uh, a valid one or not, right? So essentially,"
1899760,1910400," if new position minus the radius goes somewhere below the zero or, or new position plus the radius"
1910400,1919200," goes outside of the screen, right? So greater or equal to the CTX canvas width. So this is not a valid"
1919200,1925440," new position. So to, because of that, we're not going to assign new position to the current position,"
1925440,1930880," but we're going to change the, um, the direction of the velocity, right? So it's going to be minus"
1930880,1937760," velocity X. If it is valid one, what we do, we just say position X is a new position Y, uh,"
1937760,1943280," a new position X. Yeah, there we go. So I'm going to, we have to repeat that for all of these things,"
1943280,1948640," right? So, but we have to just replace X with Y, boom. And we also have to replace width with height."
1948640,1955200," Could replace width and this is height. There we go. All right. So that should make it bounce off of"
1955200,1961280," the edges. We can also maybe speed it up a little bit. So it reaches the edges a little bit faster."
1961280,1967760," Uh, and let's see if it's going to work. Boom. Um, it's a little bit lagging, surprisingly,"
1967760,1973680," but I mean, it's because I'm streaming and stuff like that. So yeah, we've got the thing and I want"
1973680,1981520," to be able to hot reload this entire thing without restarting the entire state of the page. For example,"
1981520,1987040," I want to quickly change the core of this entire thing because I don't really like the red, right?"
1987040,1992960," But I want the thing to continue going. How can I do that? That's a very interesting question. And this"
1992960,1999280," is what we will try to maybe address today, right? Because again, I'm not a JavaScript professional."
1999280,2005520," I'm not a JavaScript guru. I know nothing about this language of gods, right? That you have to spend your"
2005520,2010640," entire life learning. So I don't fucking know. Maybe we're not going to succeed today, but I'm going to"
2010640,2016240," try and I'm going to try. So, um, the first thing I want to do, if we're going to be going the, uh,"
2016240,2022880," like a dynamic module loading route, it only makes sense to move the entirety of the logic of this sort"
2022880,2030080," of animation to a module, right? Let's go ahead and do that. So I don't fucking know. Um, so yeah,"
2030080,2037840," we'll go ahead. Um, so how are we going to call this entire module? Um, maybe, um, let's call it DVD."
2037840,2043520," TS. Uh, right. So, and how do you even do modules in TypeScript? I forgot."
2043520,2048720," JavaScript modules. So you're supposed to just like define a bunch of things and supposed to just"
2048720,2054960," export them. Uh, right. Let's actually define maybe something like a state, right? So maybe"
2054960,2060240," it's going to be an interface. Uh, so this is going to be state, right? So this is a state and here we're"
2060240,2066160," going to have a position X, right? So this is the position X, which is a number position Y, and, uh,"
2066160,2074640," we're going to have a velocity in here, right? There we go. So, uh, let go. So this is kind of stuff,"
2074640,2082880," kind of this kind of stuff. So now, uh, what if I export, uh, now a function create state."
2082880,2088080," I don't really want to be using classes right now because I don't really know how classes are going"
2088080,2093040," to react to literally replacing the module. So because of that, I'm going to be just like sort"
2093040,2099120," of emulating OP and just see how it's going to go, right? So here we're going to return the state,"
2099120,2102000," right? So in this entire thing, we're going to say, okay, so this is the object"
2102560,2108720," and initially it is going to be, yeah. So as you can see, the initial state is this,"
2108720,2113280," right? The initial state is this. So let's actually literally copy it in here"
2113280,2120560," and use a little bit of an emacs magic, a little bit of an emacs magic to just put it like that. Boom."
2120560,2124960," There we go. So the only problem that we have in here is that we don't really know the radius."
2124960,2136800," Let's make it a constant radius. So let's make it sort of like a global constant, right? So this"
2136800,2141520," is what we have in here. Uh, is everything Gucci? Is it? Yeah. Everything seems to be Gucci and"
2141520,2144640," everything seems to be the . If I put like a compilation error, is it going? Yeah. Is"
2144640,2149760," this going to complain? Perfect. Perfect. Perfect. Okay. So what another function that I want to export in"
2149760,2158720," here, I want to actually, uh, sort of do next frame, right? So maybe, um, let's call it update state."
2158720,2164720," And this thing is going to accept this state, right? So everything is passed by reference in JavaScript."
2164720,2169840," Well, which is technically not correct, but I mean, in, in this case, the, if the state is the object is"
2169840,2174400," going to be basically passed by reference, whatever. Uh, right. So in here, we're going to accept the delta"
2174400,2180000," time or right. So, and this is going to be number, number is not passed by reference, right? So, and"
2180000,2185920," essentially, this thing is just going to modify the state, right? How is it going to be modifying the"
2185920,2190960," state? It's going to be modifying it like that. Uh, all right. So it's going to be modifying it like this."
2190960,2200560," Interestingly, um, we also want to be able to modify how this entire thing is rendered, which implies,"
2200560,2207680," which implies that this entire thing should also accept the CTX. Have you thought about that yet?"
2207680,2211360," Have you thought about that? I didn't thought it. I didn't think about that. I didn't thought about that."
2211360,2220720," So, you know, double, double passed when the event happens so far in the past, you need double passed,"
2220720,2225120," right? So I didn't thought that this is going to be the case. Uh, right."
2225120,2230800," I'm running out of water, by the way. I'm running out of water. Anyways,"
2230800,2239920," so where is the hot reload TS? And let's copy paste the entirety of the scheisse in here, right?"
2239920,2244880," So I'm literally going to copy paste it in here. So is it going to be complaining about something? Uh,"
2244880,2252000," probably not, honestly, probably not. But if I enable flight check mode, it is complaining about"
2252000,2257840," about the lack of pose X and so on and so forth, because it's within the state. Let's quickly replace"
2257840,2264480," pose X with state pose X. Boom. So is it complaining? It's not complaining anymore. So let's replace"
2264480,2273200," vel X with state vel X. Boom. Uh, it is not complaining. It's hanging. Motherfucker hanging. Okay."
2273200,2280800," So now let's replace radius with, uh, just a capitalized radius. Just capitalized radius. There we go."
2280800,2292960," All right. So, and now pose Y, uh, state pose Y. Boom. All right. And I'm going to replace vel Y, uh, state"
2292960,2301920," vel Y. Boom. Okay. So now this entire thing is basically a module, right? So this entire thing is"
2301920,2309920," basically a module. I wonder if, okay, so DVD.js created this kind of thing. Uh, this is kind of bad."
2309920,2318080," Is it not? Is it going to work in a browser as a, you know, a module? I think it will"
2319440,2322320," because it creates like some sort of like a yes module. What do you guys think?"
2322320,2325040," Will it be possible to just like import it from the browser?"
2328400,2332720," So I don't really know because I know nothing about the JavaScript. So we'll probably have to modify the"
2332720,2337440," target, uh, of the typescript or something like that to make it work properly, but we'll see. We'll see."
2337440,2345600," Uh, add expert statement. Thank you, Sherlock. You're very smart. You figured it out. You can use modules"
2345600,2351360," from the browser, but, uh, you need, I know that. I know that. I know that. Like I know about the type module."
2351360,2357920," I know. So when you do dynamic import, by the way, you don't need to do type module. You don't need"
2357920,2362080," to do type module. My question is not about that. I, I fucking know all of that stuff."
2362080,2365120," Is this a valid JavaScript module? That's what I'm asking."
2365120,2373680," Is this, all of this bullshit, like define property, export, yes. Is this a valid one or this is one of"
2373680,2379280," this, like a fake made up common JS shits? That's what I'm asking. Will it be possible for me like"
2379280,2384720," properly in a browser to do import for this thing? Or is this some, some sort of made up shit? It's, um,"
2384720,2392000," uh, no idea. Yeah. So I also have no idea. Like I, I know about all of that, like, uh, you know, type"
2392000,2398000," there's, I also know about like imports maps and shit like that. Yeah. But I'm not sure about this one."
2398000,2402480," Like what the fuck is this shit? So we'll have to find out. We'll have to find out."
2404240,2407600," Uh, anyways, anyways, anyways, anyways, so, um,"
2407600,2418400," seems to be working. It seems to be at working. So what if I, in the hot reload, in the hot reload,"
2418400,2424720," what I want to do, chat, what I want to do, chat, I want to get rid of that. And most important"
2424720,2432240," question in here. So what if I just import, uh, yeah, let's actually go ahead and like literally"
2432240,2440400," dynamically import this entire thing. So this is going to be DVD import, um, D, uh, DVD"
2440400,2447360," JS. And I wonder if it's, if it's just this, I think this is what I can try to do. So fly check"
2447360,2453760," mode. Is it, is it fine? So what is it that doesn't like? Okay. Can I find module or it's"
2453760,2458960," corresponding type declaration? Okay. So can, do you want me to do this or maybe it has to be something"
2458960,2465280," like this. Oh, Emacs. What the, Emacs just went fucking crazy. Okay. Oh, okay. Everything's fine."
2465280,2470720," Everyone come down. Everyone come down. We figured it out. We, uh, imported DVD module."
2470720,2476640," We fucking imported this motherfucker. Can I actually go? I can even fucking go there. Okay. So they're"
2476640,2483680," connected. So it understands the shit. What the fuck? Okay. Uh, so now what I'm going to do, we're going to"
2483680,2492160," create the state and, uh, actually just do something like DVD, uh, create state. Perfect. Perfect. Perfect."
2492160,2500640," All right. So, okay. Okay. Okay. And then here, what I have to do, I have to do, do DVD, uh, update state."
2500640,2505920," And what kind of things we have to pass in there. We have to pass the CTX, right? So this is CTX. This is"
2505920,2513440," that, this is that. Boom. There we go. Okay. No errors so far. No errors so far. This is actually"
2513440,2519920," really great. I really like to see that. So let's take a look at this JS thing. Uh, okay. Holy fuck."
2519920,2523760," Um, yep."
2523760,2529840," Um, I have no idea if it's going to work."
2531600,2542400," Okay. So when I do, yeah, so it's just, holy fuck. It implements like its own module. What the"
2542400,2548560," fuck is the import star? So again, the, um, the actual target in here is really fucking"
2548560,2553280," damn. Like it is just like polyfills and shit."
2553280,2560720," Yeah. So we probably don't have to do that, but I wonder if it's going to work. I think it's going to"
2560720,2565360," to work. I think it's going to be fine. Uh, right. I think it's going to be fine. But anyway,"
2565360,2576160," so, uh, okay. Let me, let me see. So, uh, I, okay. I'm trying to open the dev tools. I'm going to try"
2576160,2586000," to refresh it right now. Uh, reference required is not supported. Yeah. That is absolutely fucking"
2586000,2596000," sad. So it's, uh, says something about require, uh, in here. Yeah. All right. So this is in hot to"
2596000,2601840," reload the JS. Uh, yeah, because it tries to do require and you can't really do require. You have"
2601840,2607040," to do import and stuff like that. So then I think we have to do in here, what I think we have to do,"
2607040,2611680," we have to in, uh, typescript config. So what the fuck is this TS building for?"
2611680,2620080," Freaking, is that coming from this stupid incremental build and whatnot? I should disable it."
2620080,2624640," Anyway, so I probably need to change the targeting here. Uh, so the JavaScript version,"
2624640,2628800," immediate JavaScript, I require include module library declaration and so on and so forth."
2628800,2636080," It would be kind of nice, uh, right. To know the full list of targets of supported targets. I wonder"
2636080,2641440," how can I get that? But before I do that, I think I want to make a small break, uh, right. Because I"
2641440,2647360," need to refill my tea, uh, not really tea, but water. Right. So, and I also need to, you know, take a break"
2647360,2653920," essentially. Right. So let's make some break and, um, okay, we're back. So let's try to maybe set a"
2653920,2660720," higher target and let's see what kind of targets do we have in here. Uh, all right. So typescript, uh, TS"
2660720,2672560," config, uh, targets, uh, there we go. We'll go. Let's try to Google it up. Okay. That's pretty cool."
2675520,2687920," Oh my God. Wall of text. All right. Um, um, target, target where? I don't give a shit."
2687920,2698480," It's fucking loading. It's fucking slowly sluggishly playing. It's stupid animation."
2698480,2705040," Fucking web. I hate it. Fucking hate web. Anyways. So what do we have in here? Um,"
2705040,2714000," ES to 2022, I suppose. Right. Um, well, let's try to set like ES 2022. Um, so where is the,"
2714000,2721440," where's this thing? TS. Uh, can I fucking disable incremental build? Fuck this shit. Like I hate this"
2721440,2729360," additional file that it created. Uh, fuck you. It's, it's four kilobytes for fucking what? Um,"
2729360,2736160," okay. So target, yes, uh, 2022. All right, let's go. Uh, let's go, let's go, let's go. Okay."
2736160,2743440," Mm-hmm. So it probably, hopefully, so it's compiling things."
2746080,2751840," All right. So starting compilation in watch mode. Found there errors. I really like to see that."
2751840,2758480," Okay. So here we have index TS. What about index JS? Index JS actually barely changed,"
2758480,2764240," which I really like. So it looks pretty much identical to the TypeScript. I like that. Okay."
2764240,2771760," So what about the DVD JS? Uh, I would expect it to be, uh, it's still kind of, kind of bizarre,"
2771760,2777200," kind of bizarre to me. Uh, okay. All right. So I removed the JS. I'm going to try to restart it one"
2777200,2785840," more time. Uh, I'm going to start it one more time. Uh, uh, uh, uh, okay. So it's compiling a little bit"
2785840,2796080," slow, but all right. So it still creates this weird shit. Um, so probably do you have the format of the"
2796080,2802240," modules. Okay. Aha. All right. Found the problem. Found the problem. Okay."
2802240,2812000," Did they click? When did they click on that?"
2819520,2821200," I pressed F1 or something?"
2821200,2828480," Maybe Emacs. Maybe, maybe it is Emacs. Like, yeah. So probably press something in Emacs. Please don't"
2828480,2834880," fucking tell me that Debian automatically just opens up for everyone and just bugs it just like"
2834880,2839920," Microsoft or something. Please don't fucking, hacked by Gnullian."
2847760,2853360," FSF. That organization basically. Anyway. Um, so"
2853360,2861680," Where's the modules? Uh, can I click on, yeah, module?"
2861680,2866960," Uh, what kind of modules can I see in here?"
2866960,2877520," Okay. ES 2022. ES, not EES. I mean, I'm Russian. We, we read this letter as yeah."
2877760,2888560," So it's EES for me. Not EES. Uh, okay. So let's actually try to put ES 2022 and maybe..."
2888560,2892880," Yes! Yes, b***h! F***a!"
2897280,2909200," All right. So, yes, yes, yes."
2909200,2915360," All right. Uh, so, what..."
2915360,2917760," Yes, my s."
2920080,2927040," Okay. Uh, let's focus chat. Let's focus. Stop thinking about s. Stop thinking about s."
2927040,2932640," Let's focus. So we've got the module, which is good. Uh, and now we're going to be doing hot"
2932640,2941680," reloading. So hot reloading JS. Stop, stop thinking about s, I said. Okay. Uh, so, all right. So we're still"
2941680,2948960," using await import. All right. So, and this is compa... Okay. So that should work now. That should work."
2948960,2958720," Uh, so I wonder... Since we're using... Since the problem was with the module, I wonder if I can just say..."
2958720,2965440," Just put the target back to 2016. Is that something that is going to work, I wonder?"
2967520,2973200," So we're going to be using old target, but the newest modules. Is that a thing that people do? I wonder."
2973200,2980960," Uh-huh. So, and in hot reload JS... This is so funny."
2980960,2989040," This is such a funny thing. Look at that. When you have old target, but newer modules,"
2989040,2994560," you get this polyfill for waiter or whatever the f*** it is, but then yield import."
2997200,3002320," This is such a funny combination, honestly. This is so freaking funny. But anyway, so I think, um,"
3002320,3007360," you know, having like a modern target is, is actually beneficial, right? So"
3007360,3014880," it will just generally create JS files closer to the TypeScript, right? So, which makes sense. Anyway,"
3014880,3022000," so let's actually open this entire thing, uh, and see if it works in the browser. Uh, right. So, oof."
3024000,3029920," Three FPS. Three FPS. Three freaking FPS. I wonder. Yeah. Let's open Hot Reload."
3029920,3036640," Uh-huh. We can't see sh*t in this mist. Let's take a look, uh, at the console."
3036640,3042400," Uh, failed to fetch dynamically import DVD."
3042400,3050240," Motherflippa. Motherflippa."
3053680,3062880," Motherflippa. And what's funny. Okay. But if I say, so I have to say import the JS."
3062880,3070880," But is it comp... Oh, it's compiling. Right, right. So, this is valid one. All right. All right."
3070880,3072240," So, we can try to refresh."
3082240,3091280," So, uh, yeah, that's pretty cool. And how are we going to be hot reloading right now?"
3091280,3101120," So, I'm thinking that we need to add the, you know, web server, right? So, we do need to add web server."
3101120,3110080," So, if I take a look at the index TS, this is what we have in here. So, if this is a dev, we're opening the"
3110080,3116960," web socket and stuff like that. So, we can pretty much just copy-paste this entire thing into here,"
3116960,3123120," right? So, we copy-pasted this entire thing. So, now, uh, when you get that, you hot reload. And this is not"
3123120,3134640," really what we want to do. We want to not hot reload, but rather change the DVD. So, let's actually put this"
3134640,3140720," stuff in here. All right. So, let's put this stuff in here. And when it's time to reload, instead of"
3140720,3145840," reloading the window location, what we're going to be doing, we're going to be saying, um,"
3145840,3152880," DVD equal await import. Like, just basically re-import this entire thing."
3154640,3160880," just re-import. Just re-import. And obviously, it is not going to work that easily. All right. So,"
3160880,3166800," let's say, you know, DVD because it is constant. Let's make it let. All right. So, now, it is let."
3166800,3172240," And now, it will say that you can't await because it's not the async function. Can I make this function"
3172240,3183760," async? I can. That is very cool. Look at that chat. Mm-hmm. So, and it would be also nice to maybe, uh,"
3183760,3195280," console log, uh, hot, uh, reloading module. Uh, all right. That's basically it, I think. That is basically it."
3195280,3202160," So, we need to modify the dev server, I think, to actually observe, uh, not only index.js, but also"
3202160,3210160," dvd.js. Uh, dvd.js. Right. So, once dvd.js is modified, we're going to be sending the signal to"
3210160,3219600," the client to hot reload that specific module. Uh, right. And this may not actually work. This may"
3219600,3224880," not actually work because the asshole browser, the fucking asshole browser is probably going to"
3224880,3231040," cache this thing. Even though we explicitly don't really cache, uh, on the server. Right. So, in the"
3231040,3236160," server, we actually explicitly disabled caching. I'm pretty sure the browser, being the asshole browsers"
3236160,3241200," usually are, because they're developed by Google, uh, it will probably cache that. So, we'll see. We'll"
3241200,3245840," see how it goes. Okay. I'm going to restart the, the whole, uh, the whole thing. Right. So, the whole setup."
3245840,3253360," Um, right. You know what would be cool? Um, it would be cool to kind of print what kind of files we're"
3253360,3258880," watching. Right. But, I mean, it's going to be, uh, overwritten by the TypeScript anyway. Uh, okay."
3258880,3264320," So, let me open DevTools just in case. Uh-huh."
3264320,3275360," All right. So, we refreshed everything. We refreshed everything. So, now, I'm thinking I'm going to put"
3275360,3287840," these things side by side and I'm going to open DVD. Actually, DVD-TS and here I don't like a red circle."
3287840,3294800," I think it's too communist. I'm going to change it to blue. Right. Okay. I'm saving everything."
3296560,3303760," Hot Reloading Modules. It printed Hot Reloading Modules. It literally printed Hot Reloading Modules."
3303760,3310080," Yet, nothing changed. Nothing changed."
3310080,3316800," Shit. Uh, network tab. We can check it, actually. Uh, that's a good idea. That's a good idea."
3316800,3326880," It's a good idea, Mindful. Um, all right. So, yeah. We got that. And, um, yeah. It didn't reload shit."
3326880,3335200," It didn't reload shit. Probably because it's cached. So, but if I refresh the whole thing now,"
3336080,3342800," it is blue now. Look at this blue. Look at this blue ball. This is blue ball. This is what the"
3342800,3348320," browser gave us after we Hot Reloaded and stuff like that. Cache disabled. Yeah, cache disabled,"
3348320,3356240," by the way. So, anyways, I wonder if we can try to do, um, the, um, the trick with the garbage."
3356240,3363200," The browser gave us blue balls. Yeah, exactly. Let's try the trick with the garbage. Uh, let me, let me see."
3364560,3371440," So, it's going to be, um, Hot Reloaded. Hot Reloaded TS. Hot Reloaded TS."
3371440,3380640," Um, yup, yup, yup. So, essentially, can I just put some random scheisse?"
3380640,3393280," For example, I know that there is math random. Can I get a random value? Maybe a million and then just math floor."
3393280,3403040," Shut up. Shut up. Shut up, chat. Shut up. I'm, I'm a professional. I know what the fuck I'm doing."
3403760,3410960," Okay so... Yep."
3410960,3420640," Date... People suggested dead gate time."
3420640,3433360," Bro, before suggesting anything, like make sure that it at least works. Like come on, bruh, bruh, bruh, bruh."
3434080,3438080," Bruh. Oh, new! Okay, I'm sorry. Okay, this has to be new."
3438080,3445680," Date. Okay, thank you so much. Alright, alright, alright, it's fine."
3445680,3450880," So is it nanoseconds or milliseconds? Like it's not perfect, right? So if I..."
3450880,3457520," Maybe it's fine. Okay, okay, okay, we can do that. Sure, sure, whatever. Sure, we can use that."
3459200,3467840," Date equals plus, plus, plus, plus. Is it going to work even? Let's actually see."
3467840,3472640," Let's actually see. Let's actually see. Yeah, it's going to work."
3472640,3477760," Okay, so it's going to give us a string and hopefully that is going to be a correct thing."
3477760,3483200," I wonder... So there's no compilation errors here or anything like that and I wonder if I try to"
3484160,3489200," go there. Funnily enough, it's not even going anywhere. That's what's funny."
3489200,3500160," But anyways, so flight check mode. All right. Compilation is fine and I'm going to try to"
3500160,3503360," refresh the whole thing. I'm going to try to refresh the whole thing."
3504960,3513280," Okay. And now I'm going to go into dvdts and let's replace blue with green."
3513280,3517360," What the fuck?"
3520480,3527920," Too easy. Too fucking easy. Who fucking needs white or wheat or whatever the f... I don't know how to"
3527920,3531440," pronounce that. I never even try. I don't even know what the fuck it is."
3531440,3536160," I don't even fucking know what the fuck is your white wheat"
3536160,3540480," shit and I already implemented it myself. Dap, dap, dap, dap, dap."
3540480,3549760," Web devs are fucking molding right now, right here, right now, right here."
3550480,3555440," too goddamn fucking easy."
3555440,3566560," Okay, that's actually easier than expected, honestly. Like all jokes aside,"
3566560,3569760," all jokes aside, I think it's actually easier than I expected, which is kind of cool."
3569760,3576400," Um, yeah. All right. So I think we can work with that. I think we can work with that. The real"
3576400,3580160," question is: damn, that is too fucking easy, honestly."
3580160,3588720," I can't believe that. Uh, I still can't believe that. All right. So what if I want to change,"
3588720,3594560," for example, rectangle, uh, circle to rectangle, right? So maybe that's what I want to do quickly."
3594560,3601840," So city x feel erect, uh, short, short. Do you feel erect? Ho, ho, ho. Sorry. So we're going to take"
3601840,3611680," the position minus radius, uh, then state position y minus radius, right? So in the field, uh, the width and"
3611680,3618560," height is going to be a radius, which is multiplied by two. So it's a diameter, uh, radius multiplied by two."
3618560,3632320," And I think that's about it. All right."
3639040,3652000," So the real question, how can we integrate all of that stuff, right? How can we integrate all of"
3652000,3654160," this stuff? Interestingly..."
3654160,3667760," So, yeah. What if the state was not an interface and a bunch of like functions in here and stuff like"
3667760,3669760," that? What if it was class?"
3669760,3679360," Um, so what I'm doing with the date, I'm not really updating it to the date. What I'm doing is I'm"
3679360,3685120," actually setting it as a get parameter, as a query parameter of the module, right? So if you take a look"
3685120,3692560," at the hot reload, uh, TS, this is what I'm doing. I'm just like literally importing, doing asynchronous"
3692560,3697600," or dynamic import. And I just like literally append date in here, but I don't do anything"
3697600,3703680," with the file. File stays the same. File stays the same. It's just like, uh, it's, it's a parameter"
3703680,3710240," for the server. Uh, right. And it's also like a parameter for the, um, for the client, right? So,"
3710240,3716240," so it doesn't cache. So it's different every time. Cache. Oh yeah. By the way, I heard that term."
3717200,3723360," So yeah, I kind of vaguely heard it. So this is what's called cache busting, right? So I'm not"
3723360,3729360," really a web developer again, but sometimes from a distance, I hear web devs yapping different weird"
3729360,3735840," words, like a tree shaking, a cache busting, like something. So, and I never know what, what it means,"
3735840,3740320," what they mean by that. So this is what they mean by that. Right? So did I, did I actually guess it"
3740320,3744880," correctly? So this, this is a cache busting. All right. So I need to remember that so we can"
3744880,3749600," understand what the web devs are talking about. Yeah. Okay. Okay. All right. All right. So thank you."
3749600,3757680," Thank you so much. Um, all right. That's very interesting. Um, tree shaking. Yeah. Yeah. So they"
3757680,3766320," reinvented that code illumination. Uh, they call it tree shaking. So anyway, whatever, um,"
3768480,3774240," what I was thinking, um, so what if this was not interfaces or anything like that, what if"
3774240,3783600," all of that stuff, the classes, right? So literally I could say class, uh, class state, right? And in this"
3783600,3790800," specific class state, I would have these things. So then in the constructor, in the constructor, I could"
3790800,3797600," just, uh, yeah. So basically create state is going to be the constructor. It's going to be the constructor."
3798080,3805520," And, uh, uh, then you could have update, which accepts. Yeah. Because for these kinds of things,"
3805520,3812000," the most natural thing would be to become classes, but I'm not sure how all of that is going to work"
3812000,3819360," out in case of classes. So interesting thing. Okay. So when you create a class, right? So for example,"
3819360,3829520," like full, and then you say, okay, constructor, uh, maybe this X 69. Uh, all right. So this Y for 20."
3829520,3837680," And also you have some sort of a method, right? So it's more like display. Uh, and so we can do,"
3837680,3846080," we can just do console. Hola. Log. This X, this Y. Right. Close that. Close that. So we'll get a class."
3846080,3855040," So then I can say full, new full. All right. So it has X and Y. So here's the X, here's the Y,"
3855040,3862240," and then I can do display. I can display them both. So how do I get the properties? So I think it's like"
3862240,3873440," get, um, own property. Oh, property names. Okay. So, and I can just say, okay. So the immediate"
3873440,3882240," properties of full are X and Y. So I kind of have a hypothesis that the methods of the class are in the"
3882240,3887280," prototype. Okay. Okay. Okay. Okay. So they are in the prototype."
3890320,3894720," Does that mean when I reload the module, the prototype is also going to be reloaded?"
3894720,3897760," So how does it even work? Will that even work?"
3897760,3906160," That's a very interesting thing. Right. So if the actual state is stored in sort of like the immediate,"
3906160,3912560," the closest properties of the object, um, probably, yeah. So the prototype is probably going to be,"
3912560,3921120," so to properly hot reload classes, I would have to patch their prototypes, uh, reflection.js. Now we are in,"
3921120,3929760," yeah, I know that. I know that. Um, so I didn't think it's going to work as I think it would, uh, just"
3929760,3936240," replace the prototype. Yeah. Like you need to develop like a whole system that patches the prototypes. Like,"
3936240,3941360," it's like, no, I'm not going to do that, but maybe you don't have to. Again, I don't know how JavaScript works."
3942160,3946960," Uh, maybe you don't have to. So let me try to find out."
3946960,3954000," So let me just try to do this. This."
3960560,3967120," boom. Boom. So we also have updates and within that update, we're going to be just doing these things."
3967120,3975680," Uh huh. And instead of this state, we're going to be doing this."
3975680,3984160," State this. Boom. All right. Let's go ahead and maybe,"
3986320,3990480," um, where's the, yeah. So const radius is actually duplicated. Let's remove that."
3990480,3996560," So what is it complaining about? What are you motherf*cker complaining? Okay. So let's comment out this sh*t."
3996560,4006480," And we're only exporting this sh*t. Cool. I wonder if now hot reload is going to, um,"
4007440,4013520," complain about some of this stuff. Doesn't even complain. All right. So we loaded DVD."
4013520,4020800," Right. And we have to reload it. So in terms of state, I feel like what we have to do is new,"
4020800,4029120," uh, states. Yeah. So there we go. So new states. And here we just do update and we don't have to pass the"
4029120,4035920," state. Yeah. So it doesn't like something in here. Uh, property of that does not exist in a type of out."
4035920,4046000," Yeah. Since we're, damn, since we're importing this thing like that, like dynamically, we don't really know"
4046000,4057120," its type even. Can I say something like type of? Okay. So there's a pretty cool idea in here. Just a second."
4057120,4067440," So I saw an error somewhere here. Type of import. Aha. Aha. Aha. Aha. Aha. So"
4069840,4081520," we can say type of import. Well, I mean, that should be enough, like DVD. Is that enough? Is that enough?"
4081520,4093120," Update does not exist in the type of intent. Maybe I have to do something like TS. Is that nothing? No,"
4093120,4106000," that is not enough. Maybe because in DVD TS, I have to export the methods or something like that."
4106000,4113760," Uh, so I don't think this is the correct thing. Yeah. So it's, it's not, it's not a thing. It's"
4113760,4119360," okay. Yeah. You can't do it like this. You can't do it like this, but I mean, it doesn't prevent,"
4119360,4124720," prevent it from generating anything per se. Right. So it doesn't prevent anything. So it's still"
4124720,4132320," generated some shit. And in the hot reload JS, uh, it probably also generated some shit. Yeah. So it's"
4132320,4138480," just like TypeScript complains, but it doesn't stop generating. Uh, okay. So there's some shit in"
4138480,4144960," here, but that's fine. Uh, it doesn't even, yeah. Update is not a function. Hmm."
4149360,4160960," So CTX delta time. Uh, and DVD update CTX delta time. Yeah. It's so when you export in a class,"
4160960,4163680," how do you export methods as well?"
4166320,4171680," So consts, I don't know what you're talking about."
4171680,4178720," Oh, I'm calling it on DVD. Okay. I'm going to do it. All right. All right. I'm a little bit tired."
4178720,4182480," Probably. I'm probably a little bit tired. I'm sorry. I'm sorry about that. So it has to be the"
4182480,4188880," state. So it has to be the state. Okay. So that probably means I don't need this shit, uh, as well."
4190880,4196560," Damn. It actually figured out. Yeah. It even figured out everything correctly. How TypeScript does that?"
4196560,4203760," Damn. So it supports all of these things, right? So people who wrote TypeScript, like they"
4203760,4209200," had to go through all of these use cases. Holy shit. That's a lot of work. But I mean,"
4209200,4216160," Microsoft pays really well, I suppose. But damn, I don't want to be working on TypeScript to actually"
4216160,4220560," support all of this kind of stuff and figuring out the types of this shit. Damn."
4220880,4228720," All right. Anyways. So let's refresh that. Okay. So that works correctly. That works correctly."
4228720,4236080," Now, uh, so if it works, it's going to be kind of a problem because I will have no idea why."
4236080,4243680," It doesn't work. Yeah. It literally doesn't work. It literally doesn't."
4246160,4252160," That's really funny. That's really funny. Uh, so, okay. So because the prototype,"
4252160,4256480," the prototype is still the same, but the question is, what is the prototype of the,"
4256480,4264560," of this thing? Is that the class? Um, yeah. So what if you replace the prototype? That's a good question,"
4264560,4270960," but it's kind of like, um, it's a dangerous place to go in now. It's a very dangerous place to go in."
4271520,4279120," So again, if I have class full, I should actually say that it is the class. It should be. So I can just"
4279120,4287680," set the class to this thing. Huh? Okay. Okay. So let's give it a try. So obviously if I don't succeed"
4287680,4294720," doing it this way, I'm going to just revert back to, um, the classless way of doing, but it will be kind of"
4294720,4299600," interesting to still, you know, somehow manage to do that, uh, with classes because classes are kind"
4299600,4306720," of convenient, syntactically at least. Um, right. So, and here is the state. So we're creating the state"
4306720,4311840," in here. So I think we should create the state right after we loaded the modules, right? So here's the"
4311840,4319840," module is loaded. And so I suppose what we have to do, we have to take the prototype prototype. Is the prototype"
4319840,4332320," even a thing? Uh, or do you mean proto? That's probably what she meant. So states is going to work."
4336400,4346000," So no, and this is not a thing. Uh, prototype. So it's still complained. So you can't really easily"
4346000,4353040," prototype. So what's the way to replace prototype in JavaScript? So is there something, um, like objects"
4353040,4360400," get? Yeah. So we can get the prototype. Yeah. So I know it's deprecated. So maybe there's something"
4360400,4366880," like set pro. Okay. So there's a set prototype of, uh, okay. Okay. Okay. Okay. So we can do state"
4366880,4377120," DVD states. Uh, okay. And that seems to be working. I'm going to refresh the whole thing. All right."
4377120,4387360," This is red now. And, uh, where is the color? Blue."
4390400,4398080," Uh, so state update is not, okay. So this is not a class, everyone. Uh, prototype is not a class"
4398080,4405360," because now it can't find the update function. Interestingly. Okay. Interestingly, I have another"
4405360,4411440," idea. Uh, I have another idea. It's kind of a stupid idea, but we can create a new state,"
4412240,4422800," a new state like this, uh, just a TMP and set the prototype of the previous state as the prototype of that new"
4422800,4435120," state, uh, get prototype of TMP. This is kind of dumb. This is kind of dumb, but it might actually work."
4440400,4443440," Isn't that interesting? I think, I think, I think it could actually work."
4443440,4450480," So I think you can do create object. We're not creating object. The object is already created."
4450480,4459520," That's the thing. The object is already created. Um, okay. So we just need to substitute. We need to"
4459520,4466080," patch the prototype. We need to patch the prototype. Um, and again, none of that is really required,"
4466080,4478160," right. It's just like a improved quality. Holy shit. Got cooler. Dub, dub, dub, dub, dub, dub, dub, dub, dub."
4478160,4485520," Did you guys understand what I just did? Do you guys understand what I just did? Uh, I created, uh, an"
4485520,4494240," object of a new class, but I created it for the sole purpose of taking its prototype and assigning that"
4494240,4502400," prototype back to the old object. You did it. I know, I know that I did atrocities. I don't know how to"
4502400,4510240," speak that. I'm sorry. Uh, holy shit. I like, I don't even know JavaScript. Like I know this kind of"
4510240,4514800," shit on the very surface level, but it kind of worked. Somebody, by the way, in the chat suggested something"
4514800,4522320," cool. Uh, so grueless, grueless, grueless, grueless, grueless. So, um, assign, but I mean, prototype is"
4522320,4528960," not a thing that exists, does it? I don't think it exists. Person prototype. And I don't think it can"
4528960,4539040," help in our case. Um, pointless, but could you take the prototype before reloading to satisfy OCD? Take the"
4539040,4544160," prototype before reloading. I mean, I could, but I mean, it doesn't really matter. It's not really that"
4544160,4549280," important. Isn't this called prototype pollution? Yes, it is. But I mean, it's a, for development,"
4549280,4557680," it's a development feature. Uh, so yeah, but here is the thing. What if we have a lot of classes and a"
4557680,4564960," a lot of objects, uh, what if we have a lot of classes and a lot of objects specifically in, um,"
4564960,4574800," in our case, we game, we have a shit ton of vectors, right? So for example, we have a class vector."
4574800,4583280," You know what I'm talking about? Uh, so I'm not really sure how we're going to be dealing with that."
4583280,4590240," So, and we have instances of vectors of all over the place, right? And are we going to be"
4590240,4595040," really like going through all that and patching all of them and everything is, doesn't really sound"
4595040,4601840," great. It doesn't really sound great. So maybe it's not really that important because a lot of the"
4601840,4607360," vectors we create, they're sort of intermediate objects. They're sort of intermediate objects."
4608000,4614960," And we don't really change them that often anyway. So what kind of states do we have? State consists"
4614960,4621360," of the scene. So this is a class scene. And then here we have tile, we have RGB. So we only need to"
4621360,4627760," patch RGBs probably or something. And we also have a class player. And in the player, we have only two"
4627760,4634000," things. We have position and direction. So if we're going to be hot reloading this entire thing,"
4634000,4640880," we only need to patch the prototypes of, um, of this thing, of the vector. So"
4640880,4649920," uh, I think that's why object freeze was made. Uh, so let me see object freeze."
4649920,4657120," Uh, so it prevents the modification of existing property attributes and values and prevents the"
4657120,4663120," addition of the addition of new properties. Okay. That makes sense, I suppose. Uh, that makes sense."
4663120,4669360," Okay. Here is the trivia question. Right. Who knows"
4669360,4682160," what is the prototype when you create a new object with new class? What that expression sets as a prototype to"
4682160,4691600," the object? Does anybody know? Because just creating a new instance of the object just to do a transplant"
4691600,4698240," of its prototype is kind of a hack. Is it possible to say, okay, here is the class and here is the class"
4698240,4705280," prototype? Wait, does the class have its own prototype? Is it possible to get the class prototype or something?"
4707120,4720000," Um, so class prototype is a property? I tried to test in the browser console, for instance, not prototype. I,"
4720000,4726080," for some reason, it didn't work for me. Uh, I don't know. Nobody really answers any of my questions. That's,"
4726080,4735120," that's the problem in here in the chat. Um, so constructor. I need to maybe save all of these things. So it's actually,"
4735120,4738000," I have to have it in here. Um,"
4738000,4747680," so again, to people who say, well, like, why, why do you do it this way? Why don't you do it a different"
4747680,4755120," way? Have you watched the stream? I already tried that in a classless way, right? And it works in a"
4755120,4761120," classless way. But then I said, okay, that's fine, but it would be cool if we could do that with classes."
4761600,4766480," Uh, it's kind of difficult, but it would be cool. And if it doesn't work out, I'm going to switch back."
4766480,4771360," We're not doing that because we're forced to. We're doing that because it's interesting."
4771360,4774720," Like, come on, people. Have you watched the stream? Or like,"
4774720,4781760," it's annoying. Like, we're trying to explore things. We're trying to extend our understanding of things."
4781760,4792560," Uh, my God, people, my God. How are you supposed to do anything interesting with such people?"
4792560,4800560," I'm disappointed. I'm fucking disappointed. Anyways, whatever. Uh, okay. So I just want to"
4800560,4806480," have an example of the class. Like, the fact that it's difficult, we can't really do that. It doesn't"
4806480,4811360," mean that we're kind of stuck. We're just exploring things. We're just fucking exploring things. Come"
4811360,4817280," down. All right. So, uh, prototype. Yeah. So this is the prototype and it's just like a regular object."
4817280,4824880," Um, I don't fucking know, man. So what if I get, uh,"
4827840,4836320," get, what, what was that? The prototype of fool. And is that the same thing as the fool? It probably is."
4836320,4842080," No, it's not the same thing, actually. But I mean, it just probably compares the reference or something."
4842080,4850160," Is there something like equal in JavaScript? So what I'm thinking is that, uh, what I'm thinking is that,"
4850160,4856800," what if I just like set, uh, okay, object prototypes. All right. So I, I just, did you just give me like"
4856800,4865360," a wall of text and set read instead of, yeah, you did, you literally fucking did. Okay. So, um,"
4865360,4868400," for fuck's sake, people."
4868400,4880400," Imagine trying to like build a hypothesis, uh, right. Then conduct an experiment just to expand your"
4880400,4885760," understanding. And somebody, I love it. Here's the wall. Read the comment. If I"
4885760,4891440," want you to read the commentation, I wouldn't be not streaming. I'm so disappointed with you people."
4891440,4895600," I'm, I'm telling you, I'm so fucking disappointed. All right. So, um,"
4895600,4899040," anyway."
4899040,4910320," What I was doing, like, I'm, I'm going to close the chat. Like it's good. Chat doesn't give anything"
4910320,4917280," interesting. Um, so prototype prototype. I want to try the last thing in here. I want to try the last"
4917280,4925360," thing and which is just setting the product, uh, the prototype of the class, right? So, uh, where's the"
4925360,4937440," hot reload, hot reloading, uh, hot reloading TS. Where's the TS? Okay. So what if I just literally do"
4937440,4947360," something like this? Okay. That seems to be type checking. That seems to be type checking. All right."
4947360,4953840," So that also compiles properly. All right. And that means I can refresh the whole thing. All right. That's"
4953840,4964720," pretty cool. And now if I, um, do something like, what is it? DVD TS blue. Nah, it's not"
4964720,4970160," the prototype of the class. So when you do new class,"
4970160,4976800," what is the prototype? What do they set as a prototype? They set something weird and maybe"
4976800,4980800," you're not even supposed to know what is the prototype. I know it's written in that wall of"
4980800,4985760," text somewhere. Like I don't give a shit. Right. So I'm just trying to find it experimentally. If I can"
4985760,4991040," nail it down experimentally, I don't need to read that wall of text. Uh, right. But I mean,"
4991040,4996720," we already have, uh, the solution that kind of works. You just create a new instance of this entire thing,"
4996720,5002480," like literally create a new instance. Uh, right. And that kind of, kind of fixes the problem,"
5002480,5011520," right. So that ultimately fixes the problem. But yeah. Um, so that's pretty interesting. Um,"
5011520,5015920," so I think I'm going to finish the streaming here. I think I'm going to finish the streaming here"
5015920,5020800," and maybe potentially do another session, maybe tomorrow. I'm not sure if it's going to be online"
5020800,5028240," or offline session, uh, where I will try to integrate the whole system into the, into the main game."
5028240,5033920," Right. Um, so, because it's kind of cool that it works like that, but I mean, it's not really"
5033920,5039600," production usage of this idea, but I'm glad that we figured out how to do that idea in general,"
5039600,5045920," right? Like at all, I think it was, uh, very educational. All right. So, uh, that's it for"
5045920,5051600," today. Thanks everyone who's watching me right now. I really appreciate that. Have a good one. And I see"
5051600,5055920," you all on the next recreation programming session with Ahu and Mr. Azuzin. I love you."
5055920,5062800," All right. This is the next day. And I thought that it would be a huge disservice to this session"
5062800,5069040," if I didn't integrate the system we came up with to the main game, right? So, and this is exactly what"
5069040,5074640," I want to do right now. Um, regarding this entire problem with patching prototypes, um, I came to a"
5074640,5079840," conclusion that even though I can do that, uh, I can probably come up with some sort of a system that"
5079840,5085680," when you, uh, create a class, you registered into some sort of a global table. Then when you hot reload"
5085680,5092800," the module, you traverse the tree of the objects, a tree of the instances, and just look up what their"
5092800,5097120," prototypes, what their classes and update those prototypes to the newer versions and stuff like"
5097120,5104880," that, that still doesn't, uh, support 100% of the cases, right? So, uh, in JavaScript, you can probably"
5104880,5111760," have the most difficult case, which is you have a function that you need to hot reload that is stored"
5111760,5118320," in a closure of another function. And in JavaScript, as far as I know, uh, there is no really a way to"
5118320,5124560," access the whatever is within the closure and unless you have an access to the engine, which we don't"
5124560,5129920," because we're running in the browser. Uh, right. So unless we find some sort of a vulnerability in"
5129920,5135680," the browser, but that's kind of completely outside of the scope of what I'm doing. So yeah, um, I decided"
5135680,5143840," that, uh, a better approach would be to just say, okay, we support only this kind of stuff. And if you"
5143840,5151760," do something outside of these limitations, your code is not hot reloadable. So just, uh, turn it into hot"
5151760,5158080," reloadable code or move it into not hot reloadable module if that code doesn't really change very"
5158080,5163520," often. So maybe you don't even need to hot reload it all the time. So maybe it's the kind of code where"
5163520,5168800," it's easier to just refresh the entire page, right? So I think that's the reasonable approach in terms of,"
5168800,5176880," uh, usefulness and added complexity, right? So I'm pretty sure Vite or Vite probably supports like"
5176880,5183040," 100% of the cases, right? So it probably, uh, has a lot of code to support all this stuff and traverse"
5183040,5187920," and patch things and stuff like that. I never honestly tried it. Right. So, um, and I should"
5187920,5193600," talk about Vite because, because I'm trying to do a meme. I personally don't care and I'm pretty sure"
5193600,5199040," it's, it's a very good and useful tool for what it's designed for. Uh, right. So here I'm just like"
5199040,5203840," trying to implement like a very minimal thing that is useful for my specific case. I don't really"
5203840,5209920," expect this thing to be, uh, you know, useful for general usage, right? And I'm not even trying to"
5209920,5215520," compete with Vite, right? So I personally don't even care about this thing. Again, I'm just doing a meme."
5216080,5225200," Uh, anyways, so, um, let's actually, with our, with our hot reloading example, let's maybe go back into"
5225200,5231200," the simpler case where the state is not really a class, but more like an object that doesn't have"
5231200,5238160," any pointers to any fun of the functions. And all of the sort of methods of that objects are like separate,"
5238160,5243440," uh, functions, right? So let's actually bring back this specific case because it's just easier to hot"
5243440,5250400," reload. Uh, right. So, and, uh, so this thing, as you can see, does not compile, right? So, uh, because we"
5250400,5256240," don't really have these functions, these classes anymore. Let's me, let me enable flight check. Okay."
5256240,5262240," So we don't have this kind of stuff anymore, right? So what we're supposed to do is DVD, uh, create state."
5262240,5269920," This is how you create a new state. Uh, right. So the next error in the flight check, uh, is basically,"
5269920,5273360," yeah, yeah. So we're patching this entire stuff in here. We don't even have to do that."
5273360,5278240," anymore. Right. So, because we have a simpler case and, uh, the last thing in here is we have"
5278240,5285120," to call DVD, uh, update state. What's the signature of this entire thing? The signature of this entire"
5285120,5290720," thing is the canvas context, the state that we created and the delta time. We don't have to do"
5290720,5295840," that stuff anymore. And we don't have any errors anymore. Let me actually refresh this entire thing."
5295840,5302960," Okay. So let's see if this thing still works, right? So let's see if this thing still works. Let me open"
5302960,5308800," DevTools super quick. All right. I'm going to go into DVDTS. And, uh, so this is the blue color."
5308800,5315680," Let's switch to red. Uh, and that still works. That entire idea still works. And here's an interesting"
5315680,5322640," thing, by the way. So you may notice that, um, sometimes it actually fails with, uh, you know,"
5322640,5328480," for all four. And if we take a look at the network activity, you can't really see that, but, uh, let's"
5328480,5337200," actually change a color a little bit. Um, it only modified it once. So let's maybe modify it back to"
5337200,5344960," red. Um, so there is this interesting thing that sometimes it may fail with not found."
5346240,5351040," And like, I can't really reproduce that consistently, but sometime it does. And it"
5351040,5356480," hot reloads like several times until the file appears again. I suppose this has something to do"
5356480,5363200," with how TypeScript, uh, compiler in the watch mode works, right? So maybe it doesn't really, uh, atomically"
5363200,5371280," replaces the file. Maybe first it deletes the file, then generates a new file. And maybe there is a period of"
5371280,5376800," time between these two actions when the, uh, the browser tries to query the file and the file doesn't"
5376800,5382080," exist and it fails sometime. Uh, right. It's actually kind of funny, but it doesn't really ruin anything,"
5382080,5387440," right? So it doesn't really create any problems, especially since this is just a purely development"
5387440,5391520," setup. So we don't really care about the correctness of this kind of stuff. It's just something interesting"
5391520,5398560," to point out. Um, anyways, so, um, everything seems to be working. Everything seems to be twerking."
5398560,5406560," So let's take a look at our main game, right? So it's an index TS. This is our main game. So we have"
5406560,5413600," quite a few classes in here, specifically RGBA, uh, vector, uh, right. So the other things we have in here,"
5413600,5419760," I think is a scene class, right? So this is the scene class. Uh, it has a pretty elaborate"
5419760,5425680," constructor, right? It also has a few methods and stuff like that. And also the player class."
5425680,5433360," So, uh, what I'm thinking is that I'll need to convert, uh, player and the scene classes into"
5433360,5440960," sort of like a classless objects where the state is just like interface with these methods and all of"
5440960,5448240," the methods are separate, um, separate functions. So it's easier to hot reload. Uh, right. I could try"
5448240,5454560," to do the same thing, for example, for vector and RGBA, but there is a very specific reason why I'm"
5454560,5463200," using classes for vectors. It's because I want to be able to, um, to use dot notation, dot syntax with them,"
5463200,5468880," right? Because for example, if I have position, I can quite easily add, uh, some sort of a other thing,"
5468880,5474880," right? Some sort of a direction, then maybe I can normalize it. Then I can scale the normalization"
5474880,5481200," by some sort of additional length and so on and so forth. It's very convenient syntactically to"
5481200,5486720," just have it like that since we can't really, uh, you know, overload operators or anything like that."
5486720,5492480," So, and this is the reason why I'm using classes in here, which makes the vector not hot reloadable."
5493680,5501440," Right. And what's funny is that, um, here's the thing. This is purely, um, syntactical thing,"
5501440,5506720," right? So it's a purely syntactical thing. Technically, uh, there is nothing particularly"
5506720,5513600," difficult on the level of a compiler to just syntactically transform this entire stuff into"
5513600,5522400," something like, okay, add pdir, then norm, uh, then scale len, right? So you can do that purely on a"
5522400,5528560," like syntactical transformation and stuff like that. Yet in JavaScript, because of its quirkiness and"
5528560,5537600," history and stuff like that, you have to actually accept a very much semantical feature, which makes your"
5537600,5545520," code not hot reloadable just purely for the syntactical niceness. It's kind of aggravating,"
5545520,5552080," honestly. So, but, but it is what it is. So to be fair, vector is one of those things that you kind of"
5552080,5558080," implement once and never really touch it. You just define the layout of the data of the vector. You just"
5558080,5565280," define, uh, operations. These operations and the vectors were known for centuries, right? Hundreds of years,"
5565280,5569840," right? So these are kind of like a well-known operations. So I don't think they're going to be"
5569840,5576400," changing very often. They haven't changed much for hundreds of years. So I think I'm kind of fine with the"
5576400,5586480," vectors not being that hot reloadable, right? I think that's fine. But for things like, uh, player and scene,"
5586480,5592400," they define the state of the game. I think it is important for them to be hot reloadable, right?"
5594080,5599840," So let me see. In, in case of the player, it's actually very easy. I think, uh, it is actually"
5599840,5604080," very easy. Let me close the entire thing. So if I modify the file, it's not going to be hot reloading"
5604080,5609280," anything, breaking stuff. Uh, right. So let's actually start with the player. Uh, let's start with the"
5609280,5616560," player. I'm going to maybe introduce an interface, uh, inter, uh, interface, I said, which is a player."
5617280,5623040," And within that interface, we're going to have a position and a direction. And I'm going to take"
5623040,5628800," the constructor and I'm going to turn this constructor into, you know, a constructor outside of the"
5628800,5633280," interface. So let's actually say something like create player. Uh, this is going to be a function,"
5633280,5639360," um, and it is going to return a player, which is an interface. So, and in here, I suppose we're going to just"
5639360,5644880," return, uh, position. Um, this is the position. I wonder if this is a valid JavaScript. Honestly,"
5644880,5650160," I'm not sure because I'm not a web developer. So something like this. So this is our constructor."
5650160,5655360," And in here we're going to have this kind of function, which is fov_range, right? So this is"
5655360,5663600," fov_range. Uh, and so maybe I'm going to say player fov_range. In here, what we accept in here is"
5663600,5669440," just the player, I suppose, right? So this is going to be the player. This is the player. Uh, let's actually"
5669440,5676960," fix the spelling mistakes. And I'm going to quickly replace this with player. Boom. There we go. So that's"
5676960,5682080," basically the transformation I have to do on the classes to make them hot reloadable. If you know"
5682080,5688560," what I'm talking about. Uh, right. So yeah, might as well, maybe I don't really, yeah, I don't think"
5688560,5694240," I'll need to export that for now. So for now, I'm just like modifying the code that I think should be"
5694240,5700800," hot reloadable. So now that obviously created a bunch of errors, as you can see, right? So let's actually"
5700800,5706800," find where those errors are. Um, right. So I need to enable flight check mode and let's go to"
5706800,5713920," the next error. Okay. So now we have player, uh, fov. Uh, emacs, emacs actually hanged a little bit,"
5713920,5721200," but that's fine. So yeah, it's actually very easy to do this transformation now. So next error is this"
5721200,5727520," one. So this can be F and we just put the player in here. Uh, I wonder if I can just find all of the"
5727520,5736000," player.fov_range and just somehow replace them. So just quickly replace player.fov_range, replace it with"
5736000,5744160," player.fov_range player. So I think that covers a lot of cases in here automatically. This is not"
5744160,5749120," the other one. Okay. So the last one is somewhere here and this is where we create a player. Okay."
5749120,5755200," So now we can just say, okay, create player and that's about it. Okay. So that's how easy it is to"
5755200,5761680," transform not hot reloadable code into hot reloadable. Right. So because to be fair, like OOP"
5762880,5769360," essentially in, in the majority of the cases in practice is just a syntactical thing. I know a lot"
5769360,5775120," of people will disagree, right? So there's a lot of philosophical debates about what OOP is. And I"
5775120,5783200," think that's kind of the trap of OOP is just like, it's not really well defined. So it's a very good bait"
5783200,5790640," to trick people into useless discussions of what OOP actually is. And then you can easily interject into"
5790640,5796960," those discussions and shill your books or something like that. I guess that's the best marketing strategy"
5796960,5801920," that, you know, software developers came up with, right? To shill books, right? It's just like not"
5801920,5806960," really well defined thing to trap people into discussion, to sort of grab their attention."
5806960,5810800," And as soon as you grab their attention, you can just, you know, try to sell them something."
5810800,5816560," Anyways, so again, in practice, that ends up being that. If you disagree with that, I mean,"
5816560,5819840," you're already trying to trap me into useless discussion."
5819840,5825520," So anyways, let me actually see if that still works."
5825520,5829680," All right. So that seems to be working. I wonder if it's,"
5829680,5835120," yeah, it's fine. It seems to be fine. So it's slower, but I mean, we're going to optimize that later."
5836480,5841120," The slowness come, by the way, with creating too many vectors, in my opinion. So as already probably"
5841120,5845600," said, right, I don't remember if I said that on camera, right? So, but I said that"
5845600,5852640," we have like all these methods and every time you transform a vector, you create a new freaking vector."
5852640,5860080," So, and that's just bad for GC generally. So I heard, I don't really know, but we're going to try"
5860080,5865280," to optimize that a little bit later. So what other classes we have? So yeah, back to RGB. And the last"
5865280,5870640," class that we have in here is the scene. So let's try to maybe do the same transformation on the scene."
5870640,5877920," So let's create interface, interface scene, which is, let me close this thing so it doesn't consume"
5877920,5884080," too many resources. So all of that stuff goes into the scene like so. And by the way,"
5884080,5888720," those things could be actually some sort of like a global constants, which will make them easier to"
5888720,5896160," hot reload. Yeah, maybe, yeah, let's actually make them global constants like this. I'm going to just"
5896160,5906080," copy paste this entire stuff, right? So, and this is going to be const. So scene like this and just"
5906080,5913760," capitalize on those things. All right, that's pretty cool. So we have a bunch of things in here. So we have"
5913760,5925840," constructors, we have some methods and yeah, let's just put them outside and go one by one. First one is a"
5925840,5933440," constructor, as you can see. So here we can say that this should be called create scene."
5933440,5939600," All right, there we go. And this thing should return a scene. And this is a function. All right,"
5939600,5947600," so in here we can create replace. In fact, this one is rather interesting. I wonder if I can just say"
5948960,5958800," something like const, const, const, const scene, nothing. And then we replace this with scene."
5958800,5967600," There we go. Can I do that? I think I should be able to do that. But then can I simply just say that"
5967600,5975200," this is a scene? Oh, you can't easily do that. Okay, that's very interesting. So how can I easily just"
5975200,5981120," say create an instance on the interface? Do I really have to like manually go through all of these things"
5981120,5987520," and just sort of like initialize them? So since I moved these things kind of outside into the global"
5987520,5994960," constants, I don't need that stuff anymore. And I don't really need that stuff anymore. So and what I can do now,"
5994960,6001920," in fact, I can move these things inside like so and say, okay, so they're initialized with these things"
6001920,6009440," first. Right. So and another thing that I can have in here is the walls, which are initially this stuff."
6009440,6016000," Right. And that works out. That compiles actually. Okay, so that's pretty cool. And we're supposed to"
6016000,6020240," return the scene, by the way. So we're supposed to return the scene. So it still doesn't really like"
6020240,6026160," what the fuck is going on in here. Right. So is missing some of the property. Oh, this is because"
6026160,6032720," we have class scene. Since I copy pasted all of the methods out of that, so I didn't think we need it"
6032720,6038800," anymore. Right. So now if I take a look at create scene, everything is compiling within this function."
6038800,6046160," Okay. So now we can do scene size, which I'm not even sure that's a good idea. So how often do I use"
6047200,6053680," scene size? Quite a few times. Okay, so it's probably a useful function. Okay, so it's called scene"
6053680,6060400," size. And this is going to be a function and boom, it is working. So yeah, so the transformation is"
6060400,6067120," actually very much mechanical, right? So you just rename the methods into scene methods. And you also have"
6067120,6077200," to add like scene parameter, scene. Yeah, scene. And we're going to replace this with the scene. So we're"
6077200,6083840," going to become basically programming in this like an old procedural style, which not convenient for vectors,"
6083840,6090320," but I mean, we can live with that. We can we can actually do that. Procedural programming is the best"
6090320,6102720," anyway. Okay, so endless query place that query this scene, boom, scene, get obscene. Haha, very funny."
6102720,6114080," Anyway, sorry. Query replace this scene. Cool. Function. I wonder if I can, by the way,"
6115280,6119680," come up with a macro that will do this kind of shit for me automatically. Well, this one is actually"
6119680,6124560," not possible to do automatically, right? Because it's very much mechanical, if you know what I'm"
6124560,6131760," talking about, right? So that means you can kind of find, you know, maybe with the regular expression,"
6131760,6139040," the thing that starts with that. You can kind of find the function that is like where the function is"
6139040,6145600," closing. And from that, you can kind of do something. Okay, so let me try to record the macro. I'm studying"
6145600,6152080," the recording. I'm trying to find a thing that closes the function. Okay, I found it. I go back,"
6152080,6159440," I go to the beginning of the line, and I put function in there. Then I essentially put the word"
6159440,6164880," scene in here. And how can I capitalize one single character in Emacs? I don't fucking know. Emacs,"
6164880,6173200," capitalize current character. So there should be some way to do that, right? I know how to capitalize"
6173200,6181200," word, but this character, specific character. Okay, so you have capitalize word. This is what I'm"
6181200,6192800," talking about. You can only capitalize word. That's kind of bizarre, honestly. But I want to capitalize"
6192800,6198640," the character, the current character. Can we follow the word to lowcase, following word,"
6198640,6206640," region. Okay, we can kind of live with the region. Right, so I can just select this thing and say up,"
6206640,6216080," uppercase, up, upcase. Oh, there is an upcase char. All right, so, but okay, I already decided the region."
6219760,6227600," Yeah, it's a dangerous thing, apparently. Okay, so can I do upcase char. All right, I can do that,"
6227600,6234480," apparently. So it's not bound to anything, but that's fine. Anyways, so, and after that, I go to here,"
6234480,6247680," and I just do scene, scene. Okay, then I go to here, select this entire thing, query replace this with a scene."
6249360,6256960," All right, and let's just say this. All right, so, obviously, it's not going to be perfect,"
6256960,6260240," right? So, but it's going to be something that will help us to do this kind of shit."
6260240,6268400," And after that, I suppose what I want to find, I want to find this thing again. Right, and that's it."
6268400,6277520," So this is where I want to stop. Okay, so that didn't work out. I mean, that kind of tried,"
6277520,6283360," but I mean, I think something really got wrong while I was doing that anyway. But that would be interesting,"
6283360,6288960," actually. So we probably don't really have that many. Yeah, we probably don't really have that many macros"
6288960,6295680," anyway, so it's just easier to do it like that. And so, yeah, I suppose the thing that kind of ruined my macro is,"
6295680,6297520," you know,"
6299040,6306000," the fact that I didn't know how to do upcase for the character. Upcase char. I wonder if this,"
6306000,6309840," yeah, it's not even bound to any bindings, right? So if you take a look at the bindings,"
6309840,6316080," upcase char. Yeah, so there's no binding for that. That's kind of interesting. So you literally have to"
6316080,6323840," call with that separately. But anyway, so here we have this thing that we turned into a constant,"
6323840,6329200," right? We turned it into a constant. And this one is also, we can actually do something like this."
6329200,6336800," All right. So this is a constant one. What else do we have in here? So function. So this one,"
6336800,6343120," oh, that's actually funny. None of that actually requires this thing. All right. So none of that actually"
6343120,6353760," requires it. Okay. So function scene is wall. And this is where we do need this kind of stuff. So scene,"
6353760,6365600," I'm going to accept the scene. So scene get wall scene. And that's about it. So, and I suppose this is"
6365600,6372800," the last function that we'll need in here. I think that's the last function essentially. So function scene"
6373680,6383120," I can rectangle fit, blah, blah, blah. Scene, scene. Let's go. Queer replace this with a scene."
6383120,6389600," Boom. All right. That's cool. And obviously this thing should be probably something like this. And"
6389600,6395840," here we accept the scene. Scene is a wall. All right. So I think that's it. We transformed all of the methods"
6395840,6402720," of the scene class into these things, right? As you can see. So here we obviously forgot some of this stuff."
6402720,6408960," So, and now we just have to follow the compilation errors and whatnot. So what's the next compilation errors?"
6409520,6439120," All right. So scene is wall. Scene. Next compilation error. Scene size. Scene. Next compilation error. Scene. Get wall. Scene. Next one. Get. Scene. Next one. Get. Scene. So the cool thing about just like, you know, compiler-assisted refactoring is just, you can mechanically go through all of that."
6439120,6449280," Get. Get floor. So something, something is wrong with this thing. Yeah. Oh, this one is interesting. Okay. So you don't need to pass scene in here, right?"
6449280,6457280," So because it doesn't really access anything internally, because we moved all of these things into these global things, and I moved them there so it's easier to hot reload things."
6458000,6470080," Right. So scene size. So this is scene. Seems to be working. And next error. Okay. So these things are unused, I suppose. That's what the compilation error is saying."
6470080,6475440," Declared, but never used. Okay. That's fine. Next error. Yeah. So let's actually go through all of them."
6476000,6487280," Okay. So create scene, cool. Cool. Anything else. Uh, size. Scene size. Anything else. Oof. Okay."
6487280,6499440," Uh-huh. Scene can fit. Scene. Uh-huh. Okay. The next. That's it. So we went through all of them."
6499840,6506560," Uh, so there's some, still some sort of error in here. Uh, scene get ceiling. Okay. So we didn't have to do that as well."
6506560,6512320," All right. So we just refactor everything. So without any IDE, just following conclusion errors."
6512800,6520240," Uh, right. So when we transform that class into, into sort of like a classless thing, classless object."
6520240,6526800," Right. So now it is interface, um, you know, yeah. Interface scene. It's actually pretty small."
6526800,6531280," Right. So we got rid of all of these things. We'll put them into the constants and everything seems to be working."
6531280,6535840," Everything seems to be twerking. Right. So let's actually see if I didn't break anything. Hopefully I didn't."
6535840,6543520," So, and yeah. Funnily enough, it became slower. Right. So sometimes there's a weird thing about this"
6543520,6548560," application is that at first it is slow, but then you, if you refresh a little bit, like it, it becomes"
6548560,6555360," faster. So, but again, quite easily, we can just like reduce the resolution. So it's, you know, rendered a"
6555360,6563840," little bit faster. Uh, yeah, there we go. So that's fine. That's totally fine. Um, I'm pretty sure,"
6563840,6570160," like, I suspect that it's going to be dramatically faster once we get rid of creation of the overload"
6570160,6572960," of vectors. Right. So I have this kind of hypothesis."
6572960,6583600," Anyways, so that's pretty cool. Um, what I want to do now is maybe move the logic of the game,"
6583600,6589280," the logic of the game to a separate module. Right. I think that's going to be a good idea."
6589280,6593600," Right. So the module that is going to be hot reloadable. So we'll have to separate sort of like the,"
6594560,6600400," the engine of the whole thing and the logic. Right. So we'll have to do this separation somehow. I"
6600400,6605040," think it's going to be rather interesting. So let me first, you know, cancel this entire thing. So it"
6605040,6609760," doesn't hot reload or watch or anything like that. Oh, look at that. It's actually sped up. It's actually"
6609760,6613840," sped up something like very nice. I suppose it's like some caches got warmed up or whatever."
6614560,6619360," Uh, right. Anyways. So how are we going to call this module? I think I'm going to call it something"
6619360,6624880," like game. Right. So, and what we're going to move into the game. So let's just go through everything"
6624880,6631360," we have in here and move it into the game. So I suppose class RGB is also going to be here. Right."
6631360,6637360," Even though classes are not hot reloadable, I'm going to put them in a hot reloadable module. So it's just"
6637360,6642960," like whatever you modify in there is not going to be, you know, it's not going to be affected. Right."
6642960,6651120," So it's going to be basically ignored, which effectively will maintain a point to the old module,"
6651120,6657440," which effectively will leak some memory. But I mean, this is a development feature anyway. Right. So"
6657440,6662880," just leaking a little bit of memory during the development, I guess, is fine. At least for now,"
6662880,6667200," unless we forget about that and we'll try to use this in production, but I kind of doubt that."
6667200,6673120," Uh, but that may happen that actually, and that really may happen. So this is the kind of stuff"
6673120,6683040," that I would like to move to the logic, right? So cast ray, uh, player, blah, blah, blah. So play FOV,"
6683040,6690160," render minimap. I think, I think I want to move, uh, minimap also into hot reloadable stuff. Uh, right. So"
6690720,6696800," render wall to image data. So a lot of that stuff will go into the logic module. A lot of this stuff"
6696800,6701600," is going to the logic module and the rendering the game, obviously also going into the logic module,"
6701600,6709360," loading the image, probably not. I think it should stay. I think it should stay in the engine,"
6709360,6714000," sort of speak, like loading the image, loading image data. So this is asset management. I don't"
6714000,6718400," really know how we're going to be doing asset management, but generally in here, but we'll see,"
6718400,6727840," see, we'll see, we'll see. Um, okay. So yeah, that's about it. That's about it. So moving forward"
6727840,6735680," and stuff like that. So I feel like some of this code needs to be moved inside of the logic of the game,"
6735680,6740160," but I'm going to do that a little bit later. Right. So I'm going to do that a little bit later."
6740160,6747280," Okay. So let me go into the hot reload TS and steal some code on how we hot reload things."
6747280,6754480," Right. First of all, uh, how do we create, um, the scene? So create scene. We don't really have an"
6754480,6760320," access to create scene. So the thing we have to do, we have to, uh, create a game and we already have the"
6760320,6767760," game taken in here. God fucking damn it. Okay. So when I'm referring to the game, how often do I refer"
6767760,6773760," to the game? Uh, I think not that very often. So I can probably rename this thing to the game canvas."
6774400,6784480," All right. So game canvas. Uh, and this one is a game canvas canvas. All right. So that's pretty cool."
6784480,6794960," Um, okay. So index. So this is not DVD. So this thing should become game, right? This thing should"
6794960,6801760," become game. Uh, and it's not even compiled yet. So let's actually quickly do the build to create game.js."
6802400,6805600," Uh, it'll probably fail with some errors. I'm pretty sure it will fail with some errors,"
6805600,6810000," but I mean, it will still create the file, I think. So game.js. Yeah, it's still created file."
6810000,6817840," Uh, and honestly, this file must be, uh, a module, right? So we need to export some stuff from there."
6817840,6824800," Uh, so the stuff that we need in here is maybe create scene, right? So we're going to be exporting that"
6824800,6831920," thing and also render game into the image data. So that's another thing that we'll need to have in here."
6831920,6836880," So we're going to export this thing as well. Uh, right. So we'll take a look at the game.js now, uh,"
6836880,6842400," revert it a little bit. I mean, yeah. So we're using like a modern shed. So I don't think it's that"
6842400,6851120," big of a problem. Uh, right. So if we do that. Uh-huh. Okay. So there's, okay. There's quite a few problems in here."
6851120,6857120," Um, oh yeah. So because we are also, we also need to export the vectors and stuff like that."
6857120,6862400," Yeah. Anyway, so let me finish what I wanted to do in here. Right. So this is going to be the game."
6862400,6869440," And in the game, we just create, yeah. So what we need to do in here is create this scene."
6869440,6879840," So create, so the game creates scene. All right. So, and this is a thing from the game scene. Um, and it"
6879840,6887120," it complains about some stuff in here. Cannot, uh, find namespace, namespace game, which is kind of weird,"
6887120,6893200," but I mean, maybe that's fine. So game create a player. Player is probably not a global thing."
6894000,6902240," Um, create player. What is, where is that? So we can export that. So let's actually, let's actually do a"
6902240,6908880," watch anyway. Right. You don't want to do that, but, uh, let's do that because it's going to be useful for"
6908880,6916480," fixing stuff. All right. So, uh, let me now go here and we have quite a few things in here."
6917040,6924800," So fly check mode disable, fly check mode, uh, still complains about some stuff, but I can't really do"
6924800,6933440," anything about that. Um, I'm thinking, can I just do something like, no, no, no, no, no. We have to"
6933440,6938240," actually, uh, we have to actually name space it because we're going to be hot reloading this stuff."
6938240,6946400," Yeah. Uh, anyways, so game TS. So we need a scene size, right? So it's going to be exported."
6947040,6955120," Uh, what's the other thing? Vector2, class Vector2 also has to be exported. Okay. So are you fine now?"
6955120,6962880," Yeah. So it needs to be refreshed or something. So also class or maybe interface scene has to be"
6962880,6968880," exported and maybe even interface player also has to be exported. A lot of stuff has to be exported."
6969440,6976080," Uh, all right. So let's save that and also update that. Are you fine now? Nah, it still doesn't like"
6976080,6982880," that. So maybe we don't even have to do it like that. Right. So it's just like, yeah, it's, it's,"
6982880,6988720," it's easier to just like let it infer and shit. Uh, right. I don't even know why I'm doing it like this."
6989360,6995600," So screen width, screen height. Oh, this is very funny. Actually, this is very funny because that"
6995600,7003280," means that we need to export this thing in here, uh, import, I mean, right? So this is going to be game."
7003280,7009680," I'm going to be game. It's going to be game. And this is going to be game. So in a game TS,"
7009680,7016400," I suppose all of these things should be exported as well. Uh, like I'm not sure what exactly has to be"
7016400,7022320," expected. So I'm just exporting everything just in case, you know, just in case. Okay. RGBA also needs"
7022320,7033680," to be exported. Sure. Um, okay. So it didn't really, so what's up with that? Can, oh yeah,"
7033680,7042880," because we have to do something like this. So it has to be game. Boom. Next error, uh, flight check next error."
7042880,7052640," So that's easy. Next error, easy. Next error, easy. So yeah, we can get rid of those prefixes"
7052640,7058240," and stuff like that if we move some of this logic inside of the module, right? So it should be very"
7058240,7063760," easy to do so, but I don't want to do it right now. I don't want to do it right now. I can do that later."
7064800,7074160," Uh, so obviously this function needs to be exported. Uh, let's export that. And obviously this one also"
7074160,7080640," needs to be exported. It's already exported actually. Uh, but I mean, you just need to prefix it like this."
7080640,7086800," So, okay. So there's a couple of things in here. So this is going to be a game, a game."
7088240,7095280," And, uh, this one is going to be a game, uh, game. All right. So everything seems to be compilable."
7095280,7102400," Fixed all the errors. Perfect. Cool. And now, uh, we want to get rid of this thing. Uh, we want to get"
7102400,7109680," rid of these things. And, uh, in a hot reload TS, where is the stuff? Yeah. So here it is. So after we"
7110640,7124080," created the thing, after we created the thing, uh, so game equal. All right. So we are in def mode. We're"
7124080,7133680," connecting and stuff like that. And we're going to be reloading the game JS like so. That's about it. I think"
7133680,7145360," that's literally it. That is literally it. Um, okay. So let's take a look if this shit still works."
7145360,7150800," I don't fucking know. Maybe it's already broken beyond repair. Who fucking, it still works apparently."
7150800,7156720," But I mean, you never know. Maybe it's some caches or whatnot. So let's open the dev tools and just"
7156720,7163280," refresh everything. Uh, let's see. So what is it? It loaded game JS, right? So it loaded game JS."
7163280,7169600," So as you can see, you can move around and stuff like that, uh, which is very cool. So can I now"
7169600,7177040," modify some of the things specifically? I maybe want to modify, uh, the color of the floor or whatnot,"
7177040,7181600," right? So that's one of the things I want to do. Let me open, uh, dev tools, right? So the, the"
7181600,7188640," caches are sort of like invalidated and stuff like that. And let's go into the game TS and let's find maybe"
7188640,7196560," the floor, uh, the floor, uh, right. So in terms of the floor, um, we have blue component and, um,"
7196560,7205600," green component. So let me actually make the floor completely green. I mean, it's already kind of green,"
7206160,7214640," but I don't freaking know. So maybe what if I make one of the cells of the floor"
7214640,7220480," sort of like a red, right? So completely red and we'll see how it goes."
7222960,7231040," Um, honestly, it didn't do shit. It didn't even send any network or anything like that. So that"
7231040,7238160," didn't work surprisingly. All right. That's pretty funny. So, uh, let's take a look at the console."
7238160,7244640," Uh, did we have, uh, no, we didn't, we didn't have anything. All right. So this is what I was talking"
7244640,7250640," about, right? So this is what I was talking about. Um, and, um, I don't know, maybe, maybe we just needed"
7250640,7255920," to like, you know, refresh one more time. So what if I make it purple? Um,"
7255920,7262800," no, it doesn't react. Even though that previous example reacted, this one doesn't react."
7263920,7267920," Um, that's, that's bizarre, honestly. All right. So let's, let's see what is going on."
7267920,7274480," So I got rid of this thing down below. Um, right. And it doesn't even throw any exceptions. That's"
7274480,7280240," what's surprising in here. Honestly, it doesn't even throw any exceptions, but wait a second."
7280240,7285840," Do we even have a web socket in here? We don't even have a web socket. How does it even,"
7285840,7290640," well, I mean, it doesn't really need to do that. So"
7293920,7302960," Hmm. Does it even, okay. So let's go look at the network. Does it, does it send any, um,"
7302960,7312000," no, it's just, oh, no, it actually sends some stuff in here and it's actually sends some stuff."
7314640,7322640," Hmm. Maybe this is something that is not hot reloadable. I actually kind of doubt that I actually"
7322640,7334400," kind of doubt that. So we know what we know for sure. Uh, the web socket was received, right? So"
7334400,7343680," web socket stuff was definitely received. Um, so what kind of message, um, there's not really that much"
7343680,7354880," information, but then let me see, I'm probably missing something very obvious, right? So here's the game."
7354880,7360480," We are resetting this entire thing. And then within the game, we're trying to access all of these things."
7360480,7373280," Um, funnily enough, where do, where do we create all of the stuff in here? So I feel like what we have to do"
7373280,7379760," is after we loaded all of these things, the state of the game should be created. So then it's never"
7379760,7388080," modified. Right. So then it's never modified in here. Um, so yeah, I was thinking maybe the depth is not"
7388080,7393440," recognized properly, maybe that, but then in that case, we would never create a web socket and we would"
7393440,7401760," never actually receive anything. So this is fine. Uh, for sure. I think, I think this is fine. Uh, oh,"
7401760,7409360," it just hot reloaded itself. I didn't do anything, but it just managed to hot reload itself. It just like"
7409360,7417360," was a little bit slower, I suppose. Uh, block sculpt variable. Uh, so, oh yeah, you can't really find some"
7417360,7422320," of these things because typescript. Yeah. So that means we have to load the resources"
7422320,7428800," a little bit before, uh, we do all of that stuff. So maybe we first load the resources and then load"
7428800,7436400," the logic of the game and stuff like this. Yeah, that's a bit bizarre. Um, so what the hell is going"
7436400,7443200," on with TypeScript? Can anybody tell me? Uh, yeah. Okay."
7443200,7456000," So did you reload or not? I'm such an idiot. Oh my God."
7456000,7468480," Oh my God. Okay. Pretend that you never noticed any of that."
7468480,7477760," All right. So we have red floor. Uh, let's turn it to turn it into purple. Uh, purple."
7477760,7490720," First try. First try, motherfucker. First try. Can I do yellow? Uh, can I do yellow? So it will take"
7490720,7496640," some time. Uh, and now it's yellow. So we can modify this kind of stuff in real time. So that's actually"
7496640,7501760," pretty cool. Uh, right. And it modifies itself. So the fresh works, right? So as you can see,"
7501760,7506800," this approach is general enough that we can integrate it in our game. Uh, right. It's just"
7506800,7513360," like, it imposes a bunch of limitations, but I think we can, uh, we can live with those limitations."
7513360,7518400," Uh, right. So it's, it's kind of difficult to hot reload the vectors, but again, I don't really expect"
7518400,7525200," hot reloading the vectors that much. So, um, yeah, I guess that's it for today. Thanks everyone who's"
7525200,7529760," watching right now. Really appreciate that. Have a good one. And I see you all on the next recreation"
7529760,7535440," programming session with a Mr. Azuzin. Uh, love you."
