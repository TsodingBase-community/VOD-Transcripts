start,end,text
0,6880," looks like we're live hello everyone and welcome to yet another azuzin session azuzin session let's"
6880,12160," make a little bit of an announcement and officially start the stream hello hello everyone welcome"
12160,18600," welcome welcome i'm really glad to see you all today so let's do the usual red circle and say"
18600,28200," live on twitch and what are we doing today on twitch.television so today we are coding and go"
28200,35860," while google is spying on us in that case i suppose right so let me give the link to twitch.tv"
35860,42400," right and i'm gonna ping also everyone who's interested in being pinged there we go the"
42400,48940," stream has officially started and today we are developing something unusual something that i"
48940,55360," don't usually develop on the streams but i needed to do the the chores so i decided to stream that"
55360,62020," anyway so today we're developing gatekeeper right gatekeeper is the chatbot that's sitting in the"
62020,68840," twitch chat and also discord chat and answers the commands and some stuff like that right so there is"
68840,75480," a there's a special command in here uh literally called gatekeeper right so as you can see somebody"
75480,81340," will reuse it and uh basically it's the chatbot that answers that specific command so that's what it is"
81340,88000," right so uh right so and the you can find the source code in here if you're interested i'm gonna copy paste"
88000,95380," it in the chat of course and uh also for people who watch on youtube i'm gonna also post uh put that in"
95380,99820," the description and today's topic today the feature that i want to implement today is actually related to"
99820,106680," the commands let's take a look at how we uh handle commands within the bot right so let's actually go to"
106680,114920," gatekeeper right and i have two executables within the chatbot actually right i have two executables"
114920,121080," uh the first executable is called gatekeeper it's the main boat bot it's the main process that connects"
121080,127160," to twitch and discord and listens to your messages and then responds back uh and there's also gaslighter"
127160,134120," right so on top of uh connecting to like different services like twitch or discord uh gatekeeper also"
134120,140280," connects to the database it uses the uh postgres database it stores all the data there right so and"
140280,146760," essentially if i want to modify something within a database but i don't want uh to use a postgreSQL"
146760,152680," directly i have a special command line tool right that has predefined commands of usual things that i want to"
152680,159480," do uh right um and it basically connects to the database directly bypassing the bot and modifies"
159480,164280," the database and it just exits like it's a command line tool for configuring the bot right so the"
164280,169880," bot itself is called gatekeeper the command line for configuring the bot and connection to the database"
169880,171640," bypassing the bot is called gaslight"
171640,180920," it's pretty cool isn't it uh right so we handle commands within the gatekeeper right so we're not going"
180920,186120," to do anything with gaslighter right now maybe a little bit later we'll see uh so we've got some"
186120,193960," stuff uh from enumer8 underscore uh thank you for 100 beats for the message twitch isn't letting me"
193960,200120," subscribe no matter what so we'll just cheer beats until i have uh can have membership of all your epic"
200120,206120," clubs that's kind of weird right so uh let me know what's if you want to have an access to discord like"
206120,210200," just let me know your nickname and i'm gonna trust you manually if that's what you what you need"
210920,216120," um oh yeah and the chat says we also need to have a girl bosser at some point yeah i don't know"
216120,221960," what it's going to be what's going to be the girl bosser right if the gatekeeper is the bot itself"
221960,226440," and the gas slider is the configuration to what is the uh girl bosser"
230360,237000," library maybe maybe it should be library yeah so and as you can see um go we are using go right and"
237000,242760," using go in 2023 is unethical but not really i don't know right it's just like depends on the opinion"
242760,250600," uh right because uh everyone is outraged how google is planning to add telemetry to go right so they"
250600,258280," literally plan to add telemetry to that language like if you google it up go telemetry uh right so"
258280,266360," it's just like a you know hotly debated topic uh and uh so we yeah we can't really find anything"
266360,274600," about that so can i do go lang telemetry github can we find the open time to go a okay"
275320,281240," so telemetry and go toolchain yeah this one right so essentially and justification is so weak"
281240,289640," right i'm not really sure like it's gonna go through right so but i actually strongly oppose"
289640,295800," this kind of thing right so i really against telemetry to be fair but that's like a topic for"
295800,302440," another time so i can talk about it for for like an entire stream but yeah so and i do plan eventually"
302440,309480," to rewrite my project in something else right but since it takes uh time and effort i just don't do"
309480,316120," that right and here's an interesting thing i'm pretty sure the reason why they decided to even suggest it"
316120,324440," right now is because they know that everyone already depends on go and nobody's gonna rewrite their huge"
324440,331720," projects in anything else and so uh those everyone just gonna suck it up they know that they calculated"
331720,338760," the precise time when to start slowly pushing that because they know you can't do about that it's just"
338760,347160," like that's such a google thing it's just like my god uh anyway so but by the way um you may say there"
347160,355400," there's not that many alternative to go uh maybe for you but i have a pretty cool alternative to go"
356520,363320," i have an access to jaya beta and usually i don't like to write my project projects in jaya beta because"
363320,369640," i don't like to um i don't like the fact that i can't share the code because other people can't uh run"
369640,374680," the code on their machine but this project it doesn't really meant to run on your machine"
374680,381880," it's meant to run on my machine it's my project it's in there is a lot of like hard-coded things"
382440,387400," specifically for my channel you literally can't reuse this bot for your channel unfortunately i'm"
387400,391640," sorry it's just like don't have time to make a general purpose boat i'm making like a very"
391640,396440," specialized bot for my channel and it has a lot of things that are literally hard-coded for my channel"
396440,401080," because it's just easier for me so i'm doing that only for myself not because i'm an asshole"
401080,405320," i am an asshole but i'm doing that not because of that uh right i'm doing that because it's just like"
405320,411720," doesn't take too much resources right so um so making a general purpose bot is not my goal right"
411720,417720," and jay seems to be like a perfect language for this right i don't need to make sure that it works on"
417720,423880," other people's machine i do it for myself and i yes it's just like perfect and jay is very good alternative"
423880,431320," to go like it implements a lot of things from go as well right so but that's a topic for another time"
431320,436680," that's a topic for another time uh okay so i'm gonna put that in the description as well"
436680,442200," right so just for the people who are watching on youtube uh potentially right so because i think"
442200,448520," i want the software development community be aware of that right so everyone can make their own decision"
448520,452680," whether they want to be spied by google or they don't want to be spied by google you're going to be"
452680,457560," spied by google anyway by the way because you're using chrome chromium but i mean do we want to give"
457560,465960," google even more power than it already has i don't know maybe do we have choice maybe not anyways so"
465960,473800," um yeah we've got another slip we've got another sub thank you so much uh disapes one two three thank"
473800,484280," you thank you thank you um and two two two two so just a second i need to double check some stuff"
487560,496360," all right okay so and speaking of uh hard coding things right speaking of hard coding things"
496360,505160," uh that's precisely what i want to work on today right if we go to the gatekeeper thingy and we go"
505160,511720," to the module that handles specifically commands right so there is a function that evaluates the commands"
511720,516760," there we go right so eval command right it accepts the connection to the database of course because"
516760,522680," the commands may uh wanna modify the database it accepts the definition of the command the command"
522680,527240," is usually like a structure or something like that right so it is a structure which is basically name"
527240,532040," and arguments right an argument you can only have one argument right now it's just like a string that"
532040,536840," you put out of the command right so that's a very simple thing to name an argument and the command"
536840,542200," environment this one is a little bit more interesting because it's an interface right it's an interface"
542200,549000," so let's take a look at this thing uh it's an interface with the several methods right at admin"
549000,556440," at author is author admin as discord environment and sent message so essentially uh the purpose of"
556440,562120," this thing is to describe an environment within which the command is running and right now we have only"
562120,567800," two environments within which the command can run twitch environment and discord environment right"
567800,572840," so and essentially if you call send message it will send message to the environment where the command"
572840,579000," was issued right so the command itself doesn't really care much about the environment it's running"
579000,585160," in right so if you if it wants to just send a response it doesn't need to know where it's sending the"
585160,589960," response right it whether it's twitch with its discord it doesn't care it just want to send it and"
589960,597080," that's what it is it just abstracts that away and add admin basically an add author also depending on"
597080,601320," the environment is going to return different thing because on different environments on twitch you add"
601320,607320," people one way on discord you add people the other way right and because of the difference in the"
607320,613400," environment it's also obstructed away and at admin is needed in case of for example an error has happened"
613400,618280," and i need to ping the admin so to check logs or something like that so this is how it usually used"
618840,625320," uh i think we can even check it out yeah so for example if any an error has happened i just say"
625320,631320," something went wrong with the database commands that require it won't work please ask at admin to check"
631320,637240," the logs right so it is needed to send these kind of messages in case something failed right so"
637240,644920," yes yes yes yes and uh here when we handle the command we have a huge switch case"
645800,651000," speaking of hard coding things right so for instance for uh i just had coded two commands for two"
651000,656040," different projects that i'm working on right that which is the text editor dramatic text editor that"
656040,661000," we worked on in the previous stream right and also for the gatekeeper i just edited it uh right here and"
661000,666280," it's literally had coded in the code it is literally had coded in the code and like different commands may"
666280,674600," do different things and stuff like that so what i want to do i want to unheadcode that right i just"
674600,679720," want to add hot code like every time i want to add a new command that describes one of my projects i don't"
679720,685720," want to go and modify the goddamn source code right i don't want to go and modify the source code so uh"
685720,691720," essentially what i can do i can just create a new table in a database where it's going to be a command and"
691720,696600," two columns like a name of the command and the response right so and instead of like doing this"
696600,702120," shit i will just like a query okay the user sent these commands tell me the response for this command"
702120,706600," and i just grab it from the database and i just put it there and every time i want to add a new command"
706600,712360," i will just modify the database uh and don't have to even restart the boat don't even have to recompile"
712360,723080," anything it will just work right but here lies the problem it works well for the commands that just respond"
723080,729400," with the text right uh so essentially because you have a mapping name of the command text response"
729400,736360," like a static text response name of the command static text response but what uh but that means that my"
736360,744200," all of my commands all of a sudden split into two different categories the custom commands static custom"
744200,749640," commands that are in the database and dynamic commands that are built in for example i have"
749640,755880," commands that check the weather right and to check the weather i literally have to make an http query"
755880,764760," all right so and that cannot be stored in a database right so that like effectively splits all of your"
764760,770920," commands into two categories static commands and dynamic commands and you cannot have you cannot"
770920,777480," store dynamic commands commands in a database and that's a huge problem right so the way it's usually"
777480,782440," solved it's usually solved in dynamic languages right so if you're writing your board in something like"
782440,788440," javascript uh right so essentially what you can do instead of storing the text of the response of the command"
788440,794040," you literally store the javascript that you're going to evaluate and as far as no supini does like that"
794040,799240," right for his bot so essentially in his database he has like mapping of the name of the command"
799240,805640," and literally javascript uh that is evaluated every time you run this command and that is very flexible"
805640,810920," and that works but at the same time it's just like a little bit scary at least for me right because"
810920,817320," you like literally have the whole power of the javascript and what if that specific javascript is gonna"
818360,822680," do something that it's not supposed to do in a like a global environment or something like that"
822680,827960," right so that's kind of a little bit scary but i mean so being a professional javascript developer"
827960,830840," he probably knows what he's doing maybe in javascript there's something like that"
830840,835800," something that actually like sort of sandbox the environment and stuff like that but i'm not a"
835800,840200," professional javascript developer and i'm also not using uh javascript right so"
841640,850200," what kind of solution um can fit our case where we're using statically typed compiled language"
850200,856920," but also want to have these dynamic um you know benefits these dynamic benefits of actually storing"
856920,863640," this script uh in the in the database we can use the secondary scripting language actually something"
863640,871560," like lure right something like lure uh where like we store the lure code in the database and then we"
871560,878200," evaluate this uh this entire thing but lure is like a huge separate dependency like so that we don't"
878200,886680," really need the entire lure uh just to you know just evaluate some commands and even like compose some effects of the bot"
887960,896280," um and here comes the uh solution um chat says huge i mean it's relatively huge it's relatively"
896280,900600," uh huge to the problem i'm trying to solve right so everything is relative"
900600,911960," i thought about this problem for quite some time right and uh some time ago uh i came up with"
913000,921160," plausible solution basically make your own simple scripting language right i can and then you can say"
921160,929080," oh making your language is so hard blah blah blah but no no no no no no so if you analyze precisely"
929080,937000," what do you need right and implement exactly what you need it's not going to be that hard and it's not"
937000,942760," going to be that big and it's going to be smaller than lure right so the scripting language i came up"
942760,949160," with i actually streamed the development of that language i think it's located on git lab uh somewhere"
949160,956760," git lab so yeah so basically the main specific language it already exists i already made it in go by the"
956760,959640," way uh it's called bix"
959640,966120," what it stands for it's uh"
966120,971880," just a sec oh it's a bot expression yeah why did you call it like that"
972520,980680," bix uh right so uh let me give you the link to the to the source code of bix"
980680,986760," what the fuck is wrong with me when i developed that i developed it like a yeah i developed it a year ago"
986760,993240," right so it was a year ago a year ago i was actually thinking uh how to how to solve this uh this kind of"
993240,1002360," stuff all right uh bix so and this is the bot expression and the language consists of only"
1002360,1013560," four things only four things only four things strings integers variables and function codes that's it"
1013560,1019480," that's literally that's the entire language you want to see the size of the language like how"
1019480,1028600," how much code do you need to write to implement this language so let's actually go down uh 433 lines of code"
1029400,1037400," and the thing is essentially what you do right you can write these kind of expressions right you can"
1037400,1043640," write this kind of expressions and then in the environment in the scope of the evaluation of that"
1043640,1051400," language you can bind your own custom variables and your own custom functions and when you call this own"
1051400,1058200," custom functions they will call the go functions right so you basically provide the table like here's the name and"
1058200,1063640," here's what this function does and a while while evaluating the script it will literally call that"
1063640,1072120," function and essentially if you have uh commands that perform some side effects you can basically put all"
1072120,1080760," of these side effects into separate functions for instance uh you can define function say which accepts a"
1080760,1087800," string and every time this function is evaluated the bot will say something say that text within the environment"
1088200,1094280," right it will say that text within the environment so for example we have a command weather which i need to"
1094280,1103560," perform http query uh to get the weather and then it prints that weather right so to get http query you can"
1103560,1109800," create literally create a separate command called http right and for instance you want to now define a"
1109800,1115640," weather command how would you define a weather command well you define it as an expression that takes http query of"
1116600,1122120," so let's actually find the check weather off uh right check weather off something like that"
1122120,1131400," uh right this then uh you would provide the location of the weather through the argument so you would put arg in"
1131400,1139480," here uh and then you would also add this thing in here right and this command or this function will perform"
1139480,1146680," uh the http query and just return as a result the the text that was returned by this thing so this thing"
1146680,1153560," needs to be url escaped let's also have a separate function url escape uh right which basically just"
1153560,1161160," url escapes this entire stuff url escape right and then uh what you want to do you want to say to the user"
1161160,1169080," uh whatever we got from from this entire thing so we would do say http but we also want to add the user"
1169080,1175720," the the author of the message so we can say something like add author uh right and maybe we we're going"
1175720,1183000," to separate all of that with the space uh like so all right and this is a single string this is a single"
1183000,1190760," string that we can save in the database right so we can have a name uh table name and then uh behavior"
1190760,1197000," behavior and this is what we can store in the database so and every time you like issue a weather"
1197000,1203000," comment right every time you issue a weather comment we're going to query uh this specific behavior and"
1203000,1209400," we're going to evaluate it with an interpreter uh right and for these kind of functions it will call back"
1209960,1215400," to go code which will perform http queries url encoding and then saying it and then it will just"
1215400,1221240," behave as this description right so and as you can see for these kind of simple things you don't need"
1221240,1227400," an entire law you just like i need a simple expression language and then we can say basic building we can"
1227400,1234360," take all the build building blocks of the bot behavior like uh saying a message making http query maybe"
1234360,1239560," extracting something from the database and we can expose that to the admins of the bot to basically"
1239560,1244280," compose different commands so we basically instead of having commands we have building blocks out of"
1244280,1253240," which you can build your own commands right so does this make sense uh does bex have telemetry yes it"
1253240,1260440," does have telemetry i'm joking it doesn't and all of that uh this entire thing is in fact like only"
1260440,1269160," requires you to add 400 lines of code right so it only requires you to add 400 lines of code and 33"
1269160,1275640," as far as i know the huge part of it is an example right that demonstrates how to use all of that"
1275640,1282360," in reality i think the language itself is actually 231 lines of code right so because the rest is just"
1282360,1288200," like a main function that just demonstrates how to use this entire thing so in here we have eval expression"
1288200,1293720," which just recursively evaluates this entire thing and here is just like a scope management right so this is"
1293720,1298520," some sort of scope management i wrote it like a long time ago but i don't remember everything so here we"
1298520,1304760," can parse the expression uh and this is i suppose the expression parser it's it's very simple it doesn't"
1304760,1312840," support string escaping but it's really easy to add in future uh right and uh yeah so this is the the"
1312840,1318200," definition of the structures and stuff like that so that's the entire language it's not cool so you you get"
1318200,1325800," the like advantage of scripting language uh for just 200 lines of code it's that simple it's probably not"
1325800,1332200," super fast in the sense that every time you execute the command you parse the command or parse the the"
1332200,1339880," source code uh and then evaluate it and the evaluator is not even like uh it compiles to a virtual machine"
1339880,1344120," it's literally just traverses the ist and the ways that but for simple things i think it's actually"
1344120,1351160," sufficient enough cache it in memory yeah maybe it would be kind of cool to even like invent a virtual"
1351160,1357480," machine for this entire thing and compile this stuff to bytecode and actually store the bytecode in the"
1357480,1363000," database so every time you uh query the command you don't parse that what you've got from the database"
1363000,1370600," you just start evaluating bytecode directly without parsing right and maybe so if your bot is like working"
1370600,1377160," with millions of users we can jit compile this command to native code that's actually very cool"
1377160,1383000," that's a very interesting project like compile like a jit compiler for bex"
1383000,1391240," jit compiler for bex right so it takes the bytecode for its virtual machine and maps it to the actual"
1391240,1396200," native instructions and every time you execute the code you jump to the sequence of native instructions"
1398440,1403080," it's it yeah it does sound like over engineering and we're probably not going to do it today or"
1403080,1409880," probably in the near future but if i was developing like a production bot like a heavy load production"
1409880,1414280," bot and i wanted to implement feature like that for that heavy load production bot with like millions"
1414280,1418760," of users and millions of requests of like per second or something like that that would have been an"
1418760,1425560," interesting project to work on right imagine you need to have that but like on a high load right"
1427000,1431160," and what you essentially do you implement like an in-memory compiler for your commands"
1431160,1436120," that's such an interesting project to work on but it's of course we're not going to do that"
1436120,1440200," probably in the near future but just like you know have that at the back of the head i think"
1440200,1447080," it's kind of cool still right so i'm saying all of that is that this is a very dumb solution"
1447080,1452840," but then if you need to like scale it in terms of performance it scales also some somewhere in some"
1452840,1458040," place theoretically right probably hopefully not in a bad place uh i don't know"
1460440,1468040," so isn't that poggers my dudes all right so we've got some uh sub mate yourself seven seven seven"
1468040,1473800," thank you so much for to one subscription with the message at sodium a gun gun i almost said gopher"
1473800,1476440," as far as i can remember this symbol is called sodium gun yeah"
1476440,1481560," uh so and apocryphos thank you so much for your one subscription with the message pew pew"
1482280,1488360," right just a friendly reminder that you can actually put anything in the message of your resub"
1488360,1493880," right including questions and even programming questions and since you put some money into a"
1493880,1501000," question uh i will have like a moral obligation to at least answer something to you i won't be able to"
1501000,1508360," dismiss your question or pretend like i ignored you right like i didn't notice you right so if you put"
1508360,1514280," something there i sort of like morally forced to answer something to you even though i don't get money"
1514280,1521240," i just feel bad if i don't acknowledge the like the people who have good intentions and trying to give me"
1521240,1529480," money can you use it as a debugger uh the debugging what debugger of what debugger of its own scripts"
1529480,1537320," i don't think so i think to debug this kind of scripts uh we probably need to create a separate"
1537320,1542520," tool but since the scripts script is so simple the debugging tool is probably going to also super simple"
1542520,1550680," so i don't think i don't think it's necessary uh can i use you as a debugger oh my god i'm sorry"
1550680,1557960," i i i can't read no you can't use me as a debugger but i mean if you if you ask a debugging question"
1557960,1571320," in the in the resubscription also um all right so uh let's go let's actually take a take a look at the"
1571320,1578920," at this thing right so let's actually try to run it on my machine um because i haven't run it for quite some"
1578920,1584760," time so maybe i do have it still somewhere here so backs do i have backs in here i do have backs would"
1584760,1593320," you look at that uh right so can i um just you know download everything so oh yeah i've made some changes"
1593320,1601640," right turn oh yeah i do remember that turn backs into a scap scheme yeah i remember that what i did i"
1601640,1608520," actually implemented like a lot of different built-in functions that's probably why the main uh thing is so huge"
1608920,1617720," right so you have place you have the let uh i implemented let and uh so what what did we do in let"
1617720,1625720," uh uh a portfolio define which defines new function by the way who said that you can't define a function"
1625720,1634520," that while executes adds another function to the scope of the script so you can have a function that defines"
1634520,1642440," other functions right you can do that uh so you can you have lists you have four like i defined all these"
1642440,1652040," things and this is what i came up with so uh yeah a function hello uh the arguments of the function"
1652040,1660200," are name and the city right and then when you execute this function uh we say hello name from city and then we"
1660200,1666680," query the weather weather we query weather in your place in your city and we tell you that here is your"
1666680,1672920," weather in blah blah blah right and then this is this is not part of the language by the way this is what"
1672920,1679320," you can do with this language you can define all of these constructions as separate functions right"
1679320,1686600," but here is interesting thing so like how can you do a define doesn't that mean that all of this thing"
1686600,1694280," is going to be executed before this function is going to be defined not really so the way the backs is"
1694280,1702040," executed and this is a feature of the of the backs itself it's all call by value right do you guys know"
1702040,1710200," what is a call by value call by not but by name it's a call by name i'm sorry it's it's like a computer science"
1710200,1715960," term right that uh yeah it's one of the evaluation strategies right"
1715960,1724520," it's one of the evaluation strategies so uh the idea is basically right the idea is basically that"
1724520,1729960," when you call a function like f and you do something like uh one plus two"
1731160,1738840," one plus two is not evaluated one plus two is not evaluated it's passed as a expression"
1738840,1746760," unevaluated expression inside of f right it's sort of like it's lazy in a in a husky sense lazy so"
1746760,1755480," essentially uh we start evaluating at the outermost function so this function evaluates first and it gets"
1755480,1761560," all of these arguments as unevaluated expressions and then within the implementation of the function"
1761560,1768920," the function itself decides whether it wants to evaluate functions or doesn't want to evaluate"
1768920,1774680," functions and that way it can actually like work as a defined construction because it's not going to"
1774680,1781560," evaluate all of these things it's just going to save them uh right so essentially here hello it probably"
1781560,1787720," evaluates these two arguments right uh but then it just takes whatever it has afterwards and just like"
1787720,1793160," adds all of that as a new function in the school for something like that right and this is very useful"
1793160,1800360," this is very useful for example you can define a function something like uh subbed right for instance"
1800360,1807400," like you have a command with this specific expression right with this specific expression and sub takes its own"
1808200,1814200," argument doesn't evaluate that argument but the first thing it does it checks whether you subbed or not"
1814200,1820280," and if you subbed only then it will evaluate the inner thing and if you're not subbed it will tell"
1820280,1826840," you no this feature is only for sub people right right it all may be only mods right so this is a similar"
1826840,1835160," thing so this is why uh this is why uh we call by name right this is why we do not evaluate the arguments"
1835160,1841720," we just pass them as it is so the implementation of the function can it decide itself whether it wants"
1841720,1846840," to evaluate these things or not right because it allows to create these kind of guards and check"
1846840,1852280," different things and stuff like that i think it's rather useful right so for this specific language for"
1852280,1856040," this specific language this is an advantage of using your own language for this kind of stuff by the"
1856040,1862440," way because you can decide how it behaves right if you go with lure you're stuck with whatever lure"
1862440,1868680," like offers you and you can't change that unless you start modifying lure but now you're actually"
1868680,1875560," you know maintaining lure right so you can develop a language precisely for your use case"
1878680,1886200," so the arguments are strings all the time no they're ast nodes they're you literally pass them as ast nodes"
1886200,1895720," uh all right so for instance let me see how um http is defined right so http is defined as so"
1895720,1901960," right so when http command is executed we actually call this goal function right which accepts evaluation"
1901960,1909480," context right and uh it also gets the uh array of the arguments of the expressions and as you can see"
1909480,1914600," all of the arguments they are expressions and expression we can take a look at what is an expression"
1914600,1922600," uh it's a structure it's an ast so you can check its type right so it's either integer string variable"
1922600,1927080," function call we also have void for whatever reason and depending on what it is you can actually cast it"
1927080,1933800," to either integer string or something like that right so and essentially um right so what we do"
1933800,1940200," we iterate like for specifically for http command http commands needs to evaluate its arguments so what"
1940200,1946600," it does it iterates through the arguments and it asks the context to evaluate each individual argument"
1946600,1953080," so you see the function itself made a conscious decision okay i want this argument to be evaluated"
1953080,1961000," right so and that's how it works for example in something like define uh right or maybe four and"
1961000,1969080," maybe not four uh where is define right so here we accept arguments but the first thing we do in here"
1969080,1974040," we check the length of the arguments without even evaluating them right we don't even evaluate the"
1974040,1981320," arguments they're just a list of uh of trees for us right and uh we're only going to evaluate things that"
1981320,1987240," are needed to be evaluated depending on what function does right if for example i want to introduce an"
1987240,1994440," if construction if construction is going to be something like condition then and else right so and"
1994440,2003400," essentially if is going to evaluate condition up front but it's not going to evaluate then or else then"
2003400,2009000," it's going to check and then if the condition is true it's going to evaluate then and if it's false"
2009000,2016360," it's going to evaluate else right so you see what i mean so that's precisely why uh it is called by name"
2016360,2022840," right so the functions themselves decide what kind of construction they act as right so that gives you"
2022840,2029960," more flexibility and still this language is two-handed lines of code right that's the cool part of it like"
2029960,2035640," you you you can do all this like cool shit and it's 200 lines of code and to be fair it's a very"
2035640,2041560," specialized language it is a very specialized language it's only good as a language that describes the"
2041560,2049000," behavior of the bot commands right and honestly i do not recommend to write in this language like that"
2049000,2055080," i do not recommend i just this was just a demo what you can do with this language but generally what you"
2055080,2061880," would do you would identify the building blocks of the behavior of your bot like sending http query"
2061880,2067880," saying something in your chat doing like making a specific at which api call and you just expose them"
2067880,2072120," as these building blocks as functions and then you can build command out of these blocks"
2072120,2080360," right so if you try to turn it into real programming language i feel like you're already doing something"
2080360,2085160," wrong right if you turn it into into real programming language you probably need a real programming language"
2085160,2089080," the whole point of this thing is that it's not a real programming language it's just like a"
2089080,2094280," composition of predefined components it's a it's a glue code for predefined components does it make"
2094280,2101560," sense okay uh use to use to use cover a freaking distance let's go ahead and try to maybe run this thing"
2102840,2112680," uh right so the the problem with this thing is that it's not um how to say that uh a separate package"
2112680,2120760," but this entire thing is so small that i feel like it there's no point in spending any effort uh on"
2120760,2129880," making a separate package to be fair like why uh what's the point okay so here we read lol backs then we"
2129880,2134280," parse all of the expressions right we parcel with expressions and then we evaluate all the"
2134280,2139000," expressions so one of the things we can do let's actually try to recompile this entire thing so i'm"
2139000,2146920," going to do uh go build dot oh yeah it was actually developed with such an old goal that it didn't use"
2146920,2152760," the goal mode thing i think you can easily bypass that if you just provide the uh the file name"
2154920,2163240," right uh my goal was so old it didn't even spy on me to google right right if i try to do something like"
2163240,2175400," uh bex uh right unknown function mod unknown function mode um it doesn't know about function mode right so"
2175960,2184680," the program tried to call the mode and i don't see oh i just added that thing in there so you remember"
2184680,2190200," how it was like um confabulating functions like possible functions that you can define i just edited"
2190200,2197080," there and the the environment told me that this thing does not exist right so there we go it worked"
2198040,2203640," you see you saw how it actually paused for a second this is because it literally was making an http query"
2203640,2212200," right it's literally making an http query all right so it worked it's just it's a very basic and simple glue"
2215880,2223960," it's a very basic and simple glue that we can use in our project uh i wonder what else can we do for"
2223960,2237400," instance um i want to try some things i want to try some things um so let me let me do a new main in"
2237400,2245560," here so this is going to be just a main uh fmt println and i'm going to say hello world hello world"
2245560,2256920," and we're going to do go run bex go uh hello world okay cool so let's actually define something uh let's"
2256920,2263800," define a command something like say um just probably have to put quotes in here hello world right so this is"
2263800,2270040," my source uh right so this is my source uh right so this is my source and what can i do with that source"
2270040,2277640," how can i parse that so there is parse all expressions right so parse all expression it accepts the string"
2277640,2284440," and returns a sequence of expressions or an error if there was uh you know a syntax um error in there"
2284440,2292600," right so that makes sense uh that's pretty cool so parse all expressions source and we get"
2292600,2297560," expressions or an error right something like that in if error not equal"
2297560,2304200," we're gonna say fmt println uh error"
2304200,2316920," i could not what the am i doing i could not parse uh source code for this specific reason and then we're"
2316920,2323160," gonna maybe uh exit with non-zero exit code right so this is how you exit with non-zero exit code"
2323160,2330520," otherwise we can try to maybe print the literal ast that we managed to parse right so let's actually take"
2330520,2335320," a look at that so println and i'm gonna literally just try to print this thing so did we get anything"
2335320,2344040," uh undefined os okay so we probably have to import this os sure there we go uh yeah that's basically the ast but"
2344040,2349720," uh it would be nicer if we had like a better ready printer for this kind of stuff uh i remember that"
2349720,2355000," you have to do some shit like this right i don't quite remember it's just like hash or plus or"
2355000,2361960," something like that yeah so essentially type 4 it doesn't really specify like the name of an actual"
2361960,2369880," enumeration uh but as an integer it has nothing as a string it has nothing it only has uh as a function right so this is literally a function"
2369880,2376760," so this is literally a function and that is kind of strange right isn't it right because we have only one"
2376760,2385480," single expression which is a function call right and as a function call um it has a pointer to the string"
2385480,2391960," maybe right so if i take a look as fun call yeah it is a pointer right it is a pointer and the reason"
2392680,2397160," it is a pointer is because we have like a sequence of arguments and stuff like that it didn't really do"
2397160,2406840," like a deep um you know um how to say that deep traversal to show everything in that ast right it would"
2406840,2414040," be nice to have like a uh maybe a thing that allows us to print you can actually print this expression back"
2414040,2420600," but it actually recovers the original uh the original expression here which is not particularly great so"
2420600,2430360," you can literally just um you can literally just do something like s um and it just restores this entire"
2430360,2436920," thing it probably it actually doesn't uh which is kind of weird because i mean you could do string"
2437560,2444200," isn't that how it works or do you have to explicitly say string ah because we have several of them okay"
2444200,2451960," so if i do something like uh for expert uh range i think it's something like i experts right so then it's"
2451960,2457400," going to be i and that should actually work right because we have a string method for this entire thing"
2458280,2465560," yeah there we go i'm not sure why it is like that so"
2465560,2474520," yeah okay so you have to call the string explicitly for some reason i thought that s quantifier will"
2474520,2481320," automatically call the string method for me but it doesn't call it for me right so if i just remove it"
2481320,2487320," um it doesn't do that which is kind of weird like i thought it does that uh automatically"
2488280,2490280," um"
2490280,2498520," i contains as an element itself let's actually find out does it contain it's an element itself"
2498520,2502520," no it doesn't somebody doesn't know go"
2502520,2510360," all right uh so whatever what what i wanted to have i wanted to have like i'm some sort of a tool"
2510360,2516760," that actually dumps the ast if you know what i mean right so um essentially it will just like"
2516760,2526840," print this entire thing or what not so let me let me see uh so how can i call a method right so"
2526840,2533560," essentially i want to have a method expert expert which dumps the uh the ast we can literally call it"
2533560,2540120," dump right uh right we can literally call it dump and i suppose it's going to just like log this entire"
2540120,2545480," thing so and depending on the uh on the type we're going to just like print this entire thing differently so"
2545480,2551160," we have a bunch of other types uh right expression void but let's actually use a little bit of emacs magic"
2551160,2565240," for this entire choice okay so i'm gonna put it here case and cool so in case of void um i think what i'm"
2565240,2574120," gonna do is i'm gonna literally print uh void right so this is a void another interesting thing so i want"
2574120,2580920," to actually print it uh as in um in a yaml style if you know what i mean right so for instance if i have"
2580920,2589800," something like say uh hello world right the output that i want to see i want to see fun call uh right fun call"
2589800,2603160," name uh say args right so args and then for each arg it's going to be like uh for instance string right"
2603160,2609720," string value and so on and so forth i i want to actually uh see the the structure the tree structure"
2609720,2615400," of the of the entire ast i think it's going to be useful uh maybe it could be done like this right so maybe"
2615400,2621720," fun call and then in here you have like other things and also it needs to maintain the indentation"
2621720,2627480," right so uh because of that we need to keep track of the level right at which we are and as far as i know"
2627480,2634760," um go doesn't have default arguments does it right so it doesn't have them uh go lang"
2634760,2643480," default arguments right so i'm pretty sure rock pipe rock pipe rock pipe came up with a very highly"
2643480,2648120," intelligent reason for having or not having this entire thing that you would never guess unless"
2648120,2652680," you read his actual argument right but maybe it does exist i don't know"
2652680,2661080," um so when it is of having named uh returned what uh"
2661080,2665240," dag.go what about google"
2665240,2672600," i swear to god optional parameters okay so they are um they're called option parameters sure"
2677160,2681320," so go does not have optional because it's not ideomatic and because i said so okay so i don't"
2681320,2686360," care the reason so it doesn't have them uh sure so this is something that we have to just keep in mind"
2686360,2694360," uh all right so that's fine let's do fmt so we're gonna just like call this entire thing as"
2694360,2700840," expert dump zero then right so but then maybe we can uh implement some sort of wrapper right that"
2700840,2706440," just passes that zero but it's just like you know the style thingy more of like a style thingy so"
2706440,2713480," uh what we can do in here is essentially just four i don't know how can you do a wrench or can you do"
2713480,2718600," a range or maybe i have to actually do it like that level uh plus supply there's no plus plus because"
2718600,2724280," rob pike said so um there's no actual reason it's just because he said so uh and then we probably want"
2724280,2730920," to just do like maybe one space maybe two spaces okay sure something like that whatever maybe there is"
2730920,2736360," like a magic for like in a format parameters that i can actually allow me to do that but i'm a little"
2736360,2744840," bit uh a little bit lazy to figure that out um all right so fmt print f so here we're going to have an"
2744840,2749960," integer right so an integer and i want to actually print the value of the integer right so it can be extra"
2749960,2757000," uh expression as int expression as print so in here i probably have to put a new line"
2757000,2763720," so for the consistency i want to use uh printf in here right so i think that's cool"
2763720,2778920," printf and then we have str which is going to be a string expression as str and for the string i have to wrap it in quotes but there's a one problem is that it would be nice to escape uh listen to anything as well"
2778920,2787320," so expression dump does not escape strings right so this is something that we want to have as well"
2787320,2796680," uh printf uh we also need var right so this is going to be a var uh and expression as var there we go"
2796680,2801160," so all of these things were rather simple right so all of them were rather simple so the difficulty comes"
2801160,2807000," with a phone call right so we're going to do in here we're going to just do phone call and in the phone call"
2807000,2809640," what do we have if i remember correctly expression"
2809640,2818360," as fun call right so it's a very fun call we're having fun chat aren't you having fun i'm having"
2818360,2826280," such a fun call uh all right so it has a name right so here's the name and after that we want to iterate"
2826280,2831000," the arguments right so we're going to be iterating the arguments and we're going to call in that thing"
2831400,2838920," recursively uh right so this is going to be a range uh expression uh as fun call args right"
2838920,2848040," and then what do we want to do we want to do uh maybe it would be better to actually do something like"
2848040,2853720," that i can never remember like if i add another argument in here is the actual element on the right"
2853720,2859000," side or on the left side i can never for some reason remember the the order is just like not"
2859000,2865720," obvious to me so my brain cannot comprehend it so i always get it wrong like every time but maybe it"
2865720,2869960," doesn't matter right so i'm gonna just like put it like this the compiler will tell me that i'm doing"
2869960,2873640," something wrong and then i will change it and then i will never learn what's the actual order"
2873640,2881080," so that's how it usually goes right right so because i feel like it doesn't matter it's just"
2881080,2886280," like i literally couldn't care less in which order you actually put these things but i'm pretty sure"
2886280,2892520," there is like a highly philosophical reason and rob pike really thought out the actual order right so"
2892520,2900280," when you have to remember that anyway but i personally i'm such a bad programmer i couldn't care less"
2901000,2906440," like i couldn't give a i just want my code to work all right so let's see uh no"
2906440,2913640," declaration inside of body okay so we don't need that stuff anymore dump is undefined uh which is"
2913640,2921640," rather interesting right so and it is undefined for integers who would have guessed i got the order wrong"
2921640,2930280," okay that's cool so now what i want to do uh what i want to do is basically"
2931240,2940600," just do these things so expression so arg uh so it comes first so maybe i'm gonna do arg"
2940600,2948120," uh maybe i'm gonna call it expert actually expert emacs freaking stop"
2948120,2958440," dump okay finally uh are we good yeah there we go look at that look at that ast dump look at that"
2958440,2964040," a beautiful beautiful ast dump is enough poggers"
2964040,2973560," so let's actually try to dump something more uh complicated for instance the example that we had in"
2973560,2980360," here like what if we try to dump this shit i think it's gonna be really fucking poggers uh so it's gonna be"
2980360,2988360," huge ast so in here we just want to read the file right so we already use a read file and then we"
2988360,2995880," parse it with all the expressions right so let's say uh so this is going to be that and we can say that"
2995880,3002760," source is basically a string of content because as far as i know read file uh returns an array of bytes"
3002760,3015400," right so it returns an array of bytes uh go doc right uh yes yes yes it does return an array of bytes cool"
3015400,3023000," so let's go ahead and just try to execute this entire thing and let's admire this entire ast"
3024040,3032040," right so if we want to debug our like code we can see its entire structure in here so this is a function"
3032040,3037560," called define and the arguments are variable another function call another function call and so on and so"
3037560,3046760," forth right that's actually pretty cool it's not even that big but uh it's pretty it's pretty interesting"
3049080,3054680," yeah i think it's i think it's useful it's useful to have this kind of thing and i want to actually add that stuff"
3054680,3063480," to the um to the original repo to the original uh bex repo so what i'm gonna do i'm gonna uh"
3063480,3069000," just add this function call i'm not gonna add this thing for for testing"
3069000,3076760," right so let's say implement expert dump right and i'm gonna push that right into the reaper"
3077480,3082760," i'm gonna push that right into the reaper is it pushed is it pushed i think it is finally pushed"
3082760,3086680," okay the reason i was doing all that is because i want to kind of i want you to kind of recall"
3086680,3091800," how to work with this language because like i haven't used it for a year right so this is me"
3091800,3096920," using it for the first time after a year uh i can't really remember everything in this code but i"
3096920,3101880," now like recall the gist of how uh how you're supposed to work with this entire thing and as you"
3101880,3106760," can see it's pretty straightforward right so it's easy to parse it's easy to traverse it is it's easy to"
3106760,3115160," modify it's just like 200 right let's go ahead and just try to put this thing in the uh in the source"
3115160,3124200," code of the bot in source code of the book so uh you see you soon so where is the bot so then gatekeeper"
3124200,3130920," so and it's going to be cmd uh gatekeeper how are we going to go about all of that i think i'm going to"
3130920,3138040," literally just copy paste backs there right so uh again i don't really want to mess with the packages"
3138040,3142920," and stuff like that uh right i'm going to just literally copy paste the code into the into the"
3142920,3148680," project because you know what they say you know what they say the actually reusable code is the one that"
3148680,3154200," you can simply copy paste they don't actually say that i i made that up i'm the only one who say that but"
3154200,3161720," i'd like to say that but it's actually true right the most reusable code is the one that you can simply"
3161720,3169800," take and freaking reuse right so you take the code you put it in your project you just reuse it that's"
3169800,3176680," the most reusable code that it's as reusable as you can get you can't get more reusable than this that's"
3176680,3184760," the pinnacle of reusability right you don't need some dependency injection abstract factories or any"
3184760,3191000," fucking you take the code you just reuse it that's the reusable code literally without any freaking"
3191000,3200680," bullshit cheers for that"
3200680,3204360," this book code is the light that made up by npm incorporation yes exactly"
3204360,3214200," uh okay guys so i removed main right so i didn't think we need that stuff anymore uh okay you know"
3214200,3220200," what i don't like about this code is that it freaking panics a lot it's a very panicky code"
3220200,3228360," it is a very panicky code so here we just check for unreachable for this one i think it is okay to"
3228360,3235800," panic right because i want to make sure that this switch case is complete uh is there any way to like"
3235800,3243160," to ask the go compiler to check that this switch case is complete right i'm pretty sure there should"
3243160,3253160," be some way um go lang switch case uh complete because i don't want this to be a runtime error you know"
3253160,3271160," what i'm talking about how to write switch statements and goes um check if complete"
3273160,3281720," can anybody ask chat gpt please i don't have an access to it"
3281720,3289240," okay so um anyways"
3289240,3299560," exhaustive okay so let's try exhaustive thank you so much that's that's that's a better name uh"
3299560,3303320," exhaustive i completely forgot about such a fancy"
3303320,3306600," a package"
3306600,3311720," you need a separate package for that everyone"
3320840,3329000," command line program"
3329000,3337640," it's like it's a separate linter to check the exhaustiveness of your switch cases"
3337640,3338600," oh"
3341400,3347080," nice language by the way and on top of that this language is gonna send all of your data to google"
3347080,3349960," yes nice language"
3349960,3356840," this feature is only available if you install telemetry and go yeah yeah they actually should"
3356840,3360280," do something like that yo what the that's such a cool idea"
3361080,3367000," basically introduce new features to the language they should have actually"
3367000,3373000," they should have actually only allow generics and go if you enable telemetry"
3373000,3376280," yo yo"
3379160,3380600," that's such a cool idea"
3380600,3390440," i absolutely love it anyway so essentially the only way right now"
3390440,3399560," we can check exhaustiveness is by like at runtime right i suppose so um it would be nice to panic here"
3399560,3405240," as well right so generally like in this specific application i don't think panicking is a good idea"
3405240,3411080," because this application is supposed to work 24 7 right it's not supposed to even fail if any error has"
3411080,3416920," happened if any error has happened uh it should handle that log that and continue working for as"
3416920,3421640," long as possible because it's a service right so that's how a service you should operate right but"
3421640,3427640," in case of exhaustive switch cases this is an error that should have been caught at compile time"
3427640,3432600," i think in that case panicking here is a good idea because it will force you to fix it as"
3432600,3437960," quickly as possible right ideally i should not have this thing in here ideally it's something that"
3437960,3444840," should be checked at compile time but we're programming and go we all make mistakes we all"
3444840,3450440," make oopsie doopsie and fucky wacky so it is what it is sometimes and it isn't what it isn't"
3450440,3460040," all right so let's take a look at other cases of panic uh no scope phones okay so interestingly um"
3461640,3468040," so we have a top scope we have a top scope we have a top scope i just realized that scope"
3468040,3475880," is a thing that i introduced specifically i can create a defined function"
3475880,3481960," right specifically i can create a defined function so variables and functions"
3484120,3492920," uh so i feel like uh that this is not particularly useful for me"
3492920,3498040," so i feel like this is something that could be removed by the way"
3498040,3506360," will it be available in a vod i'm i'm started learning go to yeah it will be available in in"
3506360,3511480," water of course i'm not going to remove that um i'm not 100 sure if i'm going to upload it to youtube but"
3511480,3516040," i'm not going to remove it from twitch either"
3516040,3522280," doesn't go has no enums those it's not possible to check exhaustiveness"
3522280,3529800," what how is that contradicting to each other uh essentially you have this kind of stuff you can"
3529800,3536680," define a type a type for your enum which is an alias well it's actually a very strong alias as far as you"
3536680,3543400," know and then you define the constants and we if you specify this kind of type and iota this the"
3543400,3551720," consequent constants actually defined like enumerations right so you can roughly see the boundaries of a"
3551720,3559240," very specific enumeration you can roughly see them so the compiler can like can use this information to"
3559240,3566040," actually check exhaustiveness of the switch cases to some extent you can come up with the rules that"
3566040,3571720," check the exhaustiveness it's not an impossible computer science problem i don't see it being an"
3571720,3576520," impossible computer science problems that requires the phd research uh so"
3578520,3586200," uh iota is a special syntax yeah yeah so essentially um it automatically increments the consequent constants"
3586200,3590920," to emulate the uh the enumerations c-style enumerations"
3594520,3602840," all right so here's the interesting thing so this language apparently has a scope and it has a scope"
3602840,3612520," in a uh like a stack right because scope is a stack essentially uh right so but i don't i'm not sure"
3612520,3619560," if we need that actually all right i'm really not sure if we need that uh we have a vowel context and we can"
3619560,3624360," look up the variable right we can look up the variable uh and"
3624360,3638520," in all fairness for this specific thing we can simply just have one scope and never push it yeah that's"
3638520,3648200," that is fair enough so here the top scope is needed to check what's defined there this function is never"
3648200,3657960," if i can use by the way this function is never used so even when we look up a variable or a function we"
3657960,3666120," just yeah we just traverse them in the opposite order so i yeah we can just remove that is that cool"
3666120,3670600," that's how easy it is to get rid of the panics you just like remove the entire function that contains the"
3670600,3679400," panic easy easy uh and here we have another unreachable and which is yet another case of"
3679400,3685240," exhausting of cells which case is okay so that means all of the panics in here in my personal"
3685240,3692200," incompetent go developer opinion are justified right so everything here is justified uh usually for this"
3692200,3697720," bot i don't like panics but if it's just unreachable that's fine okay cool uh right so this is package"
3697720,3702200," main do you have to specify package for each individual file yeah okay let's try to compile"
3702200,3708120," this entire thing and see if it fails or not so i'm gonna do cmd gatekeeper and we"
3708120,3720440," imported but not used io util okay uh and another one is net http cool that's it it's as easy as that"
3721480,3732440," so uh bex um let's actually put it this way uh stolen from and we're gonna put the original uh repo in"
3732440,3738120," here so people know like from where we'll take over that uh i'm actually curious like where i was using"
3738120,3746600," top scope what i was using top scope for right so i'm gonna go to back back to bex back to bex uh back to"
3746600,3759720," bex top scope ah ah that's very interesting but this is uh-huh i see so it was necessary"
3759720,3766200," specifically for like to access like the top scope because if i define a new variable i add that variable"
3766200,3772600," to the top of the scope to the nearest scope possible so it's only needed when you really want to define all of this like"
3772600,3781560," real language constructions like let define and stuff like that uh right hello toting is google really spying"
3781560,3789320," on you yes do you see the language i'm programming in have you heard about telemetry in go have you heard"
3789320,3796360," about telemetry in go like i'm gonna give you the link by the way so the go has a telemetry so it sends"
3797160,3804200," uh all of the data all of your data to google so they can target their ads better at you uh so yeah"
3804200,3810440," telemetry in go that's the first ever programming language come with the compiler with telemetry maybe"
3810440,3817880," not the first one but i mean yeah so google is literally spying on you as you program and go"
3817880,3824200," oh wait go toolchain really has telemetry i didn't really know actually so i think they actually"
3824760,3833960," postpone that idea uh but the fact that they even entertained that idea is extremely concerning to me"
3833960,3840600," to be fair and the title is more of a like a joke and poking fun at them i didn't think they implemented"
3840600,3846840," that yet because the people really uh expressed disagreement with this kind of decision so i don't"
3846840,3851960," think they're gonna push it right away but i'm pretty sure they're gonna attempt like several times to push"
3851960,3858840," that because they really really want that they they have like a like whole blog post and stuff"
3858840,3863480," like that and you can you can feel they really want your data they really want your data please"
3863480,3872280," i want to see all the projects you're building yes yes yes so i can better target my development tools"
3872280,3874680," to you please give me all of your data yes"
3874680,3886280," anyways so we've got some sub we've got some sub from lindra braga thank you so much for 28 months of tier"
3886280,3891080," one subscription with a message thank you for all the awesome content thank you thank you for all awesome"
3891080,3894760," money thank you thank you thank you"
3894760,3905880," anyways let's continue sending data to google"
3905880,3915560," how are we gonna actually approach this entire stuff so uh i need a context right so i essentially need a"
3915560,3922600," context but where do i store that context so if i go to the command uh right so this is the command and i"
3922600,3931720," eval the command so in here i accept the database right i accept the database i accept the command and"
3931720,3937480," the command environment like an environment in which i execute that command another thing i need to accept in"
3937480,3945960," here is uh you know uh eval environment right so um so i already use env uh as a name in here"
3945960,3953800," right so maybe i should do something like eval and eval and eval and eval context okay"
3953800,3960200," let's go to context to make it even more confusing you have an environment and you have a context how about that"
3961160,3967880," isn't that cool isn't that cool by the way eval context if we completely switch to"
3967880,3975560," using the backs expressions for defining the behavior of the command eval context may potentially replace"
3975560,3982200," the command environment right because how do you send a message how do you send a message in"
3984120,3994440," uh in in in the backs environment you just say say okay so in my brain my brain just uh merged together"
3994440,4002840," say and backs so don't add me okay say uh hello right and essentially depending on the environment in"
4002840,4008280," which depending on the environment in which you run this command the same implementation is going to be"
4008280,4013640," different which is basically what command environment is used for so maybe that's this will allow us to get"
4013640,4020760," to read of the uh of this kind of stuff just saying maybe it will allow us to get rid of this entire"
4020760,4026840," thing i think that's kind of cool so uh all right so let's actually continue implementation after a small"
4026840,4034840," break because i already streamed for an hour and i need to make a cup cup of tea all right all right so"
4034840,4039240," let's go ahead and try to compile that code so essentially i changed the signature of this function"
4039240,4045480," so it's used in a couple of places literally in couple so it's probably used in the discord transport"
4045480,4049400," right so when you send command in the discord and in the twitch transport when you send the command in"
4049400,4054600," twitch so i expect uh both of these places to break when i try to compile this in typing i'm going to go"
4054600,4061160," there and i'm going to try to see what we can do there uh gatekeeper show me it's actually four places"
4061160,4067320," that's very interesting uh yeah the first one not enough arguments to call oh because we call this"
4067320,4073400," stuff recursively within eval commands okay so i can actually pass the context there as well"
4074120,4081000," uh all right so seriously serilify environment oh yeah that's actually very cool so we have a command"
4081000,4090520," called surreal all right uh which essentially serilifies your message for you can do seril hello comrades"
4090520,4098120," all right and it literally just like turns this message into cyrillic right so yeah it it literally"
4098120,4105080," translates it to russia this is how you say that message in russian yes this is russian yes yes that's"
4105080,4114120," how we speak uh we just take english and we just put additional features on the latin alphabet and"
4114120,4125640," that's literally russian right it's just an american language but with a like a with a fancy alphabet"
4125640,4143880," so what else do we have in here so another one another one another one"
4144120,4151320," all right so and let's go to here so this is what handles when we send a command in a discord right"
4151320,4157000," so there's a handle discord message uh we parse the command if we couldn't parse the command what we do"
4157000,4166520," we just feed the message to cards carrots yeah carrots and is a um state of the art in uh artificial"
4166520,4172600," intelligence and if uh the message cannot be parsed to the command we give that message to this artificial"
4172600,4178840," intelligence to train and become conscious right that's that's what it is that's literally what"
4178840,4183560," it means it's it's artificial intelligence i'm joking this is actually mark of chain so"
4183560,4189960," it's not really that intelligence it's actually kind of dumb right so it listens to all of your messages"
4189960,4194680," and it adds it to like a huge mark of chain so then can later generate different messages based on"
4194680,4200360," on whatever you said i think i disabled that for twitch right so i think i disabled that for twitch but for"
4200360,4205880," discord it actually trains the mark of chain on people's messages so what we're doing here uh which"
4205880,4211800," is evolve commands uh right with database and command and the discord environment so the thing"
4211800,4218760," we need to do we probably need to construct the eval environment uh eval context right so and it seems"
4218760,4224120," relatively easy to do because it's just a bunch of scopes right so it's just a bunch of scopes and this"
4224120,4227880," this is probably what i have to do in here i'm going to do eval context"
4227880,4238360," and that's it so we're going to use an an empty eval context and i think that should be sufficient"
4238360,4243560," uh right so it's not a pointer and this is probably because in here"
4244840,4253240," it is probably in here i do not accept this entire thing by a pointer but why do i put this as a pointer"
4253240,4262760," ah this is because it's an interface yeah that explains it so i don't need any of that scheisse in"
4262760,4267640," there all right so the same thing needs to be done for twitch environment right so that makes sense"
4269240,4276760," um command uh environment so this is a command environment uh not command environment what i'm"
4276760,4285000," talking about eval context right so this is eval context no pointer and there we go so everything"
4285000,4292600," seems to be compiling so essentially now we need to try to um evaluate something for instance i want to"
4292600,4297800," take these hard-coded commands right i want to take all these hard-coded commands and i want to turn them"
4297800,4305560," into uh into the com uh like a bex expressions right so that's what i want to turn them into"
4305560,4311720," so here what we have uh we have at author so maybe in the bex environment i'm going to put comments in"
4311720,4317720," here in the bex environment we're going to have a variable author which points at the current author"
4317720,4324120," of the message right it's a current author and furthermore it's going to be formatted in the way that"
4324120,4329640," can be just put in a message and it will actually add that author depending on the environment you add"
4329640,4335800," different people differently like on twitch you put at on discord you actually have to use a special"
4335800,4341240," syntax which includes the id of the author or something like that uh you know what i'm talking about"
4341240,4349240," um you know what i'm talking about so yeah uh and essentially we're going to have author so a"
4349240,4353320," concatenation of the string is is going to be done through the arguments of the functions for instance"
4353320,4362840," i'm going to do say author um comma and then uh basically this entire message right so literally"
4362840,4369480," uh this entire message i can put it in here and then if i evaluate this entire thing uh within that"
4369480,4375080," specific context it should produce like a similar result right but we i will have to implement"
4375080,4383960," a variable author and um a function say right so let's actually introduce something like"
4383960,4392120," something like an a variable called source right so this is a source maybe let's call it bex right"
4392120,4396760," so kind of like that but we need to escape some of these things in here right so we're escaping this"
4396760,4402680," thing in here and here is the bex of that specific command the first thing we need to do right the"
4402680,4407880," first thing we think we need to do we need to parse that command uh parse so we have parse all"
4407880,4414440," expressions if i'm not mistaken parse all expressions uh and it literally parses all of the expressions but"
4414440,4421240," can it parse only one expression in here so uh parse one expression and it needs to be converted to"
4421240,4426520," runes and blah blah blah um okay so i think we need to use parse all expressions"
4426520,4434440," all right so we need to parse all expressions uh but here's an interesting thing that means you"
4434440,4440920," can have several expressions in here right so because a single string may contain several expressions"
4440920,4450040," right it may contain several expressions so this is experts and uh we're gonna have an error in here"
4450040,4455160," we're gonna have an error uh so and how are we gonna be handling all of that by the way"
4455160,4461320," how are we gonna be handling all that i suppose if the command if the command in the database because"
4461320,4465960," we're going to store this string in the database if the command in the database contains several"
4465960,4472120," commands we can just evaluate them in sequence right we can just evaluate them in the sequence"
4473880,4479560," which is kind of cool because it could be a sequence of several things maybe the command will say hello"
4479560,4484360," world but hello and world are going to be two different separate messages and it's going to be"
4484360,4491080," like say hello and say world right so literally backs is going to be something in a database say uh hello"
4491080,4498440," i probably need to add support for uh for single quotes uh will be kind of cool and then say hello world i put"
4498440,4503000," single quotes in here because i didn't want to quote them inside of the double quotes you see what i mean"
4503000,4507480," and if we say if we store something like that in a database it will literally send two separate"
4507480,4512280," messages right so we can kind of like program the behavior of command in this simple scripting language"
4512280,4517480," uh right so to speak right because of that it should be relatively too forward to just do"
4518600,4526520," uh to just um iterate through all the expressions and just evaluate them right uh okay so it's gonna"
4526520,4533000," be arrange experts arrange experts and we need to evaluate them the question is how do we evaluate"
4533000,4540680," them evolve uh it should be a function i'm pretty sure should be a function uh evolve context push context"
4540680,4547880," uh evolve expression all right okay so you call to the context and you evaluate the expression and you get"
4547880,4553560," the result that's what's interesting you get the result of that set expression uh okay that's pretty"
4553560,4560760," cool uh expression uh context right so this is the context evolve expression and we provide the expression"
4560760,4567160," right so we provide the expression and evaluation may actually fail because of that right so it may also"
4567160,4573480," return an error so this is going to be a result and this is an error right so by the way parsing this"
4573480,4579800," entire thing may also fail right it may also fail uh which raises the question how are we going to be"
4579800,4586760," reporting all that uh and what is the possible errors that we can get while parsing this entire thing"
4586760,4594600," uh right so let me see so what do we usually report so we sometimes say expected"
4594840,4604680," uh-huh uh-huh but we don't really say where usually they're relatively safe to report to the user i think"
4604680,4611640," yeah i think all of these errors are relatively safe to report to the user like unknown variable unknown"
4611640,4618840," function so because i'm thinking should they uh set that in a public chat or should they log it locally so"
4618840,4623000," people people can't see that i think it's relatively safe to actually like say them in the chat right"
4623000,4628600," it's going to be easier to debug that uh right so if we can't do that yeah so that's that's pretty pretty"
4628600,4636520," straightforward uh okay if error not equal uh nil we can just like literally say environment uh send"
4636520,4643080," message we're gonna add the author right so environment at author uh and we're gonna say something like"
4643080,4655320," could not uh parse the source code of the command um syntax error"
4655320,4666600," syntax error in let's put syntax error so i'm trying to make this uh thing less cryptic but i think i'm"
4666600,4670760," gonna do that a little bit better uh command um"
4673400,4679160," because i want to make sure that the user of this command knows that it's an oopsie doopsy that"
4679160,4689000," modes did not not the user okay so let's actually literally say that mods did an oopsie doopsy"
4689000,4694440," oopsie tell them that they"
4697880,4708520," they have a syntax command uh syntax error uh and then we're gonna do ever or something like that"
4708520,4717960," um so maybe"
4717960,4724760," if i just do it like that will it work maybe maybe not okay and then we return out of that"
4727400,4736040," mods did an oopsie doopsy tell them that they have a syntax error um all right so in this case if error"
4736040,4744680," not equal new right what do we do environment send message uh maybe um"
4744680,4753320," yeah it would be kind of nice uh to pink the the mods but we're gonna do that later doesn't matter"
4754760,4772680," add author uh mods did an oopsie doopsie tell them that they uh they have and tell them that they have uh an"
4772680,4775320," runtime error that they"
4777160,4784520," got a runtime error right plus error though i'm not sure"
4784520,4791480," um"
4791480,4795720," mm-hmm okay"
4801480,4807880," i'm gonna log the error because i think uh during the runtime the runtime can return arbitrary errors"
4807880,4811880," and this is something that we generally do not want to show to the user"
4811880,4816920," right i think generally we don't really want to show that to the user you know what i mean"
4816920,4821800," uh right because you in the definition of the function right if you when you define a custom"
4821800,4826920," function you may throw a custom error which may contain sensitive information right i think it would"
4826920,4831880," be better to just generally log this kind of things and just ask the user tell the mods to check this"
4831880,4841080," kind of stuff uh right so it would be better to say mods did and oopsie doopsy while defining this command"
4841080,4842760," this command"
4842760,4845080," ask"
4845080,4849240," plus environment add admin"
4849240,4850920," right"
4851560,4858040," to check the logs right uh and then we're gonna log the error right so we're gonna say print f"
4858040,4870360," error error while parsing while parsing dead command right so we can say uh something like dead command"
4870360,4878200," and then we can simply uh provide an error so i think new line in logging is not necessary because it"
4878200,4883800," automatically puts a new line in there anyway uh right and we're gonna put error in here there we go"
4883800,4888920," so the same thing is gonna go in here right so mods did an opti doopsy while defining command"
4888920,4898920," and we're gonna remove this one and we're gonna we're gonna log error while evaluating"
4898920,4905640," that command and there you go so i'm copy pasting things around because in in the future i'm gonna compress"
4905640,4911400," all that so it doesn't really matter so and what's interesting is that after evaluating the command"
4911400,4916920," you usually have a result right what we don't want to do with that result i think uh in this specific"
4916920,4922520," case where you can just ignore it right i don't think it it is useful in any way shape or form right"
4922520,4930280," it's it's not particularly useful in any way shape or form uh okay so let's try to compile this entire"
4930280,4938440," thing all right to compile the the bot and try to run the bot and see how it's gonna go so it doesn't"
4938440,4945880," really compile because we have uh some stuff in here so result is unused but can i just say okay i'm not"
4945880,4954280," planning to use the result though uh right i do not plan to use it can it use an expression and um yeah this"
4954280,4959800," is because it's it's defined in a different order all right it's defined in a different order and there"
4959800,4968600," we go it seems to be compiling it seems to be working it seems to be working right so i wanna try to"
4968600,4974840," run the bot but i need to work with sensitive information so i'm gonna actually just put this kind of thing"
4976520,4984840," uh look away look away looking with uh credentials"
4984840,4994840," right so don't look at the stream right now while i'm actually setting up the tokens and stuff like"
4994840,5000200," that just don't look at the screen right so because i don't want it to be leaked and uh then people will"
5000200,5009640," hack me right so that's very important don't look don't look okay okay good um okay all right all right"
5009640,5020280," so i'm gonna do something like is it and uh yesu yesu yesu cowboy freaking desu"
5020280,5025560," uh i think i already where is my gatekeeper i can't find my folder with the gatekeeper"
5026200,5034920," i'm gonna rebuild it into i think uh just in case super quick and i'm gonna run zbot so the problem"
5034920,5042840," with zbot is the problem with zbot is that we um don't distinguish them so we i have a production bot"
5042840,5046920," and i have a this local testing book so one of the things i probably need to do right now"
5047560,5054280," is uh set different prefixes for parsing so here it uses exclamation mark or"
5054280,5061800," dollar for prefix prefix in the command i think in here i'm gonna actually replace this stuff with uh"
5061800,5069160," this thing right i forgot it's just like a like a carrot roof thingy i don't know so i keep forgetting how"
5069160,5078680," it's cold uh right so let me try to rebuild this thing i think it is rebuilding and i started zbot i"
5078680,5090920," started zbot uh all right so we can try to do pink it's ponged and when i do dead a circumflex yes and"
5092920,5101240," okay so we have a first failure we have a first failure so we've got a log with the message we've"
5101240,5109880," got a look with the message uh that looks like this uh right in here error while evaluating that command"
5111720,5118440," what they say commander commander okay who killed captain x"
5135560,5145480," all right uh so it says uh that uh we cannot evaluate the function say right because in the"
5145480,5151160," original source code right in the original source code we call to the function say so first thing we"
5151160,5157160," need to do we need to actually define that right so let's go ahead and define uh that specific function"
5157160,5165080," so it has to be defined in a twitch environment uh right so in evaluation context in evaluation"
5165080,5174120," context uh we need to define the scope let me take a look at bex uh right so this is a val scope so we"
5174120,5183800," have scopes and in here i'm gonna probably um just create a new scope like so i wonder if i can"
5183800,5188520," just define something like this i think i should be able to"
5191000,5199320," just do it like that will it infer everything that is necessary to infer in here uh right so"
5199320,5209640," eval scope like i don't remember can i omit some of these things probably not right anyway uh then uh i"
5209640,5217080," need to define function funcs and this is a map if i'm not mistaken right so this is going to be a map"
5217880,5232440," uh string right map string uh and here we're gonna have a say but the question is what is a function"
5232440,5239960," right so what kind of arguments does it accept uh right what kind of arguments does it accept uh func"
5239960,5247640," is it defined anywhere type func yeah okay so it's a function that accepts the context right so it accepts"
5247640,5257800," the itself uh context eval context context and the arguments right so this is going to be expression"
5257800,5264360," and then it returns uh the final expression the result expression or an error right and it returns a custom"
5264360,5270520," error and this is precisely why i actually said that i don't want to log in error because here you can"
5270520,5277000," actually return accidentally something uh sensitive so you probably don't want to do that right so in here"
5277000,5283720," we're going to simply um say through the environment right so depending on the environment we say things"
5283720,5290200," differently so we need at which environment to actually say anything so i suppose it would make"
5290200,5298680," sense to define an environment first in here so then later we can refer back to this environment and say"
5298680,5305560," uh same message or maybe something what's it called i think it's called send message send message and we"
5305560,5311320," literally just so we're supposed to evaluate all the arguments in here but we're not going to do it right"
5311320,5320600," now we're going to just say um hello from bex i'm going to put a smiley face in here uh right and after"
5320600,5326440," that we can return something and i suppose the reason why introduced expression void is precisely so i can"
5326440,5335000," return nothing if i want to uh right that's actually pretty cool how can i construct a void oh since void is"
5335000,5341960," zero the default expression is actually void express this is so smart what the fuck so i can just return"
5341960,5349960," this and uh new and it's a valid expression it's just like new yo what the fuck ceremony what's up what's up"
5349960,5353480," what's up what's up hope you're doing well um"
5357080,5363960," eval expert func are you making twitch lang i'm making a scripting small scripting language uh that"
5363960,5368920," describes the behavior of the bot commands and in fact i already made it it already works i'm just"
5368920,5374520," integrating it with the chatbot right so that's basically everything what i'm doing right now i'm"
5374520,5380360," slowly but steadily integrating this entire thing uh okay so let's go to the compilation errors and see what we"
5380360,5386040," have in here expression must go okay so i did a fucky walkie and potentially oopsie doopsie so here i"
5386040,5393400," supposed to have fun uh right so syntax error so i supposed to have uh these things in here and these"
5393400,5403080," things in here so a new line yeah so i keep saying that over and over again so don't you find this ironic"
5403080,5409240," don't you find this ironic that this language doesn't require any semicolons at the end of the statements"
5409240,5416760," but if you are defining elements over uh array of a structure it's gonna be so annoying it will require"
5416760,5424840," you to put these commas in here don't you find this ironic just just think about it like why"
5424840,5433800," it's so weird uh we got some subs uh let me actually acknowledge the subs uh actually one uh destroy"
5433800,5439160," computers thank you so much for 46 months you want the subscription with the message it's so"
5439160,5444200," bro yo what's up bro what's up you're always welcome you're always welcome my friend to my"
5444200,5447480," strings thank you so much thank you thank you thank you for being in here"
5447480,5456280," so yeah it's kind of interesting it's been so relaxed about semicolons but it's been so"
5456280,5463640," annual about these comments it's just like why why i i don't mind actually like don't get me wrong"
5464120,5468760," i don't mind i wouldn't even mind if it was super annual about semicolons but like"
5468760,5475480," why such inconsistency like because rob pike decided so okay so yeah that explains everything"
5475480,5483640," just comment your question in code google will answer you in email nice"
5484360,5492680," i mean who needs copilot after all if you can use just use go telemetry and the the google the"
5492680,5499080," the actual google engineers will get back to you and fix your problem not just like chat gpt"
5501320,5514520," sorry sorry anyway that's a good joke um let's try to run zbot and actually going ahead and running zbot"
5514520,5522920," let me actually make it a little bit bigger so can you see the chat by the way uh we're gonna do a ping"
5524840,5535800," okay uh would you look at that thank you uh hello from beck's smiley face isn't it cool i think it's"
5535800,5542840," pretty freaking cool so yeah so it doesn't really act as intended so what we have to do uh we have to"
5542840,5548360," now take all of these arguments right so we have to take all the arguments evaluate them uh concatenate"
5548360,5555240," them in a single message right so concatenate them in a single message and then uh send them you know"
5555240,5564440," as the as the message we've got another sub young 2000 thank you so much for twitch prime thank you"
5564440,5572760," thank you thank you really appreciate it wow i see almost eclipsed python as the most popular language"
5572760,5582920," according to toby what c is being popular again let me take a look what the fuck uc10 thank you so much"
5582920,5588120," for 17 months thank you thank you thank you is it is it gaining popularity what the fuck"
5588120,5595160," this is because of my yesterday stream i'm i'm joking it's probably not"
5598280,5606600," so you see it only took one c stream for me and c is already overthrown uh overthrown python"
5606600,5615640," and visual basic like it's so weird that visual basic is top 10"
5615640,5621800," it's actually losing but i mean it's still weird probably because of the microsoft office yeah because"
5621800,5628200," by itself who programs in visual basic by itself i'm pretty sure everyone just like writes macros for"
5628280,5634200," for office um for office um an assembly language is a little bit sus in my opinion"
5634200,5642120," because assembly language is not really specific language it's a family of the languages right so"
5642120,5648200," which assembly is the is the most popular one like is it is it by assembly they mean x86 64 or"
5648200,5654360," does it mean arm or what exactly do they mean it's just like a family of the things so"
5657560,5667240," um scratch i'm also surprised that scratch is popular rust is gaining popularity what the"
5667240,5671960," i should stop uh i should stop actually programming in rust because it's gaining too much popularity"
5671960,5678520," we're not gonna give any more exposure to rust all right so uh what we need to do we need to iterate"
5678520,5682520," through the arguments and just like evaluate them and concatenate them what's interesting is that"
5683720,5692280," what's interesting is that arguments can evaluate two strings uh integers and other function calls"
5692280,5699640," so that's kind of the problem right so what if one of the arguments literally evaluates to this"
5699640,5706280," functor how are we supposed to print it i have a feeling that this is going to be a runtime error we're"
5706280,5711080," going to allow only printing uh strings and integers we're not going to allow printing anything else"
5711080,5721960," are people really writing more excel macros than websites what the i wouldn't be surprised honestly"
5721960,5724600," i wouldn't be surprised i'm pretty sure uh"
5726520,5732840," excel runs the entire world i'm like i'm pretty confident the excel right like runs the entire world"
5732840,5745720," all right so hello from bex and uh so let's actually iterate this entire thing i keep forgetting how you"
5748680,5756040," how you iterate so first comes the index and then comes the the element uh then comes the element"
5756040,5768200," so for index arg in not in range args right there we go so then we do context eval expression right we"
5768200,5776440," evaluate the expression arg so and what we're getting here is the result all right so this is the result or an"
5776440,5784120," error in case of an error if we've got an error what we have to return it's not new uh we're going to return"
5784120,5792280," like a void expression and the error itself so we basically bubble it up right then after that we need to check"
5792280,5798760," that uh result is either string or integer so i think we're going to use switch case for that so this is the result"
5798760,5805960," and i think it's kind right so i'm pretty sure it is kind uh it's type okay sure"
5806440,5814120," okay so it's integer string variable right so uh essentially these two things should never happen"
5814120,5821800," if everything is uh performed correctly right if everything performed correctly honestly like the problem"
5821800,5828120," is that you may have a variable that contains literally ist of function right and because of that"
5828120,5836920," you won't be able to properly print it anyway uh so because of that we need to check this entire thing"
5836920,5847320," so this is going to be the case uh if type is what expression integer so this is one thing and then it's"
5847320,5854600," going to be str and if it's something else if it is something else we have to report an error i'm"
5854600,5862600," pretty sure about that so it's going to be expression uh expression uh and um what we need to say in here"
5862600,5867400," it's it's rather interesting so i need to say something very descriptive right so i'm probably going to do"
5868440,5875000," fmt error f right so this is how you create a new error in here so let me actually uh readjust everything"
5875000,5880360," so you can see the entire thing okay so i'm gonna put it at the top in here can you see stuff at the top so"
5880360,5898200," so i'm editing nice code by the way uh right nice code by the way i'm indenting it too much so it's"
5898200,5903960," difficult for google telemetry to actually steal my code this is intentional their code analyzer is going"
5903960,5909400," to basically stack overflow while trying to analyze this code and that is that is my goal right"
5911080,5917000," i'm doing that intentionally my code is not shed well it is shed but it is on purpose it's on purpose"
5917000,5923400," it's basically to debate the google analyzers right so this take overflow that's the whole idea anyway so"
5923400,5937960," um we can say something like this evaluated evaluated into uh into something into this"
5939080,5954760," which is neither uh which is neither int nor str so i can't uh say command can"
5954760,5967800," uh can not display that right so and what we essentially can do we can take arg and we can basically render it as a string"
5967800,5973640," and then we can take the final result right and we also render it as a string so in error message we can"
5973640,5979320," see actual expressions in here hopefully right hopefully we'll be able to see actual expressions in here"
5979320,5986200," right if this is an expression uh if this is an integer or a string we essentially have to append those"
5986200,5991240," things but by the way people uh i remember people ask me what the fuck is this thing uh this is basically"
5991240,5996840," leading uh white spaces right so if i have some leading white spaces emacs actually shows them to me"
5996840,6005080," right so if i just put something in here it will go away effectively right so what i want to do i probably"
6005080,6010360," want to create a string builder into which i'm going to be appending all these things right so that's"
6010360,6017160," basically what i want to do let's create sb which is going to be strings builder right so this is a strings"
6017160,6025720," builder and in here uh we're going to essentially just do things like let me take a look at gold dog"
6025720,6033480," strings builder so what do we have we can write some we can write string"
6034200,6044600," um which is probably fine right so as b right right string and then i want to convert uh an integer to"
6044600,6051160," string is there any easy way uh to convert an integer to string is there something like uh i to a or what"
6051160,6056200," not go like i to um i to a not a to i"
6059480,6069320," or maybe you can just do string uh string condo yeah can't you just like take uh result as int and"
6069320,6074600," just do string isn't it something that you can do or probably you have to use the str conf i feel like"
6074600,6083160," you have to use a steer console let's take a look at the str conf uh i to a and can it fail it cannot fail"
6083160,6093480," okay that's fine uh is equivalent to format int in 64 okay that's fine so that means we can do um str conf"
6093480,6103160," i to a all right and then i'm going to put it like that i feel like i want to move this entire thing"
6103160,6111400," somewhere else right so maybe we're going to have a function uh that creates a val context from the"
6111400,6116600," environment environment i think that's a good idea right so essentially let's just go ahead and"
6116600,6123560," create something like this and it could be something outside of the twitch as well right"
6123560,6132520," but what we'll see uh right so eval context context from twitch"
6132520,6140680," environment right so here we're going to be accepting um twitch environment right i suppose"
6141800,6148360," twitch environment can you just give me twitch environment thank you so much and we're going"
6148360,6155160," to return the eval context right so we're going to return eval context then uh eval context i'm going"
6155160,6161640," to take this entire thing um eval context from twitch environment and i just provide this entire thing"
6161640,6171000," so i think it's a little bit easier to comprehend now what do you guys think"
6171000,6179320," i think it's a little bit better now right so because it was a little bit too too nested it was a bit too"
6179320,6188840," nested uh okay so what about the um the right string all right right string uh and essentially since the"
6188840,6195480," expression is the string you can just do result as str not integer str and that is it all right"
6195480,6200840," so after that we concatenated all the arguments what we need to do we just need to send that specific"
6200840,6206920," message right so this is going to be sb uh string if i'm not mistaken so let me take a look at strings"
6206920,6214760," builder right strings builder there we go uh so do we have we we literally have a string that's pretty"
6214760,6220920," cool all right so that's the entire implementation that's how we implement string but this is not enough"
6220920,6229240," right so this is not enough because what we can have in here uh we also query the variable author"
6230120,6235720," we also query the variable outer and we need to add that variable here as well so in the scope we have"
6235720,6243240," functions but let's also define vars so in according to bex right the vars uh is is just a map of"
6243240,6252120," expressions right so it's literally a map of expressions so map string uh expert right so we need to have"
6252120,6258600," author and what is the author the environment already contains at author uh right it's basically environment"
6258600,6265560," at author so even though it's a function we basically evaluate it once and we cache it into the scope"
6265560,6270280," which may create problems in the future but maybe not because usually at author is not going to change"
6270280,6275880," throughout the execution of the command right and it's going to be cached uh for entirety of the execution of"
6275880,6280920," the command we'll see it's something to keep in mind but this is an expression right this is an expression"
6280920,6285320," this is not a string so what we have to do we probably have to construct literally an expression"
6285320,6293160," right so this thing should become as str and the type should be expression str uh there we go so that's"
6293160,6301000," basically it so now in the environment right in the actual environment we have a variable and a function"
6301000,6305640," right custom function uh so that's pretty cool seems to be working seems to be twerking i'm"
6305640,6312920," really happy about all that so uh let's go so i want to recompile and go to the compilation errors"
6312920,6318680," uh build gatekeeper what do we have it's it's not a kind it's a type"
6318680,6326440," uh str conf we have to import this entire thing uh let's go ahead and just import all that stuff"
6326440,6334920," and it seems to be working it seems to be twerking okay so let's see if it's going to answer the dead"
6334920,6340120," command right is it going to answer the dead command i'm going to restart the boat right i'm restarting"
6340120,6347080," the boat so we're going to try to ping uh this entire thing it's so slow my god but what about that"
6347080,6357320," uh dead okay it worked right so this entire thing worked right so it evaluated this entire stuff and"
6357320,6361800," uh now it is working uh now it is working so what that means what that means what that means we can"
6361800,6370840," now take all of our commands including built-in commands like weather for instance we can split"
6370840,6377240," their functionality we can split their functionality into these building blocks like taking http query and"
6377240,6384200," whatnot and then uh get rid of this entire switch case get rid of this entire switch case and basically put all"
6384200,6390520," all the commands into the database right so these are small scripts in the database essentially and"
6390520,6395560," the inter-implementation of eval command is going to consist of just this thing and the backs is taken"
6395560,6401240," from the database right that's basically the idea uh right that's basically the idea we can do a similar"
6401240,6411160," thing for gatekeeper or some other stuff right maybe we can try to do that right now so we need to we can't just"
6411160,6416040," move everything into the database like right away because there's a lot of things in here right"
6416040,6424520," so and some of the things are kind of difficult to um import into the uh into the backs right"
6424520,6429960," so i think i want to do that incrementally right so we we're still going to have a separation between"
6429960,6435160," built-in commands and the commands that are stored in the database and i'm going to slowly slowly migrating"
6435800,6442440," uh the commands from the like hard-coded code into the database right so it's going to be like a"
6442440,6446840," longer process than just like quickly migrating all that so i'm going to just prepare it and slowly migrate"
6446840,6455320," all this one by one one by one all right so maybe we need to create the table where we're going to be"
6455320,6463080," storing all these commands i think that makes sense right so uh here in the boat i have uh the folder called"
6463080,6473080," sql right and it contains migrations right it contains migrations uh so essentially um how does it work"
6473080,6481080," right on the first uh start the bot looks uh at all these files and sequentially applies them to the"
6481080,6486440," database so they contain sql queries right so it goes through each file and just runs each sql file on the"
6486440,6493560," database right and then it remembers which files it already run right and then the next time you run"
6493560,6499160," the command it doesn't run things that it already run if you want to update uh your database you create"
6499160,6506680," a new file in here right so sql then on the next run the bot will see okay there is a new file in there"
6506680,6511000," that i didn't apply it will first apply it and this is how it's going to migrate to the new scheme of the database"
6511000,6517880," the database so this is how it works in here so this is migrations uh right so and it stores the"
6517880,6523880," information of what files were already or already applied in the database itself right it stores it"
6523880,6530920," there so we can even take a look at this kind of stuff like um so let me see so opt postgres"
6531960,6541160," it's it's actually i think it's pg pgsql bin psql and uh i don't remember i think you have to do db"
6541160,6549240," just d not db gatekeeper right there we go so we take a look at the tables uh it it has migration"
6549240,6556680," tables right and if we select everything from uh migrations right so it's a table yeah right it"
6556680,6562120," contains like literally information like what files were already applied like file name the query"
6562120,6567960," that was applied and when it was applied and so for instance if i add new file in there it will check"
6567960,6575160," this uh table then compare it with what it sees in the in in a file system and it will see uh that it"
6575160,6581000," needs to apply another file before even touching this database because the code uh assumes a different"
6581000,6584920," scheme of the database and if the code assumes different scheme of the database it's not going to work"
6584920,6590520," correctly uh with this state of the database so this is basically how we approach that right"
6590520,6599880," so yeah by the way i build my postgresql from scratch myself yes because i'm using debian stable not just"
6599880,6609720," debian stable stable but old debian stable right let that sink in old debian stable right usually debian"
6609720,6620920," in stable stable is already old but this is extra old so the way um i use this entire thing is essentially"
6620920,6627800," if i need some sort of a software right i obviously cannot just install it from the repos if it's not"
6627800,6632600," something basic right so things like like very basic things like core tools i don't really care about it"
6632600,6639560," right if i need something fresh i essentially download the source code and build it on my machine like a slack"
6639720,6647240," software style right and what's interesting is that i think i reached the point where the new software"
6647240,6653400," that i'm trying to build is not happy with the libraries that i have on this machine my libraries"
6653400,6659320," are too old i'm already reaching the point that to build a new software i first need to build a fresher library"
6662440,6665480," and only then on top of those libraries"
6665480,6671240," are you running the server on your machine no of course not"
6671240,6678040," i'm running it on a separate machine with a newer version of linux"
6678040,6684520," in a virtual machine but i mean for testing purposes like the like to test things i'm running"
6684520,6686440," it's on my machine right now but i'm gonna kill it right now"
6686440,6698920," you incrementally phasing out of all debon exactly right so after some time it's gonna"
6698920,6703880," be basically leans from scratch right at some point there will be no debon in here"
6704760,6713880," um are you drinking whiskey or strong tea i'm drinking tea actually it's a green tea actually"
6713880,6722920," soon you won't be able to build new libraries because the compiler too old i'm using like the"
6722920,6732840," compiler that i downloaded from official clang website right so so this is not a stock compiler"
6735160,6740440," i mean gcc is maybe is but clang is is not right it's uh"
6740440,6749160," right so it's a little bit fresher than that anyway so um i'm probably like i need to spend some time"
6749160,6754520," to just upgrade my debon stable i'm just like too lazy and linux you know linux being linux like it's"
6754520,6761640," i'm just too afraid to touch anything right i'm just afraid that this entire thing is gonna break"
6761640,6770920," right so that's basically it um let's basically create table so what we're gonna have in here i"
6770920,6777880," suppose we're gonna have commands right so we have commands and what's gonna be another thing one two"
6777880,6783080," three four uh we need a name right which is already probably taken right because highlighting but it"
6783080,6788440," usually doesn't matter and the backs of the command let's call it decks i think it's a pretty good name"
6789400,6799080," so in terms of um in terms of um in terms of what uh so"
6799080,6807320," i'm thinking do i want to limit the amount of characters that i want to have in here"
6807320,6818520," probably not let's actually do var char and 64 characters is a 64 characters enough for everybody"
6819960,6828680," this is 64 characters so are we gonna have command that long right i'm gonna have command that long i think"
6828680,6836680," it's already too old to do too long right i think that's fine so this is the first limitations in terms"
6836680,6845480," so in terms of the limitation of the backs do i want to limit the backs right so if i say all right so you can have one down 24 um"
6845480,6859560," so here's the idea i don't want backs to be used as a real programming language"
6859560,6868280," so essentially if your expression is too complicated you probably want to extract that expression to go"
6868280,6873000," function and i kind of want to encourage that right so because of that i want to limit"
6873000,6881240," uh the amount of stuff you can put in there right but what if your command is just say a certain message"
6881240,6891640," which is uh very long right what if it just very long message it's probably not gonna look great in"
6891640,6901560," um in chat anyway because for example for twitch there's a limitation of 512 characters if i'm not"
6901560,6908520," mistaken right twitch cannot even display that many characters anyway like i literally can't send such a"
6908520,6916200," huge message right so if i literally try to copy paste this thing i think it won't send that yeah it even"
6916200,6926600," told me uh 500 characters right so 500 i can't even say send that thing so even if i need"
6926600,6935640," or did it say that anyway so it actually basically cut it out right so yeah there's no reason to make this"
6935640,6941400," kind of stuff unlimited and generally i heard that it's advised in a database to limit basically"
6941400,6947000," everything just put limits on everything because you never know what kind of stuff may happen and you"
6947000,6952680," will have databases like that in infinitely grow or something or some you know things that are"
6952680,6957480," uncontrollable right it's better to have some sort of limits in here and because of that i think"
6957480,6962840," it's going to be varchar 1024. i think it's a reasonable limit limitations limitation"
6962840,6973000," what about getting from a long url but the information that we get during evaluation of"
6973000,6981160," the command is not stored in the database that's what's interesting right so for instance you can have a"
6981160,6986520," command right which is basically http uh https"
6986520,6998920," what the get some data dot com the length of this command is 32 characters which fits there"
6998920,7006280," but the result may be longer than 1024. so we're not talking about actually returning thing we're talking about"
7006280,7013160," limiting the database so if you have data that is bigger than this size it's not a concern of the"
7013160,7017080," database because it has nothing to do with the database right now we're talking about the database"
7017080,7023560," and how much you can store in the database you see what i mean so how much data we generated while"
7023560,7028520," evaluating this thing is not a concern of the database you see what i mean right"
7028520,7033640," so it's about just storing the source code of the command"
7033640,7044600," all right it's it's like a completely different problem like it's it's it's not related to what we're"
7044600,7050440," doing in here okay so what i want to do i also want to say that uh the name should be unique right i think"
7050440,7058600," it's reasonable to demand name being unique right so uh do i want to put any you know ids in here or"
7058600,7062760," any indices right now probably not right now maybe later i'm going to put something there but for now"
7062760,7070360," we can just keep this into i think like that all right so uh let's take a look at the database right so"
7070360,7076360," i'm going to connect to uh to the database right so this is what we have in here i'm going to restart"
7076360,7082520," the the bot right i'm going to restart the bot and it should migrate and as far as i know it already"
7082520,7087240," migrated and as you can see we have commands right so if we take a look at what we have in the command from"
7087240,7094440," commands uh there we go so we can try to insert something into the commands right so let's insert um"
7095720,7104440," into commands uh essentially name backs and uh what kind of values do we want to insert into this thing"
7104440,7107160," um so"
7108840,7121800," um i have an idea long time ago long time ago in a galaxy far far away uh with the old bot i had a"
7121800,7131160," command called steel right and essentially what it would it would do uh i think i have to do it like"
7131160,7137400," that yeah oh this is actually so cool right so since you're supposed to use single quotes it's super easy to"
7137400,7146600," use double quotes in the backs uh right it will take um the arg the argument that you provided right"
7146600,7151240," so let's actually say call it arc zero so this is the first argument that you provided into commenting"
7151240,7162520," you say um arg in the current year the current year and then some sort of a emote like keg w right"
7163880,7171800," uh something like that it's it's more of a like a joke of imagine using x in 2023 right and you would"
7171800,7182760," do a command uh that sets that says something right uh something like still yeah still go and the bot will"
7182760,7192520," say go in 2023 ah right something like that so that was the idea so people can make fun of things or make fun of"
7193880,7198600," modern year so it was actually a very fun command people really liked it i want to bring it back"
7198600,7203960," right so there you go we brought it back now what we have to do we have to essentially"
7203960,7209480," interpret this command right we essentially need to interpret the command that's as simple as that"
7209480,7218200," uh so uh let me go into the comments all right so and i think i want to go specifically into twitch"
7219000,7225240," and update the context so here we don't really have a year i'm gonna add the year"
7225240,7231320," but i'm gonna make a shortcut right i'm gonna make a shortcut so i'm gonna head code the year"
7231320,7240920," as integer uh 2023 but it should be unheadcoded so i believe it should be automatically queried on the"
7240920,7249800," current machine and then we should say okay unheadcode the year right unheadcode the year uh already so"
7249800,7256280," that's pretty cool so unheadcode the year and another thing that we need to have is arg zero"
7256280,7264120," right arg zero the problem with that it's reliant on the command right so that means we need to"
7264120,7270600," get the command in here right so because it's literally the argument of the command so this one is going"
7270600,7282840," to be more of a type expression str and as str it's a command ARGS there we go it's a command ARGS"
7282840,7289160," cool so we have all of these things in here so that means evaluating this entire thing should be um"
7289160,7295480," should be portable right so the next thing we're going to do uh we're going to go to the command evaluation"
7295480,7300440," and the first thing we're going to do we're going to query the set command from"
7300440,7309080," the database right so we're going to query this uh set command um so how uh we can do that"
7309080,7318600," i'm gonna like literally have cut all that stuff in here um i remember that in carrotson we do a lot of"
7318600,7325880," database querage querage look at this word uh so we query the database a lot that's what i'm going to say"
7327560,7337320," um okay so db yeah query role right so this is how we do that i want to select um name and backs"
7337320,7354600," maybe only backs uh backs from uh commands commands where name is equal to uh how do you yeah so it's equal to"
7354600,7361240," door one we don't really need to order anything all right there we go so that's the query that i need"
7361240,7368600," to make right so select backs from commands where name is equal to uh to the name of the command right"
7368600,7377080," so it's little command uh name like that uh command name so when essentially the next thing i need to do i need"
7377080,7382520," to scan all of this uh to scan all of this like all of the rows but i expect kind of one and i think there"
7382520,7391400," was a way to say that i expect one thing right i remember there was a way to say that i expect one"
7391400,7407560," thing but i don't quite remember uh all right so let's do go doc sqldb sqldb query query uh row context"
7412840,7419480," what was there was there any like maybe it was something on the level of a scanning so let's take"
7419480,7425320," a look at the row uh"
7425320,7431800," in before chat attempts sql injection i mean that's fine i don't really care about that specific database"
7431800,7443160," even if i fuck up uh right though yeah sqldb escapes but here's an interesting thing you still can have"
7443160,7448280," a minor sql injection even if you use like a proper escaping and stuff like that"
7448280,7454120," i recently discovered that you can inject sql if you use like constructions"
7458120,7464280," you know what i mean right so if i did something like name like"
7464280,7469720," and then within the name you would do something like this"
7469720,7476920," you can have a minor sql injection that injects additional parameters in here"
7476920,7483480," like and i recently discovered that and i've never thought about that before uh and it's yeah it"
7483480,7491080," basically suggests that you should probably avoid like you can circumvent that right it's it's really"
7491080,7500120," easy to escape the syntax of like it's nothing like escaping sql but still right i mean if you're"
7500120,7508520," you should never like put user input into into the like argument of like right at least that"
7511000,7516440," my sql real real escape final version version yeah you need a function like that"
7516440,7524840," just a second yeah we need this kind of function because of real real escape"
7524840,7531560," and it's kind of like the once i discovered that it actually spooked me a little bit"
7531560,7540280," uh that means that uh it's not enough to just rely on escaping of the postgresql right you still have to"
7540280,7546280," constantly think about this like sql injections even if you use this kind of escaping because you can"
7546280,7553000," inject things through other quirks of sql not necessarily through the syntax of the sql because"
7553000,7559720," like it's like sub language of sql and it's just like can we just solve this problem once and for all"
7560440,7571800," i don't know i've ever thought about using sql c it lets you write schema increase in sql and generate"
7571800,7579000," go code from that this is basically adding additional layer of abstraction on top of uh things and i don't"
7579000,7584040," like to add layers of obstructions without any particular reason if they don't solve like actual"
7584040,7590680," problems right because these kind of layers they don't come for free they're like almost act like"
7590680,7597080," physical construction so that means you um you will need to deal with the complexity of that additional"
7597080,7602120," layer whether you want it or not you still have to deal you may think that it solves your problem"
7602120,7613080," makes it like easy but in reality it all leaks through anyway right so all right dbtxt yeah it would be"
7613080,7618840," better to actually store all that in the text file uh so name is equal to to that right so the next thing i"
7618840,7629560," need to do is basically query the the stuff right rows next uh and does anyone remember i remember like"
7629560,7642120," that go package for sql had something uh to check for the rows rows scan yeah you can scan only once"
7642120,7647800," yeah if you escape if you expect only one thing you can just do one single scan"
7647800,7653320," and just forget about it i think that's reasonable uh right so this is the uh the follows frequency"
7653320,7660120," let's say backs right and backs is supposed to be just a string back string we don't really expect"
7660120,7672440," anything else and uh if it's has no rows yeah okay so essentially if it has no rows we have to execute"
7672440,7677400," one of these commands in here that's going to be the idea right so if we didn't find such"
7677400,7681160," command that's what we do uh right so"
7681160,7698520," but that's rather interesting so how can i it would be nice to have something like eval built in command"
7701880,7702120," yeah"
7702120,7721480," and then simply eval build in command db command environment context easy easy all right all right"
7721480,7730280," if error is um still not equal nil right so something went wrong right so something went wrong and we need to"
7730840,7738600," uh uh probably log that somewhere log print uh we can still say something to the user about that right so"
7738600,7749320," uh we can still say something went wrong please uh ask um so usually with a database"
7749320,7754520," so i'm gonna copy paste one of these messages i suppose"
7756520,7765080," uh just copy paste one of the messages eventually i'm gonna you know factor that out cap uh right and we"
7765080,7771480," just return out of here right if something went wrong we just yeah whatever uh log print f"
7771480,7785960," error while querying uh while querying um command s s so the command is name"
7786520,7790040," and then we'll get an error right we don't show that to the user we just like clearing that"
7790040,7796840," cool so after that uh we can just take the backs uh and just evaluate it right"
7796840,7803400," we can just evaluate it so and the way we evaluate it we evaluate it the same way as we do"
7803400,7809640," with that right so i can just copy paste this entire code and go back and put it in here"
7813800,7818840," so we already have backs we don't need to have it in here mods didn't open to do so while"
7818840,7825320," defining this command ask to check the log that's fine and as you can see here we had coded the dead"
7825320,7835160," command but now we can just simply remove that and can say command name all right and the same thing is"
7835160,7850760," it's going to be here okay cool all right so that's fine essentially we create the command"
7850760,7857400," if we didn't find it we just uh evaluate the built-in command right uh so we removed a value"
7857400,7862920," four dollar one yeah thank you so much i'm gonna just put it in here uh-huh let's try to compile this"
7862920,7875080," thing and see if it's going to work okay so let's go to the compilation errors uh commands it's a single"
7875080,7882840," command that's fine uh too many values we don't have to return here apparently anything else um okay so"
7882840,7888040," so here we also have to provide the command uh when we're constructing the uh eval context"
7888040,7897640," all right so that works that works so uh we need to now try to evaluate the still command right and"
7897640,7904600," still command is not had coded in the source code it's defined in the database right it's defined in"
7904600,7911000," database and it should query it from the database uh so what i'm thinking is that i'm gonna just split my"
7911000,7915880," screen a little bit in half i'm gonna put this thing in here right so the chat is gonna be here"
7915880,7922840," and i'm going to uh start the gatekeeper right so now we should have still go"
7922840,7933320," mods did an oopsie doopsie while defining the command right uh so it says that it expected um"
7935320,7942200," something something in here so mod mods did an oopsie doopsie and potentially a fucky wacky"
7942200,7949880," all right so i don't understand what what's wrong in here what exactly is wrong in here"
7949880,7957640," like it says expected uh so that's the syntax error it couldn't it literally couldn't parse this"
7957640,7966120," this entire thing it's it says expected this right always those mods yeah exactly those mods are get demos"
7966120,7978120," uh all right let's go gatekeeper expected this thing so it usually happens uh when we have something like this"
7978120,7987400," we have something like this command command command command command command the nearest parcel is blood"
7987400,7992920," anyway so"
7992920,7997000," maybe we can just print bags"
8005720,8021880," so let's actually try to print this thing println uh and then log println um backs let's have some backs chat"
8021880,8024200," together"
8027000,8032680," it is compiling it is compiling actually uh let me bring the chat so we can have backs"
8032680,8040040," uh and i'm gonna try to run this into i think okay um so still"
8040040,8048200," well i don't see any problems right"
8050680,8056360," i don't see any problems so it says that this thing is"
8056360,8064760," not working maybe this is because it doesn't support the spaces in the uh in the stuff like yeah"
8064760,8073960," or maybe i did some weird logic in here maybe not"
8078840,8085240," we need to literally try to parse this thing uh locally right so we need to try to parse it locally"
8085240,8087160," so let's go to"
8087160,8093560," let's go to some sort of setup"
8093560,8097240," where we're going to try to parse all this"
8097240,8099560," so bex"
8099560,8101480," don't go"
8101480,8103080," yeah i'm gonna go here"
8105080,8110280," um so this is going to be two func main and i'm going to put this thing in here"
8110280,8119720," i wonder like what exactly could have fucked up um"
8119720,8120920," parse"
8120920,8124520," all expressions decks"
8124520,8127960," and then we have experts"
8128840,8129480," experts"
8129480,8129480," experts"
8129480,8129960," error"
8129960,8131960," if"
8131960,8132280," error"
8132280,8133880," not a cool now"
8133880,8136440," fmt printf"
8136440,8137720," error"
8137720,8139480," error"
8139480,8139560," s"
8139560,8141480," error"
8141480,8143480," error"
8143480,8144600," just os"
8144600,8145720," maybe maybe just return"
8145720,8148920," for experts"
8148920,8150920," expert"
8150920,8153000," range"
8153000,8153560," experts"
8153560,8153640," experts"
8153640,8157240," and we can dump this into a stuff"
8157240,8157720," from zero"
8157720,8161800," go"
8161800,8163000," run"
8163000,8164920," bex go"
8164920,8166920," okay"
8166920,8167560," this is true"
8167560,8169480," uh no"
8169480,8170600," what"
8170600,8172200," yeah"
8177640,8178360," okay"
8178360,8179800," expected this thing"
8179800,8181240," so what's wrong"
8181240,8182440," with you my friend"
8182440,8186760," okay so let's start"
8186760,8187800," is that because of this thing"
8187800,8190360," god damn it"
8190360,8193080," you can't have numbers in"
8193080,8194280," variables"
8194280,8195960," what a shitty language"
8195960,8197640," who who made this language"
8197640,8199560," who the made this thing"
8206120,8207800," let's actually quickly add support for that"
8207800,8208920," like why why not"
8208920,8209880," why can't we have that"
8209880,8212520," uh"
8212520,8213000," all right"
8213000,8215720," who the made this piece of"
8215720,8220120," all right"
8220120,8223080," so if this thing starts with letter"
8223080,8225160," we keep"
8225160,8230280," so if it starts"
8230280,8232120," with letter"
8232920,8233560," span"
8233560,8234280," runes"
8234280,8234840," trim"
8234840,8235320," runes"
8235320,8239720," source"
8239720,8240120," runes"
8240120,8243800," is there any particular"
8243800,8244440," reasons"
8244440,8245240," reason why the"
8245240,8246040," fuck we do that"
8246040,8255080," so i would expect some sort of"
8259560,8260920," so this is the digit"
8260920,8262440," ah i see"
8262440,8264120," uh i see"
8264120,8266200," so span runes"
8266200,8266840," we just like"
8266840,8267320," yeah i see"
8267320,8270440," we could try to do"
8270440,8271160," the following thing"
8271160,8274040," x rune"
8274040,8280760," letter"
8280760,8281960," or"
8281960,8284920," is digit"
8284920,8285720," so essentially"
8285720,8287480," the variables have to start"
8287480,8288280," with the letter"
8288280,8289560," but then they may contain"
8289560,8290680," uh digits"
8290680,8292120," why didn't i do that"
8292120,8293720," i mean it's such a simple fix"
8293720,8295880," uh"
8295880,8296680," i think"
8296680,8296920," yeah"
8296920,8301560," i think you can use"
8301560,8302440," ints in var"
8302440,8307080," you're trying to pretend like"
8307080,8307720," you know"
8307720,8308440," my language"
8308440,8309080," that i"
8309080,8309640," i coded"
8309640,8310840," coded myself"
8310840,8311480," better than me"
8312040,8312840," is that what you're trying"
8312840,8313320," to tell me"
8313320,8314920," like i mean"
8314920,8315480," yeah now"
8315480,8316840," you can use digits"
8316840,8317720," in the variable names"
8317720,8318440," yes i i just"
8318440,8319560," i just implemented that"
8319560,8319880," yes"
8319880,8321240," i just added that feature"
8321240,8322680," uh"
8322680,8323240," all right"
8323240,8323480," so"
8323480,8324680," i mean"
8324680,8325720," i i don't really know"
8325720,8326840," my own language that well"
8326840,8327400," as you can see"
8327400,8327720," so"
8327720,8330440," uh"
8330440,8330680," okay"
8330680,8331640," so what do we have in here"
8331640,8332520," so this is a function"
8332520,8333320," is supposed to return"
8333320,8333720," boolean"
8333720,8336120," kegan"
8336120,8338520," it compiles"
8338520,8339080," how about that"
8339080,8340280," how about that"
8340280,8341800," chat"
8341800,8342600," chat"
8342600,8342920," chat"
8342920,8343800," chat"
8343800,8345720," are you ready"
8345720,8347000," the moment of truth"
8347000,8350600," the moment of juice"
8350600,8351480," still go"
8356760,8357960," first try"
8357960,8360360," first try"
8360360,8361800," and this command"
8361800,8362920," is defined"
8362920,8364200," in a database"
8364200,8364840," here it is"
8364840,8367160," here it is"
8367160,8369080," i should be able to"
8369080,8371240," to modify it actually"
8371240,8372120," believe it or not"
8372120,8372760," i'm pretty sure"
8372760,8373480," i should be able to"
8373480,8374600," to modify this command"
8374600,8376520," so update"
8376520,8377880," commands"
8377880,8379240," update commands"
8379240,8381800," set backs"
8381800,8383720," to something like"
8383720,8384200," i don't know"
8385320,8386520," we can set it to"
8386520,8395000," so we should do"
8395000,8395560," something like"
8395560,8396280," author"
8396280,8396520," right"
8396520,8398040," so let me"
8398040,8398840," let me put this thing"
8398840,8399240," in here"
8399240,8399880," so we can see"
8399880,8402760," say author"
8402760,8403960," space"
8403960,8405480," the command"
8405480,8409000," was expired"
8409000,8410600," sorry"
8410600,8413000," smiley face"
8413000,8413480," the command"
8413480,8414200," was expired"
8414200,8415000," sorry"
8415000,8415880," and then"
8415880,8416920," where name"
8416920,8417160," is"
8417160,8418920," equal to"
8418920,8419320," still"
8419320,8420120," right"
8420120,8422040," so i can literally"
8422040,8423240," now modify"
8423240,8424360," on the fly"
8424360,8424840," right"
8424840,8426040," can i can i do that"
8426040,8427160," now if you just do"
8427160,8428360," still"
8428360,8432600," if you do still"
8432600,8434040," the command"
8434040,8434840," was expired"
8434840,8436280," so as you can see"
8436280,8437080," i'm modifying it"
8437080,8437560," on the fly"
8437560,8438360," without restarting"
8438360,8438840," the"
8438840,8439320," the boat"
8439320,8439560," i can"
8439560,8440200," i just modify"
8440200,8440680," the source"
8440680,8440920," code"
8440920,8441240," in the"
8441240,8443480," in the database"
8443480,8445160," right"
8445160,8445800," so that's actually"
8445800,8446200," pretty cool"
8446200,8446760," i think"
8446760,8450520," arg zero"
8450520,8457560," so what we can say"
8459160,8466040," in year"
8466040,8467960," uh let's actually put"
8467960,8468520," forehead"
8468520,8470600," forehead"
8470600,8472840," uh should be"
8472840,8473160," fine"
8473160,8477320," still"
8477320,8480920," yeah"
8484760,8485560," scripting"
8485560,8485640," scripting"
8485640,8486360," languages"
8486360,8488280," still scripting"
8488280,8488760," languages"
8488760,8490920," that's super"
8490920,8491160," cool"
8491160,8492520," so i can"
8492520,8493320," also now add"
8493320,8494040," more commands"
8494040,8494840," right"
8494840,8496600," i can also"
8496600,8497160," now add more"
8497160,8497480," commands"
8497480,8497800," as far as"
8497800,8497960," i know"
8497960,8498360," we have"
8498360,8498680," when"
8498680,8499080," command"
8499080,8499480," right"
8499480,8504360," so"
8504360,8504680," uh"
8504680,8505320," we can"
8505320,8505880," maybe add"
8505880,8506280," vanish"
8506280,8506680," command"
8506680,8507560," people were asking"
8507560,8508040," me about"
8508040,8508440," vanish"
8508440,8509000," command"
8509000,8509720," right"
8509720,8510680," so uh"
8510680,8511480," commands"
8511480,8512120," i'm pretty sure"
8512120,8512600," it's not going"
8512600,8513400," to work"
8513400,8514440," because we are"
8514440,8515560," kind of escaping"
8515560,8517400," we're kind of"
8517400,8518280," escaping"
8518280,8518920," the messages"
8518920,8519480," so the"
8519480,8520200," the bot cannot"
8520200,8520760," accidentally"
8520760,8521800," send the command"
8521800,8522040," right"
8522040,8522600," so i'm pretty sure"
8522600,8523080," it's not going"
8523080,8523880," to work"
8523880,8524520," so we can do"
8524520,8525080," something like"
8525080,8525800," insert"
8525800,8526760," into"
8526760,8527240," uh"
8527240,8528520," commands"
8528520,8528760," uh"
8528760,8529000," right"
8529000,8529320," we're gonna be"
8529320,8530280," inserting name"
8530280,8531560," and backs"
8531560,8531880," uh"
8531880,8532520," values"
8532520,8533000," so what kind"
8533000,8533400," of values"
8533400,8533640," we're gonna"
8533640,8533880," insert"
8533880,8534120," we're gonna"
8534120,8534440," insert"
8534440,8535800," vanish"
8535800,8536120," right"
8536120,8536600," and in terms"
8536600,8537240," of uh"
8537240,8537640," what's gonna"
8537640,8537960," be the"
8537960,8538440," vanish"
8538440,8539960," command"
8539960,8540360," uh"
8540360,8540600," right"
8540600,8541560," let me see"
8541560,8542120," so we can"
8542120,8542600," say"
8542600,8544200," save"
8544200,8546600," um"
8546600,8548200," time out"
8548200,8549160," time out"
8549160,8550360," space"
8550360,8551640," the author"
8551640,8552920," for"
8552920,8553560," one second"
8553560,8554120," i think this is"
8554120,8555320," how it works"
8555320,8556200," right"
8556200,8557160," so uh"
8557160,8557720," that's basically"
8557720,8558360," how it works"
8558360,8559080," and it's not going"
8559080,8560440," to work properly"
8560440,8560840," uh"
8560840,8562040," values"
8562040,8562440," right"
8562440,8564360," so values"
8564360,8565160," so let's actually"
8565160,8565960," do something like"
8565960,8568200," vanish"
8568200,8568440," yeah"
8568440,8568920," so as you can"
8568920,8569080," see"
8569080,8569880," it escapes"
8569880,8570760," those commands"
8570760,8572040," uh"
8572040,8572280," right"
8572280,8572920," it escapes"
8572920,8573960," those commands"
8573960,8574520," so one of the"
8574520,8575160," things by the way"
8575160,8576280," we can do"
8576280,8576840," one of the things"
8576840,8577880," we can do"
8577880,8579240," we can introduce"
8579240,8580200," another custom"
8580200,8581240," command"
8581240,8581480," right"
8581480,8582280," we can introduce"
8582280,8582920," another custom"
8582920,8583640," command"
8583640,8584360," that literally"
8584360,8585080," times out"
8585080,8585720," the uh"
8585720,8586120," the user"
8586120,8586520," and doesn't"
8586520,8587080," doesn't use"
8587080,8587720," escaping"
8587720,8587960," right"
8587960,8588520," so it's gonna"
8588520,8589880," say time out"
8589880,8590360," uh"
8590360,8591240," we can time out"
8591240,8592280," the author"
8592280,8593320," though"
8593320,8593880," that means"
8593880,8593880," that means"
8593880,8594840," i have to"
8594840,8596520," parse"
8596520,8597640," the author"
8597640,8598920," right"
8598920,8599640," at some point"
8599640,8600440," but yeah"
8600440,8601640," i feel like"
8601640,8603800," it's not particularly"
8603800,8606200," particularly useful"
8606200,8606520," uh"
8606520,8606920," right"
8606920,8607560," insert"
8607560,8608200," uh"
8608200,8609160," all right"
8609160,8610440," so maybe we could introduce"
8610440,8611160," like a say"
8611160,8612600," unescaped"
8612600,8612840," right"
8612840,8613720," you know what i mean"
8613720,8621560," say unescaped"
8621560,8622040," uh"
8622040,8623400," so update"
8623400,8624360," commands"
8624360,8624920," uh"
8624920,8625880," set"
8625880,8627800," dex"
8627800,8628920," say"
8628920,8631720," unescaped"
8631720,8633320," oh i know"
8633320,8636120," unsafe"
8636120,8638280," say unsafe"
8638280,8639640," that's perfect"
8639640,8640920," right and we're gonna say"
8640920,8642840," slash time out"
8642840,8643560," space"
8643560,8644600," alter"
8644600,8645000," uh"
8645000,8646040," one second"
8646040,8648040," right so that's what we're gonna do"
8648040,8649160," uh"
8649160,8652680," that's what we're going to do"
8652680,8656200," so"
8656200,8657080," and"
8657080,8658600," and"
8658600,8660360," it's not going to work by the way"
8660360,8661080," again but"
8661080,8662440," because we don't have"
8662440,8663320," say unsafe"
8663320,8665000," right we don't have seven safe"
8665000,8666040," i'm really retired"
8666040,8668200," so i'm trying to speak russian"
8668200,8668680," uh"
8668680,8669400," all right"
8669400,8670360," so did it work"
8670360,8672520," i think it did in fact work"
8672520,8672840," uh"
8672840,8673080," all right"
8673080,8675080," so if you try to do a vanish"
8675080,8675880," now"
8675880,8677480," if you try to do vanish"
8677480,8677800," uh"
8677800,8679000," it says mods"
8679000,8679960," did an oopsie doopsie"
8679960,8681160," while defining this command"
8681160,8682840," ask them to check the logs"
8682840,8683480," right"
8683480,8684920," so in the reasons because"
8684920,8685320," uh"
8685320,8686040," vanish command"
8686040,8686920," an escaped character"
8686920,8687560," underscore"
8687560,8688280," fuck"
8688280,8689720," it doesn't support underscores"
8689720,8692120," what a shitty language"
8692120,8693720," it doesn't support"
8693720,8695080," numbers"
8695080,8695880," in uh"
8695880,8697640," variable names and underscores in the"
8697640,8698360," function names"
8698360,8702120," okay"
8702120,8702760," so i think"
8702760,8704200," i think this is something that we"
8704200,8705080," have to fix as well"
8705080,8706920," so let's quickly fix that"
8706920,8707880," uh"
8707880,8709080," let's in fact"
8709080,8711000," quickly fix that"
8711000,8711640," let's in fact"
8711640,8713960," quickly fix that"
8713960,8714520," so"
8714520,8715000," uh"
8715000,8716200," when we are parsing"
8716200,8716920," a function"
8716920,8717880," uh"
8717880,8718520," is letter"
8718520,8721400," uh"
8721400,8722680," oh it depends actually"
8722680,8723720," yeah"
8723720,8725240," so this is the same code that"
8725240,8726680," parses both"
8726680,8728520," function calls and variables"
8728520,8730120," if i understand correctly"
8730120,8731800," right"
8731800,8733640," so this is a fun call"
8733640,8735800," if it contains this thing"
8735800,8738200," but if it doesn't"
8738200,8740440," oh"
8740440,8741480," it's an expression one"
8741480,8742280," okay"
8742280,8742840," what the hell"
8742840,8743880," what the hell happened here"
8743880,8745960," by the way"
8745960,8747240," so that was weird"
8747240,8748120," but yeah that makes sense"
8748120,8749880," so this is expression var"
8749880,8750360," uh"
8750360,8751160," and so on and so forth"
8751160,8751880," so that means here"
8751880,8752680," i just have to say"
8752680,8753400," or"
8753400,8755080," x is equal to underscores"
8755080,8756040," so that's it"
8756040,8757240," should be pretty"
8757240,8757800," pretty easy"
8758520,8759560," so now we do support"
8759560,8759880," uh"
8759880,8760600," escape"
8760600,8761320," underscore"
8761320,8762200," but we need to"
8762200,8763640," implement that"
8763640,8764760," command specifically"
8764760,8766360," right so say"
8766360,8766760," uh"
8766760,8769400," there we go"
8769400,8770920," so how can we even"
8770920,8772440," do that"
8772440,8773640," how can we even do that"
8773640,8774280," all right"
8774280,8776280," so let's say"
8776280,8778040," say unsafe"
8778040,8778600," uh"
8778600,8779160," and"
8779160,8780920," i'm gonna literally copy paste this entire thing"
8780920,8782760," because it's like duplicate code"
8782760,8783160," right"
8783160,8783400," uh"
8783400,8785400," but i'm gonna unduplicate it later"
8785400,8785880," i"
8785880,8786600," i promise"
8786600,8787320," trust me"
8787320,8788360," i know what i'm talking about"
8788360,8789240," uh"
8789240,8790920," so instead of send message"
8790920,8792600," we have to send something else"
8792600,8795160," but it actually very much depends on the twitch environment"
8795160,8796200," right"
8796200,8798120," so how do we do that in twitch environment"
8798120,8798680," i wonder"
8798680,8800520," so"
8800520,8801320," uh"
8801320,8802680," we do send message"
8802680,8804360," and this is what we"
8804360,8804680," uh"
8804680,8805560," what we're doing here"
8805560,8806840," so i suppose it makes sense"
8806840,8808760," specifically for twitch environment"
8808760,8810440," to introduce something like"
8810440,8812120," um"
8812120,8814440," send message unsafe"
8814440,8815320," right"
8815320,8816360," send message unsafe"
8817080,8819800," where we effectively just do this entire thing"
8819800,8820760," except"
8820760,8823080," we remove that dot"
8823080,8823480," in here"
8823480,8825960," and this is the dot that sort of escapes"
8825960,8827720," any potential commands in here"
8827720,8828600," so that's kind of the"
8828600,8830360," that's kind of the point in here"
8830360,8832360," say unsafe"
8832360,8833560," right and in here"
8833560,8835640," we send message unsafe"
8836280,8837000," all right there we go"
8837000,8838600," that's basically the id"
8838600,8840840," does it compile"
8840840,8842280," it seems to be compiling"
8842280,8844040," so let's bring the chat back"
8844040,8844840," right let's"
8844840,8847320," that was weird"
8847320,8849240," but i suppose i just"
8849240,8851160," reloaded the configuration"
8851160,8853000," so nothing particularly special"
8853000,8854840," right so since i'm a mod"
8854840,8856600," so then you should not work on me"
8858360,8859240," right"
8859240,8860200," but it should work on you"
8860200,8860680," now try"
8860680,8862520," did it work"
8862520,8864520," did it work"
8864520,8866280," oh"
8866280,8869240," it didn't work"
8869240,8871640," you know why i feel like"
8871640,8874120," twitch changed something with its commands"
8874120,8877400," i think commands don't work through irc anymore"
8877400,8878360," i forgot about that"
8878360,8880520," this is probably one of the reasons why"
8882360,8887400," uh why cheat arena that it didn't work my cheat arena didn't work anymore"
8887400,8887640," yeah"
8887640,8891960," so i suppose commands these kind of commands now are"
8891960,8894040," through their api"
8894040,8897480," right so that means we'll need to make api calls"
8897480,8900600," all right"
8900600,8901160," now whatever"
8901160,8905400," so vanish was actually super fun command"
8905400,8907720," so basically it will time you out for one second"
8907720,8909880," and it will remove all your messages"
8909880,8912920," so now we're stuck with just still still"
8912920,8915080," uh rest api"
8915080,8918280," still rest api rest api in 2023"
8918280,8925320," how do you connect to twitch by the way sockets"
8925320,8925480," i'm"
8925480,8929240," yeah i'm using regular sockets should i use web sockets"
8929240,8931560," should i use web sockets maybe"
8931560,8935720," oh it depends on the kind of sockets you're using right"
8935720,8935960," so"
8938680,8942200," it works in twitch chat but i mean in twitch chat they can just actually"
8942200,8947160," proxy the commands through api calls right so since it's a web"
8947160,8955640," make vanish to not print not found please what"
8955640,8958200," what do you mean"
8958200,8964200," ah i see what you mean in discord like yeah yeah sure i'll do something"
8964200,8968680," all right"
8968680,8971880," all right so i implemented everything i wanted to implement"
8971880,8975400," i integrated a small programming language into the thing"
8975400,8984520," right into the into the chat bot so now uh i should be able to migrate all of my hard credit"
8984520,8991080," commands into the database and modify those commands uh by modifying the database so does anyone have any"
8991080,8996600," questions before you go did you reverse the sql query in your code from like to equals i'm pretty sure i did"
8996600,9003400," uh i'm pretty sure i did"
9003400,9015800," yeah yeah and then um um all right"
9015800,9023880," so does anyone have any questions before i go"
9027400,9032760," i suppose no questions right so you have an opportunity to ask me a question so some people"
9032760,9040440," subscribed all right so i completely missed that thank you so much uh use uh use 10 uh for tier one"
9040440,9044920," subscription thank you thank you thank you and flush lmao thank you for twitch prime with the message"
9044920,9055160," i love you big man i love you too thank you thank you uh how do you write clean code is just kidding thank you"
9055160,9063240," thank you for not forcing me to answer that question uh all right so i guess that's it for today"
9063800,9070680," uh thanks everyone who's watching me right now i really appreciate that have a good one and i see you"
9070680,9085560," all on the next azuzin asation i love you all"
9085560,9093720," you"
