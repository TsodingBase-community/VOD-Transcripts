start,end,text
80,4720," Hello everyone and welcome to yet another recreational programming session"
4720,11520," with Mr. Zozin. So we are developing a game that I've been developing for quite some time,"
11520,16400," I think for two weeks already. So I developed the engine and as you can see I already started adding"
16400,22640," some content to the game. I added items and recently I also added an ability to throw bombs."
22640,29360," They bounce around. Luckily they are not exploding yet, but maybe at some point we're going to add"
29360,34640," that. So one of the problems that I keep dealing with while developing this kind of game in"
34640,42560," JavaScript is basically the performance. So honestly, I could have actually had a"
42560,47600," pretty good performance if I just used WebGL, but I'm intentionally not using WebGL. By the way,"
47600,54080," this is not WebGL. This is not WebGPU or like WebGL 2. This is not a hardware accelerator thing."
54800,61760," This is a 2D canvas. This is very important to note. This is a 2D canvas. So, and what I'm doing,"
61760,70320," I'm doing the classical ray casting algorithm pixel by pixel using JavaScript. No WebAssembly either."
70320,78560," No WebGL, no WebGL 2. No WebGPU, no hardware acceleration whatsoever. No WebAssembly. This is what I'm doing."
78560,84560," And as you can see, I have 20 FPS. Right. But this is because I'm streaming. Right. This is because I'm"
84560,89920," streaming. When I'm not streaming, it's actually logged to the frame rate of my monitor, which is 60 FPS."
89920,96880," And by the way, you can go to this website and you can actually confirm that it is in fact really fast."
96880,100880," Right. So I already gave that to the chat. And for people on YouTube, I'm going to put that in the"
100880,105760," description as well. Right. So it is fast. Right. It is fast. But for some reason, when I'm streaming,"
105760,112640," when I'm streaming something with my streaming setup, it fucks it up. So interestingly, the way we"
112640,118400," actually implemented the math is not really correct because at the time of implementing all of that,"
118400,127120," I didn't really know any better. Right. So what I'm doing is I'm using a class called vector. Right."
127120,133680," I'm using a class called vector. So let's take a look at this class. Right. So class vector. And quite often,"
133680,139680," I actually create a lot of different instances of the vector. Right. So it has a method clone that"
139680,147120," creates a temporary vector. Right. And sometimes I may create a lot of clones of this vector per frame."
147120,154800," Right. Per frame. So and JavaScript being the managed language it is with garbage collect and stuff like"
154800,162000," that. It kind of has like a, you know, difficult time processing all of these objects. Right. Especially"
162000,170240," if you generate them per frame. So the, the heap, GS heap looks like a, like it's having a stroke. Right."
170240,175520," So if you take a look at the GS heap and like how much it allocates and stuff like that. So during the"
175520,180640," frame, it may allocate like a two megabytes of memory. And then the next frame, like garbage collector kicks in,"
180640,185440," and it's just like delegates and it just goes up and down, up and down, up and down, up and down."
185440,192080," Right. And this is because we, we just spawn shit ton of like objects, vector objects. Right. And then the"
192080,197360," garbage collector has to spend some time cleaning them up. We can actually try to profile this. And I think,"
197360,202640," I think it would be interesting. Right. I'm not really sure if this is exactly what's,"
202640,209360," you know, reducing the performance for me, but I want to like, try to work in that direction and see"
209360,216080," what we can do in here. Right. So we can try to record a little bit of the, of the gameplay. Right."
216080,222320," So we can throw a bunch of bombs and stuff like that. So maybe let's record like 10 seconds,"
222320,226560," maybe. All right. So let's actually stop it now. It's going to take some time, you know,"
227600,234480," processing all of this stuff. Two megabytes is a high memory usage low W. I mean, it uses two megabytes"
234480,242240," per frame. So that's what I'm saying. Holy shit. I mean, yeah, we're also streaming in here."
242240,249760," So where is the memory usage? Do I see the memory usage? Okay. So here is the memory. So I probably want"
249760,258240," to, yeah, there we go. You can actually clearly see that. Uh, right. So, um, ah, fuck. Um, how can I,"
258240,270640," yeah, I didn't, I didn't mean to actually select. I wanted to select like, uh, a bigger chunk, man. How do I, um,"
274000,287440," so let me increase that? Uh, dude, it's also lagging. I can't fucking do anything. Okay. So let me try to,"
287440,298800," um, is it, it's not reacting really to, to what I'm doing. Right. Can I just,"
301840,305920," like, like I'm trying to zoom out. It doesn't fucking work. Like it's something happened. Okay."
305920,310560," Let's give it a try one more time. Uh, let's give it a try one more time. So maybe it's going to become"
310560,316800," better. Uh, I didn't know what, what I pressed, but I, but, but they literally can't freaking like do"
316800,324240," anything. Uh, it's kind of bizarre. All right. So let's, let's record one more time."
326240,330720," All right. So this is a 10 seconds. And let's take a look at that. Uh, I want you to just zoom"
330720,335200," in on a specific, like a couple of frames and it's just like, it doesn't allow me to quickly do that."
335200,342320," So bizarre. Um, it went into this narrowing mode and it's just like, yeah, this is what I'm talking"
342320,348640," about. Well, this is what I want you to see. Right. So here's like specific tasks for specific frames."
348640,355200," Right. So each, I suppose each task is a specific frame. Yeah. Yeah. Animation, animation frame fired."
355200,362720," Right. Animation frame fired. And per frame, uh, the usage, right. So here is the usage of the, um,"
362720,370560," GS heap before doing the frame and after the frame, right after the frame, uh, it's actually five."
370560,375520," Right. So two megabytes, like during the frame, it just allocates two megabytes of memory."
375520,380720," Um, right. And then the garbage collector, I suppose, just cleans it up. Like, I'm not sure"
380720,386080," exactly what the fuck is going on. Control scroll zooms in, zoom out. It zooms in, zoom out UI."
386080,390720," I don't know. I went into this weird mode where it just narrowed the thing and I could unnarrow it."
390720,394720," Like, I don't freaking know. I don't understand this UI. I'm not a web developer and I don't even give a"
394720,401680," shit. So, um, yeah, so my hypothesis that maybe this is the pattern that is actually very damaging for"
401680,407520," the performance. Uh, so, and I want to try to get rid of that. All right. So I, I really want to try to"
407520,416000," get rid of that. Um, so, uh, what we can do, right. So since we're allocating a lot of, uh, vector twos,"
416000,421680," right. And vector threes and stuff like that, I was thinking maybe we can create some sort of like a pool"
422320,428320," of these objects, right. So, and essentially every time I need to clone this object, right. Like instead"
428320,434720," of doing new, I would actually query, uh, the vector out of that pool and pool is going to be something"
434720,441280," similar to like an arena, right. So essentially it's going to be specifically for temporary vectors,"
441280,446000," right. So they're going to leave for a single, uh, for a single frame. And at the end of the frame,"
446000,452160," or rather at the beginning of the frame, we just basically reset the counter of used objects to zero and"
452160,458320," try to reuse these objects again. Uh, right. So this is what I want you to try to do. And what's"
458320,462880," interesting is that since it's a dynamic language, we'll be able to create like a more general pool,"
462880,467200," uh, right. And with the TypeScript, we'll be able to even properly tap check that more or less, right."
467200,471680," So it's actually a great interface, right. So we're going to say it's pool and it's going to be like a"
471680,476240," generic, right. Pool of different kinds of objects, right. So because I want to have a pool of vector"
476240,481040," twos and maybe pool of vector threes, uh, right. And maybe it's going to be generally reusable for"
481040,485440," these kinds of things. So in here, what we're going to have, we're going to have items, right. So which"
485440,490960," is going to be array of T, right. And it's going to be basically a growing array. Uh, so if you try"
490960,496640," to allocate something within that array and the capacity can hold it, only then we're going to push"
496640,501040," a new thing in there, right. Only then we're going to push a new thing in there. So, and we're going to"
501040,509040," keep a counter in here, uh, to be fair. Um, the convention in JavaScript is that you call this"
509040,516400," counter length. So I suppose it makes sense to just follow these conventions, right. So, and so the only"
516400,523360," thing, um, we can't really easily do that is basically create a new object, right. So, but maybe we can have"
523360,528560," some sort of like a prototype that we can copy. And by prototype, I mean like actual object, not the"
528560,532960," prototype in the meaning of JavaScript. JavaScript stole such a good name, actually, honestly."
532960,539680," Anyways, so, uh, let's maybe have a, some sort of a constructor, create pool. Uh, right. And obviously"
539680,545360," it's going to be a generic thing and it's going to return, uh, use this kind of thing. And let's just"
545360,552400," say return, uh, items. It's going to be empty and the length initially is going to be zero, right. So this"
552400,559680," is what we're returning. I wonder if I can just do fly check mode, uh, right. So, and, uh, let's have"
559680,566560," something like a lock pool, right. So a lock pool, uh, we're probably going to accept the pool, which is a"
566560,574480," pool T and this thing is going to return as T. Um, right. And so how are we going to be doing all of that?"
574480,586080," So if the pool length is greater or equal to the pool items length, right. So this is how many items"
586080,591040," in the pool we've already used. And this is how many items we've already allocated, we already have."
591040,598000," Right. So if the amount of things, like if the pool is already saturated, we need to add a new element in"
598000,604160," there somehow. So the question is how, right. So essentially, if I knew the type T, if I knew the"
604160,610160," type T, I would do something like items push, uh, like something like new T. Right. But that implies"
610160,617680," that T is a class. Vector2 is a class. So it's totally fine. Uh, right. So, and I suppose one of"
617680,625040," the things we probably want to do, uh, right. We want to have like, um, item, right. Init."
626000,631840," Yeah. So something like in it. So in essentially when we create a pool, uh, we're going to accept"
631840,638000," the item with which we're going to be initializing things. Uh, right. So in it, and what we want to do"
638000,644320," here, right. Instead of constructing the new one, we're going to basically clone, uh, this entire thing,"
644320,651680," but how do you clone, um, allow, yeah, I look, whatever, it's just a type of don't, don't put too much"
651680,659760," attention to that. Uh, so writing code, not a poem. Um, so we need to clone this entire thing. So I,"
659760,664560," usually I would do something like a structured clone, right. Structured clone, but I didn't think"
664560,669200," you can easily do that. Right. So, especially with the classes, because structured clone doesn't really"
669200,678160," clone the, uh, the prototypes or anything like that. So if I remember correctly, right. So we probably need to do"
678160,689200," object, uh, get prototype of, prototype of, right. So we're getting the prototype of this entire thing."
689200,697360," Um, all right. And as far as no object has a method create, yeah, yeah, yeah. So create an object that"
697360,705760," has a specified prototype or that has a new prototype, right. Okay. So we can just do that."
705760,712080," So we can create, honestly, we can just do something like that, but we would like to initialize it with"
712080,717840," something, right. So we'd like to initialize with something. So it would be better to clone this entire"
717840,725520," thing. Uh, so remember correctly, that object has something like a sign, um, right. Copy the values of"
725520,731600," all of the innumerable on properties. Yeah. So this is probably what I want to do. So the tagging is going"
731600,739280," to be a sign, right. So this is what I have in here. Does it return the object? So source target"
739280,745280," returns the target object. Okay. So this is actually perfect, uh, returns the target object. So that means"
745280,754560," I can now do something like, uh, pull in it. Right. If I remember correctly, this is probably what you have to do."
754560,759200," Right. So this is what you have to do. So, um, yeah, JavaScript, by the way,"
759200,768160," JavaScript, by the way. So we take the prototype of this, uh, we create an object with that prototype,"
768160,774960," right. So, and we just assign the actual values in here. Uh, right. So it will totally work the first"
774960,781440," time. I'm actually not sure. I'm actually not sure. I need to double check that. I really need to double"
781440,787920," check that. So how can I even double check that? So in a node, uh, maybe I'm going to just create a class"
787920,794720," vector two. All right. So I'm going to have X, uh, maybe it's just a constructor. Um, I suppose in the"
794720,800880," latest, in the latest standards, you can specify the, the variables that you're going to have in here,"
800880,807440," right. So then constructor. All right. So it's going to be X number Y. No, well, I mean, it's,"
807440,813440," it's not a typescript. Good fucking damn it. It's not a freaking typescript. So this X, this Y,"
814000,820880," these nuts, sorry. So I'm going to have display, right. So in here, we're going to do console log"
820880,830160," X and Y, but actually these X, these X and these Y, uh, right. So we close that, we close that and"
830160,836960," we get a vector, right. So I can create a new vector, uh, which is 69 for 20, right. And then I can display"
836960,842320," this entire thing and I go 69 for 20. We've got this thing. So what if I have something like in needs,"
842320,848000," all right, so new vector, uh, this is not what I wanted. I wanted to just create 69 for 20. There we"
848000,858800," go. It's already fucking taken. Can I unset in it or okay. We'll have a const value vector two, uh,"
858800,866560," for 20. So this is the value. All right. So objects, uh, get prototype prototype of value. So we've got"
866560,872960," the prototype, right. So then we want to create, uh, create an object. Uh, yeah. So that created an"
872960,881440," object and then we just do assign, uh, just do assign of this thing to, to the value, right. Value of this"
881440,888320," thing. And that created the thing. And then I can just try to display, uh, it kind of works, I suppose."
888320,893360," Right. So, um, and we don't even need to know the class of this entire thing. Right. So we're just like"
893360,898160," transplanting, transplanting the prototype and shit. So I think, I think it's going to work."
898160,902720," And scripting language can unset. Yeah. Fucking stupid. But anyway, whatever."
902720,909120," Um, so what do we have in here? All right. So after we pushed this thing, we're going to assume that we"
909120,915280," have enough things to just, you know, um, to just get an object. Right. So we're going to just do items,"
915840,921680," uh, pool length plus plus since it's a post increment. This entire thing will return the"
921680,926160," previous value and we can just return this entire thing. And we go, we just implemented a simple bump"
926160,932160," allocator in JavaScript. Can your web devs do that? I don't freaking think so."
932160,938400," Ref allow 38. Thank you so much for, uh, for the sub. Thank you, thank you, thank you."
939280,944240," All right. So another version that we'll need in here is probably reset the pool. Right. So,"
944240,948960," which is pretty straightforward. You just set its, uh, length to zero. Right. So it's going to be"
948960,955520," something like this. Pool T and we're not going to return anything. We just say pool length equal to zero."
956640,967760," The death of malloc. Yeah. Right. Ah, the death of malloc. Honestly, this entire thing about the garbage"
967760,974720," collector is that it kind of makes you not think about memory management until it's not true anymore."
974720,982080," Right. So you still need to think about memory management, even with the garbage collector."
982080,985840," So I think we should call this phenomena the death of the garbage collector."
985840,995760," The death of the garbage collector. So you bring in this complex structure that is supposed to help"
995760,1004880," you, but it doesn't do exactly what you want. So you now you're trying to trick it into doing what you"
1004880,1011280," want and you're going back into memory management. So this is the death of the garbage collector. Right."
1011280,1017120," So like a death of the author. Right. So the garbage collector was there. And at some point you need"
1017120,1021840," more control. So the garbage collector kind of dies. The purpose of this thing is not, doesn't have any"
1021840,1030400," meaning or anything. Um, now JIT compiled this extract code for memory and using C."
1030400,1038960," The death of the garbage collector. Somebody should write an article about that phenomena. Right. Because I"
1038960,1045040," know this is a really well-known phenomena like among, uh, game developers and, and generally high"
1045040,1049840," performance developers. Right. So people who develop high performance applications, they know about that."
1049840,1054560," Right. They know about the phenomena of the death of the garbage collector, where like, instead of,"
1054560,1059520," um, you know, having the comfort of development, you're fighting with the garbage collector because it"
1059520,1064400," doesn't do what you, what you need it to do. So somebody needs to write an article. Um, right."
1064400,1070400," So, because it's an interesting phenomenon. Um, anyways. So we'll, we'll get the pools. Right."
1070400,1076240," So does it even compile? Does the share compile? It doesn't even compile. So 51. Uh, right. So init"
1076800,1085040," is a part of the pool. Oh, it seems to be compiling. Uh, I want it. Cool. Thank you. Thank you so much for"
1085040,1090800," for doing the God's job. So, and I suppose these pools are going to be like a global,"
1090800,1095680," global pools. Right. So let's actually, uh, you know, create global pools. So it's going to be pool."
1095680,1103280," Uh, it's going to store vector tools. Right. So this is going to be more like pool, uh, vector two. Right."
1103280,1108320," And we're going to just create the pool and we're going to initialize the pool with the vector"
1108320,1115840," two. And I think it's not going to work that easily because yeah, we don't have a vector two here yet."
1115840,1120960," We have it in here. Right. And probably we want to also have the variant with three. So I'm going to"
1120960,1128240," replace, uh, two with three in here. And over we go, we've got two pools and in here, right. So here is"
1128240,1133200," we rendering a single frame. Uh, we already kind of have pools, but we have sprite pools."
1133200,1138720," But they act slightly differently. Uh, they act slightly differently. Wait, maybe not."
1138720,1149760," Maybe we should also transform. Yeah. But yeah. So with, with the sprite pools, you push a specific"
1149760,1155120," parameters into the thing, right? You kind of push the specific parameters into the thing. So I didn't"
1155120,1162000," think, well, I mean, yeah, maybe we can have like a default, um, sprite, which is like zero initialized"
1162000,1169680," with everything and then push sprite just allocates a new sprite in there and just sets this parameters"
1169680,1174480," for you. We can probably reuse this pool for sprites as well. I think, I think it's going to work. I think"
1174480,1182400," it's a good idea. But anyway, so here we're going to reset pool, uh, pool version two, and this is pool"
1182400,1190960," version three. Not version three, not version three, vector. Jesus Christ. Uh, right. It's a vector. Um,"
1190960,1198080," okay. So we'll get this kind of thing. Cool. So in the vector two, right. So here we have a clone,"
1198080,1204240," right. So here we have a clone. Maybe we should start, maybe we should start actually having like a clone,"
1204960,1212640," uh, clone pool, uh, clone pool. Right. So here we're going to accept pool, uh, and, um, yeah. So we're gonna"
1212640,1220640," accept pool, uh, a vector and we're going to return a new vector. So how are we going to be doing all of that?"
1220640,1232560," Uh, pool, a log, uh, maybe a log pool. Uh, so I'm just allocating a new thing, right? So I'm just putting this pool in here and I get a new vector."
1232560,1240080," All right. I get a new vector. So in this vector, what I have to do, I have to set this X to vector two."
1240080,1246400," And by the way, I think I should call this that, right? So to continue sort of the, the convention,"
1246400,1251440," and let's just return that. This is not particularly great in my opinion. This is not particularly great."
1251440,1257760," I think 3JS, by the way, so I'm stealing a lot of code from 3JS because it's actually like"
1257760,1262480," designed by people who's been doing this kind of shit for quite some time, right? So they've been doing"
1262960,1267360," what I'm doing right now for, for years, for many years, so they know what the fuck they're doing."
1267360,1273280," So they have this method set, right? So which is rather convenient. So, right, you just in, in place"
1273280,1278720," set X and Y and it instantly return you this. And maybe this is something that I want to have, right?"
1278720,1285840," So I already kind of have, um, a thing called, uh, set scalar. So I might as well just have set,"
1285840,1294880," which is going to be X number Y number. And it returns you this, right? So this X, X, Y, uh, Y,"
1294880,1300560," and just return this. So, and that allows me to do a very interesting thing. Instead of doing that,"
1300560,1308880," I can do set, um, actually, since I'm cloning, I didn't even have to do set, right? I could just do"
1308880,1317840," copy this. And since copy returns this, um, actually not this, but, um, yeah, the one into which you're"
1317840,1325920," copying, you can basically do something like that. All right. So that's, that's pretty cool. I think."
1325920,1332240," So you clone pool and it's just like alloc pool and copy this, uh, maybe we'll need set in the future,"
1332240,1338880," right? So maybe we'll need set, um, right? So you can do it like that now. So let's go through the clones"
1338880,1345680," and shit like that. So we already reset the pools on each sort of iteration. So let's just go through the"
1345680,1351520," clones. Uh, what kind of clones do we have in here? So it's unclear. Yeah, whatever. Okay. This one,"
1351520,1358320," so player FOV range, player FOV range is extremely annoying because it's the thing that allows you to"
1358320,1364400," take the basically wings of the FOV, right? So you have the player, player looks at a certain direction"
1364400,1370640," and, uh, you need two points, right? To know the, the actual boundaries of FOV. Honestly, I don't even"
1370640,1377280," have to use my paint because I have something cooler. Uh, I have something much, much cooler. Uh,"
1377280,1383760," I have minimap, right? I can just enable the minimap, right? So yeah, there we go. So here's the minimap."
1383760,1390800," I can make the minimap maybe slightly bigger with a little bit of a hot reloading. Look at that juicy, juicy,"
1390800,1398640," hot reloading. Can your white do that? I don't fucking think so, mate. Uh, there we go. So, and you can see the"
1398640,1405520," FOV. Okay. So essentially FOV range, it gives you two points, this one and this one. So that's"
1405520,1411120," basically what it gives you. It gives you these two points. And, uh, we do a little bit of a clone in"
1411120,1415440," there, right? We do a little bit of a clone in there and this is something that we want to get rid of."
1415440,1423440," Uh, right. So this is something that we can get rid of. Uh, FOV range. So, and essentially, uh, here,"
1423440,1428880," so let me see clone. Yeah. Oh, this one is also interesting. So this is a temporary object here."
1428880,1436800," Uh, right. Which means that maybe we can do alloc pool, right? So this is alloc pool,"
1436800,1445440," pool V2, right? So we do that. And for all of these things in here, right? So we just do"
1446720,1454320," clone pool, right? Clone pool, right? Clone pool, pool, uh, V2. So now all of that is allocated into the"
1454320,1462400," temporary pool, uh, right? And then we'll be reused on the next sort of frame. So here we create, uh,"
1462400,1469600," an array. So I'm not super happy about this idea. Um, so I'm not really sure how exactly we should go about that."
1469680,1478000," um, the frame rate makes me, my eyes bleed. I have no idea what you're talking about."
1478000,1487280," All right. So cool. Does it compile? Does it actually compile? It seems to be compiling. Um, all right."
1487280,1498160," So we have a near clipping plane, which is a little bit fucked up, which is fine. Right. So that is totally fine."
1499120,1506160," All right. So it didn't break anything. It didn't really improve anything either,"
1506160,1511600," either, but it didn't break anything at least actually made it worse surprisingly. So maybe,"
1511600,1518880," uh, it's kind of hard to assess, uh, right. It's kind of hard to assess if it became better or it became worse."
1518880,1525520," Now it's, it's roughly the same, right? So this is the usual performance that I have when I'm streaming."
1526160,1535680," Um, right. So minimap scale. Um, what if I just like remove that? So that recompiled and I just refresh this"
1535680,1541920," entire thing. Uh, yeah, it's, it's the usual performance. Nothing special. So let me actually close this thing."
1543440,1551520," All right. So, uh, uh, let me go to here, uh, and just do it like that. Okay, cool."
1551520,1562080," Let's continue. Um, so fov range. So where's the next clone that we use in here? So this is a player position."
1562480,1570080," So when we're stroking a certain line, okay, so this is a pool, pool, uh, version two, uh,"
1570080,1577520," right. I want to be a little bit careful, uh, with how I adapt, uh, these things because these are temporary"
1577520,1582400," vectors. So that means they're going to be reused on the next iteration. I don't want to accidentally"
1582400,1587840," assign a temporary vector to something that is going to be used as a permanent vector."
1588320,1592560," Right. So I have to be a little bit careful with this kind of thing, right? Because I don't really"
1592560,1597120," remember how this entire thing exactly implemented. Right. So, because there's a lot of things in here."
1597120,1602960," Uh, oh, that actually improved the performance. Right. Look at that. Okay. So I think this one is"
1602960,1610400," fine. Uh, right. So where's the next clone? Uh, so this one is also fine. All of that is a stroke. So this"
1610400,1617040," is rendering of the minimap. Uh, right. So it's a rendering of the minimap. So I probably want to enable"
1617040,1625920," the minimap if I want to be able to see if it still works or not. Uh, okay. Enable the minimap."
1625920,1632400," Didn't enable the minimap. Yeah, there we go. All right. Everything seems to be fine. Um, clone."
1632400,1641440," So we're done with the minimap. So there is not a single, okay. So all of the clones go through the pool."
1641440,1649440," Cool. All right. So we're rendering the wall now. We're rendering the wall. So we need to clone vectors."
1649440,1656000," Oh, this is actually super bad. Right. So just to lerp, we need to create an instance of a vector"
1656000,1661600," for each individual column. For each individual column, we create a vector."
1663680,1667920," So, and this is not really great. Right. So we probably want to, to have a pool in here."
1667920,1675840," So this is going to clone pool, pool version two. Uh, does it compile? It seems to be compiling. Yeah."
1675840,1684880," Okay. So, uh, now if I try to take a look at this and I think, uh, nothing is broken. That is good."
1685600,1693840," Uh, clone. Here is another clone, clone pool, pool version two. All right. So this compile seems to be compiling."
1693840,1702080," Uh huh. All right. All right. All right. All right. Let's remove the minimap. Minimap is not doing any,"
1702080,1708080," any favor. Hot reloading, by the way, we've broken for whatever reason. I don't really know why."
1712080,1723840," I don't really know why. Mm-hmm. Okay. So clone, uh, all right. So this is a clone pool, uh,"
1723840,1732480," pool version two. Is it going to compile? All right. All right. All right. All right. All right. All right."
1732480,1740320," All right. So that's fine. Uh, clone the next clone. So sprite position. Uh huh."
1740320,1748320," Uh huh. So we're going to clone pool, pool version two. Let's compile. All right."
1748320,1757760," Nothing is broken so far. All right. So this is a clone two. Okay. This one is interesting. Um,"
1757760,1765600," so bomb position is actually 3d if I'm not mistaken. Yeah, it is actually 3d. So we have clone two. Um,"
1766480,1776400," so, and I'm thinking, I'm actually really thinking, can I just do a lock."
1776400,1783600," And when I'm pushing the sprite, by the way, we're not. Yeah. So that, that should be fine. Uh, pool,"
1783600,1794480," um, a lock, pool, a lock, pool, pool version two. I created a 2d vector. Then I'm going to be setting"
1794480,1804000," x and y, y of that vector. Right. Emacs. I'm going to be setting x and y of that vector."
1804000,1807440," So that's what we're going to be doing. Right. So I'm extracting this thing,"
1807440,1812240," and then I'm setting x and y of the syntax that does compile. All right. So let me refresh."
1812240,1821680," Nothing is broken. Nothing is broken. Everything seems to be fine. So, uh, next clone, where do we do the next"
1821680,1829200," clone? Did we finish all of the clones in, uh, in here? I think we did. So yeah, not a single clone in"
1829200,1836560," here, not a single clone, which is nice. And I didn't really break anything yet. Didn't really break"
1836560,1845200," anything yet. Cool. So, but, uh, apart from the clones, uh, we also create sometimes new vector two instances,"
1845200,1852080," right? So we do that sometimes outside of the clones. So here we create it for, for the, yeah. So for"
1852080,1860720," example, oof, heating cell, the, the, this thing is called a lot of times actually. Right. So when we're"
1860720,1866720," doing ray casting and we're stepping, we're constantly calling to this function just to check what the, the,"
1866720,1873200," the actual, you know, uh, the coordinates of the cell, right? Of the left upper corner, right? Because we floor this"
1873200,1881360," and that thing. So we do that like a lot. Um, so yeah, what we have to do in here is probably just"
1881360,1889200," like a lock, um, pull a lock and a lock pull. Uh, we're going to create a new vector two and we're"
1889200,1894080," going to set all of these things in here instead, right? Not allocating a new object, but just setting"
1894080,1900480," this entire thing and just returning it. So, and this function is used in a lot of places actually."
1900480,1908320," It's used in all the places. So maybe it is worth doing it like that. Uh, right. So, okay. What do we"
1908320,1916240," have? Uh, when we are ray casting. So I'm just checking that it's not broken. Right. So, um, so check the"
1916240,1922960," flame graph and dev tools. I have not finished writing the code. Okay. So it's just like,"
1922960,1929360," I'm in the middle of employing the, the thing that I need to do. Right. Let me finish writing the code"
1929360,1938160," and then we can do the measurements like proper measurement. All right. So another new vector."
1938160,1944800," This is another thing that is like used a lot, like a race step, uh, race step. That's another thing."
1944800,1953840," Um, so in here and I wonder, yeah, so I didn't think it is used very often. Right. So I look, I look"
1954400,1963680," pool, uh, pool version two and we're going to set x3 y3. Uh, right. So I'm going to just do it like that."
1963680,1975360," So in here, we might as well just do it like this. Right. And just do it like this. And there you go."
1975360,1978640," Uh huh. All right. So,"
1981600,1990160," Okay. So not broken. Hopefully not broken. Yeah. While I'm streaming, it is extremely hard to measure"
1990160,1997040," the performance because it's tanked by something while I'm streaming. Right. So it's really difficult"
1997040,2005280," to understand what the fuck is going on. Uh, but yeah. So new vector two, this one is also pretty,"
2005280,2010000," pretty bad. Uh, right. So it's, it's only used when we render the minimap."
2010800,2014560," Why the fuck do we need it on this lane? Why the fuck do we need it? But I mean,"
2014560,2023520," it makes sense to actually just to unlock a pool, pool v2, set, just set this entire thing."
2023520,2033600," So does it compile? And that seems to be compound. Oh, something got broken. Uh, just a second. So"
2038640,2043760," That is very interesting. So scene size, it is used only in one place."
2043760,2056880," Huh. That is really bizarre. Um, so let's give it a try. I lock, pool, pool up to two, set."
2066560,2074480," It is, okay. This is, it's exported. So it's used somewhere outside. Uh, it's used somewhere outside."
2074480,2079920," Uh, scene. Yes, scene size. Okay."
2079920,2087280," Dang. And then we create, okay, this one has, all right, all right."
2088560,2095680," So this is actually kind of bad. Uh, so new vector two. So the player should has, should have its own"
2095680,2102560," vector. That's for sure. Uh, right. So let me do something like this. So we create a new vector. Then"
2102560,2111040," we scale this entire thing, right? We just scale this entire thing. Uh, right. And then maybe in here,"
2111040,2115840," like, let's not make it exported. All right. So, because here we're definitely using it as a temporary"
2115840,2121200," thing. Uh, right. But in here, we have to do it like that. Okay. You cannot find a vector, which is"
2121200,2127040," fine. A game. Uh, yeah, there we go. All right. So let's prepare this entire thing. And it seems to be"
2127040,2137120," working now. Seems to be working. Seems to be twerking. All right. Cool. Uh, so where is the next new vector?"
2137120,2145840," This one is bad, man. Like, right. So you can rectangle fit there. Yeah. So doing that on each of these,"
2145840,2153280," yeah, this is kind of bad. That's for sure. Uh, right. So a lock pull. So a lot of these things,"
2153280,2159600," like a lot of these instances, we should like straight up get rid of them. Pull vector set. Uh,"
2159600,2172320," all right. So it seems to be seems to be working. Uh, right. So, all right. Um, now,"
2172320,2182000," so new vector two. So this is fine. Right. So, because we're creating, uh, you know, a new vector,"
2182000,2191120," this one. All right. So a lock pull, uh, pull version two sets. All right. So let me see."
2191120,2201920," All right. And new vector. Ooh, but I'm, this is a mini map anyway. Right. But I think I can do something"
2201920,2211760," like, um, a lock, pull, pull version two, not pull, but pull version two and just set the whole thing in"
2211760,2219920," here. Right. So we won't be able to see. So this is definitely a mini map. So let me enable mini map just"
2219920,2225760," to make sure that everything's fine. For some reason, the whole reloading is broken. I don't even know why."
2228640,2247120," Anyways, uh, so, and let's go back. Um, new vector. Ooh. All right. Uh, so a lock pull, uh, pull"
2247120,2253600," look to two and that's about it. So this is a temporary thing and we're going to be reusing the temporary thing."
2254320,2260960," Uh, all right. So a lock. And by the way, just let me check that nothing broke."
2260960,2267840," All right. This is very important. This is a very dangerous refactoring. So if I fuck up something,"
2267840,2274640," like I won't be able to find the, the mistake where I did. Right. So this is super dangerous. Uh,"
2274640,2288640," So a lock pull, pull version two, new vector. Uh, so in here also a bunch of temporary things, uh, a lock"
2288640,2302720," pull, pull version two, new vector. Uh, uh, pull, pull version two, new vector. So this is when we're pushing,"
2304400,2309840," when we're allocating the bombs. So that's totally fine. I'm totally fine with this thing. Um,"
2309840,2317040," so updating the player, we are adding the velocity. So this is also needs to be a temporary thing. Uh,"
2317040,2325120," a lock pull, pull vector two. Right. So new vector. Uh, right. So let me double check. Nothing is broken"
2325120,2332000," yet. Right. So nothing is broken yet. Everything is fine. Uh, right. Everything is fine. Everything is"
2332000,2341840," gucci tamaguchi. Um, so yellow, pull, uh, pull, uh, version two, set. Next."
2341840,2349120," So new, I think that's it. I think that's it. I think that's it. I think I finished."
2349120,2353520," Right. So I think I finished."
2353520,2360800," It didn't perceivably improve the performance, but this is because performance was kind of okay already."
2360800,2367280," Again, it's slow when I'm streaming for whatever reason that I don't know. Right. So when I just,"
2367280,2374320," you know, turn off OBS, close everything, it is insanely fast actually. Uh, right. Again,"
2374320,2380800," you can check it out for yourself. If you go to this website, right. It is something with my setup,"
2380800,2387600," right? So it is something with my setup. Uh, so let me, let me see. So let's actually do the profiling,"
2387600,2392640," right. And see, let's take a look at how now JS heap is behaving. Um,"
2392640,2401600," so let me, let me see, let me see. So let's go, let's go."
2401600,2410800," Right. So we're going to measure a bunch of stuff, maybe because you're sending packages and your CPU is"
2410800,2416240," strongly sending packages. This is completely offline application. What are you talking about, my friends?"
2416240,2420240," What are you talking about, my friends?"
2423520,2429920," 140. Exactly. It's a hundred FPS and it's 60 FPS on my machine. Something with my streaming setup. I'm"
2429920,2436320," fucking telling you. Maybe it's the, maybe, by the way, that's a good idea, honestly. Uh, right. So maybe"
2436320,2444640," it's a camera, but I mean, it's not, it's not proven that much. No, it's the same pattern, honestly. Uh, right. So,"
2444640,2452560," though the amount of shit we allocate actually reduced to just 50 kilobytes, 500 kilobytes. It's not really like"
2452560,2459120," two megabytes or anything. Can you please, uh, it's kind of weird how in the memory,"
2460160,2467520," I can't, the, the scroll wheel doesn't work here. The scroll wheel doesn't work here. It works only here."
2467520,2470160," Right. But it scales this thing."
2470160,2480320," I don't fucking know. Like it's, uh, like I, I'm trying to scroll in here. It doesn't fucking work,"
2480320,2488800," but if I scroll here only then. Yeah. So, uh, all right. So that, that is now one megabyte, right?"
2488800,2493280," So it's actually one megabyte. I wonder what else do we allocate in here? I don't think we allocate"
2493280,2499440," that much. Uh, right. So I'd like to see something like more stable."
2499440,2517440," Oh, I'm not in my, for fuck's sake. Okay. Maybe I was actually, wait a second. Maybe I was not optimizing"
2517440,2524000," my local thing at all. So was I actually there entire time? No, I don't think so. I remember seeing the,"
2524000,2534800," yeah, I remember seeing the, the local host the entire time. Uh, all right. So let me now try to do that again."
2539600,2547040," All right. So let's actually walk around, do some shit, do the crimes. Uh, right. So we're doing the"
2547040,2552480," crimes. As you can see, I ran out of bombs for fuck's sake. Okay. So let's stop."
2558880,2563840," So I want to see more stable heap that just doesn't jump around, but I don't think it's maybe possible"
2563840,2570640," even right with, with JavaScript in general, maybe with JavaScript in general, it's not even possible."
2570640,2581920," Uh, okay. So yeah, it didn't change at all. Nice. It's actually funny. Uh, so is that it? I can't,"
2581920,2589280," I can't scroll, right? Oh, okay. It was just lagging. Yeah, it was just lagging. Uh, yep."
2589280,2597120," It's still, yeah, jumps around, around like one megabyte or anything. So it literally didn't change."
2597120,2602480," So we can take a look at some of them. Where is them? Uh, this is so confusing. This entire thing"
2602480,2612320," is insanely confusing. Okay. So let's take a look at one of these things in here. Uh, right. Yeah."
2612320,2623280," Mission frame, render frame. Uh, yeah. So the longest operation in here is just"
2623280,2630320," rendering floor and ceiling. Funnily enough, why is it called twice?"
2632480,2643840," Hmm. Why is it called even several times? Or is it just like, what the fuck is going on in here?"
2643840,2656960," Hmm. It's pretty good for browser dev tools to balance. Yeah, it is. It is actually pretty good."
2658560,2664160," All right. So it didn't really change anything on my streaming setup. I would like to maybe test all of"
2664160,2670000," that when I'm not streaming. Right. So I definitely want to commit that. Uh, I definitely want to commit"
2670000,2675600," that. Um, so, and then when I'm not streaming, I'm going to just do the measurements again, uh,"
2675600,2680560," and just see, because right now it's, it's almost impossible. I'm getting 144, by the way. Yeah."
2680560,2684800," So it's good. It's super good already by itself."
2684800,2696160," For pure JavaScript, for pure software renderer, and, uh, for not using headway acceleration,"
2696160,2702160," it's pretty good. It's too bad. There's something with my streaming setup. Uh, there's something with"
2702160,2707200," my streaming setup that gives me 15 FPS. And it doesn't even matter if I try to optimize anything."
2707200,2712480," It's just like, it doesn't matter. Right. It's like, it slows down, not because of the application"
2712480,2720000," something, but, uh, yeah, so I'm going to commit that and then see if I can improve that or not."
2720000,2727600," So I want to take this pool class, right. That I have in here. Right. So at least it doesn't hurt it."
2727600,2733200," Right. So at least it doesn't hurt it. So I can maybe just stash the changes that I did, uh,"
2733200,2738080," and let it recompile. Right. So just let it recompile, refresh everything just in case."
2738080,2743520," And it's the same. Right. So it doesn't hurt. If it, if it hurted it, we would actually notice that"
2743520,2750800," like instantly. Right. So that will be even worse. So it doesn't really hurt it. Um, right. So let me"
2750800,2758560," actually, you know, undo that. Is it kept by monitor? I think it is kept by monitor. And I think it's something with"
2758560,2766080," the window request animation frame. Uh, right. So where is the, where the index TS? Uh, yeah."
2766080,2773920," So there's this function request animation frame. I heard that it's kind of like capped by monitor"
2773920,2778640," frame rates. That's, this is what I heard. But again, I don't really know for sure because I'm not a"
2779360,2785600," web developer. Right. So, but this is basically what we're using here, uh, request animation frame. And"
2785600,2791840," we're just like calling this. Uh, do we create any objects in here? I don't think so. So the thing that"
2791840,2800960," kind of bothers me is in FOV range, uh, player, FOV range, we're creating a vector, uh, not really a vector"
2800960,2806240," array. All right. And it's just like, does that create a new object? I feel like it does in fact create"
2806240,2812960," a new object, right? So maybe this is not what we want to do. Definitely. So in how many places we use"
2812960,2820320," it in one, two, three, four. Yeah. In four places. Right. So I can't really inject this kind of stuff"
2820320,2827600," in there. So we have to do something differently. So I'm really sure how to refactor this entire step."
2829680,2837280," Uh, all right. Anyway, so we have a sprite, uh, sprite pool. I want to refactor sprite pool to be just"
2837280,2844640," pool of sprites. That's what I want to do. That's what I want to do. So, but anyway, let me commit"
2844640,2851840," whatever we already have. Uh, right. Introduce pool underscore T. Uh, and this is something that we're"
2851840,2858880," going to be using from now on. Um, you might be able to run Chrome with disabled GPU vsync disable"
2858880,2865120," frame rate limit parameter. Oh, it's probably not for me. It's probably not for me. Uh, right. So I"
2865120,2869360," thought maybe it's something for me to improve the performance on my thing, but yeah, it's definitely not."
2869360,2875840," Um, okay. So I want to make a small break. I want to refill my water and stuff like that. And after the break,"
2875840,2882480," I'm going to try to use this pool in more places specifically for the sprite pool. And maybe we can"
2882480,2889120," use something like that for bombs and for items, but bombs are actually kind of slightly different."
2889120,2896880," So the allocator, so the allocator that we use for bombs and items, uh, is not really bump allocator,"
2896880,2901760," right? So the objects that are allocated or deallocated with these allocators, they can be,"
2902720,2908960," uh, they can have holes, right? So if the pool just grows linearly from left to right and you"
2908960,2915440," deallocate it at once, right? The allocators that we use for bombs and items, it can actually have"
2915440,2920240," holes in, in this, uh, like in the middle and stuff like that. So it's kind of a slightly different"
2920240,2926160," allocator. And I'm thinking maybe we're going to, uh, factor out this kind of allocator as well,"
2926160,2932320," right? So to allow this kind of stuff, right? So basically, uh, fixed allocator of things."
2932720,2937840," Sparse, right? So sparse, not really sparse, but yeah. But in that case, how do I even call that"
2937840,2944560," allocator, right? So for example, in case of a bombs, bombs have a lifetime, but I mean items,"
2944560,2950240," for instance, as you can see, items have a life, right? So essentially, if you have an array of items"
2950240,2956560," and you want to spawn a new item, what we're going to do, we're going to find an item that is not alive,"
2956560,2960560," and we're going to put all of the information in there and we're going to make it alive"
2960560,2964880," and then it's going to be used and stuff. All right. So that's basically what we're doing here."
2964880,2970240," So there's something interesting in here."
2975840,2980720," So GC is not an issue. Rendering takes 60 milliseconds, which is your 15 fps."
2980720,2992480," Probably not wrong. Yeah. So, but it doesn't really explain anything whatsoever, right? Again,"
2992480,3001760," when I'm not streaming, it's insanely fast, insanely fast. People report 144 fps. So, uh, I still don't"
3001760,3005360," know what the fuck is going on. I still don't know what the fuck is going on. Anyways, let's make some"
3005360,3014560," break. Um, okay. So let's transform this sprite pool into this pool as well. This pool. Uh, right. So let"
3014560,3021280," me see. Sprite pool. Uh, let's find the definition of this shit. So let's say that we don't have that"
3021280,3027840," shit anymore. Right. So it should break all over the place. It's breaking time and it just broke all over"
3027840,3037120," the place. Uh, so let me enable. So I actually disabled it. Okay. Uh, 89. Um, and so there's no such thing"
3037120,3045120," anymore. When we are rendering the, uh, sprite pool, uh, we probably want to actually do sprite. Let it go."
3045120,3057120," So does it complain now even more next error? I said flight check, um, next error. So flight check"
3058480,3066560," flight check. Okay. Finally it's enabled. So next error. There we go. So sprite pool. Okay. So it's"
3066560,3073600," renamed to length and in here we are iterating items, right? So now we have, we have to follow the new"
3073600,3079360," convention of this shit. So when we render the sprites, we actually, I can, you know what, I can do"
3079360,3087760," something like, uh, query replace sprite pool, uh, pool of sprites. Right. So this is a pool of sprites"
3087760,3094320," and, uh, this one, when we're creating a pool, we don't really need this shit anymore. Right. So we don't"
3094320,3101760," really need this shit anymore. Okay. And when we push the sprites, when we push the sprites, we have to"
3101760,3109760," now use the items. So this is a sprite items, right? Sprite items. There we go. Uh, what else do we have in"
3109760,3116640," here? So we're using count. We replace count length. Look at that. Just substituting the ship. Um, but"
3116640,3122720," funnily enough, we probably don't even have to do it like that, right? So what we have to do, we have"
3122720,3129120," to do alloc. Alloc. Alloc. Sprite pool. Right. So, and essentially what we're getting here, we get a"
3129120,3135600," sprite. So that's what we're getting here. And, uh, now what we have to do, we have to initialize all of"
3135600,3146160," these things like this. Uh, right. So we can do things like this. So sprite. Boom. Uh, and also maybe we want"
3146160,3153920," to initialize this additional parameters, additional parameters like so. Uh, right. So this is the"
3153920,3160080," temporary parameters that are used during the rendering and stuff, but they're very important, honestly."
3160080,3166720," I do believe so. And afterwards, so since we pushed, huh."
3171600,3179680," That's interesting actually, because yeah, so that is correct. So it's, it's used in a slightly weird"
3179680,3188800," way. Not, not the usual way, but I mean, yeah. Uh, so now let me do the next error. So what do we"
3188800,3196640," have in here? So update items. Uh, right. So now it's a sprite pool. Uh, what's the next thing next? Uh, it's a"
3196640,3204160," pool sprite. Ooh, look at that refactoring skills. Boom, boom, boom. Can your beam do that?"
3204160,3210400," One more time. Chat, chat. One more time. So I'm going to even zoom in. Look, look. Boom, boom, boom."
3215200,3230720," Fucking easy. So, uh, next error. Boom. Uh, eh. Okay. I just want it to be a little bit cool. Boom, boom."
3230720,3238000," Epic, epic fucking skills, bro. Uh, so this one, this one, boom."
3240080,3245360," And in here, what we have to do is just like a reset pool, uh, sprite pool."
3245360,3255920," Look at that. Look at that. So do we have any errors? Okay. So seven, six. Uh, this one is length."
3255920,3263040," That is understandable. And this is items. Anything else? Okay. So now in the index TS,"
3264400,3271680," in the index TS, we're creating the sprite pool. What I'm thinking is that since we have a sprite pool"
3271680,3278960," is like a temporary thing anyway. So it exists for the duration of a frame. And we kind of like have a"
3278960,3286960," similar pools in here for vector two and vector three. Maybe it'll only make sense if for the sprites"
3288320,3294000," we have a similar thing. So what if we say the pool sprite is this thing and we just say create pool,"
3294000,3301760," right? Create pool. And here we just say that this is like, um, you know, an empty object. Can we create"
3301760,3307520," like an empty object that is just like new everything everywhere? I think we should be able to do that."
3307520,3314000," Chat, chat. I think it's possible. Uh, I didn't see any reason why it should not be possible. Uh, so"
3314000,3322960," specifically here, I can just do something like, uh, boom, zero, right? And in here, obviously we want"
3322960,3330960," to do something like new, right? So, and now, uh, what we want to do, we want to find all the places"
3330960,3341760," where we do, oh, it's a pool. So sprite pool. Yeah. So pool sprite. So it's called sprite pool. And we want"
3341760,3346800," to remove that sprite pool from all of the parameters. I think, I think we want to remove"
3346800,3353040," it from all of the parameters. So let me quickly do that. sprite pool, find that. Right. And then we"
3353040,3361680," just do something like this. Can I actually just query replace this specific combination of characters,"
3361680,3368480," including the comma, which will make it a parameter in the function with just nothing and effectively"
3368480,3373680," start removing all of these goddamn fucking parameters from all of the functions. Right."
3373680,3379600," So, and now, as you can see, we have this problem where like it doesn't exist anymore, but this is"
3379600,3385040," good. This is basically compiler is telling us what we have to remove. This is called the compiler"
3385040,3391360," assisted fucking refactoring. That's what it is. Right. So the compiler is not throwing an error. It's"
3391360,3397040," fucking telling us what to remove. Right. That's what it does. It's telling us what to remove. So here we"
3397040,3403360," didn't fully remove. Okay. So there's some cases where we didn't have a comma in front of it. So we have to"
3403360,3409360," actually remove this kind of thing now. Okay. So let's actually remove this kind of stuff with like"
3409360,3415760," everywhere. All right. So, and let's go into the next error. Next error. So sprite, what you don't"
3415760,3422640," fucking like about sprite. Sprite is probably missing because, uh, what? Okay. Let me take a look at"
3422640,3429440," the error. I don't understand what the fuck is the error in here. Um, okay. It's possibly new."
3432240,3438320," It's possibly new for fuck's sake, bro. Oh my God. This is a TypeScript being annoying little bit."
3438320,3451680," Ah, TypeScript, stop being annoying little bit. Please stop. TypeScript, please stop. Don't be annoying little bit."
3451680,3458320," You can enforce it. What does it mean actually?"
3460800,3463280," No, I can't. Can you do it like that?"
3463280,3472960," I can't. I can't enforce it. My mouse is dead. Everything's bad. Chat, chat, everything's bad."
3472960,3481280," No, you can't. You mean question mark? Maybe, maybe you mean question mark. That's what you mean?"
3481280,3490240," No, you can't. Can you do it like that? No, you can't. Can you do it like that?"
3490960,3496640," You can't. You can't do anything, chat. You can't do anything. It's just like TypeScript being annoying little bit."
3496640,3502960," That's what's going on is fucking TypeScript. Fucking TypeScript. Okay, so create, uh, right."
3502960,3511360," Uh, sprite, uh, pool. Right, so sprite pool is not that easy to actually refactor to what I want."
3512160,3514160," Right, so it's just like, oh, bravo."
3514160,3520080," I hate it."
3520080,3531920," That's for undefined. It doesn't really matter. So if I change it to undefined,"
3533200,3541680," it's going to stay the same. Uh, it's just the code was never developed with these things being an"
3541680,3548320," uninitialized in mind. But in this particular context, we kind of want them to be uninitialized."
3548320,3553120," We kind of want them to be uninitialized. Like really, we want them to be initialized. One thing"
3553120,3558880," I can do in here, actually, I can create like an empty vector. So that is fine. That will fix some"
3558880,3564400," of the problems. But in case of the image data, can I just create an empty image data?"
3565520,3573840," Uh, I don't freaking think so. But, and I don't think it's even necessary. Right, so maybe create pool,"
3573840,3583440," in fact, should actually, uh, oh, the stream is dying. Like, I don't freaking know what's going on. So we,"
3583440,3592720," we should be back. Chat, we should be back now. Chat, we should be back. I'm not dropping frames anymore."
3592720,3600240," I'm not dropping frames anymore. We should be back. Are we back? Back to back? Uh, right, so"
3600240,3607360," we're back. Okay. This one is actually very interesting. So undefined as image data."
3607360,3615280," Sort of like trick the goddamn compiler. Uh, right, kappa 1, 2, 3, kappa 1, 2, 3."
3622720,3630640," All right. So that is a very interesting idea. Um, so"
3630640,3635440," sprite pool."
3635440,3644160," Sprite pool. Where is the sprite pool? So what about null as image data?"
3647360,3653440," It hangs. It hangs. Emacs. Don't fucking hang me, motherfucker."
3653440,3661360," Okay, finally. It unhanged. Null as vector 2. It doesn't like that. Interesting."
3661360,3668720," Null, conversion of null may be a mistake because neither type sufficiently overlaps with..."
3668720,3676560," You're fucking, oh my god. Undefined."
3676560,3682000," So you do need to do as a known, right? And a known is apparently, oh my god."
3688560,3695440," Such a stupid language. I swear to god. Anyways. All right. So I guess we can leave with that."
3695440,3701120," Uh, buddy, I don't think it's a... Maybe I'm doing something correctly."
3701120,3710320," Um, 59. All right. So this is 59. Um, so now it's complaining about this thing. I'll be... Because"
3710320,3722160," we have to remove the sprite pool. Uh huh. So 903. Remove the sprite pool. Uh huh. 915. Uh, remove the sprite pool."
3722160,3730160," So now it is a global thing. And this one is also remove the sprite pool. Are you fine now? Uh huh. 923."
3731200,3743760," So yeah. Remove the sprite pool. In the index. Right. So index we're doing something. So sprite. Yeah. So sprite pool. Uh, okay."
3743760,3760400," Sprite. We don't do that. 915. Sprite pool. Do that. Cool. So let's see if it's working. If it's twerking. Uh, yep. It is working. It is twerking."
3760400,3766160," So nothing. So nothing is really broken. Uh, right. So now we have the sprite pools that"
3766160,3774560," are doing things. They're doing things. Okay. Let's do a committee committee. Um,"
3774560,3789440," use pool t for sprite pool instead of, instead of sprite pool."
3789600,3794640," By the way, I think I'm, I forgot to remove sprite pool."
3794640,3800960," No, I didn't. Okay. So everything's fine. Cool. Cool, cool, cool."
3800960,3804400," It's"
3810880,3819520," did you notice something weird. Honestly, it is actually kind of smooth. I don't think it's even close to being"
3819520,3830240," 20 fps. For me, it feels like more than 20 fps. Maybe there's something with the fps cut. I think fps counter is lying to me."
3832640,3839440," I think fps counter being kind of weird. It feels smooth. It's, this is not 50 fps."
3841760,3844240," This is not 50. What the fuck is going on? Honestly."
3844240,3850640," I just realized that maybe the entirety of the time I was kind of tricked."
3852480,3864400," Confirm human can see more than 20. Chrome has built in fps counter. Okay. So how do you enable it?"
3864400,3868240," Chrome, uh, fps counter."
3868240,3873760," Print delta time. The fps is based on delta time."
3873760,3881680," fps control. Reading. Rendering tab in web tools. Okay. Let's, let's, let's give it a try."
3881680,3890880," Something is fishing. I'm telling you. Performance memory. There's no, oh, there's no rendering tab."
3892320,3898560," I actually, can I point out how overcomplicated dev tools recently become. It's almost impossible to"
3898560,3907040," find anything. It's just like insane. Um, rendering tab. There's no rendering tab. Lighthouse recorder."
3907040,3913920," Uh, nope. It doesn't exist. I don't fucking know."
3913920,3921840," Oh, is this fucking three dots? Oh my God. Like again, it's too over fucking cooking. There's too many tabs."
3922880,3923760," Too many tabs."
3923760,3928960," Run command. Mortals."
3928960,3932400," Holy sh..."
3932400,3937680," That's how deep it is. Oh my God."
3937680,3941840," Anyway. So..."
3941840,3947680," Frame rendering stats."
3950480,3952800," That's, it's, it's a 30 FPS actually."
3952800,3955200," GPU restorizing."
3955200,3961600," Okay. It shows 15, but then it shows 30, which I would believe."
3961600,3965600," Which I actually would believe on this one."
3965600,3978320," That is understandable. And we can even have a hypothesis that"
3979920,3983600," this is because of the OBS. It drops down, but that's fine."
3983600,3990000," This is maybe because of the OBS, because it captures at 30 FPS. Maybe it kind of enforces,"
3990000,3997520," uh, you know, 30 FPS. So what's up with this frame counter? I think this frame counter is sus."
3997520,4001760," Uh, I think it's totally sus and it's totally bogus, a mogus."
4002480,4008880," So let me see. Uh, so we have render FPS and we're just using delta time. So which is not particularly"
4008880,4016240," correct, I suppose. Um, so one after another dropping bomb topics, man. Uh, thank you so much for the,"
4016240,4023120," for the tier three. I don't know why would you do tier three, but thank you. Um, anyways, so what the"
4023120,4028960," fuck is that? So we just take an average of this entire thing. Um, right. So we have, um, 30 FPS."
4028960,4036400," So what do you use for, uh, no, we're using just the delta time that we get from the, uh, you know,"
4036400,4042720," request, animation, frame thingy, blah, blah, blah. So we probably should use performance."
4043440,4053840," performance. Uh, no. Right. Dom high, uh, res. Uh, so this is probably what we want to do."
4053840,4061840," But do we know the measure, the unit of this thing? Do we know the unit of this thing?"
4070320,4079040," So it represents the time elapsed since time origin. Uh-huh. That's understandable. Okay."
4079040,4086080," Measured in milliseconds returns, uh, high res in milliseconds. Okay. So that's understandable."
4086080,4093440," We can do that. Uh, on my machine dev tools, FPS reports 140, whereas game FPS counter is 120."
4093440,4095200," Mm-hmm."
4100320,4113920," Uh, but maybe, um, I don't know. I don't really know. Anyways, uh, so what I wanted to do,"
4113920,4122560," I kind of over it, I kind of over this FPS, whatever. Uh, I wish I, I could, I could try to do that."
4122560,4126720," For, for some reason, I'm, I'm a little bit lazy to do that because the way you're gonna do that is,"
4126720,4135520," okay, so performance now, performance now, uh, and then we can do something like begin,"
4135520,4141760," uh, then we can do something like end, and we can only kind of compute that afterwards,"
4141760,4144160," but it probably makes sense to do that."
4144160,4147520," Right."
4149360,4156400," So, I don't freaking know. So let's, it's not going to be accurate anyway. Right. So it's simply FPS."
4156400,4159280," Right."
4159280,4164720," So, and instead of delta time, we can just do end times begin."
4164720,4170240," So it's kind of dumb way to do that. Right. So, and if it's in milliseconds, it's, it's a millisecond,"
4170240,4177280," by the way. Right. So that means we want to divide this entire thing by 5,000. Right. So that way,"
4177920,4184720," it will give us something. Um, so did it recompile the whole thing? Hopefully."
4184720,4187760," I don't know what, what the fuck happened with my hot reloading, but, you know."
4187760,4191520," Right. I'll look into that a little bit later."
4200720,4201120," Right."
4201120,4216000," So we'll get that. Yeah, let's get to do this."
4216000,4223920," Uh, so what's going to be the next thing? What's going to be the next thing, chat? Um,"
4224560,4230400," maybe we should try to work on the content. Right. So try to work on the content because one of the"
4230400,4237840," things we have in here, we, we can throw bones, but they don't even explode. Right. So, and that's"
4237840,4243360," kind of lame, honestly, that is kind of lame. So what the fuck is with my camera? Why is it so,"
4243360,4254000," so weird? Um, so just, okay. So I think I fixed it. So let's actually do explosions. Um, I remember,"
4254000,4262240," maybe we can use a temporary explosions from Eapers. Um, so let me find the sound. So there is a blast,"
4262240,4268880," so we can use that blast. So how do you like it? Does it sound good? Sound Gucci? Sound Tamaguchi?"
4268880,4277760," Blast from the past. Um, so let's go into the ray casting. So, and we're going to put this stuff in"
4277760,4290640," here. So blast OGG. And in here, we're going to do something like this. So we are loading all of the"
4290640,4297680," sounds. Here's the interesting thing. I'm just loading the audio, but, um, I'm loading it. It feels"
4297680,4303920," like I'm loading it synchronously, but then for the images, I'm loading them as asynchronously. Um,"
4303920,4312320," but I'm loading them asynchronously because I'm handling the onload. Right. And I feel like it's kind"
4312320,4320080," of a similar situation with audio. Does audio have onload? Does it have onload? It does have onload."
4320080,4327040," Um, damn. All right. So this is probably something that I have to maybe factor out into a separate"
4327040,4333600," function, like load audio, uh, similar to how I did load image and stuff like that. So, uh,"
4333600,4339280," so it's the function load audio and it's going to be URL string, and we're going to return promise,"
4339280,4346320," which is going to be HTML, uh, audio, audio elements. Right. So, and in here, uh, we're going to have"
4346320,4355600," audio, which is new audio URL. And we might as well, if I take a look, yeah, so SRC can be missing."
4355600,4362320," Look at that. SRC can be missing. So that means I can do something like this URL. Can I even copy paste"
4363120,4372160," this thing? Like so. Right. But instead of image, of course, I can replace image audio. Yeah. Look at that."
4372160,4383680," Look at that. So load, uh, audio, new audio, load audio, load audio. And that enables me, by the way,"
4384640,4391760," to put all of that shit in here, maybe, but I'm not sure if it's going to work in terms of like the types."
4391760,4401760," Maybe it will. We're about to find out. I wonder if it will work. So it's basically different types,"
4401760,4407520," but will they be resolved correctly if I do them like that? It's kind of a dumb way to do that,"
4407520,4424960," but still kind of interesting. So bomb ricochet. Hmm. So there we go. All right. So does it complain?"
4424960,4430480," It doesn't seem to be complaining. Right. So it's successfully compiled apparently. Right. So you can do"
4430480,4436080," that. You can actually do that. That's pretty cool. I'm taking some time and then you can do that. Okay."
4436640,4445120," So, uh, blast OGG. Right. So it's OGG. I wonder if it will not compile if there's more things in there."
4445120,4453760," It doesn't check anything. So it, it will literally lose it. Okay. So blast, uh, right. So maybe blast."
4453760,4462080," Okay. It will literally lose this entire shit. I want to take a look at the network. Um, right. So let's"
4462080,4468320," actually see, let's actually take a look at the network. So blah. Okay. So it loaded everything in"
4468320,4473520," here. So all of the resources are successfully loaded. So there's some problems in here and there's no"
4473520,4499520," no rendering. Okay. I'm going to just do that. But what did I do? I didn't, I didn't do nothing. I didn't do"
4499520,4506720," fucking nothing mate. Unload wasn't triggered. Ah. Unload wasn't triggered. Really?"
4509600,4530960," Why though. So, uh, JS audio on load. So it's not asynchronous. JavaScript audio on load."
4532080,4552160," Uh, um, can play through is an event, not a method. Okay. Uh, so you have to do, okay. So what they're"
4552160,4558560," doing in here is they are setting attribute SRC to whatever you want to load and then call load."
4560160,4572720," You have to explicitly load it. Okay. So, so I need to actually unstash my stuff. So I'm going to just pop"
4572720,4581920," this thing. Okay. So revert this entire step. All right. It's kind of bizarre. Um, oh yeah. So HTTP response"
4581920,4588960," two hundred and six instead of two hundred. So what does it mean? Um, so let me refresh the whole thing."
4588960,4600400," Which is partial content. Huh? Interesting."
4602800,4618000," Yeah. So partial content. So it's, it's neat. It's not asynchronous. So you can actually stream it."
4618000,4625600," So that's why you can play it right away. That is so interesting. Okay. So let me, let me, let me try to"
4625600,4633680," do the following thing. So audio, uh, load, right? So I'm going to try to do the load, uh, and then now"
4633680,4644400," that is interesting. That is interesting. So I suppose loading audios is not asynchronous because"
4644400,4651840," well, I mean by that logic images also are not asynchronous because you also want to display them"
4651840,4658560," as the loading. And maybe because of that, maybe because of that, you can just like return images"
4658560,4667600," right away. But here, yeah, that's the interesting thing. Uh, we're trying to access images, uh, image"
4667600,4672400," data, and I suppose image data is not going to be accessible until you fully loaded it. Okay. That's,"
4672400,4677520," that's very interesting. So for audios, it's slightly different, right? So for audios, it's slightly different."
4677520,4684960," So, all right. It looks like that. So I'm going to be, I keep doing what I'm doing. Uh, right. I just"
4684960,4691200," want you to like the whole handling of the resources to be sort of like uniform, if you know what I'm"
4691200,4702720," talking about. Right. So, uh, but I'm totally fine with this kind of stuff. Yeah, it's fine. All right. So, uh,"
4702720,4711600," let me now go to here. So where is the game? All right. So we render the minimap. We update the bombs."
4711600,4720400," Uh, so we want to introduce maybe something like a bomb blast sound. I need to group all these things"
4720400,4724960," into a single thing maybe at some point, but I'm a little bit too lazy. So I'm keep stacking the parameters"
4724960,4734640," in here. Uh, bomb blast sound. It's OGG. I'll fix it later. Uh, right. So something like this, update the bomb."
4734640,4748800," And we're going to start with simply playing that sound on explosion. Right. So we have to do exploding here."
4748800,4758240," Look at that. So, and bomb blast sound current time is zero. And we're going to ask this entire thing"
4758240,4765280," nicely to play itself. Go play yourself. Uh, right. So we're not going to play any animations. We're going"
4765280,4769680," to have, not going to have any particles or anything like that. Right. So we're going to just say explode."
4770480,4777520," Uh, and it's going to be, that's what's going to happen. Trust me. It's going to be fun. Uh, right."
4777520,4784000," So we're going to put blast in here. Uh, and it just compiled first try. Okay. Can you fucking believe"
4784000,4793280," that? Can you fucking believe that it just compiled first try? I can't believe that. Um, okay. You guys ready?"
4793280,4794000," Are you guys ready?"
4794000,4806640," Did it play shit? I can't hear that. I can't fucking hear that."
4806640,4822800," Where's the where's the fucking? Okay. Disappointed. Disappointed."
4822800,4829040," Oh, it's because the OGG I forgot. Yeah. Yeah. I said that we'll not forget it,"
4829040,4840080," but then I forgot. Uh, where's the, so it's OGG. OGG. Okay. So it even complains that it couldn't. Okay."
4840080,4846080," All right. So these are fresh. All right. So let's go. Boom."
4853680,4856000," My, my headphones are actually done."
4856000,4863440," Holy shit."
4863440,4874400," It's actually, I kind of like this sound of, uh, you know, of bouncing around. Imagine if it will become"
4874400,4878640," like a multiplayer game, right? And essentially you're walking around and you hear this."
4878640,4887600," Oh, it's just like, so yeah. Okay. So we have sounds. That's pretty cool."
4887600,4894160," Uh, we can now maybe add some sort of like a particles effect or whatnot. Right. So what's"
4894160,4900000," interesting is that, uh, we already have like a physical interaction with all of these things,"
4900000,4905760," right? So, uh, the bombs are, you know, interacting with the walls and everything. And if we come up with"
4905760,4912560," the particle system that kind of does the same, uh, I think it could, I think it could be actually kind"
4912560,4924880," kind of cool. So, uh, all right, we probably need to create, uh, some sort of a sprite for, for a particle."
4924880,4928880," Right. So let's just go ahead and do that. Um, right."
4928880,4938320," Um, maybe, you know what, I'm going to just fill the entirety of this rectangle with orange color."
4939040,4947280," That's going to be my particle. Um, so where is the, yeah, there we go. So this is going to be my particle"
4947280,4953200," and I want to save it somewhere. So it's going to be assets, images,"
4953200,4958560," custom, uh, and we're going to call that a particle."
4961920,4972160," So particle png. Let's go. All right. So, and in here, uh, what we're going to do, what we're going"
4972160,4980160," to do, what we're going to do now, yo, particle png. Can I actually find this file under the cursor?"
4980160,4984880," Yeah, I found it. So this is the particle. So maybe at some point, I'm going to just make it a little bit"
4984880,4992320," better, uh, when my mouse, you know, undies itself. Yeah, there we go. So, uh, but for now I think it's"
4992320,5005760," fine. I think it's fine. Right. Uh, so what we're going to have as a particle system, I think, yeah,"
5006640,5016880," let's go ahead and just create an interface particle interface, maybe even above the update bomb."
5016880,5024080," Right. So here's the function and this thing is going to just create a bunch of particles. That's"
5024080,5031120," what it's going to do. Uh, we need to have a particle particle and it's going to have a position"
5031120,5035520," in 3d space, actually, believe it or not, it's going to be position in 3d space."
5036160,5042720," Uh, and obviously lifetime. Right. So it's kind of similar to the bomb itself. Right. So it's going"
5042720,5051280," to be lifetime position. Uh, and I think that's it. Right. If you take a look at the interface of the bomb,"
5051280,5059360," of the bomb. Right. It has a position, velocity and lifetime. Uh, right. And we can also make it like"
5059360,5068000," that. So it's going to be a velocity three and we can reuse the physics interaction from the bomb."
5068000,5074560," I think we can do that. So we'll have to factor out some of that stuff. Uh, so look at that, look at that,"
5074560,5081520," look at that, look at that. So you update the bombs. Um, so it takes the lifetime velocity,"
5081520,5090400," z-bomb gravity and I'm thinking how we're going to be doing all of that. So how can I factor out"
5090400,5101920," this shit? So it is reusable. I didn't see a way, honestly. I didn't see a way to do that. So I think"
5101920,5107280," I'm going to just copy paste this shit then. Right. So I'm going to do function update particles. Right."
5107280,5112240," So update particles. And we're going to literally just copy paste the whole thing. Uh, but we're going"
5112240,5119280," to actually accept particles like this. So it's going to be array particle. Right. Uh, it's going to be array"
5119280,5127600," particle. Uh, there we go. Um, and let's actually go to the compilation there. So it's probably going to"
5127600,5134000," create a shit ton of compilation. So fly check mode. Uh, show me the computer. Okay. So thank you so much."
5134000,5140800," So it's going to be, uh, let's quickly replace bomb with a particle. Right. So this is what we're going"
5140800,5149120," to have in here. Um, bomb gravity. So I'm going to use the same gravity in here. Uh, some of the parameters"
5149120,5154720," probably going to be different. Right. So this is going to be dampening of the particle slightly different."
5155520,5162720," So probably we're not going to even have any ricochet sound for, for the particles whatsoever. Right. So"
5162720,5169760," that kind of makes sense. So let me completely get rid of all of that. Uh, bull scheisse. So, and there's"
5169760,5178000," definitely no explosion whatsoever. Uh, right. So that means, yeah, so the lifetime is just disappears. Uh,"
5178000,5184400," and in here we're going to have like a particle, uh, image data at some point. So let me quickly replace"
5184400,5190480," the rest of the rest of the stuff. No. Boom, boom, boom. I want you in my room. Let's spend the night"
5190480,5205120," together. Okay. I'm sorry. Gather in my room. So particle image data. Uh, let's just pass this image data in here."
5205120,5217440," Make sense. Delta time is going to be number. So this is going to be a number. Uh, scene. We also accept"
5217440,5223440," the scene because it's going to be bouncing off of the scene. Okay. Uh, all right. So let's accept this scene."
5224400,5231520," Uh, scene, scene, scene, boom, anything else. So particle dump. Uh, all right. So I can create"
5231520,5242960," particle particle dump. Uh, so I suppose the thing we'll need in here is this stuff. Um, so"
5242960,5249760," for now, I think the particle size is going to be actually smaller. Right. So I think it's going to be just like one."
5250400,5262000," Uh, right. So, and let's go to the next error. So fly check mode next, uh, fly next error. There we go."
5262000,5276400," So it's fine. I don't care. Part, uh, party particles. Yeah. So is that it? I think that's it. Right. So this is how we're going to be updating the particles. Look at that. Look at that. Isn't that cool? I think that's pretty"
5276400,5284960," cool, mate. It's pretty cool. So when updating the, uh, bombs, right? So you can throw a bomb, right? So throw a bomb,"
5284960,5293040," and this is what we'll need for spawning a particle, right? So update particle. Uh huh. So"
5293040,5301680," let's rename this entire thing to emit particle. Um, and"
5302880,5306560," when we're emitting the particle, we're probably going to be accepting particle"
5306560,5311520," a bunch of them, right? So array of particles"
5311520,5320480," and also the position where exactly we want to allocate this particle, right? So where we are creating such"
5320480,5329440," particle. All right. So this one is, so it's basically the source, right? So that's what it is. It's a source."
5330880,5336960," Okay. Makes sense. And for the particles, for the particles, which is saturating through the particles."
5336960,5347280," And if we find particle that has a lifetime or whatever, bomb, uh, particle like this."
5347280,5352080," Yeah. So there's this wrong, but whatever. Um,"
5353600,5357280," right. So there's this particle, there's this particle."
5357280,5369360," So what I'm thinking is that, um, source should be the position, right? Of the particle. So we can"
5369360,5377040," probably copy, uh, we can probably copy the entirety of the source. Uh, it's not really pool, right? So the"
5377040,5382320," the thing about the bombs items and the particles is that they are not really pool pool is like a bump"
5382320,5389360," allocator, right? So it allocates from left to right. In case of the particles, we, some particles can"
5389360,5394880," actually die out like in the middle or something, right? So you can have like holes in the middle, but"
5394880,5396880," to be fair, not really."
5398080,5404160," Um, it's more like a ring buffer, but yeah, I don't know. So it's, it's, they manage differently."
5404160,5409200," They manage differently. So for them, I have to kind of, uh, come up with a slightly different"
5409200,5413280," structure and I didn't do that yet. Right. I didn't do that yet."
5414960,5418880," So we're going to be meeting the particle, right? So we're going to be meeting the particle and, um,"
5418880,5423840," we want to meet it in a, like a random direction, if you know what I'm talking about. Uh, so how can"
5423840,5429200," we pick a random direction? We want to do something like math random, uh, right? And math random,"
5429200,5435600," I suppose is from zero to one, right? Is it not? I think it is. Uh, random. Yeah. Look at that."
5435600,5440080," It's just from zero to one. That's actually super cool. Okay. So let's multiply it by two pi."
5441200,5446720," Right. So two pi, that means we are just picking a random direction in the circle, right? So this is"
5446720,5452000," the circle. And, uh, so this is basically a random angle that we've got, right? So this is a random"
5452000,5459120," angle and we can basically move this entire thing in a random angle, at least in terms of x and y,"
5459120,5465440," right? At least in terms of x and y. So something like that, but at the same time with x, we want it to"
5465440,5470960," be pointing up, right? So just should go up a little bit. And I think like half is,"
5471200,5476560," fine. Right. So we want it to go like different directions or something, but maybe a little bit"
5476560,5486240," of a randomness from, you know, yeah. So just math random and multiply it by one to indicate that it's"
5486240,5492480," just from zero to one. Um, right. I know that it looks useless, but I'm just putting an intended here."
5492480,5497680," So I'm saying that this is a parameter, right? Maybe I want to do from zero to 20. Right. So,"
5497680,5504000," but here I'm explicitly saying that I'm just doing from zero to one. Uh, right. So yeah,"
5504000,5508160," something like this. So you can emit a particle, you can emit a bunch of them and so on and so forth."
5508160,5514080," Right. So, and if we are exploding, right, we're exploding, we're going to just like allocate a bunch"
5514080,5520160," of particles in here. Right. So it's going to be, uh, from less to like maybe five, like, let's not go"
5520160,5529280," too hard on the particles yet. Right. Emit particle. So the source is the position of the bomb. Right."
5529280,5535760," So it's going to be bomb position. Right. So that's where we meet in the particle and, uh, the particles"
5535760,5540480," is the particles. Okay. So that's cool. So just to meet a bunch of particles, do we have particles in"
5540480,5549600," here? We don't. All right. So that's cool. Uh, let's accept them particles, uh, array particle. Cool."
5549600,5558320," So, uh, next error message. Okay. So here we, uh, have to put the particles. So we have to put them in"
5558320,5566080," here. So particles, uh, so where do we get the particles? That's a good question. Um, we probably"
5566080,5571600," should accept them in here. So this is the particles, array particles. Uh, I understand"
5571600,5576480," that I probably need to factor out, uh, some sort of a structure in here or something, some sort of"
5576480,5581360," like an object or whatever. Uh, but I just don't want to spend time on that. Right. So like I can,"
5581360,5587680," you can always do that later. Right. So it doesn't really change the structure of the code per se."
5587680,5591920," It just changes the amount of parameters that you pass. And it's just like, you can think of it"
5591920,5596960," as a bunch of structures that just spilled over the arguments. It just, because you group them,"
5596960,5602720," that doesn't really change anything. Uh, right. So you know what I'm talking about? It's kind of,"
5602720,5607440," for some reason for a new developers, it's not really obvious. They get really scared when they"
5607440,5612560," see this kind of functions, they get really anxious. Uh, and I can understand why there's"
5612560,5617040," just like a lot of things, right. And people are naturally afraid of a lot of things, but just"
5617040,5623200," because you group that into structures, the code is the same. The, the control flow is still the same."
5623200,5627760," It's like, it doesn't change anything. It's just like you grouped something. Okay. Uh, I can do that"
5627760,5633520," at some point. Right. And it's actually super easy to do. Right. So don't get scared by it, by this"
5633520,5638960," thing. Right. Uh, don't get scared by this kind of thing. Some devs may even use an object as a"
5638960,5644160," parameter. Sure. You can do that again. It doesn't change the control flow of the program. It doesn't"
5644160,5655120," change the program whatsoever. Like it's just like, um, so it just hints the architecture that could be"
5655120,5660080," improved for a larger project, uh, just depends how far and one should take. Yeah. And what's interesting"
5660080,5665680," is that architecture will just actually kind of depend on how exactly you group these parameters."
5665680,5672640," You can actually group them differently. You can put parameters in different kinds of structure."
5673200,5678000," And depending on how you group them, the evolution of the whole thing is going to go different ways."
5678000,5684400," So, which is rather interesting. What's interesting is that when you just spill over all of these"
5684400,5689440," parameters like this, you're just saying, okay, I'm not implying any architecture whatsoever."
5689440,5694640," It's just like, whatever. Uh, right. But as soon as you start grouping them, you are committing to a"
5694640,5700160," particular structure. Right. And as soon as you commit to a particular structure, that structure starts"
5700160,5705840," enforcing certain limitations on you. Right. When you don't do that, there's no limitations"
5705840,5711040," yet. At some point I will have to do that. Right. So, but I'm just like not imposing any limitations on"
5711040,5718160," myself yet. Um, right. You're going to start to understand this kind of thing the more you work with"
5718160,5725360," big projects. Uh, right. So, so this is a great architecture for experimentation. Yeah, exactly."
5725360,5731920," So, so for example, these kinds of things, like I accept HTML audio elements and also sometimes images,"
5731920,5739280," like this entire thing, right. These are assets, by the way, right. Those things that I just selected are"
5739280,5746160," assets. So there should be some sort of an asset manager. Instead of just passing these things as like parameters,"
5746160,5750640," like I should group them into the asset manager so I can add more of them. So you already kind of see"
5750640,5755200," the architecture that will be in the future. Uh, right. But since I don't have the asset manager,"
5755200,5761440," the asset manager doesn't really impose any limitations on me yet. Um, right. So, but anyway,"
5761440,5766720," um, so let's go, we'll go back to here. And so I want to enable flight check mode."
5767600,5774720," So yeah, so here we have to pass the, uh, the particles, the particles go after the bombs,"
5774720,5783040," right? So particles. Cool. Uh, but we need to create them. So create the bomb. Um,"
5783040,5792320," so bombs equal allocate bombs. Okay. So let's do particles, uh, allocate particles, uh, particles. And"
5792320,5796800," let's say that I want to allocate maybe 100 of them. Maybe I want to allocate 100 of them."
5796800,5806160," So allocate bombs. And I want to find interface particle. And then here we're going to do that."
5806160,5815360," So I'm going to create replace bomb particle. Boom, boom, boom. All right. So do we have any errors? We don't"
5815360,5822400," have any errors. Everything seems to be compound. So let me do that. Okay. So we should be able to"
5822400,5828000," have particles now. Uh, but when I'm updating particles, right? So I have a function that's"
5828000,5834400," supposed to update particles, but they never really call it. Uh, right. So bombs. Yeah. So we should"
5834400,5840640," update particles after we spawn the bunch of particles. So updating the bombs may create a bunch of particles"
5840640,5845200," and then we have to update them. So we pass the data time, the scene, the scene is needed"
5845200,5849520," for the particles because it's going to be physically interacting with the particles. Then we pass in"
5849520,5854160," the particles themselves, right? So we're getting them from, uh, from here, right? So from these"
5854160,5859440," parameters and practical image data, right? So, and we need to get that thing from somewhere. And this"
5859440,5865040," is a resource and this is the asset, right? So, and for that specific asset, we're going to be actually"
5865040,5872880," passing it in here. So we have images somewhere here. So bomb image data, uh, right. And image data like this."
5873760,5882480," So let me see now where all the assets in here, right? So this is a particle, uh, load image data."
5882480,5890160," I already, yeah. So already loading, uh, loading this thing. Uh, so the particle is passed after the bomb image."
5890160,5894160," Bomb. Uh, yeah, just bomb. Okay."
5897280,5904960," So after the bomb, this is the particle. There we go. Uh, all right. So that seems to be working. So"
5904960,5911280," bomb image data, then the particle and stuff like that. So does it compile? It seems to be compiled."
5911280,5915920," All right. So let's, let's refresh. All right, let's go. Uh, what do we have in here?"
5921120,5926960," Okay. So now we can configure some of the parameters of this and typing and stuff like that."
5926960,5935360," Uh, right. So first try, by the way. So copy-pasting the code, horrible architecture, horrible,"
5935360,5941840," uh, horrible function declaration. Just first try that bitch. What a horrible developer I am. Copy-pasting"
5941840,5950000," code and stuff. Like, look at this function signature. First try it. Seize and cope. Seize and"
5950000,5954320," fucking cope. Right. Because I know what the fuck I'm doing. Because I've been doing this kind of stuff"
5954320,5961360," for many, many years. I know how the code evolves. Right. It's not about writing the code correctly the"
5961360,5969280," first time. It's about writing something that works and planning how you're going to evolve the code into"
5969280,5977280," certain architecture. Right. So this is shit. I know. Right. But it's kind of like, I'm using this"
5977280,5983280," piece of shit to kind of see what kind of architecture I need in the future. Right. Obviously like, I don't"
5983280,5988320," like it either. I don't like it either. So this is a technical debt that I need to clean up at some point."
5988320,5996080," Uh, but yeah. See what I'm talking about? See what I'm talking about? Yeah. All right. I got a bunch of subs. Uh,"
5996080,6007920," So my mouse is dead again. So let me bring it here. So many subs. Right. Uh, all right. So, uh, thank you so much."
6007920,6014080," It's Udon, uh, for Twitch Prime. Marcio Neto. Thank you so much for the one with the, uh, with the message. Very"
6014080,6020080," interesting topic. Believe it or not, I had to implement an arena in JS as well. Performance was critical. Memory allocations"
6020080,6026240," were out of control and were constrained to working with JS. Right. It turned out, by the way, for us, it was not really a problem."
6026240,6031920," I just wanted to do that. Right. So I didn't really have to do that, but we did it anyway."
6031920,6037120," Okay. Thank you so much for the one with the message. My favorite JavaScript garbage collector is the backspace key."
6037120,6043760," Very funny. Very funny. Thank you so much. Thank you so much. Uh, Timon Drone, thank you so much for"
6043760,6047920," Twitch Prime. Thank you. Thank you. Thank you. Right. So now we can try to maybe, um, you know,"
6047920,6053840," correct some of these things. Right. So, because the particle size, particle scale is kind of"
6054560,6062160," too big in my opinion. Right. So I would like to have half of that. Also when we're updating the bombs,"
6062160,6072000," right. So, or maybe even throwing the bomb, throwing the bomb, uh, right. So throw bomb. So we set in the"
6072000,6080480," lifetime, right? So it's a five seconds. I think it's too much, uh, bomb lifetime. Let's factor that stuff"
6080480,6088560," out. Let's factor that stuff out. Uh, I'm going to bomb a lifetime. It's going to be five. So, and also"
6088560,6096080," maybe we want to have a particle lifetime, particle, uh, lifetime. And the particle lifetime is going to be"
6096080,6106480," maybe one second. Yeah. Uh, bomb particle counts. Uh, and I want it to be something like 20. Uh, all right. So"
6107120,6115200," throw a bomb, we already set this kind of thing, update, update the bomb, uh, refused, diffuse,"
6115200,6125360," not refuse to. Uh, right. So bomb particle counts. So this is a bomb particle count. And in update particles,"
6125360,6133600," we actually emit particles. Yeah. So particle lifetime, particle lifetime. So I want to have these kind of"
6133600,6140320," things so I can, uh, just control this parameter and experiment with them. Uh, all right. So let's go."
6140320,6152480," All right. So, uh, that's more particles, but I would like them to be a little bit more vicious,"
6152480,6159360," if you're not talking about, like a little bit, um, faster. Right. So emit particle."
6160720,6164560," So we have a velocity. It's just like velocity is equal to one, if I understand correctly. So,"
6164560,6175920," uh, maybe we can do something like scale. Um, so particle max speed. Uh, when I throw a bomb,"
6175920,6182400," we have bomb throw velocity, right? So, and this is something that we can probably use."
6183600,6190960," There's probably something that we can probably use. So let's put it like this. Uh, throw velocity is five."
6190960,6197680," Okay. So let's actually say there's going to be 10 and let's see if it's going to be, uh, anything,"
6197680,6199760," anything special. All right. So,"
6204480,6212320," so maybe 10 is too much. How about also five? How about also five? Maybe two of them, two bombs."
6212320,6225520," Uh, speed run. Oh yeah. By the way, didn't I make them random? Yeah. So math random. So this"
6225520,6234560," is why I called it max speed because I actually plan to make it random. Uh, right. Okay."
6234560,6244320," Okay. So this is item, by the way, that's why it doesn't, uh, you know, doesn't blow up. Uh,"
6244320,6259440," So what about eight? What about eight? I can't see. All right. So I think,"
6259440,6266800," what if I had more particles, bomb particles count about 30? Oh, it could be not enough. Right. So"
6266800,6272160," because we pre-allocated like only a hundred of them, right? I think we pre-allocated only a hundred"
6272160,6279440," of the particles. So create, um, what was that? Alloc particles. Right. So let's allocate maybe"
6279440,6285440," thousands of them. I mean, we can't afford that. We can't fucking afford that. Thousands of particles."
6285440,6292080," Right. Uh, so everything compiled. All right. So let's put like, let's throw a bunch of things"
6292080,6297680," in here and see how they fucking explode. Yeah. So that's fine."
6301200,6305520," So it definitely should, they definitely should look a little bit better. Uh, but I'll work on that."
6305520,6313120," I'll actually work on that. So let me take a look at the, um, um, bomb lifetime. So five seconds."
6313120,6319360," Let's make it two seconds. Let's make it two seconds. Let's go. Two seconds."
6319360,6323200," Didn't I not refresh?"
6326960,6332480," Yeah. Two seconds is better. I think. It's actually fun. I really like that."
6332480,6343600," Oh, love it. Love it. It's so fun. So fucking fun. Uh, all right. Let me commit that. Uh, let me commit that."
6343600,6352240," Uh, okay. And the last particle. So we have some unpushed stuff in here. Ooh."
6353280,6361520," Okay. So that's fine. Um, make the bombs explode. Right. I'm going to push that right into the repo."
6361520,6370880," Uh, okay. So it should be available at. So sorting array casting. If anyone is interested."
6370880,6379280," Right. So it's also automatically deployed to GitHub, uh, pages. Right. So you can go to sorting, uh,"
6380000,6388560," GitHub, uh, ray casting. Right. So it's not really deployed yet. So moving around is WASD and throw in a"
6388560,6394160," bomber space. Right. So, but it doesn't explode yet. I just, I just implemented the explosion."
6394160,6397760," I just implemented the explosion. So it doesn't explode yet. So we have to wait a little bit."
6397760,6403360," Uh, why is it a decor? What the fuck is wrong with me? Uh, right. So I just implemented it. So you"
6403360,6409520," have to wait a couple of like minutes or so until it like redeploys and, and stuff like that. So it's"
6409520,6417440," pretty cool. Um, so the, the sounds are not really mixed properly, I think. Right. Because we have only"
6417440,6425920," one audio sound. Uh, right. So they, they already explode. So it already, yeah. So it already, you know,"
6425920,6432480," deployed itself. All right. So how is the FPS, by the way, especially when it explodes? The FPS doesn't"
6432480,6440160," really drop for me when there's a lot of particles. It's, it just stays low as usual. Um, that is really"
6440160,6448240," satisfying. The particles look like peace. It's a peace bomb. Peace bomb, peace bomb,"
6448240,6460400," peace bomb. Sorry. It's stable for me. Nice, nice, nice. Uh, okay. So that's pretty cool. Uh, mobile"
6460400,6465120," controls went, I'll think about it. Yeah. So a lot of people actually watch for mobile, right? So I think"
6465120,6474080," it makes sense to, you know, add support for mobile something. Uh, I have stably 15 FPS, right? So"
6475440,6483840," because I have a shitty laptop, right? So I have a shitty laptop. Um, and that's, I'm doing that"
6483840,6493200," intentionally, right? So I'm developing at 15 FPS. So you can then play at 60 FPS at your mobile."
6493200,6501280," That's how real software engineering is done. Can your web devs do that? Can your web devs do that? They"
6501280,6506560," can't even develop without the latest Apple laptop, like M1 or whatever the fuck it is, right? Because"
6506560,6512720," it cannot run their visual studio code. I can develop this shit with Emacs while streaming and also at"
6512720,6521120," 15 FPS. So it works fast for everyone. It works fast for everyone. That's the real software."
6524320,6528240," Uh, can you uncap the FPS? Uh, I can, if I buy a better laptop. So"
6528240,6536800," And he's not using any RGB keyboard exactly. Eggs. Fucking Ackley. Eggs."
6536800,6544800," All right. So that was a fun stream. That was a fun session. So, uh, yeah, I guess that's it for today."
6544800,6550400," Thanks everyone. Who's watching me now. I really appreciate it. Have a good one. And I see you all"
6550400,6556640," on the next recreation programming session with Ahu and Mr. Azodin. So yeah. Love you."
