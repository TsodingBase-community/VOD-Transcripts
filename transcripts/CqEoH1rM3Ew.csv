start,end,text
800,5920," Looks like we're live. Hello everyone and welcome to yet another Azorzin session."
5920,12720," It is in fact an Azorzin session. Let's make a little bit of an announcement and officially start"
12720,21520," the stream. Did you know there's a very small and there is a very small and we mean small chance you"
21520,31200," get a secret. I couldn't read that. Anyway, so Red Circle live on Twitch and what are we doing today on"
31200,38320," twitch.tv? Today we continue developing the text editor in C with OpenGL and specifically today we're"
38320,44160," going to be implementing text selection. Right, so I'm going to give the link to twitch.tv/telling,"
44160,48800," the place where we're doing all of that and I'm going to ping everyone who's interested in being"
48800,55360," pinged. There we go, the stream has officially started. The stream has officially started. So"
55360,59920," today we continue developing this text editor that we started to develop quite some time ago,"
59920,65440," I think a year ago, but we postponed it. Right, so you can find the source code of this thing here. I'm"
65440,72640," going to copy paste it in the chat and for anyone who's watching on YouTube it's going to be in the"
72640,80000," description hopefully if I don't lose the description. So the text editor looks like this. Right, so it's a"
80000,88640," dramatic text editor. That's what that stands for. As you start typing, right, it starts to zoom and pan"
88640,97440," the camera. Right, and it basically follows the cursor making it look very, very dramatic. Right, and on the"
97440,105120," previous stream we implemented a simple file browser that allows you to basically select the file that"
105120,111280," you want to edit. Right, so right now it looks at the current folder and in the current folder you can"
111280,117600," pick something. Let's pick readme and it actually opens the readme and you can, you know, scroll through,"
117600,124720," maybe even modify something, say something like hello world and you can save this entire thing and you can go"
124720,130160," and pick a different file for example license. For some reason every time I open a new file it doesn't"
130160,135360," really reset the cursor, so maybe this is something that we'll have to fix. But that's what we basically"
135360,141760," implemented in the previous stream. Right, so what I wanted to implement today, I wanted to implement"
141760,147840," a text selection. Right, so I want to be able to, you know, hold shift and go down, down, down and select"
148880,156560," basically some text. Maybe to copy paste it, maybe to cut it. Right, maybe delete it. Right, so the usual"
156560,164000," feature that all the text editors have. Right, and we already know how to do this like the selection"
164000,169680," visually because that's literally what we're doing here. Right, in the file browser. In the file browser"
169680,177200," we literally highlight the text of the file name that you want to open and we can use the same technique"
177200,184480," to visualize the selection in the actual text editing area. So that should be pretty straightforward. All the"
184480,192960," mechanisms are in there, we just have to utilize them and it's going to be good. So that's basically the"
192960,199120," plan for today. But the first thing I probably want to do is basically, you see how it doesn't reset the"
199120,205120," cursor after it opens the file, which is kind of weird, especially if it opens a new file. So I think"
205120,212800," this is something that needs to be fixed ASAP. So if we take a look at the editor, it has a function"
212800,218560," called editor_load_from_file and this is probably where we have to do a little bit. Right, if I go to the"
218560,225600," edit.c and define this entire thing. And here we don't even do anything with the cursor. Let me take"
225600,231280," a look at how we store the cursor. Right now the cursor is just like a single number. It's basically"
231280,237440," the character, the current character that is currently we're pointing at. Right, and essentially"
237440,243760," what are we doing here? Right, so we reset the entire data within the text editor. We read the entire"
243760,250720," file into that data. If there were no errors, we recompute the lines and we also store the file"
250720,256240," path that we opened. So this is something that I did off screen. So essentially as you open the file,"
256240,264480," we also take an ownership of the file path. So next we can, for instance, save to that file without"
264480,271200," specifying that file. For instance, we have like a function called save. And where does it save things?"
271200,275840," It saves to the last opened file. Right, so it keeps track of that. It's kind of similar to how the text"
275840,283200," editors work. You know, there's like an item save and when you save something like something that you"
283200,287600," already opened, you never specify where exactly you're saving because the editor kind of knows."
287600,293200," It's kind of a similar situation but in the code. Right, and this is probably where we have to just go"
293200,298320," and set the cursor to zero and that's it. That's basically what I wanted to do. Just set the cursor to"
298320,305760," zero every time you open the file. Makes sense to me. And let's just rebuild everything and see how"
305760,313120," it's going to go. Right, so I'm going to open the file and I'm going to position the cursor somewhere"
313120,318720," here and I'm going to open a different file. And as you can see, the cursor is at zero. Right, so I can"
318720,325120," just go position it somewhere else and open something else. And it's always positioned at zero because we"
325120,331920," reset it every time we open a new file. Single line fix. Single line fix. Isn't that epic? I think it's"
331920,338240," pretty epic. Okay, so what do we have in here? Oh, hello world. I added this thing in the text editor itself."
338240,348480," Right, so we don't really need to commit that. Right, so reset the cursor every time we open a new file."
348480,351920," There we go. We're going to push that right into the repo."
351920,365520," We're going to push that right into the repo. So, to implement selection, right, to implement selection,"
365520,372480," we need to store it somewhere. So, where are we going to be storing that? So, essentially, if you, if we think"
374160,379840," about how it should be stored, it's probably going to be just two markers, right? So, essentially,"
379840,387760," selection begin, right? Maybe selection is too big of a word. Let's call it select begin,"
387760,393200," which is still too big, but I mean it's a little bit shorter. And select end, right? So, and basically,"
393200,402160," everything like between these things is a selection, right? So, and if you try to edit something there,"
402160,406960," it probably has to be like deleted and replaced it or something like that, but yeah."
406960,415840," Interestingly enough, how the selection usually behaves in a normie editor, right? So, how does it"
415840,423040," usually behave? So, let's actually open a normie editor and maybe copy paste some text in there, right?"
423040,430160," So, I'm going to copy paste some text in there. Okay. So, we have a selection and is it going to stay if I"
430160,437680," just don't hold any shift and just move the cursor around? Okay. It doesn't stay. Right. It feels like"
438880,447840," there is some sort of a mode, selection mode. And as soon as you just start moving, it goes out of the"
447840,453040," selection mode. And what's interesting is that it feels like the current position of the cursor"
453040,459680," is also one of these selection boundaries. So, I have a feeling that maybe there is no need to store"
459680,467040," two of these numbers because in a selection mode, the cursor is going to be one of the ends of the selection,"
467760,474960," right? So, it probably makes sense to just keep track of the selection begin and then the cursor"
474960,481680," and have some sort of a boolean which indicates that we're currently in selection mode, right?"
481680,485360," So, since it's a boolean, initially it's going to be false. So, that means we're not in selection mode,"
485360,490560," right? And being in the selection mode automatically means that you have to display this selection."
490560,496400," Some of the things have to behave differently, especially if you start editing, it should delete"
496400,503360," everything and replace the text with that, right? And yeah. So, we definitely want to separate like"
503360,508240," selection mode and not selection mode. And what's interesting is that if we had select begin and"
508240,516960," select end, it kind of implies that begin is sort of like less than end or equal, but it could be"
516960,522400," the other way around if we're talking about just cursor. You know what I mean? Because I started selection"
522400,529760," like from here and begin is smaller than the current cursor, but if I go up, we have an opposite situation,"
529760,535680," right? So, the begin, right? The begin is actually great. Begin is here, but the cursor is somewhere"
535680,540320," here, up here. And this editor is actually not particularly convenient. It hides the display"
541600,549760," as we switch to the selection mode. I think in Emacs, it doesn't hide the... Oh yeah, okay. In Emacs,"
549760,557040," I actually disabled shift arrows. So, on shift arrows, I basically remapped moving between the windows,"
557040,561920," windows. So, it doesn't really work that well for me anymore. So, I can't really demonstrate that,"
561920,570400," but yeah, you get the idea. So, yeah. So, I think this is going to be a representation of the selection,"
570400,577040," right? So, this is going to be a representation of the selection. So, a single boolean and where the"
577040,582480," selection begins and the cursor is where the selection ends. They can be in whatever order"
582480,589200," happens, right? Whatever order happens and we'll have to handle that. We have to handle that somehow."
589200,590240," We'll see how it goes."
593120,598080," So, how are we going to be displaying the selection? I think I already mentioned that."
598080,604320," We're going to be displaying the selection similarly, similarly to how we select the, you know, the"
604320,615040," current file that we want to open in here. So, that's going to be basically that. All right. So, let's go"
615040,622160," and try to implement the center. I think I'm going to go into the editor. And, oh, here's the interesting"
622160,629200," thing. We do not render editor within the editor translation unit. The rendering of the editor is"
629200,635200," located in the main translation unit for some reason, probably for historical reasons. So, maybe one of the"
635200,640720," the things I want to do, I actually want to move a render editor from the main translation unit to the"
640720,649280," editor translation unit, right? So, it's going to be as simple probably as just doing that. So, editor.c"
649280,658080," and I'm going to just basically move this entire thing into the editor.h. The thing about the"
659280,666240," rendering is that it also accepts the window, right? So, that means I'll have to also include"
666240,675680," SDL which is kind of something that I don't want to do for this specific translation because editors"
675680,680800," should probably not know any of this stuff. But, maybe in the future I'm going to tuck that stuff"
680800,685120," under the renderer itself and it's not going to be visible. On top of that, there is a little bit of"
685120,689200," a convention going on in here. So, first comes the editor and then the action that you do,"
689200,692000," with the editor. So, maybe because of that I want to kind of rename it like that."
692000,698240," All right. So, and let's do that here as well. And let's just try to compile this entire thing and"
698240,702400," go to the compilation errors and see how it goes. Okay. So, we have some compilation errors."
702400,709200," Okay. So, it doesn't know about FreeGlyph. So, that all means that we have to"
709200,715680," include all of that stuff. Is it really called FreeGlyph Atlas? It's just called FreeGlyph. And also"
716480,725520," SimpleRenderer. All right. SimpleRenderer. Do we have anything else? Probably that is basically it."
725520,731600," So, SDL, FreeGlyph Atlas and SimpleRenderer. We include all of that stuff in here. Hopefully,"
731600,739840," there will be no... How is that called? Recursion anywhere? Maybe. Hopefully. We'll see. Probably"
739840,746640," there will be no recursion. Okay. So, FreeGlyph font size. So, this is something that is located in the"
746640,752480," main translation unit. But I feel like it should be located within the glyph stuff. All right. So,"
752480,756880," I think this is where it belongs. It makes more sense in here."
756880,763920," So, and it also accepts last stroke."
763920,773040," It also accepts last stroke, which is, for whatever reason here, currently is a global variable because I"
773040,781280," haven't decided yet where exactly I wanted to put it. All right. Which is kind of weird. I could have put it"
781280,790000," in inside of the editor. So, the point of the last stroke, by the way, it basically stores the timestamp of"
790000,798240," when was the key, the last time key was pressed. So, and it is used for blinking the cursor. Right. So,"
798240,805120," if the last time the key was not pressed, it's not going to blink. Right. If the distance between"
805120,810560," the last stroke and the current time is big enough, it's going to keep blinking. Right. So, this is"
810560,815520," basically what it's used for. I'm not sure how good of an idea that is, but maybe it makes sense to"
815520,820160," actually move this entire thing inside of the editor because it kind of belongs to the editor, to how the"
820160,826720," editor is rendered. So, I'm going to just go ahead and literally do that and just go to the completion"
826720,835760," errors and hope for the best. I'm really not sure. And it also uses int32, which is a SDL type,"
835760,841840," because this is how SDL stores the ticks. And I don't like that the editor is kind of like"
841840,846880," coupled with SDL rendering, but maybe this is something that I can fix later. Maybe it's not"
846880,852080," really that important right now. Right. So, maybe I shouldn't really read all about it too much."
853360,861760," Okay. So, here it is. We are in C. We don't have default things in here. So, in an editor here,"
861760,867120," just last stroke. Oh yeah. And now I have to go through all of these places where we refer to the"
867120,873920," last stroke and basically replace them accordingly. Okay. But that's fine. It's not that many places."
873920,885920," right. Editor last stroke, editor last stroke. Screen width is undeclared. Screen width is undeclared."
885920,895040," And why do we use the screen width in here? All right. So, and why is it undeclared?"
898240,904320," Maybe I should just put it somewhere into common. Let's put it into the common things. Right. So, I'm going"
904320,921120," to clean that up a little bit later. Okay. Light stroke is the editor dot. Another one. And so, this is"
921920,932080," a pointer. So, this should go here. And another one. Another one. I don't know why it doesn't really"
932080,940640," print all of them. It just prints them one by one. Okay. I would appreciate if you just give me all of"
940640,948800," them. Okay. Cool. All right. So, I moved the rendering inside of this thing. It's still a little bit"
948800,955520," questionable whether I should have done that. But, I mean, that's fine. Okay. So, how are we going to be"
955520,961840," approaching all of that? How are we going to be approaching all of that? We render the entire thing"
961840,970560," line by line. Right. So, here is the text rendering line by line. Essentially, if we are in a selection mode,"
971520,980960," we can always check whether the current, the entire line has to be rendered or not. Right. So, maybe it makes"
980960,987680," sense for me to just draw what I mean. Okay. So, let's actually click the drum."
987680,1008000," Okay. So, imagine that we have lines. A bunch of lines. So, rather prefer like a green. So, we did the camera."
1008480,1014720," Okay. Camera shifted too much."
1014720,1018240," Uh, all right."
1018240,1022320," Okay. So, we have lines."
1022320,1032400," Uh, and they are of the different length. They are of a different length."
1034400,1035440," Something like this, right."
1035440,1052320," Right. But, the thing is, the position of the beginning of the selection and the current cursor is absolute."
1052320,1059840," Right. Meaning that, um, right. So, for instance, if you have like how many characters in here?"
1060800,1067200," Uh, let's put it this way. Like one, two, three, six, seven, eight. If the position of the cursor is"
1067200,1073360," eight, it's going to be pointing at the next line because it's eighth character. Right. So, we are not"
1073360,1079920," addressing the characters by lines. We can address them by lines, but we, uh, usually store in absolute"
1079920,1086320," values. Right. So, essentially, if we are in a selection mode, we know the absolute position of the beginning of"
1086320,1092000," the line and the absolute position of the end of the line. Right. So, and for instance, we are in"
1092000,1097360," selection mode and on top of rendering the, uh, the lines, we also need to render the selection."
1097920,1103680," And if we see that the beginning of the line is greater than the beginning of the selection and the"
1103680,1108960," end of the line is smaller than the end of the selection, we know that we need to render the entire"
1108960,1115920," line. We need to highlight the entire line and we already know how to highlight the entire line, uh, from"
1117520,1124560," the code that highlights the file path. Right. For instance, here we effectively highlighting the entire"
1124560,1130880," line already. As you can see, here's the entire line being highlighted. So, we can just take that code"
1130880,1137040," and we already put it in the place in the text editor, uh, when we know that the entire line is going to be"
1137040,1143920," highlighted. Right. So, that leaves, uh, a couple of special cases. Right. When the beginning, uh, of the"
1143920,1149600," selection is in the middle of the current line or the end of the selection is in the middle of the"
1149600,1156160," of the current line. Right. Something like that. And depending on whether it's the beginning or the end,"
1156160,1162320," we will have to highlight to the end of the line or to the beginning of the line. Right. Something like"
1162320,1168880," this. If this, if in the middle of the current line we have the beginning of the selection, we know that we"
1168880,1175200," have to highlight starting from here up until the end of the line. And vice versa. If the end of the"
1175200,1181600," selection is in the middle, we have to highlight until the beginning of the line. Like so. Right."
1181600,1189520," So, and we have basically three special cases that we have to implement. Right. And all of that has to"
1189520,1197840," happen in, um, in the selection mode. Right. So, if we are in the selection mode, uh, so we get the rate"
1197840,1202400," from Raphael Luba. Thank you so much. I hope I promised your name correctly. Thank you so much for the rate."
1202400,1212560," Uh, so, hello, hello. Um, right. So, maybe I'm going to do followers, uh, off. Okay. So, what we're doing,"
1212560,1219920," we're developing a text editor that looks like this. Right. So, uh, I don't know if you, if you guys saw"
1219920,1226240," this, but this is a dramatic text editor. Uh, right. So, and if you start typing something, as you can see,"
1226240,1233920," we have a little bit of a camera action that pans and zooms as you type. Uh, right. So, the rainbowish"
1233920,1238720," effect is just to show off. It's nothing special in there. We're going to have like a proper highlighting or"
1238720,1243680," something like that. It was just tasting some shares. Uh, right. So, and you can just start"
1243680,1250880," typing things. Right. So, you can type some C code. Uh, right. Something like that. We recently implemented"
1250880,1257840," a simple, uh, file browser. Right. So, uh, you can select a file that you want to edit, like build.sh."
1257840,1263760," So, here is the file and you can just go somewhere here and stuff like that. And so, what we're developing"
1263760,1268480," right now, we're developing like a selection. Right. So, since we're developing the text editor from scratch,"
1268480,1272320," uh, we have to implement all of the features. We don't have a seduction. So, we're in the middle"
1272320,1281120," of implementing this entire thing. Uh, right. So, that's basically what we're doing. Just for,"
1281120,1285760," for the new people who just joined. Um, all right. So, let's go and see."
1285760,1298240," Uh, okay, guys. So, here we are rendering the text. All right. So, here is we are rendering the text. And, uh, what I'm"
1298240,1306560," thinking is that we need to normalize the selection. Because the beginning of the selection and the end"
1306560,1313040," can be in like sort of opposite directions. So, what we'll have to do, we'll have to probably"
1313040,1318800," do something like this. Right. Select begin. Uh, right. So, and this is going to be"
1318800,1327920," editor select begin. Is it called select begin? Probably. I'm not really sure. Yeah. So, it's a select begin. And,"
1328000,1341200," select end, select end is the cursor. Right. But, if select end is, um, right, smaller than select begin."
1341200,1348640," Let's actually do the other way. Select begin is greater than select end. We want to actually swap them."
1348640,1354160," Right. So, do we have a swap? I don't think we have a swap. Uh, right. So, maybe I'll have to implement"
1354160,1365840," something like swap size t. Uh, select begin select end. Is that a good idea? Or, maybe this is the only"
1365840,1372160," place where I really need swap. So, maybe I can just like do that manually. Right. So, without any special stuff."
1372160,1379760," Right. I'm going to, I'm just going to swap them around. Uh, right. Select begin t. Um,"
1379760,1389280," Select end. So, this is the select end. Select end is going to be t. All right. So, and I'm going"
1389280,1397360," to swap that around. And now, I know for sure that, um, this is going to be that. So, here in the loop, I'm just"
1397360,1408880," rendering, I'm just rendering the thing. Mmm. And interestingly enough,"
1408880,1418160," interestingly enough, here we do. So, I'm just thinking, should I have two separate loops?"
1418160,1423840," First one for rendering the text and the second one for rendering the selection? Or should I put"
1423840,1429920," everything into a single, into a single loop? That's a very interesting question, but I'm not quite sure."
1429920,1433600," Because essentially, what I have to do in here, right, what I have to do in here,"
1433600,1444640," is basically, if, only if we are in the selection mode, right. So, uh, selection. If we are in a selection mode,"
1446000,1463360," we have three situations. We have three situations. We have three situations. Okay. So, here is the current"
1463360,1470800," line, right. So, this is the current line that we have in here. This is the current line."
1472880,1479280," Um, so, how much, for how long I'm already streaming? Okay. So, that's totally fine."
1479280,1487760," Um, I think I'm gonna make a small break. Uh, I need to refill my copper team. So,"
1487760,1496080," all right. So, um, let's continue. So, if we are in selection, we have to check for three different cases,"
1496080,1503360," right. So, I suppose the first case is going to be very common. It's basically when the entire line is"
1503360,1511440," selected, right. So, the entire line is selected when select begin is less or equal to the line begin."
1511440,1518160," Uh, right. So, line begin. I think this is how it works, right. So, if I go into the editor.h,"
1519200,1524320," right. So, this is the line, this is the line begin, right. So, line begin less or equal to that."
1524320,1535760," And, um, line end. Line end is less or equal to select end, right. So, and we know for sure that the"
1535760,1543120," select begin is less or equal to the select end. So, this is basically when the whole thing is selected,"
1543120,1551600," right. The, let's put it this way. Uh, entire line is selected. Entire line is selected. So, the next case"
1551600,1562480," is when the beginning, there's actually several cases, right. So, the entire thing is selected and the"
1562480,1570880," small subset of the line is selected, right. So, this is entire another situation. Uh, the small subset of the"
1570880,1576080," line is selected, right. So, the line is selected. It is probably when we have something opposite,"
1576080,1585440," right. So, it's when line begin less or equal to the select begin, right. And select end is less or equal to"
1585440,1599440," uh, to line end, right. Um, subset of line is selected. So, obviously, uh, these are kind of mutually exclusive,"
1599440,1606000," right. So, if select begin is equal to line begin and line end is equal to select begin, both of them are"
1606000,1611600," going to be true. But, hopefully, uh, their effects are going to be the same. So, it doesn't matter."
1611600,1627520," Right. So, all right. So, another situation is when, um, select begin, select begin is between the line begin and line end."
1628480,1639680," Uh, right. So, something like this. And, uh, select begin is something like this. It's kind of difficult"
1639680,1658320," for me to see what's going on. Um, uh, okay. Select, um, starting from select end, select begin, uh, until the end of the line."
1658320,1667680," Right. So, that's what we have here. And, uh, another situation is when the end of the selection is between those things."
1667680,1675520," Right. So, it's when the end of the selection is between them. Right. Select starting from"
1676960,1689040," uh, the beginning, uh, the beginning, the beginning of the line until the, until select end. Right. So,"
1689040,1696000," this is basically four different situations. Uh, maybe you can compress them into, uh, few,"
1696000,1701040," fewer amount of, uh, of the situation, fewer amount of cases, but I don't know how to do that yet."
1701680,1706960," Right. And, uh, else is means that there is no selection on the current line and we have to do"
1706960,1715120," nothing effectively. And, uh, so I'm just going to keep it like this. Right. Uh, I'm just going to keep"
1715120,1723520," keep it like this. The question is, uh, how can we know the, um, the beginning and the end of the line?"
1723520,1729120," Okay. So, we need to select the entire line. Right. So, the line starts at begin. Right. In,"
1729120,1733600," in this space. Right. I'm talking about the two-dimensional space. In the two-dimensional space,"
1733600,1740400," it starts from begin and it ends, uh, at the end after we render this entire thing. So, this one is"
1740400,1748880," rather interesting. Uh, right. So, this function allows you to compute, uh, where the line is going"
1748880,1756080," to end because the font might not be monospaced. Uh, it can, it can compute where the line is going to"
1756080,1761280," end without actually rendering it if you pass false in here. Uh, right. It's kind of a weird API,"
1761280,1766640," but it is what it is maybe in the future is going to change. So, it doesn't really matter how it works"
1766640,1770400," right now. Right. So, if I put false in here, it's simply not going to render. It's just going to do"
1770400,1776160," the computations for you. Uh, as simple as that. And maybe this is something that we want to do actually."
1776160,1781440," Right. Uh, this is something that we might want to do."
1781440,1787120," And I'm thinking that"
1789520,1798560," I might have separate ends for different cases. Right. So, I may say, okay, I'm going to have my own"
1798560,1806640," end in here, which starts at begin. Uh, all right. Then I'm going to compute where that end is going to"
1806640,1813920," end. Right. Where it is going to end. And there we go. I have two points, uh, that I can use to render"
1813920,1819200," the rectangle. So, the question is, how are we going to be rendering the rectangle? Uh, and here is the"
1819200,1826080," answer for whether I have to separate this in two loops. The answer is yes, because to render a rectangle,"
1826080,1831200," I have to switch the shader. And constantly switching the shaders is actually very slow,"
1831200,1839680," because that flushes the renderer. It is better to not switch shaders very often, to accumulate as many of the"
1840320,1846640," uh, vertices with the same shader program as possible. So, we can draw them, uh, all at once with a single"
1846640,1852720," draw call. Right. So, here's the answer. There should be a separation in here. So, and since I want to first"
1852720,1860640," draw the selection and then text on top, that loop is going to be the first one. Uh, right. And it should"
1860640,1869680," be relatively easy. It's just like edit, uh, uh, selection. Right. So, we're only gonna, uh, activate that"
1869680,1877600," loop if there is a selection mode. Okay. So, that makes a lot of sense, actually. I really like that. I really"
1877600,1889840," like how there's a lot of sense in here. Um, okay. So, and I'm gonna be moving this entire if-else thingy to"
1889840,1899440," to this loop. Uh-huh. So, this is the begin, this is the end, and stuff like that."
1901600,1907520," Uh, so, I already copy-pasted this entire stuff. So, here I'm definitely not rendering."
1907520,1915280," So, but also here we're setting the shader. Right. So, we're setting the shader to, uh, the text one."
1915280,1923520," But we need to do that here. Uh-huh. But before in here, we have to set the shader for color. Right."
1923520,1932480," Just the shader for color. Uh-huh. All right. So, and I can steal the code for rendering the triangle"
1932480,1940720," from the, from the file browser, from the rendering of the file browser. Right. So, the file browser,"
1940720,1948720," uh, where is it? Uh, so, this is where we basically do that. Simple renderer solid rectangle. Uh-huh."
1950640,1956480," So, and that effectively is going to render the entire thing. So, here's the begin end,"
1956480,1962000," and here is the color of the selection. We might actually maybe factor it out into a global constant"
1962000,1968560," or something like that, but I'm not gonna do it right now. Uh, I'm not going to do that right now. Okay."
1974160,1981680," So, the question is, um, how are we gonna be doing the rendering, like, of partial things?"
1981680,1986880," Uh, that's a very interesting question. I'm not really sure how exactly we're gonna do that."
1986880,1994400," But maybe, uh, before we're gonna handle the partial cases, maybe we should test whatever we already have."
1994400,2000080," Right. So, I think that's gonna be, that's gonna be interesting. So, let's try to compile whatever we already have."
2002320,2008240," And see how it is going to go. Okay. So, we have a little bit of that in here. That doesn't matter."
2008240,2014880," Uh, okay. So, what do we have? Uh, semicolon in here. Nothing particularly special."
2014880,2023680," Okay. Cool. So, of course, right now, it's not going to do anything at all. Right. Because we do not"
2023680,2032720," handle that. Right. So, we do not set selection mode to true, uh, at all. Right. So, to do that,"
2032720,2039840," we need to probably handle shift, I think. I think we need to, we need to handle shift."
2039840,2046880," So, let me see how we're going to be doing all of that. So, we have, uh, sdlk up and sdlk down."
2048080,2053840," So, and, what I'm thinking is that, hmm."
2053840,2064400," We need to check whether we're currently holding shift. Right."
2066080,2071600," Uh, for instance. Let me think."
2071600,2082320," I don't quite remember how it is done. Maybe I need to take a look at the sdl event. Right."
2082320,2090000," So, let me take a look at the sdl event. Include sdl2. Uh, do we have event in here? So, there should be a"
2090000,2097760," structure sdl event. Right. We should, we should find that. And the one I'm interested in is sdl keyboard"
2097760,2103360," event. Right. So, the keyboard event is the most interesting one. Uh, and I suppose..."
2103360,2113040," So, there is a key symbol. Uh, maybe this one contains the modifiers. The keys that were pressed or released."
2113040,2117440," So, let me find the definition. I think it's also a structure or some sort of a union."
2117440,2126800," Uh, right. So, sdlk sim. Yeah, it is a structure. And we have modifiers. Right. So, current key modifiers."
2126800,2131440," And the question is how can we check for a certain modifier?"
2132400,2142640," Um, so, physical key scan codes. Key codes for details. Uh, current modifier. Uh, CTRL. Hmm."
2142640,2157040," Okay. So, sdl2 key modifiers. So, there should be some sort of masks or key mod. All right. So, key modifiers."
2158400,2167280," Uh, so, key. There is a key codes, but there is no key modes. Uh, key mod, uh, shift. I think that's"
2167280,2174000," what I'm looking for. Something like key mod shift. Uh, okay. So, let's go ahead and do that. Let's do key"
2174000,2187600," down. Right. And if event key, key, uh, key sim mod this thing."
2188400,2201360," We may print something. Uh, key mod shift. Right. So, let's give it a try now. Uh, let's recompile this"
2201360,2205200," entire thing. Let's compile this entire thing. Let's compile this entire thing."
2210080,2219840," All right. All right. And let's also run, uh, this stuff. Okay. So, I can move up and down. The most"
2219840,2227120," importantly, I can move down. So, now I'm gonna hold shift and go down. Okay. So, it says key mode shift."
2227120,2233360," So, we can detect, uh, when we're holding shift and when we're not holding shift. Right. So, there's like,"
2234080,2240320," two situations, uh, when we're holding shift and when we're not holding shift. Uh, okay. So, let's"
2240320,2250080," actually take a look at them. When we're, uh, holding shift and we are not in selection mode. Right. So,"
2250080,2256800," selection. We're not in selection mode. What we have to do, we have to go into the selection mode. If we're"
2256800,2263440," not holding the key, uh, shift key and we are in selection mode, we have to go out of the selection"
2263440,2269120," mode. Uh, right. So, essentially what we have to do, we have to put true in here and, uh, false in here."
2269120,2279920," But on top of that, on top of that, we have to set the select begin to the current cursor. To the current"
2279920,2288640," cursor. Uh, there we go. So, we're not only starting, we're also, um, setting this thing to the current"
2288640,2294720," cursor. And there we go. So, this should activate that. And we have to do that. We have to do that,"
2294720,2302480," uh, for any of the movement. Right. For any of the movement of the, uh, of the cursor. Every time"
2302480,2306320," the position of the cursor happens, we have to check this sort of like a state machine."
2307040,2315200," And that means that this sort of logic, this sort of logic should be inside of functions"
2315200,2321040," like editor move line down, uh, editor move character left and so on and so forth. Right. And"
2321040,2327120," in fact, it's the same logic, right? So to make it work for all of the movements properly, I can literally"
2327120,2332880," copy paste it, which means that it has to be tucked like under those functions, uh, and stuff like that."
2332880,2337760," But for now, we're going to keep it at sdlk down, uh, just to test things around. And maybe we're"
2337760,2344960," going to copy paste this stuff a little bit. Uh, right. And once, uh, we reach the critical amount"
2344960,2349840," of things, we're going to start, uh, you know, factoring it out. Right. So let's not try to abstract"
2349840,2356960," away it very soon, too soon. Okay. So I'm going to hold shift and I'm going to press down"
2357760,2363200," and nothing happened, right? Nothing happened or happened whatsoever. And I wonder if this"
2363200,2367760," is because I didn't recompile anything. I'm pretty sure I didn't recompile because it keeps printing"
2367760,2374320," key mode shift and I already removed that logging. So definitely I forgot to recompile. That's why you"
2374320,2379760," have to program in JavaScript because you never have to rebuild your project after you change something. Oh, wait,"
2381280,2388400," that's not true anymore. Anyway. So, uh, let's actually type something. Uh, right. So it's going"
2388400,2397360," to be include stdio, uh, maybe a couple of more, uh, things and let's try to do shift down and that didn't"
2397360,2407280," do anything. That's very interesting. I wonder why, uh, is that because we didn't flush something? Uh, we didn't"
2407280,2419920," flush anything. That's a very interesting question. That's a very interesting question. So it should have"
2419920,2428240," at least printed something, but it didn't do anything. Well, we're automatically flushing every time we change"
2428240,2436320," the shader. So that should work. Uh, that should definitely work. So I'm not sure what's up with that."
2437280,2448240," I'm not sure what's up with that. Uh, okay. So let's see. Maybe we should do a little bit of a logging,"
2448240,2461920," uh, sdl key, sdl key down. Right. Sdl key down. And I want to just like literally print, uh, selection. This is going to be d."
2461920,2472240," going to be d a select begin. Uh, it's going to be ZU. So edit, uh, uh, selection selection,"
2472240,2485920," edit, uh, select begin. There we go. Uh, that should be all right. So I just want to like do a little bit"
2485920,2496400," of logging just to see what's going on here. Uh, all right. So, okay. When I go down,"
2496400,2505040," right. It says selection zero and select begin. Okay. Let's start from here. Uh huh. So selection is true"
2507520,2515600," and selection. Yeah. So it should render something, but it doesn't render anything. Right. So that means"
2515600,2525680," for sure the problem somewhere here, right? The problem somewhere here. Uh, so if the select begin"
2527520,2547440," is between those things is at 13, which doesn't really make much sense. Right. Hmm."
2549840,2560400," because I set the cursor, so it should work. So the cursor currently should be zero,"
2560400,2566400," it should be zero, but for some reason it's set it to 13. Yeah. So this is something,"
2566400,2572720," this is something really sus. This is something really sus. And I'm not really sure why, uh,"
2573440,2579600," it is happening like that. Right. So I'm going to start it here. Uh huh. And boom."
2579600,2583520," Yeah. Okay. So that's, that's cool."
2583520,2589120," That is very, very cool. So should be fine, but it doesn't render anything."
2601680,2613280," So this is the current line. I have a feeling that it might be actually hitting, uh, some of these"
2613280,2624080," situations, right? Let's put it this way. Assert zero. Yeah. It might be actually hitting things that"
2624080,2629200," are not implemented yet. That's the feeling I have. Right."
2631680,2646640," Okay. So yeah. And it hit this one. Okay. So selection and, um, but that is really weird."
2646640,2653120," Right. So select and is between these things. So it should have at least this situation somewhere."
2653120,2654800," You know what I mean?"
2657040,2664400," It should at least have that. So does it even hit this? Does it even hit this? This,"
2664400,2670880," this is very important because at first it has to hit that one, the one that I implemented."
2670880,2675680," Otherwise it just doesn't make sense. Right. Otherwise it simply doesn't make sense."
2675680,2685200," Right. So if we go there, it did in fact hit that. It did in fact hit that. So, and, uh, I might as well also"
2685200,2690960," print the beginning, the end, right? So let's actually print the beginning, the end, uh, right. So it's"
2690960,2698560," going to be FF, where do we begin, uh, X and Y, and then we probably want to also have the end in here."
2698560,2709200," Right. So this is the end, uh, right. Like, so, so slowly debugging our way to, to the truth, hopefully."
2709200,2720800," Let's see. Uh huh. And there we go. Uh, okay. That makes sense. Right. So zero, zero. So this is begin,"
2720800,2727760," and this is end. That makes sense. Um, right. And then, um, we also,"
2730240,2739600," what was that? Yeah. We also add, so since zero is going to be that, and then we use that. So where,"
2739600,2748720," where is the rectangle? Right. So, because here is the, all of the data. Where is it? I didn't see it."
2748720,2749920," I didn't see the rectangle."
2753360,2759440," Is it because it's not flushed or something? Right. I'm really not sure because this thing is supposed"
2759440,2768000," to flush it. Every time we set the renderer, it should flush it. Goddamn open. Wait, it doesn't flush"
2768000,2776000," it. Didn't I? I didn't implement that. Why did I think I implemented that? Okay. Yeah. All right."
2777440,2782880," For some reason I thought that my renderer automatically flashes things every time you"
2782880,2789840," change the shader. Apparently I didn't implement that yet. Okay. All right. I just forgot that I"
2789840,2798080," didn't implement that. Uh, sure. So that's totally fine. Happens. Right. So now we just have to say"
2798080,2802960," that, uh, we're going to be flushing. All right. Apparently we have to do that manually. So maybe after"
2802960,2806800," the stream, I'm going to fix that. Right. Because I'm not really sure what's going to be the, uh,"
2806800,2814000," sort of like a pitfalls of just like flushing it every time. I'm really not sure. That's why I don't"
2814000,2821920," enable it right away. Uh, right. So, and now if we try to do that, finally, I managed to select"
2821920,2828240," this entire thing. And as you can see, I'm selecting things, right? So that's pretty cool. Um,"
2828240,2836320," right. So, uh, it only resets this thing when I go up because this is where we set that. Okay."
2836320,2841920," So at least we can select things like that, which is already kind of cool. Uh, as you can see, right."
2841920,2850880," That's pretty cool. Very, very cool. First try. Yeah. First try. Uh, okay. That's nice."
2850880,2861760," Uh, so, and what's interesting is that like, how can I, um, check for this kind of thing? I'm not really sure."
2863280,2872400," Um, so I have a feeling that maybe I have to have something,"
2874320,2881360," some sort of an editor function, some sort of function, right? Some sort of function for the"
2881360,2886480," editor, uh, to which I'm passing"
2886480,2893360," shift, you know what I mean? To which I'm passing shift."
2896800,2908640," Um, so, and essentially what is it going to do, right? What it's going to do is going to contain"
2908640,2914640," this logic, right? Uh, if this is true and we are currently not in selection, we're going to enable"
2914640,2920240," selection and set the current cursor. Otherwise, blah, blah, blah. Right. So, but I'm not sure how"
2920240,2925680," exactly to call this function. Uh, that's the problem. I'm not sure how to call such function."
2925680,2931600," Uh, so editor, some sort of function, maybe update selection. Let's call it update selection."
2931600,2936560," Uh, selection in here. We're going to, of course, accept the editor."
2936560,2939600," Right. We're going to accept the editor."
2940800,2951120," Uh, and uh, uh, maybe shift, right? So maybe the shift is currently held or not. Um,"
2951120,2960080," so let's see how we're going to do that. And we're going to move this entire weird logic, uh, to there."
2960080,2967440," Right. So instead of this thing, we're going to just say if shift,"
2969120,2976400," if selection, blah, blah, blah. And we probably want to replace editor dot with E arrow. There we go."
2976400,2984720," So that's the entire thing. Uh, and in here, right, we can do something like update selection. Right."
2984720,2995040," Uh, and we can duplicate this function every time we changing the position of the cursor. Right. Left,"
2996080,3004320," right up and down. Right. Uh, can I just copy paste this center, I think. All right."
3004320,3009040," So I'm going to leave this stuff in here."
3009040,3018320," And then I can start doing these things, uh, but I can also start doing this thing from any position."
3018320,3023120," Right. So I'm holding shift right now, but it's not selecting anything because we have not implemented"
3023120,3028320," this situation when we are in between those things. Right. But if I move down, as you can see, it's"
3028320,3034640," selecting. So there should be selection, uh, here, but we haven't implemented that yet. Right. We haven't"
3034640,3040640," implemented that yet. So that's totally fine. Uh, all right. So let's go and implement the rest of the"
3040640,3047200," cases. Right. So the next case we're going to try to do is when we have a subsections, sub line,"
3047200,3055120," right? Subset of line is selected. Um, right. So let's see what's going to happen in here. Uh,"
3055120,3061440," first of all, we need to find the begin, right? We need to find the begin, uh, to find the begin,"
3061440,3074080," it's going to be rather interesting because we need to render the line, um, right, back to F. Um,"
3074080,3081040," so this is more of a begin of the line, right? But through this function, we're going to find the"
3081040,3092160," begin of selection. Right. So maybe I have to call this begin offline. Um, maybe line begin, something"
3092160,3102080," like that. Right. Uh, line begin. Right. And let me go to the compilation area because I'm not sure."
3102080,3107360," Like, it's kind of difficult to come up with proper names without duplication because we have, uh, the"
3107360,3112560," coordinates of the line in terms of characters and we have the coordinates of the line in terms of"
3112560,3119600," screen. Right. So that's kind of the problem. Right. So, right. We need to indicate that this,"
3119600,3124640," we're talking about the beginning of the line in the screen coordinates. While when we're referring"
3124640,3130320," to line begin, we are talking about the, um, the beginning of the line in character coordinates."
3130320,3135360," Right. Because we have array of characters. Uh, so we have to distinguish these kind of notions."
3135360,3141760," Uh, right. So, and I'm not sure how exactly to name this entire thing, but it doesn't really matter."
3141760,3155120," Uh, right. So, okay. Let me see. Uh, so begin, uh, line begin. Uh huh."
3155120,3165520," And this is line end. So, because if I start to do line, uh, screen,"
3166960,3173040," it becomes too big. Like we have like very long names for mathematical computations. Right. And"
3173040,3178080," these kinds of things are part of the formulas. And if you have a huge names in the formulas,"
3178080,3183840," they tend to grow very big. And this is probably why mathematicians like to use single letters for"
3183840,3188400," like variables and stuff like that, even though like programmers really don't like that because"
3188400,3195360," it's not readable. But mathematicians like to do that because they're compacting a lot of information in"
3195360,3200720," small amount of space. Right. So the formula, the density of information in this mathematical formula"
3200720,3208000," is very huge. Uh, as in code, the density of information is actually more sparse. Right."
3208000,3213120," You know what I mean? Right. If you look at the code, uh, usually the, there's not that amount of"
3213120,3219600," information per measure unit of the screen, where if we're talking about mathematics, it's usually the"
3219600,3229040," density is like much bigger, um, for some reason. I wonder why. It's probably a historical thing because"
3229040,3235920," people were doing math much longer than they were doing programming. So they were doing math at the time"
3235920,3245760," when, for example, paper was extremely expensive. I think it's as, as simple as that. Right. Since people"
3245760,3251680," were doing math since the time when paper was expensive, they tried to design math around the"
3251680,3256880," price of paper, meaning that they were trying to squeeze as much information into, into the space,"
3256880,3261920," uh, physical space as possible. That's actually a very interesting idea because, because in code,"
3261920,3268560," like the, you know, the memory is cheap, right? The memory is cheap. Whereas the paper at the time"
3268560,3274240," when people were doing math very long time ago was, was not cheap. Right. That's why maybe the"
3274240,3280160," mathematical notation kind of evolve around the cost of the paper. Have, has anyone thought about that,"
3280160,3286240," by the way, that if the paper was cheaper, if the paper was cheaper, maybe the mathematical notation was"
3286240,3292080," different. That's a very interesting thought to think about. Like, I'm not sure if it's true or not,"
3292080,3297920," but has anyone actually thought about it or maybe did some, you know, investigation or research on that?"
3297920,3304720," Because that's really interesting because it makes sense, right? That's why math is so freaking dense,"
3304720,3312240," information dense. Uh, right. And then we sort of like, uh, inherited that annotation and that's,"
3312240,3319600," that's where we ended up. Um, so we're just saying I failed coach because"
3320640,3327440," the paper wasn't cheap enough. Yeah, exactly. That's what I'm saying. Um, also typing is faster"
3327440,3333280," than handwriting. Yeah, exactly. Because every time it's kind of interesting, every time I'm doing math,"
3333280,3340160," I already talked about that. I feel like instead of like actually solving some problem, I'm doing more of a"
3340160,3348160," space management on the paper, right? There's a huge aspect of space management management when you're"
3348160,3357440," writing down the formula. Right. Uh, Mathius F777, thank you so much for almost 50 months, 49 months of"
3357440,3375120," tier one subscription. Thank you, thank you, thank you, and you, you cannot all also copy paste in the paper. Yeah,"
3375120,3388240," that's another interesting thing. And also, yeah, I do agree. The math also have more freedom in how you"
3388240,3396080," place, uh, the symbols, right? So with code, you end up with two-dimensional grid. Uh, right. Uh, but"
3396080,3403680," in case of the math, in case of the math, you have two-dimensional continuous space rather than"
3403680,3418800," discrete one, right? In case of a code, you have a discrete space. Um, uh, so anyway, we made a little"
3418800,3432800," bit of a break. Uh, okay. So, yes, yes, yes, yes. Go by the free condition. So what I was talking about? Oh,"
3432800,3446480," yeah, line begin. Uh, okay, let's try to do that. Mm-hmm. So this is the, uh, uh, line end."
3449120,3466800," Okay, go. So what I want to do? Uh, now we need to compute the beginning of select, right? So we have"
3466800,3475440," line begin. Now we have to do select begin. Oh, man. And we have a difference in, yeah, okay. So we're"
3475440,3487760," starting to have like two things. Um, we have also selection measured in characters, right? Uh, line begin."
3487760,3488480," Okay, sure."
3491200,3504160," So we need to compute where it is going to end. Uh, select begin. Uh-huh. Right. Data. But we're gonna"
3504160,3519120," actually end it at select begin is already taken. Uh, select begin is already taken and it's in characters."
3523200,3535040," All right. All right. Let me think. What if we denote the measure unit? What if we denote the measure units with"
3535840,3554400," like a char? Right. So select and char. Uh, can we simplify that by replacing select"
3555600,3564240," begin with just as B right? Select begin character. And this is going to be SBC, right? Select begin character."
3564240,3574800," And this, uh, select and character, right? And we can have maybe, uh, select begin screen, select, um,"
3576720,3588480," select and, uh, uh, and we end up with more compact formulas. Right. Something like that. Right. And we're"
3588480,3598560," also going to have line begin characters, line end characters, line begin screen, uh, line end screen. Right."
3598560,3608000," So we can encode, uh, uh, these kinds of situations with like three characters, right? Um, maybe, maybe it's"
3608000,3620880," going to be too dense. Uh, maybe it's going to be too dense. So I'm not 100% sure. Not 100% sure."
3624240,3633280," Select begin character. You know what? For, for whoever is going to write or like read that code,"
3633280,3639200," I think it's going to be way better to actually spell out, uh, the whole names, right? So I think,"
3639200,3643760," I think I'm going to keep it like that. Okay. Let me go through the compilation errors and just like see"
3643760,3649200," how it's going to work out. So this is going to be character, um, character,"
3651920,3663440," character, character. It would be better if we just had swap, right? Size T. Like I wasn't sure"
3663440,3672320," if I want to have such a, such a thing like so. I can basically steal that swap from Olivet."
3672320,3680800," I think I'm going to go ahead and just steal it from Olivet. Um, so it is located somewhere here and"
3681520,3699200," all of it. Uh, and I can put that in a common dot H, right? So this is where like a, like a dumpster"
3699200,3706640," of all of the things. Uh, yes, yes, yes, yes. And here, I didn't even have to specify it as a pointer"
3706640,3715440," because it's like literally in line. Uh, right. So that's kind of cool. So I can do swap and just that"
3715440,3721280," and I can bring this entire thing. Okay. So we have select beginning character, select end character."
3721280,3727760," And if one is bigger than another, we just like, you know, uh, swap them, right? We swap this entire stuff."
3728480,3735520," Interestingly, this thing is only needed for the selection. So it makes sense to actually put it"
3735520,3740480," like under this condition, right? So we're going to put it under this condition."
3743600,3754480," Uh, alrighty, alrighty, alrighty, alrighty, alrighty. So edit the lines, uh, line begin, uh, screen. Though"
3754480,3760640," we kind of know that this is like characters, right? So this is like characters."
3763040,3772000," Maybe I'm going to actually say line char, which will force me to, uh, type line character begin,"
3772000,3778240," line character end. So the actual reference to these things, uh, has a character in the name,"
3778240,3786880," right? And here we have line begin screen, right? Okay. I think I kind of solved this problem,"
3786880,3792480," right? So now we can, we know for sure what kind of measure units we have, uh, since I'm already,"
3792480,3801600," um, how to say that, um, abbreviating character, maybe it makes sense for me to abbreviate screen as well,"
3801600,3807280," SCR. Uh, and if I abbreviate in this as SCR with three character, maybe it makes sense for me to"
3807280,3816720," abbreviate this as CHR, right? So we have characters and, uh, screens. Makes sense. So we're slowly designing"
3816720,3822800," the name for our variables, iteratively designing, right? And of course, we're using compiler-assisted"
3822800,3828560," refactoring to know all the places where we have to make the changes, right? So, uh, right."
3830080,3835520," We're not just, like, uh, pondering and thinking what kind of name we want to use for the, for the"
3835520,3842560," variable. We're designing, right? We're trying things, uh, and slowly, slowly, but carefully designing"
3842560,3850080," the names for the variables. That's what we do. Isn't it Pogue? They don't teach you that shit in the"
3850080,3859680," university, huh? Do they? Like, I'm pretty sure in the college and university, nobody actually has a"
3859680,3866320," course on how to name the variables. I'm teaching you that shit. I actually don't. I don't know what"
3866320,3871360," the fuck I'm doing, so don't listen to me. Anyway, so, um, let's continue."
3871360,3888800," Okay, so we have, um, line CHR, so that means we have begin CHR, uh, line begin CHR, line CHR, uh, line CHR end, select end,"
3889680,3901920," CHR. And line, uh, line begin screen, line end screen, right? So this is what we're going to do."
3901920,3919120," So, line, um, CHR begin, line CHR end, uh, line CHR begin, and line end screen, right?"
3919120,3932720," So here we do characters, but here we do the screen, right? So then we do screen, uh, screen, screen."
3932720,3943040," So maybe I'm also going to take this entire thing is do something like selection, uh, selection color,"
3943600,3952800," right? I'm going to put it in here and for F selection color is going to be something like this, right?"
3952800,3955840," Uh, okay, go."
3962480,3980080," Uh, line CHR select begin CHR select begin CHR select begin screen, uh, line begin screen, right?"
3980080,3985840," So this is a select begin, but we're starting with the line. Uh, all right. So then"
3987520,3995040," why the music is so loud and nobody told me, uh, I'm trying not to play music at all because it's"
3995040,3998160," copyrighted and shit. Um, all right."
4000560,4013360," So what we're going to have in here, so begin, um, line CHR, line CHR select, uh, screen."
4013360,4015520," So we have select begin. Okay. That's fine."
4017680,4034480," Uh, but we also do select begin CHR, right? So we know, yeah, cool. So the next thing I need to do,"
4034480,4043520," I need to do vec2f select and screen. But we start with the begin of the line"
4044640,4051680," and we do two calls in here, right? We do two calls in here, uh, and we're doing that with"
4051680,4059280," uh, I suppose and, uh, ooh, this one is rather interesting. Okay."
4059280,4067360," So because this is the amount of characters you wanna, you wanna render, this is how many, uh,"
4067360,4071040," right? If this thing is zero and you subtract this thing from here,"
4071840,4078640," um, it is gonna stay the same. So that means it's totally fine to subtract this entire stuff."
4078640,4086000," Right. And then we're gonna have select and screen. Uh-huh."
4086000,4099040," Okay. So I hope I didn't make a mistake anywhere, like a fucky-vucky and oopsie-adupsie, right? You know,"
4099040,4107520," the usual shit. Uh, so this is selection. Uh, I would like to maybe do something like this. Okay."
4107520,4121680," We are starting with this select begin screen and then we gonna take this select,"
4123760,4132880," select and screen X and then select begin screen X, find the difference and that's the width."
4132880,4138720," Uh, and then we're gonna take the height as the glyph, right? So that's basically the idea."
4138720,4150720," Uh, all right. And it feels like, um, all of these cases, all of these cases could be converged to this single case"
4151280,4158880," by clamping the select begin character and select end character to whatever is appropriate in there."
4158880,4169600," So this is exactly what I was talking about at the beginning, right? So I said that I'm pretty sure you can actually"
4169600,4176240," have fewer cases in here, but I don't know how to make that because I haven't implemented those cases."
4176240,4181920," As I started to implement those cases, it became obvious. Oh, that's how you can do that. Uh, maybe"
4181920,4188160," some people who work at Google as, you know, some sort of tech leads or something like that can see"
4188160,4194720," that ahead. But for me, since I'm a dumb Russian, right? For me, it's important to first implement"
4194720,4201600," and then go, ah, that's how it goes. And then I can compress this information, right? So I'm so dumb."
4201600,4207440," I first have to implement the code to understand how to improve the code, right?"
4209440,4211840," So, but, but maybe it's not going to work. We'll see. We'll see."
4211840,4225120," Um, okay. So select begin. So this also sort of disrupted this kind of things. Uh, select begin"
4225120,4235680," CHR, uh, CHR, CHR, CHR. All right. So this one is, uh, CHR, select begin CHR, CHR, CHR. Okay."
4235680,4250160," All right. All right. So hopefully that will, uh, do the trick. That's actually smoother than that. Okay."
4250720,4261600," It's sec folded. Yay. It is sec folded. Uh, actually went left. So what if I go right? Uh-huh. And then..."
4261600,4274000," Uh-huh. Well, um, okay. So we have to be careful in here. So let me quickly disable this case and see"
4274000,4281200," if I didn't make some fucky-wocky during refactoring. Uh, right."
4281200,4295920," Okay. So everything seems to be fine in here. So I made a specifically fucky-wocky, um,"
4296800,4301760," in that case, right, in this specific case in here. So let's actually enable it back."
4301760,4311680," Okay. So line begin screen. All right. Selection begin character. So we know for sure"
4311680,4322240," that this thing is that. We also know that this thing is less than this one. So we're totally saving here."
4322240,4332800," I don't see any mistakes in here. Uh, begin line character end. All right. So I advance this thing a"
4332800,4342400," little bit, but also effectively I'm subtracting some stuff. I don't see any mistake, uh, in here per se as"
4342400,4351040," well. Right. So I'm going to just enable this case. I'm going to just enable this case and see if it"
4351040,4354480," creates any problems. Let's see."
4354480,4362960," Interestingly, it's not supposed to even render anything, but it renders shit."
4367680,4380240," How, why does it render anything? Because I, yeah, I see."
4380240,4386320," I'm going to just keep doing that."
4386320,4395200," So yeah, we can see some shit. All right. I didn't see any problems in here. Maybe we have some problems in"
4395200,4406720," here. So then we have selection end. Right. So here's the editor data plus selection end character. Right."
4406720,4414240," So this is end character. Uh, line minus end. And this is probably where we have some problems."
4415280,4435280," So let me give it a try yet. It's going in an opposite direction."
4435280,4443120," It's going in an opposite direction, but I don't understand why."
4445280,4454160," I feel like I want to make another break. Yeah. I need to make another break."
4454160,4459200," So let's make a small break. Um, all right. So I have no idea what the fuck is going on."
4459200,4461040," Let's try to investigate."
4461040,4468000," So how do we render the entire thing?"
4469680,4474160," How do we render the entire thing? So let me, let me see."
4474160,4479200," We kind of append"
4479200,4488000," the position if I remember correctly. Right. So here's the position and we kind of like append the metrics."
4488000,4490880," Right. So we modify the metrics and stuff like that."
4492480,4504640," which means, right, that we should not, uh, reset, uh, select and screen to the beginning of the line."
4504640,4511520," We should not be doing that. We should be sort of continuing this entire thing. So this is where this"
4511520,4516560," entire thing ended. Uh, right. This is where this entire thing ended. And this is where we're going to"
4516560,4520000," continue doing that. Uh, right."
4520000,4536880," Hmm. Also, this denotes. Okay. I see. All right. The, the begin denotes how many characters you want to"
4536880,4546400," render from there. Okay. So that makes sense. This is how many of them you want to, uh, you want to render."
4547280,4553280," In fact, okay. So I, I messed that up completely. All right. So I feel like I'm getting tired. It's"
4553280,4560080," completely incorrect. Uh, so we're starting from here and begin is the amount of characters that you want to"
4560080,4568480," like jump ahead. Right. So this is how many you want to jump ahead. So after that, the second is"
4569840,4580960," select begin, say chart. So this is where you start, but the amount of those things is, uh, basically, uh,"
4582560,4591680," select and minus select begin, uh, minus select begin, uh, minus select begin, and then you continue."
4591680,4598160," That makes sense. I think. All right. So this is the entirety of the selection. We sort of continue,"
4598160,4606880," but from the big, okay. That is good. I think this is how it's going to go. All righty. Are we good?"
4606880,4610880," Are we Gucci? Are we Tamaguchi? Look at that."
4610880,4620000," Doop, doop, doop, doop, doop, doop. Holy fucking shit. We did it, bros and sisters."
4623600,4640320," Okay. So I can select this shirt like that, but I still can't select it like this. Okay. And this is"
4640320,4650720," where the idea, right. Of compressing all of these cases comes from. Right. So this is where the idea"
4650720,4657360," of compressing all of that shirt comes from. Can we essentially do something like this? If select"
4657360,4667680," begin, uh, begin CHR, begin CHR is less than, uh, the beginning of the line. If it's less than the"
4667680,4673600," beginning of the line, we're going to snap this mother flipper to the beginning of the line, right?"
4673600,4679360," We're snapping this to the beginning of the line. The same goes for the, uh, the selection and I'm really"
4679360,4684560," sorry. Like I programmed in modern programming languages lately where you don't put parentheses"
4684560,4692000," in if. So I developed like a little bit over, over, um, habit of not doing that. Right. And then we have"
4692000,4702560," line CHR end. If the selection is, selection and is greater selection and, uh, than that, we're going to be"
4702560,4711920," snapping it back to the end of the line. Right. And that basically covers all of these cases in here."
4711920,4722000," Excuse me. Right. It covers all of these cases in here. Uh, right. Like so."
4722000,4726960," And I'm pretty sure we don't need this entire stuff. So, but I'm going to keep it just in case,"
4726960,4733040," but I'm not, because I'm not 100% sure. Right. So I'm not 100% sure. There is some case"
4733040,4741920," which is kind of weird. Right. So there is some case. It's when, uh, the line has zero selection"
4741920,4752640," whatsoever. How is it going to work? Uh, for instance, um, we may end up. Okay. So the begin,"
4752640,4761520," let's imagine that the begin is way off, right? The begin is way off, uh, off of the line and, and,"
4761520,4770320," oh yeah, I can see why it may happen. I can see how and why it may happen. Uh, but it also, by the way,"
4770320,4777360," means that we have to do this thing on each iteration, right? We have to update this selection on each iteration."
4778800,4787920," Uh, right. So essentially we have some sort of a line. Uh, let's say we have, uh, seven A's"
4787920,4796560," and the beginning is located here and the end is located here. Okay. So we are on this line."
4796560,4802320," So according to this logic, if begin is less than begin of this line, we have to snap it back. We don't"
4802320,4811440," snap this thing. It stays beyond there. Uh, then if end is greater than the end of the line, we snap"
4811440,4819200," this end to the end, which effectively creates a situation when the end of the selection is smaller"
4819200,4825040," than the beginning of the selection, which is incorrect. And that could be an indication that"
4825040,4835040," there is no selection on this line, right? So if only select begin CHR is less or equal to the end of"
4835040,4844160," of this selection CHR, only then we should try to render the selection. Only then we try to render the"
4844160,4855200," the selection. Uh, all right. So yeah, that makes sense in my opinion. Um, all right. So maybe we should"
4855200,4863520," give it a try. Okay. Go. Uh, so it doesn't really work properly. Why did I call it selection? Select."
4865920,4872800," Why am I being verbose today? Why am I being verbose today? Oh, at least right now. Okay. So that should cover"
4872800,4877760," all of the cases. It doesn't. Okay. I wonder why."
4877760,4882560," Uh, so, and"
4882560,4888240," Interesting."
4888240,4894160," Interesting, interesting, interesting."
4896480,4899600," So, I'm really glad that I didn't kill this thing."
4899600,4911680," If this thing is greater. Well, I mean, it's basically the same, right? It is basically the same."
4911680,4921440," By the way, line is only used in here, right? So I'm going to keep it in here."
4923920,4932240," Line, CHR. Well, it is used in some of the places in here. So this is the selection color."
4947360,4953920," So this is the selection begin. And this is the selection end. If they're swapped around, which"
4953920,4960880," they could be, we swap them back, right? We swap them back. Then we take the boundaries of the line,"
4960880,4966400," right? The boundaries of the line. If the beginning of the selection is below the beginning, we snap it"
4966400,4975120," back to the beginning. If the end of the selection is above the end, we snap it back to the end, right?"
4975120,4983920," So we clamp all of that together. Again, this may result in a situation when begin becomes again greater"
4983920,4990000," than end. And in that case, we just don't render anything, right? We just ignore that. That is totally fine. Cool."
4990000,4992640," So then"
4995200,5000240," once we figure out select beginning CHR and select end CHR, we're starting to compute the"
5000240,5005680," the ends, right? So this is where it starts. I don't really use line begin screen"
5005680,5013920," very often. So I might as well just like inline the entire thing and think it's that important, right?"
5013920,5025200," then we are essentially data items. I'm an idiot."
5025200,5031120," Line begin."
5031120,5034320," Line begin."
5034320,5041920," Line CHR begin. That's very important. So"
5043120,5048720," because when we render... Yeah, so we actually do line beginning here. Yeah, I'm an idiot."
5048720,5054400," So this is where the line begins, right? This is where the line begins."
5054400,5056960," And"
5056960,5062080," the amount of characters we're doing here... Okay."
5062080,5069920," Yeah, that's a bit complicated, right? It's a bit complicated. It's a bit mind-bending, but"
5069920,5075840," I think it's doable. All right. So that could be it, actually."
5075840,5094400," And it works like a charm. Look at that. Chat, chat, look at that. Isn't that beautiful? I wonder if it's"
5094400,5104160," going to actually crash somewhere here, but no, it's not crashing. Yes, we have proper selection. That just works."
5104160,5107200," However, we won't."
5108320,5115440," And that is absolutely freaking poggers. Absolutely freaking poggers. Polish, that, that, that, that."
5115440,5123120," Cool."
5124160,5126640," So yeah, as I already mentioned, we managed to compress"
5126640,5133520," all of these four cases in here. It is not important. It is actually super easy to compress,"
5133520,5138640," but it was not obvious until I actually went ahead and tried to implement all of those things."
5140480,5145440," Right. So I wonder if there's any, like, overflows in here or anything like that. I think,"
5145440,5149600," I think that should be fine. I think that should be fine."
5149600,5156320," So the only thing that is left to implement is to actually, like, you know, when I press delete,"
5156320,5163280," just take the entire selection and just delete the whole text and recompute the lines and some other stuff."
5163280,5168080," But that could be done, you know, off screen because that's the easy part. The most difficult part in here"
5168080,5173840," was actually, you know, rendering all that stuff, right? Actually rendering all that stuff."
5173840,5175680," So let's actually try to"
5175680,5184720," maybe run it and open some of the existing files. Unfortunately, I can't really open the source code"
5184720,5192320," of the text editor itself. I wish I could, right? I wish I could open, but that requires to be able to go"
5192320,5199040," inside of the folders, but I can't go inside of the folders because I can't distinguish folders and files."
5199040,5206720," You know what I mean? Right. One of the things, if I do sdlk return, where is the return? So this is the file"
5206720,5214400," browser, right? So file browser, when I press return, right? So here we take the file path,"
5215120,5224640," and then we simply load the file, but if we could do something like this, if isdir, right? Something like file path"
5224640,5232880," isdir, I would have, I would like to do something like this."
5235680,5246480," So let me see the browser, file browser. So fb, so it says opendir."
5246480,5256640," Fb changedir, I would provide fb"
5258640,5265280," and file path. And it would actually go inside, right? It would actually go inside. I think that"
5265280,5270240," would be kind of cool. But first of all, I don't really know how to implement this thing in a cross"
5270240,5277360," platform way. I can simply use the POSIX API, but then it's not going to work on Windows. And it's not"
5277360,5281040," like it's easy to make it work on Windows anyway. Maybe you should just go ahead and"
5282000,5291440," just do that. But we'll see, we'll see. Right. So, but we always can do something like dead src. So I"
5291440,5301440," actually do dead src main.c. Right. And there we go. Here is the source code of the text editor itself."
5301440,5305840," Here is the source code. And we can take a look at this entire stuff."
5306400,5313040," And then we can select this entire set. Look at that. That's absolutely freaking poggers. I can go"
5313040,5320080," look at certain line. I might as well just maybe select something. I can select the cursor. I can't"
5320080,5325200," really do anything with that. Right. As you can see, I can't really do anything, but I can select things."
5325200,5330320," So that means I can do operations on a specific selection. That's pretty cool."
5331680,5338480," That is pretty freaking cool, my dude. Okay. So what do we have? I kind of want to get rid of the"
5338480,5343920," things that I put in here. All right. Sorry. Let me do."
5343920,5355440," Okay. Interestingly, it would be kind of cool to"
5357440,5361520," implement control A. Right. So select everything."
5361520,5366320," sdl key up. Right."
5366320,5375520," Revert. Okay. ssdl key A. All right. And we could check"
5379920,5394080," If event key, key, key sim mod, key mod, key mod ctrl, we could do the following thing."
5394080,5408160," Essentially enable the selection. Selection is equal to zero. Then"
5409920,5411900," select, select begin."
5411900,5416000," Equal. Well, I mean, it has to be true."
5416000,5426160," And the cursor has to be set to the end, I suppose. Right. So we'll have to take the editor data and"
5426160,5433680," take the count of this thing. But I'm not sure if I can just set the count. Well, I mean, if it's zero,"
5433680,5440560," it's not going to work properly. So let's give it a try. Let's actually try to open readme, like a rather"
5440560,5449040," small file, control A. And that didn't work. Probably because I didn't recompile. Probably because I didn't recompile."
5453920,5460720," There we go. So we selected everything. But it automatically goes down. You know what?"
5460720,5466720," So how is it going to work in the normie editor?"
5466720,5476800," Well, I mean, it's kind of... So in the normie editor, the view can be, the cursor can be below the view or"
5476800,5482160," something like that. It's kind of difficult to implement it with this editor, but I will think"
5482160,5494480," about that. In any case, let me commit whatever I have. Add support, add visual support for selections."
5494480,5499360," Right. So I'm going to do the actual operation and selections already off screen. Right. Because it's"
5499360,5504160," pretty trivial once you have this kind of stuff. Right. So the most difficult thing is to figure out how to"
5504160,5508720," properly select those things and stuff like that. It's actually super cool."
5508720,5518960," I really like that. And so the normie editors usually select everything up until the end of the line."
5518960,5527680," But I mean, this is fine. I think. I think this is fine. So we'll see. Let's see about that."
5529760,5536400," Isn't it a pogue? Isn't it a pogue? I think it's pretty freaking pogue. All right. Does anyone have any"
5536400,5543760," questions on topic questions before I go? You should rate somebody. Is anyone streaming anything epic today?"
5555680,5572240," So... I'm just waiting for my thing to open up? Nobody who I know actually streaming right now, so I'm not sure who to raid."
5572240,5582320," What happened to the file browser work? I already did the file browser stream. What are you talking about?"
5582320,5593760," Oh, Twitch is too slow. I just can't. I'm sorry, chat. I just can't. All right. So that's it for today."
5593760,5599600," Thanks everyone who's watching me right now. Really appreciate it. Have a good one. And I see you on the next stream."
5600560,5614800," Love you."
