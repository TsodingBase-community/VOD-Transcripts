start,end,text
240,5600," Hello everyone and welcome to yet another recreational programming session with Amista"
5600,9440," Zozin. So lately we've been programming in JavaScript and the reason is because"
9440,15840," that's the programming language of the future as you can notice. Like you don't even need C"
15840,21680," anymore, right? So you can do everything in in JavaScript these days, you may say that. Like"
21680,26160," how do you work with binary data and stuff like that? Well you can work with binary data in"
26160,33280," JavaScript, did you know that? Did you actually know that? Like you can do binary data and stuff like"
33280,39520," that. So in JavaScript as far as I know, so let's actually go somewhere in here, like I'm going to"
39520,46160," open some files, let's say like whatever TypeScript file that I have in here, right? So ignore the"
46160,51680," code doesn't really matter. So there's a thing here called array buffer, right? So this thing here called"
51680,56640," array buffer and if you take a look at this thing, it represents a row buffer of binary data which is"
56640,62880," used to store data for the different typed arrays. And what are typed arrays? So you have things like"
62880,72400," uint8 array. So you can have arrays of bytes. People have misconceptions that JavaScript is this"
72400,77360," toy scripting language that only has floats and stuff like that, but no, you can have array of"
77360,86560," uint bytes, right? uint8 like just like in C. You don't need C. You literally don't, like you have"
86560,92240," everything in JavaScript. Look at that. So then what about 32 bits? Like you can have uint32 array."
92240,97600," Look at that. So this is just like, you know, 32-bit integers. Like what about floats? You can install"
97600,104000," floats, right? Something like this. So, and there's a very interesting thing. So if array buffer"
104960,111680," is sort of like a buffer, right, where you actually store some bytes, you can actually view"
111680,117360," those bytes in different ways. And as far as I know, like uint8 arrays and u32 are basically different"
117360,122160," views on those arrays. And there is another cool abstraction in JavaScript. As far as I know,"
122160,129120," it's called data view, right? So it is called data view. And so it allows you to"
130080,137200," read different types like float32, float64 at different offsets and even different"
137200,145760," endianess. Yes, C developers, web devs are aware of endianess. What is endian? What is"
145760,152560," little endian and big endian? We don't need your low level languages. We have everything in our browser."
155600,164000," I'm so sorry. But anyway, so yeah, so you can work with binary data and stuff like that. And"
164000,170720," like, why the fuck do I need to even work with binary data in this toy script and language? Well,"
170720,177120," we're making a game, right? So we're making an online game, by the way, right? So let's actually run it."
177840,181040," So I'm going to do surf, right? I think I already compiled everything."
181040,188000," So yeah, so this is the thing that we're developing. And look at that. This is just a prototype, right?"
188000,194960," This is just a prototype just to test the idea of how we're going to be doing multiplayer stuff. So"
194960,200960," and essentially, you can open this website in a different tab. And that automatically creates the"
200960,205600," second player. You can't really see that because of my stupid camera and stuff like that. But here is the"
205600,209920," second player, right? So you can control the player in here, right? So I have a focus in here. And as you"
209920,216400," can see, it all gets synchronized perfectly between two tabs, right? It gets synchronized and stuff like"
216400,224080," that. And how many tabs you open, this is how many players you're going to have, right? So you can open"
224080,228880," another one and there will be a third player in here. You can't really see it, but it's like down there,"
228880,235920," right? So now we have three of them. So yeah, that's pretty cool. That's pretty cool. But the way"
235920,247680," it works, it sends JSONs, JSON messages, JSON objects over a WebSocket. And in fact, I have a feeling that"
247680,254640," it's a little bit wasteful. It's a tiny bit wasteful, right? So we can even try to estimate how wasteful it is."
254640,261120," So essentially here, I have a server running and it prints statistics every like, I think second"
261120,266800," or so, right? So it prints different statistics about how many messages were sent, like total,"
266800,273280," and then per tick, and how much time we take to process the tick and stuff like that. So let's"
273280,279200," actually open this entire game. Right, so we have one player right now. And I have a simple benchmark in"
279200,285680," here that allows me to spawn a bunch of bots, right, to sort of stress test this entire thing. So let's"
285680,292560," actually see how many bots I want to... Okay, so we have 30 of them. Let's actually run 30 bots. Right,"
292560,298160," so I'm starting the bots and that basically created a bunch of bots, as you can see. So they're just moving"
298160,303920," around and stuff like that. So it's basically, it connects, makes N connections, actually 30 connections,"
303920,308880," and just like creates players and move around. So then we can take a look at the statistics of the"
308880,317200," server. And look what is going, what is happening, right? So it sends for 30 players, right? So it sends"
317920,328240," like around 60, like 70 messages per tick, right? It receives like two or three messages per tick from"
328240,334400," all of these players, two or three per tick. But then it sends like a lot of data. And in terms of bytes,"
334400,341600," in terms of bytes, it sends like six kilobytes. Like the more players you have, the more data it will send"
341600,348240," out. And all of that is because the messages we send and receive are literal JSONs. And another thing"
348240,355680," in here is that JSON, like you need to parse JSON. You actually need to parse JSON. And as you parse the"
355680,363040," JSON, it also, it's really difficult to create a JSON parser that is memory efficient, right? So because"
363040,368720," it's a tree, right? So it's like all over the place in memory, and it's generally like slow and stuff like"
368720,377760," that, it would be better if we used like very efficient, very lean binary protocol instead of"
377760,383040," JSON. Especially when we're talking about real-time game, right? So it's better to actually send very"
383040,392240," small, very lean like binary messages, right? So and this is what I want to do today, right? This is what I"
392240,400240," want to do today. Instantly some web devs in the chat, or protobufs or protobufs. Like, have you seen protobuf?"
400240,408080," Like, it's a huge fucking dependency for something that you can code yourself. If you're not afraid of bytes."
408080,416560," Looks like somebody's afraid of bytes. Look at them. Look, they're afraid of bytes. They're afraid of bytes. We are"
416560,422240," real software developers. We're not afraid of bytes. We're not afraid to allocate our own array buffer."
422240,429280," We're not afraid to actually slap data view on it and set float32 and get float32. We're not afraid of that."
429280,437920," Get out with your protobuf. I'm joking. So like, again, we're not our protocol in all seriousness,"
437920,446640," right? So jokes aside. Jokes aside. I'm joking, by the way. So in all seriousness, protobuf is kind of a"
446640,453280," huge of a dependency for what we're about to do. Our protocol has like, how many messages? I think it"
453280,458240," has two or three messages. So first, you have a greeting message. It's the message that is sent by"
458240,463680," the server to the client when you join in. And it just contains the state of the player. Then you have"
463680,471120," player joined event. It's when somebody joins, we notify all of the players that somebody joined. And"
471120,475360," we also have a sync message that synchronizes the state of the player. So we have three messages."
475360,481600," And like, we don't need an entire protobuf just to serialize those three simple messages. We can do"
481600,490160," that ourselves manually. Like, it's no big deal. Like, this is something that C developers do all the time"
490160,495520," without any protobufs. Because again, they are not afraid of bytes. Okay?"
495520,506560," Don't be afraid of bytes. This is why, by the way, all of the modern software is"
506560,513200," fucking bloated shit. Because modern webs are just afraid of small silly little bytes."
515200,521280," they're just afraid of them. So that's, that's the, I found the root cause of the problem. I found the root"
521280,527280," cause of the problem. I'm afraid of being beaten by bytes. Okay."
533840,539520," But anyways, so yeah, let's go ahead and try to fucking do that. Wait, let's go ahead and try to"
539520,545600," fucking do that. Like I never really worked with binary protocols, web sockets and shise like that."
545600,553120," So I'm really curious what's going to happen if, for example, on the server, on the server, I will just"
553120,560560," send some binary shise into the player. Right. So let me see. So we have this kind of thing. So what I want to"
560560,566240," do actually, I want to do run watch mode. So basically I'm going to be starting TypeScript in"
566240,571760," the watch mode. So we're going to continuously recompile this entire step. Right. I'm going to"
571760,576240," start the server. I don't think I'm going to start the server. So, all right. So we have two components"
576240,581440," in the entire system, right? So we have a server component, right? So which just creates a WebSocket"
581440,586880," server. And then we have a client which runs in the browser and connects to the WebSocket server."
587680,593120," Let's go to the server and let's find where we're connecting. Okay. So here it is. Here's what we're"
593120,599040," doing. So this is basically an event when a client connects. You know what I want to do? You know what"
599040,604720," I want to do? I want to actually create array buffer in here. Right. So let's create array buffer."
604720,613040," And how do you construct an array buffer? So I think they have a separate constructor for that. Yeah. Okay."
613040,618560," So array buffer constructor and you supply the length and stuff like that. Okay. So let's actually send"
618560,624800," maybe four bytes. You insert it to four bytes, right? So I'm going to allocate the buffer in here. So this"
624800,632720," is going to be our buffer. So, and I suppose, I suppose, like I also need data view, right? So let's actually"
632720,640320," wrap that stuff with data view right away. So does it, is it even compatible? Okay. So here, as you can see,"
640320,649520," it accepts the buffer, which is buffer-like and also it intersects with bytes per element having type never."
649520,655360," So it means it doesn't, it doesn't have that thing or maybe, I don't know. So what is an array buffer like?"
655360,664320," Array buffer-like, it's one of the, it's okay. It's basically array buffer or something that can, you know,"
665520,671440," be converted to array buffer or something like that. So anyway, what can I do? Can I just set"
671440,680320," uint? Yeah, uint32. Here I can specify the byte of set. So let's actually say that we're going to be"
680320,687600," doing that at byte of set zero. So you can think of byte of sets as... pointers."
689760,697920," Wait a minute. You can have pointers and javascript? Oh, sorry. But I mean, the pointer is just,"
697920,699120," it's just a number, isn't it?"
699120,708960," Yeah, it's just an address in the memory. It is simply an address in the memory. And I can already"
708960,716160," hear, I can already hear all of the nerds screaming, no, it's actually not an address in memory. What"
716160,723520," about the pointer provenance? Okay, okay, okay. But thinking about them as an address in memory"
723520,729200," is a good abstraction, okay? I do understand that the reality is a little bit more complicated,"
729200,735040," but I mean, it's a good abstraction. This is literally the reason why pointers exist, because"
736000,740400," you need to have an additional information within an address, but you still want to think about"
740400,747280," this kind of stuff as an address, and thus we created an abstraction. So that's kind of the point."
747280,754960," That's kind of the point. You get what I'm saying? You get what I'm saying? Stop being a nerd, okay?"
754960,763440," Stop being a nerd. Okay, so says the guy that looks like a nerd, but anyway. And here, what we're"
763440,769840," gonna have in here? So we're gonna have a value. So let's actually do 69 for 20. And what's interesting"
769840,777360," is that little endian is an optional value all of a sudden. So if false or undefined big endian..."
777360,788000," Isn't the majority machines on planet Earth right now are little endian? Or am I missing something?"
789760,795920," Like, am I missing something? Is the majority of machines on planet Earth right now are little endian?"
795920,798800," Oh, network byte order. Okay, so..."
798800,805840," All right, so..."
805840,814080," Okay, so I'm gonna say explicitly little endian, right? So we're gonna be using little endian. Is the network..."
814080,818160," Yeah, I forgot that network communication is big ending, right? I completely forgot about that. You see,"
818160,821760," I'm not a network engineer. I'm just not a network engineer, so..."
821760,832480," All right, so we set some stuff in here. And I suppose the only thing I want to do in here is just to send"
832480,838880," this entire shit to the player. And maybe just close the circuit right away and just like return, right?"
838880,844960," So I just want to test some things, right? So I just want to test something. So obviously that breaks the game, but that's fine."
844960,847680," We're totally fine with that. We're here to break shit."
847680,857680," So when I send things, I can send things like buffer like and here are all of the things that I can send in here and that in fact includes array buffer."
858480,864480," Okay, so that's pretty cool. Let me now open this entire thing and it doesn't even open because we don't"
864480,869120," really have the server. So let's actually serve this entire thing."
869120,875440," Let's actually serve. So let me open this entire stuff and it is disconnected obviously, right?"
875440,880560," So because we just sent something that the client didn't expect, but hopefully it actually logged."
880560,888160," Okay, look at that. So this is the most JavaScript error message ever."
888160,895280," Only JavaScript can throw this kind of message. Like, yeah. Anyways."
895280,900080," Right. So let's actually go into the client."
901760,906400," Client MTS. Right. So where do we accept the messages?"
906400,908720," Where do we accept the messages?"
908720,916640," Yeah. So essentially I just did parse. So yeah, it converted this thing to a string and then"
916640,923440," passed it to JSON parse. And now we then we verify this is a correct message and stuff like that. So everything's fine."
923440,926640," So let me try to do the following thing. I'm going to try to do console."
927680,932560," event data and then I'm going to just right away, you know, return out of that."
932560,936400," So we're currently on the client. We're currently on the client. So let me refresh this into anything."
936400,941760," And we got a blob. Look at that. We get a motherfucking blob with four bytes."
941760,947840," Bites. Bites. Bites. Bites. Bites."
947840,954080," So we have array buffer. How can I take the bytes out of the motherfucking blob?"
955040,961360," How can I even take that? So, um, if I take a look at the data. Oh, it's T."
961360,966080," So returns data or the message and T is any."
966080,975280," That is sus. So it doesn't even specify in TypeScript typings"
975280,978640," that, uh, like what kind of thing it could be."
978640,981440," Right. It doesn't even specify what kind of thing it could be."
982080,988320," Um, right. So data property. Value sent by message. This can be any data type depending on what"
988320,990400," originated this event."
990400,999040," These fucking web devs don't even know themselves. It's just, yeah, it's whatever. It's just like,"
999040,1000720," it will send you something."
1000720,1007920," No fucking wonder. All of these web applications are so goddamn fucking broken because these web devs"
1007920,1013680," don't even know what goes where they don't even fucking, well, it's just, well, excuse something."
1013680,1018480," It depends. It's just like what server sent. I don't fucking know."
1018480,1020720," I'm a web dev."
1023680,1030880," Okay. So we can assume that this is basically like a blob, right? So it's going to be a blob."
1030880,1033680," Uh, right."
1033680,1042320," Uh, flip-flop glazing.js to hating.js duality of this man. This is the point because it doesn't"
1042320,1048560," fucking matter. All of your tech tribalism is bullshit and none of that is fucking matters."
1049440,1056720," Right. Your job as a software engineer is to fucking solve the problems regardless of the language,"
1056720,1063520," regardless of the stack. Right. And a flip-flop between these two things to show you the"
1063520,1072560," how stupid it all is. It's fucking stupid. Your job as a software engineer is to solve fucking problems."
1073280,1080000," That's what it is. Right. And programming is programming, right? So like an actual professional"
1080000,1085040," programmer should not be afraid of C. They should not be afraid of JavaScript. They should not be afraid"
1085040,1090400," of Java. They should not be afraid of Haskell. They should not be afraid of C#. That's what being software"
1090400,1099840," engineer is. This hyper-specialization. Hyper-specialization. I think, like I have a hypothesis. It's basically"
1099840,1107040," to create more bullshit job in Silicon Valley, I think. Right. So like, I don't know why people"
1107040,1114000," so hyper-fucking-specializing. Right. On web dev. I'm a web dev now. What's next? Let's hyper-specialize"
1114000,1121040," even more. I'm a if-else-statement dev. Right. Like, I don't know for loops. I never studied"
1121040,1128960," them in university. I only studied if-else. I'm a senior if-else engineer. Like, that's fucking stupid."
1128960,1133440," That's fucking stupid. That's what it is."
1137920,1151680," So let's continue. And like, I literally don't care about JavaScript. Neither do I care about C."
1151680,1158320," And neither do I care which language is the best. I'm just making fun of these tribalist people. Like,"
1158320,1166000," I'm just making fun of them. That's me making fun of all of them. Right. And you know what, when it gets"
1166000,1171680," funnier? When people get tricked into thinking that I'm like, I'm in the opposite tribe. Oh,"
1171680,1175920," he's a fucking JavaScript hater. Oh, I'm going to defend JavaScript right now. I'm going to defend"
1175920,1183600," JavaScript. It's just like, so fucking funny. It's just like, holy shit. Like, I don't give a"
1183600,1189280," shit."
1189280,1197840," It's like, yeah, defending brand. It's almost like defending brand. It does feel like defending brands,"
1197840,1204960," honestly. It does feel like it. All right. So let me see. Let me see. So we've got some data."
1205520,1211680," Uh, how can I do the blob size? Um, so we have a ray buffer. Promise?"
1211680,1215920," Are you fucking serious?"
1215920,1223840," Well, I mean, it kind of makes sense, I suppose. If, if the blob is big, um, you, you want to do that"
1223840,1231040," asynchronously, I suppose. But I mean, you still receive it as a one single thing at a time. And when"
1231040,1240560," you receive a string, you don't have a, this is bizarre, my friend. Uh, right. That is a bizarre,"
1240560,1244960," but anyway, so what I want to do, I want to actually try to do something like, uh, type of,"
1244960,1251920," right. So I just want to see if I can, uh, you know, distinguish between different kinds of messages"
1251920,1257600," by type of, right. So let's actually see. Ah, fuck it. Object. I was hoping that it's going to be"
1257600,1262560," something like blob. So it's probably some sort of a class. So I probably can do something like an"
1262560,1270240," instance of blob. Um, all right. So instance of, okay. So this is true. So this is basically what"
1270240,1277920," we can use in here. Uh, right. So we can even do some stuff like if this thing is a blob, uh, right."
1277920,1282800," We handle it in a certain way. If it's something else, if it's a string, we handle it in a different way."
1282800,1289040," So, and that's, I suppose, how the developers expected us to, to handle this data, right."
1289040,1292640," So depending on what you receive from the server, right, depending on what you receive from the"
1292640,1298000," server, you're going to just do if instance of that, or if type of that and so on and so on and so forth."
1298000,1306640," Right. So that's how it was expected to work. I think, I think anyway, so, uh, data array buffer."
1307280,1312560," Uh, so we're taking the array buffer and I suppose this thing has to be the asynchronous thing and it"
1312560,1317680," has to be a weight. All right. So, and then we're going to just take it above. There we go. So we've"
1317680,1325920," got the buffer. So then I'm going to just bring this entire thing. So let's go. Let's go. Uh, so yeah,"
1325920,1332000," there we go. We've got array buffer. And do we have the bytes? I think we can interpret this thing as,"
1332000,1342160," yeah, look at that. Look at that. So 44, 15, and one. We can try to manually recover that. Can we try to"
1342160,1350640," manually recover that? 44. So this is the least, uh, least significant bytes, right? So that means, uh, 44 plus 15,"
1350640,1363280," multiplying by 255 and plus one multiply by 255, 255. Uh, almost. Oh, actually six. I think it has to be six."
1363280,1371280," Yeah. There we go. Look at that. Look at that. I'm not afraid of bytes. I can recover by representation of you in 32."
1374640,1383280," So, yes, I can do that. I'm not afraid of bytes, unlike those web developers."
1383280,1397200," Anyways. Uh, now, uh, right. So how can I do that? So can I construct something like a new data view,"
1397200,1403920," right? So this is going to be some sort of a data view. And can I now, uh, do view get"
1405120,1415120," you in 32, right? So add a particular offset, right? So zero true. Uh, and that is going to be"
1415120,1419040," the case. Can I even do something like that? I think, I think I should be able to do it like that."
1419040,1429200," Yeah. There we go. So we just sent, uh, 69 for 20, uh, as a raw data over web circuit."
1430160,1436400," That's what we just did. And what's interesting is that we send it as a four bytes. 69 for 20 takes"
1436400,1446080," five bytes. We saved one byte. We saved one byte. Can your Jason do that?"
1446880,1451440," All the Jason deaths are in shambles right now. Fuck Jason."
1451440,1464000," Anyways. Jason deaths are inferior to C deaths. Yes, it is C versus Jason."
1467920,1474880," C is the future. Jason is out. Fuckin' out. Um, so"
1474880,1486640," now we can set some binary data. So now we can actually, uh, try to pack like structures and send"
1486640,1492240," them like with bytes and stuff like that. So essentially, uh, how a hello message looks like,"
1492880,1500240," uh, let, let me see, let me see. So we take a look at the interface. Uh, hello. Right. We can just try to"
1500240,1507360," encode, uh, all of these fields, um, in binary. So for example, for kind, we can allocate a single byte."
1507360,1512880," Right. We can try to do something like this. So let me see. So essentially we can say, okay,"
1512880,1518480," kind is going to be you int eight. So it's going to be one byte. So you receive some sort of a blob,"
1518480,1524400," right. You receive some sort of a blob. You look at the first byte of the blob. And then depending on"
1524400,1530640," the number in there, uh, you know what kind of structure it is, right? What's interesting is that"
1530640,1536080," you may also have, you also know the size of the structure effectively, right? And as soon as you"
1536080,1542240," identify the kind of the structure, you can verify that the size of the structure is correct. Right. So"
1542240,1549040," because this is the kind of information I expect to know. Uh, so afterwards, uh, we have ID and for ID"
1549040,1553920," of the player, I expect to maybe use you int 32. I think that's the reasonable thing to use in here."
1553920,1559120," So then we're going to have another four bytes. Let's say it's going to be float 32."
1559120,1565920," Then another float 32. Uh, and here we, uh, we have a hue. I used to actually send"
1567360,1574480," um, a style, right? And then style entire CSS style. So this was a string, but then I change it to, um,"
1574480,1581840," to a number, which is a hue in HSL, right? Hue, saturation, lightness, or luminance, or whatever"
1581840,1587760," the packet is. It doesn't matter. Right. Why I change it like that? Because on the client,"
1587760,1596240," I want to be able to modify the saturation and value of that color. So the idea is that, uh, right? So"
1596240,1604320," the player is brighter and more saturated than the rest of the player. So it stands out. So one of the"
1604320,1610000," problems with this kind of demo we had is that, uh, the player doesn't really stand out and it's very"
1610000,1614560," difficult to see yourself in the crowd. I can probably demonstrate that. So let's actually go ahead and do"
1614560,1622800," that. Uh, so hopefully that recompiled and let's actually serve this entire thing. So maybe I can"
1622800,1631520," even start some bots, right? Run bots. Uh, let me rephrase this entire thing. And there we go. So as you"
1631520,1637920," can see, we have a lot of people in here and what I do in here is just like, I dim the rest of the bots"
1637920,1643280," a little bit and I make the player a little bit more saturated. And also I put like a frame around them."
1643280,1651600," So because of that, uh, we only assign hue to the player and saturation and luminance is something"
1651600,1659120," that is customizable depending on visualization and representation. So you know what I mean? You know what"
1659120,1669440," I mean? So now it is a number, which is a value from zero to 360. Uh, right. And, uh, yeah, so, and that is,"
1669440,1678160," since it's a value from zero to 260, I think we can allocate a single byte to that. I know that 360 is"
1678160,1683760," more than a single byte, but we can actually normalize it to just, uh, value from zero to 255,"
1683760,1689920," right? So we can take a range from zero to 360 and map it to a range to zero to 255, right? No big deal."
1690640,1696160," Uh, we're going to probably lose a little bit of precision, but I don't think the human eye is going"
1696160,1701520," to notice that much. And I don't think even if they notice that it's not going to matter that much either."
1701520,1709520," So anyways, uh, let's actually bring back this stuff in here, uh, and let me revert this entire thing."
1709520,1717760," There we go. So we're going to have a hue, which is a uint8. And what's interesting is that it's almost"
1717760,1725440," aligned, right? So this is four bytes. This is four bytes. This is four bytes. These two things together"
1725440,1732880," form two bytes. So to pad things around, we can even add something like a pad uint16 or something,"
1732880,1738800," but I don't think I'm going to do that, right? So, uh, and yeah, so it can be even aligned if we want to."
1738800,1746160," So this is a single message, right? So this is a single message and maybe we can even, uh, implement"
1746160,1752800," something like batching of the messages, right? So instead of like sending one message per time,"
1752800,1758000," in the future, we can actually have several of them, right? So they, they, they sort of like go"
1758000,1764960," continuously in memory. And the first thing that you have in here is more like a, like a count,"
1764960,1772720," right? So, which is a uint32. So we batch them up, we batch them up. And then how do you parse them?"
1772720,1779840," Right? So you look at the next byte after the four bytes of the count, right? You like identify the kind,"
1779840,1784560," parse this message, go to the next one. And since you know the count, you kind of know how many of them"
1784560,1790240," you, you can expect, right? So we can think about whether the, each message has to have the same"
1790240,1796080," size and bytes, or they could be various, like, like the size can vary, but I don't think it matters"
1796080,1803040," that much right now. Right? So we can think about that, but I think, uh, varying the, uh, varying the size"
1803040,1808480," of the messages is not that critical, right? So it doesn't have to be like a super perfectly aligned"
1808480,1812400," in my opinion, right? So at least for what we're trying to do, we're trying to reduce the amount of data."
1813600,1827840," So, um, so I know you won't need to, but what if you wanted to send a string, how would you do that?"
1827840,1834880," Uh, I suppose like it's, I mean, I don't know, size, it's a size string, the string bytes."
1841920,1848480," We can employ some sort of way to encode different sizes. Uh, so essentially, for example, what if your"
1848480,1856320," string is very small and its size is 255? Right? So there are different ways to encode this sort of"
1856320,1866800," count. If the count is below 255 or actually, uh, like 127, we're using one bytes. If it's more than 127,"
1866800,1873520," we use two bytes and there's different ways to encode it. So essentially, um, you can slowly grow"
1873520,1880960," the amount of memory you consume for the counter depending on the size of the counter."
1880960,1887360," Like, I don't know any schemes off the top of my head, but I remember seeing some of them in"
1887360,1892800," WebSocket implementation. WebSocket, as far as you know, employs some of these things, I think."
1892800,1899680," Um, right. Also, I remember seeing similar schemes in BIM virtual machine implementation. So there is a,"
1899680,1905440," you know, there is options that I can pick from. Right? So it's, it's not particularly like a, you know,"
1905440,1910320," novel idea. A lot of people implemented it before. Right? But I don't think I need it right now. So"
1912080,1918960," uh, anyways, uh, anyways, anyways, anyways, anyways, so we want to do something like this and I wonder"
1918960,1927040," what can I do? So let me maybe grab this entire thing. I kind of want to go to the server. So let's"
1927040,1936080," go to the server, server MTS, uh, and this is where we send in this choice. Um, what I'm thinking, chat,"
1936880,1943120," let's try when you send in the message. Hello, where do we send the message? Hello."
1943120,1952080," Uh, right. So this is where we send in the message. Hello. Cool. Um, incentive instead of sending that"
1952080,1959520," message, can we just send a binary version of hello? I think that's an interesting idea. So"
1960800,1972320," first of all, we can say that we have kind, right? So this is basically kind, uh, then here it is."
1972320,1979040," We have ID, which is four bytes, right? So this is going to be ID. Uh, I think I want to bring this"
1979040,1986960," thing a little bit closer and I don't want to use comma. It's actually plus. That's what I wanted to use."
1987680,1997920," So then, uh, we're going to have X, which is, I mean, it's four X, uh, Y, and this is one hue,"
1997920,2004800," right? So this is one hue. There we go. So we're allocating the buffer. Uh, right. And now we need to"
2004800,2011920," uh, basically set all of these values in here. Uh, do you have enumerations in, it's still going,"
2011920,2017840," by the way, probably need to kill. Um, right. Type script, like enumerations, but number enumerations,"
2017840,2025360," right? So type script, uh, type script in nums. There's some sort of in nums. There should be some"
2025360,2032320," sort of in nums. Uh, all right. So I hope it's not like, you know, string, but okay. So you can have"
2032320,2038240," enumerations. That's pretty cool. Uh, and I suppose the number base and stuff like that. So we can probably"
2039280,2048400," introduce something in here. Uh, for instance, we can do enum, uh, message kind, right? So in here,"
2048400,2054080," we can have hello for now, right? So we can have hello. I'm actually really curious, uh, what does"
2054080,2062160," it get compiles to? What does it get compiled to? So let's take a look at MGS. And, uh, so does it do"
2062160,2071840," compile to anything? So message kind. Jesus. So this is what enumeration got compiled to. Uh, let me take"
2071840,2078880," a look at the JS mode. So I suppose what it did, it created like a separate namespace. So you can just,"
2079600,2086240," yeah, you can just have the center, I think, uh, let me see if I put this stuff in here,"
2086240,2093600," message kind is not defined. Uh, I suppose this is what you want to have, right? So yeah, there we go."
2093600,2104880," So message kind, ah, that's very interesting. So you can do, so by knowing the value, you can take the name"
2105600,2112880," and by knowing the name, you can, oh, okay. That's actually pretty cool. It's almost like,"
2112880,2118240," like C enumerations or something, right? I think, I think it's like C enumerations. Uh, right. But that's"
2118240,2123360," fine. That's fine. So this is what we're going to have. Can I, so they say that you can assign things"
2123360,2130240," in here, right? So does it get translated properly? Oh, look at this. It's actually, it's actually 69."
2130240,2141840," Good. Okay. So, okay. Proper enumerations. Um, very, very cool. Um, so now in the server,"
2141840,2148800," in the server, what I want to do, I want to set you int eight at offset zero. And the value I'm going"
2148800,2156560," is going to set in here is going to be message. Uh, I set message kind message. Yeah. Message kind."
2156560,2169200," Hello. Cool. So buffer set, uh, you in 32 and it's actually at one. Um, so in the value is going to be,"
2169200,2177920," so this is ID. I have to take the joint player ID. So this is kind of a S thing to do. And obviously I want to"
2177920,2185200," actually do a little ending. So can I employ, can I employ the trick that I invented in."
2185200,2194720," You know what I'm talking about? You know what I'm talking about? The trick that I employed in."
2194720,2206880," So essentially the ID is have some sort of, uh, IOTA. So, and I employ that trick in port, but"
2206880,2213760," uh, I stole that from goal. Um, so, and essentially what I want to have. So I have IOTA and then I say,"
2213760,2223680," okay, so I have kind of set and kind of set is equal to IOTA. And then IOTA plus the size of the field."
2223680,2233600," Right. Okay. That's pretty cool. So the next field I have in here, ID field. So it's equal to, uh, IOTA."
2233600,2241760," IOTA plus the size of the field. So IOTA, uh, I think it's pronounced like IOTA, but in Go,"
2241760,2244560," if you Google up IOTA, uh, it's sort of like a special,"
2244560,2254560," special, uh, variable for defining enumerations. Um, right. So you can read more about this thing in"
2254560,2262080," here. So I think, I'm not sure if it's a good example, but essentially, um, yeah. So there's a"
2262080,2270640," spec in here. Uh, so it's a pretty big spec. So within the constant declaration, the pre-declared"
2270640,2279440," identifiers IOTA represents successive untyped integer constants, right? So essentially, look at that."
2279440,2286720," Uh, you define C0, C1, uh, I tried to increase the, the scale in it actually so goddamn fucking slow"
2286720,2293840," because it's a huge fucking page. Okay. Look at that. So you just define this as a constant declaration. So"
2293840,2301440," you're defining a bunch of constants, right? So you define C0 equal IOTA, C1 equal IOTA, C2 equal IOTA."
2301440,2308080," And it's kind of weird. Like you define it as the same thing, but look at that. It gets incremented."
2308080,2315520," So it's a variable that gets incremented at compile time. So you can define enumerations,"
2316400,2322640," right? And you can even specify sort of like this step with which you're incrementing and stuff like"
2322640,2328320," that. Right. So it's basically that, uh, I think I'm going to put that stuff in here. And for people"
2328320,2336400," on YouTube, I'm going to actually put that in the description, your name, right? So, and, uh, I use a"
2336400,2343280," similar idea in port and it's actually really funny that you can use the same idea at runtime, right? So here"
2343280,2349600," I have IOTA, uh, and, uh, I just like use its value and then incremented by the size of the field."
2349600,2358560," So a sort of at runtime define a C structure. So that's what I'm doing here. I'm defining a C structure."
2358560,2366720," Uh, right. So in here we can do X offset. So this is going to be that. Uh, and what's funny is that you"
2366720,2375440," you can go further and you can say something like you int eight size, which is one, then you int 32,"
2375440,2384160," which is four, and then, uh, float 32, which is four. And then you kind of define a field."
2384160,2391440," So you define the offset of the field and the name of the field and its type, right? You kind of like"
2391440,2399920," simulating definition of, uh, the C structures actually, right? That's kind of cool. So you can,"
2399920,2406880," you can do something like that. Uh, right. So you can have X, then Y, uh, and then we're going to have"
2406880,2412560," a hue and hue is going to be just, uh, u int. And by the way, X and Y has to be actually float."
2412560,2419680," It has to be actually float. Uh, right. So this is the float. And what's funny is that now"
2419680,2426320," you can say that the size is equal to Yota. Yota now contains the size."
2426320,2434560," It contains size now. All right. So that means you can just, uh, do something like this."
2436640,2442000," And you can change the order of the fields. You can change the order of the fields of sets,"
2442000,2447120," like will be updated. And, uh, you can add more things in here and the size is going to be updated."
2447120,2450880," So this is basically a definition of a C structure in JavaScript."
2450880,2459360," Uh, he's writing C in JS. That's exactly what I'm talking about. That's exactly what I'm talking about."
2459360,2464080," People stop learning languages, start learning programming and how computers work."
2464960,2466640," This is exactly what I'm talking about."
2466640,2476080," Sorry. But now I can just like use this motherfucking offsets, right? Like that."
2476080,2481040," And I don't have to worry about specific numbers and choice. Look at that. Look at that. Look at that."
2481040,2484880," Look at that. Look at that."
2484880,2494240," Okay. That's pretty cool. Uh, so now we can do some other things like a float, uh, 32. So this float 32 also works, right?"
2494240,2499920," So here's the offset and this is X offset and this is going to be basically X, right? So this is going"
2499920,2506560," to be Y and this is Y and this one is going to be Uint. So the only problem that I see in here is that"
2506560,2512480," like you should be really careful with what methods you use on a data view, right? Because"
2513520,2521440," yeah. So we don't really know the type of things. We don't really know the type of this thing. So it's"
2521440,2530400," kind of, it's kind of dangerous to do it like that. But anyway, so here we send hello, uh, here we send hello."
2530400,2536240," And that seems to be working. Does it even compile? Let's actually find out if it compiles or not. It doesn't"
2536240,2541680," in fact compile. No, it doesn't compile because we have 10 errors and shit. Okay. So this is what we"
2541680,2550960," sending, uh, instead of like, hello. Um, and by the way, so let's actually not close anything."
2550960,2556960," After we send the message, we can specify how many bytes we sent, right? So we know exactly how many bytes"
2556960,2563200," we sent, uh, right? So because I think you even have like a, yeah, byte length, right? You can do that."
2563200,2569680," And message counters in terms of the messages, we send only one message, right? So there we go. We can"
2569680,2579680," now remove this entire thing in here. So we kind of ported one, uh, json message, one json message to, uh, to that."
2581520,2588880," Uh, so this one has to be here. Yeah. Yeah. Whatever. Uh, all right. So let me, let me think."
2588880,2600320," Uh, now let's try to run. Okay. So what's funny is that you don't need little engine for this thing,"
2600320,2606400," because it's a single byte. Endiness only makes sense when you, uh, have several bytes. Okay. Let's"
2606400,2613680," actually see how a client is going to react to that. Uh, so are you okay? Are you still, are you still?"
2613680,2627200," Yep. It's taking some time because it's super hot right now. Um, all right. So 260. I didn't save. Okay."
2627200,2638320," So that's fine. Uh, so yeah, this thing is a player. Uh, where was the socket through which we were"
2638320,2647760," sending stuff? So it was a joint player. Okay. Uh, so this one is a joint player. So AWS and we just send"
2647760,2655680," things. Okay. That's cool. Uh, so now let me restart the server, right? So we're starting the server and what's the"
2656320,2662400," current client situation. So currently, yeah, we're just receiving something and we just returning."
2662400,2670320," So let's actually not do that. Let's actually not do that. Uh, okay. Let me now open this thing and it"
2670320,2678000," fails as far as I can tell. Right. So it fails. Let's take a look at the dev tools. Yeah. So it, it cannot"
2678000,2685280," parse the blob, which is fine. Okay. So on the client, on the client, what do we have? We have two states."
2685280,2692960," When me is undefined and when me is defined. Me is undefined when we connected, but the server hasn't"
2692960,2701680," greeted us yet. It hasn't sent, uh, the hello message where it contains the ID of us, our position and stuff"
2701680,2709520," like that. So, and I suppose when we are in that state, we right now expect JSON. What we have to expect"
2709520,2718320," instead is a blob. Right. So the thing I want to do in here is probably say, okay, if event data instance"
2718320,2727520," of blob, only then we're going to be doing all of that stuff in here. Right. If it's not a blob, uh,"
2727520,2733440," so this, the only message that we handle in here is hello. So I suppose we're going to expect only binary"
2733440,2740240," messages in here. And if the message is not binary, let's say that we received bogus amogus message from"
2740240,2749120," the server. Right. So, uh, expected binary data, something like this. Makes sense. Makes sense."
2749120,2758160," Okay. So we received bogus amogus. So, and in here, yes. So this is what we have and we can start parsing"
2758160,2764320," this entire thing. Uh, interestingly, like I want to have an access to all of these things"
2764320,2771440," in a client as well. So that means I need to move that definition to the common module."
2773360,2781200," I wonder if I can collect this entire thing to, to an object. Right. Because it's too, like too many,"
2781200,2791040," small little things. Uh, all right. And I wonder if I can just do something like const, uh, hello struct."
2791040,2797200," Right. So, and just like make it like that, if you know what I'm talking about. And I think I will be able"
2797200,2805760," to easily do it like that. Um, I think I'll be able to easily do it like that. So this one is not particularly"
2805760,2815040," convenient. I wonder if I can like kind of wrap all of that into its own separate function where I could"
2815040,2826800," have I like yota, uh, and simply like return this object in here. And obviously then I want to call this"
2826800,2833680," function. So it's sort of like a blog, uh, from which I can return things. So this one is not particularly"
2833680,2842560," convenient. So like I could do something like this. Um, maybe I can do"
2842560,2852000," like a log size. Let's say this is going to be a function. So it's a log size."
2853920,2865600," and so we can say offset yota yota plus size return offset."
2865600,2870960," So now can I just do something like this?"
2878640,2889280," So this is the size of this thing. And obviously we want to rename semicolons with comma."
2889280,2899120," This comma. Know what I'm talking about chat? You know what I'm talking about? Right. So it's just like,"
2899120,2912160," it's now like an object. It's now like an object. ID offset. No, it doesn't. How on earth this modifies"
2912160,2920400," yota? We need to modify yota. That does not modify it. We need to modify it and return its previous value."
2920400,2925760," So no, the answer is no, it doesn't work like you think it does."
2926720,2935120," Um, right. So something like this. And I suppose now, uh, we are going to do this kind of thing."
2935120,2946000," So hello struct, uh, and hello struct. Uh huh. So that seems to be compiling. So in here we can say hello"
2946000,2952720," struct size. This is actually super convenient, right? So because the, the struct also kind of"
2952720,2956560," contains it contains its own sizes. So what do you complain about in here? What do you complain about?"
2956560,2967360," Uh, yeah. So this is, okay. So that's cool. That's cool. Uh, hello struct. Hello struct."
2967360,2970480," Hello struct."
2970480,2980720," So now I suppose one of the things we can do, we can even just move that shit to common. So we can share the"
2980720,2991200," chat between fucking stuff. Um, so Iota plus would work."
2991200,2997680," I don't think it works because plus equals returns the new value, but I need to return the previous one."
2997680,2998880," That's the problem in here."
3002880,3011760," There is a reason why I first save offset then increment and return the old value because that's what I need to do."
3011760,3015760," I need something an equivalent of post increment, but for plus equals."
3015760,3024640," So, uh, it doesn't matter in, in the grand scheme of things because it's already solved problem."
3027200,3034560," I already solved it. I already solved it. I already solved the chat. Calm down. Calm down. I already solved it."
3034560,3049200," Okay. So what do we have in here? Uh, let me export this into, I think, let me export this into, I think. So, and in here, um, okay. Can I just do something like a common or do I have to do something else?"
3050320,3056560," Oh, but it works. Okay. So that means I can, uh, I can do something like that. So common hello struct."
3056560,3065280," Okay. So that's pretty cool. Um, so I think I'm going to even move, uh, this entire thing."
3068320,3072720," Why suddenly no camel case to dab on a camel case tribe."
3072720,3077840," So, um,"
3077840,3082640," now let me see."
3082640,3089600," Okay. So now here's an important thing. We have an access to this choice."
3089600,3097200," Real programs are not afraid of snake case. Exactly. We're not a soy devs in here. We're not a soy devs."
3098080,3107680," Um, so in here, right. So now we should be able to access those things from here, which is nice, which is nice."
3107680,3120160," So this is the blob. This is the blob and I can do event data array, a buffer array buffer. And this"
3120160,3126320," is going to be something like that. So this is the array buffer. And obviously it's, I hated that it's"
3127680,3130000," Wait, is it going to even work properly?"
3130000,3141040," Um, so because it's going to basically reschedule some stuff a little bit later."
3141040,3144880," Damn, this is potentially bad."
3144880,3154480," It's made like the fact that is asynchronous may fuck us up in the ass in the future."
3157280,3166400," Okay. Can anybody explain why when we sent string, it is synchronous API, but when we said binary data,"
3166400,3170080," it is asynchronous one. What the fuck is"
3170080,3173600," What?"
3175760,3180080," Like who designed this API?"
3180080,3182240," Who, who, who, who the fuck designed this API?"
3182240,3190800," String save bites unsafe. But I mean, making it asynchronous doesn't make it safe. Like what is"
3190800,3196160," safe on the safe? Like a synchronicity is actually kind of orthogonal problem to this. It's just like,"
3196160,3198560," it's a random ass fucking decision. Like"
3198560,3208480," You know what? I need to make a break for, from web bullshit. Right. So let's make a break from web"
3208480,3213280," bullshit. Uh, and I'm going to refill my tea and I'm going to calm down. I'm going to think about this"
3213280,3219440," All this kind of stuff. And yeah, it's makes money. Um, okay. So we get a buffer. So let's actually wrap"
3219440,3227440," it into a new data view. Uh, right. So we have this kind of stuff. And the thing we can do in here,"
3227440,3231440," the thing we can do, I think I'm going to just"
3231440,3237360," maybe even, yeah. So I'm still thinking whether I want to"
3237360,3244240," maybe comment out this entire thing. Do I want to comment out? I think I do want to comment out."
3244240,3246880," Uh, right. So we've got the buffer"
3246880,3255360," and then, uh, let's actually print it. Right. So, because I want to see what's inside of it. Do we even get anything useful out of that?"
3255840,3263680," And I'm going to just return, uh, like so. So, all right, let me now, uh, try to run the server. So it"
3263680,3270560," complains about something, uh, but I don't really know how because there's nothing on type never. Okay."
3270560,3275040," So it doesn't really matter. So it doesn't compile, but it still generates some stuff. So whatever, who cares?"
3275040,3284400," Uh, all right, let's go. So let's open this entire thing. And obviously it doesn't do anything."
3285360,3287360," Let's open devtools. Um,"
3287360,3292880," Okay. So we've got the data view, which is 14. So we have a byte array."
3292880,3300320," Um, and if we take a look at the bytes themselves, right, it's a uint array."
3300320,3304480," Uh, okay. So I suppose the id here is zero."
3304480,3309840," Uh, the kind is zero. Message hello is zero. The id is zero."
3310400,3318240," And then here we already have the rest of the stuff. So if I refresh, the id should be actually"
3318240,3324480," equal to one. So, because it should be incremented. Um, it should be, yeah, I don't know. As you can see,"
3324480,3330400," it's now one. Kind is still zero, which is expected in here. Right. And we managed to encode an entire,"
3330400,3339360," like, a structure in, like, in these bytes in here. In these bytes. Right. In these bytes. Um,"
3339440,3350560," In these bytes. So now we can try to maybe parse that. So let's go ahead and do that. So buffer get"
3351120,3361840," uint eight. You get uint eight. And so you have to specify the offset. Common, uh, hello struct. And"
3361840,3369920," this is going to be the kind of set. And I suppose we want to do console log. So this is the kind."
3372080,3380240," So let me refresh. Uh, okay. Kind is zero. As you can see, kind is zero. So what about the id"
3380240,3391920," get uint 32. So this is id offset. This is id. This doesn't look correct. Is that because, ah,"
3391920,3400560," it probably has something to do with the ndns, uh, ndns-jones. So we have to put true in here. And"
3400560,3407440," okay. So now it's five. Right. So that is reasonable. Now I can see that it is in fact reasonable."
3407440,3414160," All right. So the next one is going to be x, but this time it's going to be float 32. Right. So it's"
3414160,3424640," going to be x, uh, y. Right. So this is y and hue. By the way, we have to be a little bit careful"
3424640,3432560," with the hue. All right. Because it's a value from 360, if I'm not mistaken. All right. So let me see"
3432560,3441200," how we're generating a new hue. Uh, all right. So this player, other player hue. Uh, yeah. So it's a"
3441200,3450400," random value from zero to 360. So that means, uh, if when we're greeting the player, when we're greeting"
3450400,3460000," the player, where is the hello? Um, so hello struct. So as you can see, here is the hue. We have to"
3460000,3467200," normalize it to a value from zero to one. So that means we have to divide it by 360. And then let's"
3467200,3474000," multiply it by 256. Right. Since when we're generating the hue, we're using random and random"
3474000,3483040," does not include zero. It is never equal to 360. It is never equal to 360. So because of that,"
3483040,3490160," this thing is never going to be equal to 256. Right. And it probably makes sense to maybe floor it just in"
3490160,3497760," case to get rid of the fractional part. Uh, all right. So that makes sense. I suppose that makes"
3497760,3505120," sense. So now the next thing. So when we receive the offset, uh, we'll probably need to convert it back"
3505120,3511040," into the 360 range, but we don't really need that right now. We're going to do that a little bit later."
3511040,3517040," So, okay, let's try to go ahead and just like rerun. And yeah, that seems to be, that seems to be"
3517040,3522480," working. So X and Y look reasonable. They are within the size of the world and stuff like that. I don't"
3522480,3528240," see hue though. Where is hue? So offset outside of the bounds of data."
3536320,3543280," this is dangerous, brother. This is dangerous. So we see, I can easily make a mistake. Java. Yeah."
3543280,3555280," JavaScript. Secful. Again, I'm telling you, you don't need C in the year of our Lord 2024. Like you"
3555280,3560080," just don't need it. You want to have sec faults. You can have sec faults in JavaScript, but there you go."
3560880,3579360," So, so I think the information about what method has to be used in here, um, um, you could represent"
3579360,3584720," the byte backwards. Maybe, maybe I could, uh, the information about what method we have to use in"
3584720,3592080," here. It has to be part of the definition of this field, sort of speak. If you know what I'm talking"
3592080,3598160," about, I think it has to be the definition, part of the definition, because I can see myself making"
3598160,3602880," this kind of mistakes over and over again. And yep. Yep."
3602880,3614640," So let me see, let me see. So maybe we should fall into intellectual masturbation mode."
3615120,3621360," Right. Some sort of intellectual masturbation mode. What if we, like, instead of just upsets,"
3621360,3632480," each individual thing in here was more like a structure. All right. So something like interface"
3632480,3639600," field. Right. And in here you have an offset, which is a number."
3641200,3651440," Maybe size, uh, maybe size or something like size of this field. And also, yeah, methods that read"
3651440,3658800," and write. We can even say that maybe it's something like, uh, okay. So you read that field, you read it"
3658800,3664480," from the view, right? You have to supply the view from which you're reading that. And maybe you also have to"
3664480,3672320," supply the offset of the structure. Right. So like from where you've written all of that. So this is sort"
3672320,3682480," of like the base point, huh? Uh, right. And it, it will give you essentially the, the number. Right. So can"
3682480,3689120," you do that like that? So let me enable fly check mode. Right. So if I put garbage in here, it will complain"
3689120,3694880," about, yeah, it complains about governship. I don't put, okay. So that is a valid syntax. That is a valid"
3694880,3702560," syntax. So, uh, and in here, when I write something, I provide view of set and a value that I want to"
3702560,3707440," write in there. And here, I don't even have to do anything here. So what you're complaining about,"
3708240,3716240," uh, which lacks return type annotation. Really? Like what if I don't return anything? Is that literally"
3716240,3730080," what? It's literally what? Okay. Okay. Okay. Okay. Okay. So in here, what we can do, we can just say,"
3730080,3736160," okay, so if it's going to be a field, so this is the offset of the field. Uh, all right. So,"
3736160,3742080," and in here, the size of the field, the size of the field is going to be that, I'm not sure if size is"
3742080,3751920," really that useful, but there we go. And read is going to be, I suppose, a function that accepts the view."
3751920,3762880," Um, right. So can I even, I probably can't specify that. View and offset. All right. So view and offset."
3765360,3777280," Um, I want to be able to actually grab, uh, this specific offset. So that means I need to have"
3777280,3784720," access to this somehow, so I can do this offset. It doesn't even return to that."
3786240,3798160," So I wonder if I can factor this entire shot out to something like a lock field, right? So let me see"
3798160,3807040," function a lock you int eight field, right? So we put that all of that shot in here, whatever doesn't"
3807040,3815360," matter. Uh, and it's going to return the field, but it's going to, it needs to, yeah, it needs an access to the"
3815360,3821280," a lock function, right? It needs an access to the lock function because it's going to be incrementing"
3821280,3825200," the Yota. It will, it's going to be incrementing the Yota."
3825200,3830720," That kind of sucks, mate. That kind of sucks. But anyway,"
3830720,3837920," so this is something that we're going to be returning here, obviously. Uh, we can try to maybe pass that"
3837920,3843520," function in there, but that means like, where do we keep that implementation and this function need to"
3843520,3851680," have an access to the state. So this thing has to be sort of like its own entity, which is an allocator."
3851680,3854560," Yeah, pass an allocator."
3854560,3862080," I'm getting to a conclusion that I need an allocator, but it's not a really like dynamic memory"
3862080,3868000," allocator. It's more like a static memory allocator just to define the... Can't you just pre-calculate a lot of..."
3868000,3871520," What do you think I'm doing right now?"
3871520,3879200," What do you think I'm doing? I'm literally pre-calculating the offsets."
3886480,3893920," I'm sorry, I need to come down. By pure... Oh, you mean manually? Well, I mean, we kind of came to the"
3893920,3900480," conclusion, um, uh, that we don't want to do that manually. I misunderstood that. It's fine. Right."
3900480,3906720," Whatever. It was, it was just kind of funny. Right. That's literally what I'm doing."
3906720,3916400," Uh, right. It's just like, can you just do the thing that you're doing? So, yeah. Um, yeah."
3916480,3923520," Mm, mm, mm, mm. An extreme implementing garbage collector for the allocator in JS. Exactly."
3923520,3930880," Who needs C? Who needs C? Nobody fucking needs C. Uh, so I think you can do some"
3930880,3937520," shit. I think I remember seeing this kind of stuff specifically in the definition of, like,"
3937520,3943920," send of socket. You can define structures without giving them specific names. I can say,"
3944800,3954160," uh, uh, an allocator, uh, number. It's actually called yota. Right. Something like this. Uh, allocator. Right."
3954160,3964800," And that's about it. Honestly, then within the alloc uint field, I can do, uh, basically const of set equal"
3965680,3979680," Allocator. Allocator yota. Right. And then allocate yota plus uint8 size. Right. So here is the offset."
3979680,3992960," Here is the size. Um, might as well maybe even do something like this. So this is the size. And when I do the read,"
3992960,4004800," I can do view, um, get, um, so there is a difference between, so this is a base of set. Right. So it's called base of set."
4004800,4016960," Get uint8. Base of set plus the field of set. Right. So base of set plus the fields of set. Uh, and yeah, that's about it."
4016960,4029200," So it doesn't like, uh, so we have to, uh, why are you, uh, I don't understand what's the error. I didn't, let me see."
4030560,4035200," void. Ah, I didn't really say that it's a void. We have to return this. Yeah, there we go."
4035200,4043600," Yeah, boy. And then I can do write. So here, when I do write, so this is a base of set and this is a value."
4043600,4050000," Uh, I think that's how we do that. All right. So let's actually indicate that this is just the base of set."
4051760,4072400," Base of set plus of set. And, uh, we're just writing the value."
4074400,4076960," I wonder if I can do some"
4076960,4083920," Scheisse like this, right? Because with the fat arrow lambdas, if it's, yeah, you can do it like"
4083920,4087920," that by sort of terms. All right. So that means I can do it even like that."
4087920,4093680," Look at this compactness, bro. Look at this compactness."
4098800,4107440," Uh, what's interesting is that we, this is how you pass primitive values in JavaScript by reference,"
4107440,4109040," by wrapping them in the object."
4109040,4118240," That's how we do that. That's literally how we do that. So in here, I can say probably a lock,"
4118240,4123440," you int, field. Do you have to pass anything? So, and then I have to pass the allocator."
4124640,4135600," Uh, and the allocator is just something like allocator equal to zyota like so."
4135600,4140560," Right? I suppose I have to now do that for all of the types in here."
4140560,4149520," All right. So let's just copy paste. Who needs templates, brother? So you int 32. So this is going"
4149520,4153600," to be 32. And this, this one, by the way, this is a size 32."
4154640,4162720," And this one is this size. Right? So this is 32. And now this one is really interesting. Right?"
4162720,4171520," So 32. But, uh, in here, I think we have to also specify the little engine, right? So by default,"
4171520,4178800," so we're always going to be using little engine, the little engine, uh, a lock you int 32 field."
4180480,4186080," And here, uh, and here, this is just an allocator. I said allocator, there we go."
4186080,4193840," Okay. So, and the only thing that is left in here is"
4193840,4202800," you int 32 float 32. Except in here, float 32."
4204240,4209120," Look at that. Look at that. Look at that. Maybe we can do that."
4209120,4216720," So I think we're going to eventually create our own protobuf. Not filed."
4216720,4220640," Emacs. Emacs. Okay."
4220640,4226720," You int 8. And the size here is obviously going to be just the allocator."
4228800,4233520," allocate, uh, your time. Huh."
4233520,4240080," Okay. It seems to be compiling, right? It seems to be compiling. So what is this?"
4240080,4244480," Um, so it's somewhere on the client. Doesn't really matter that much."
4244480,4250800," Uh, here you int. Did I? Oh, okay. So it has to be int. That's right. So it's int 8."
4252800,4259280," So, and by the way, I think since this thing is like field and entire like field definition,"
4259280,4265360," we should not say it's an offset. All right. It's just its own field. Um, yeah."
4265360,4271280," I feel like we don't really need the size in here, but I mean, that's fine."
4274400,4281040," Okay. So let me now go to the server and, uh, let's see how many problems we, yeah, there we go."
4281040,4287760," So yeah, I'm doing this set in here, but now I don't even have to do that. So what I do instead is a common"
4287760,4298880," hello struct. Uh, I take the kind and I write. So where do I write? I write into the buffer. So I think"
4298880,4304640," I should call it view, right? For the consistency, because the parameter is called view. Um, the base"
4304640,4312240," of sets in our case is zero, right? So, and I think I need the base of set in case I have an array of these"
4312240,4318080," structs, right? You know what I'm talking about? Like an array of these structs. Uh, so then I can"
4318080,4325040," specify where exactly I want to do these things. Uh, so right. And, um, so what does it say?"
4325840,4333760," Data of set and the value that I'm writing in here is this one. Uh huh. And that's it. Yeah,"
4333760,4341680," that's pretty cool. If I, like, uh, okay. So let's actually not do the camel case in here. Uh, right."
4341680,4347760," So let's be consistent. Let's use cam, uh, like, I mean, snake case. Let's use, uh, camel case everywhere."
4347760,4354080," Uh, that way it kind of makes sense. It actually kind of looks good. Look at that. So we kind of"
4354080,4361360," define a structure and then you say, okay, so here's the field. So write that value for that"
4361360,4367840," field, right? It's kind of cool. It's like using C, right? So basically we are reinventing C within"
4367840,4379360," JavaScript. Uh, right. So this is the size. Okay. Can I do a little bit of Emacs magic? I wonder. I wonder if"
4379360,4388640," if I can do a little bit of Emacs magic by just grabbing this entire thing. Maybe even, you know what,"
4388640,4398640," deleting this stuff and then doing something like that. Uh, then deleting that stuff. Then doing right view,"
4398640,4409120," um, zero, um, zero. And that's about it actually. So the only thing we don't need in here is true."
4409120,4416080," All right. Look at that. So then we're sending the view. All right. And this is how many"
4419040,4426160," things. Look at that. Look at that 60 code. Look at that 60 code."
4426160,4439520," That's pretty cool. That's pretty cool. You can probably even go write some code that accepts the"
4439520,4446720," struct definition and JavaScript object and spits out the data view or array buffer for you automatically."
4447040,4458240," So, but order of writing matters. No, it shouldn't because it's based on the, um, um, on offsets."
4458240,4469680," So let me, let me now see what we have. Uh, all right. So within the client, uh, client. Yeah. So now I"
4469680,4476000," don't even have to do this kind of stuff anymore. Right. So let me just, oh yeah, I put space in here."
4476000,4486080," Uh, now what should it be able to do? We can remove that, that, uh, this is not an offset anymore."
4486080,4493920," And we can just say, okay, I'm reading the value from this place. Why, why are you so wacky brother?"
4495680,4504960," Uh, uh, what? Oh, okay. I see. This is because of this extra thing. Uh, all right. So, and because"
4504960,4511840," of that extra thing. So also we don't need true in here. True is kind of redundant. So"
4512720,4518960," in terms of read. Oh, it also needs to accept the viewer. Okay. So let's quickly do that. So this is"
4518960,4521840," view. All right. This is view."
4525280,4532480," And then I can just do view. Boom. Right. It's a compiler doesn't fucking, but I mean, it's fine."
4532480,4538800," It's fine. So, uh, let me refresh. Let me refresh. Everything seems to be working. Okay. So yeah,"
4538800,4548000," so we have a better definition for the structures now. Uh, so we should, we have a better definition"
4548000,4554080," for the structures now. So what I am thinking is that now, uh, what I have to do, I have to check"
4554080,4561840," that the kind is, uh, the hello message, right? So this is what I can do in here. I can grab the kind."
4563120,4573760," I can grab the kind. And is it equal to the message, uh, actually common message type. Hello. Is it,"
4573760,4589360," is it hello? Right. It's not visible in the common. So I exported it. Uh, so can I just like not do that?"
4590560,4596720," Okay. It seems to be, so maybe I just don't have flight check mode. Yeah. So what you don't like in here?"
4596720,4605600," Uh, type import. So it has to be part of the type import. So the bizarre thing in here is that,"
4605600,4615280," all right, what if I remove this stuff? Uh, flight check next ever. Yeah."
4617680,4629840," So let's do message type. Let's do message type next there. And, uh, bro."
4629840,4643360," It's imported using type. Are you for real? So"
4645200,4649760," you can, okay. So I thought it is a type, but now it does not"
4649760,4660000," really like, am I going crazy again? Um, message kind. Oh my God. Jesus Christ."
4660000,4664640," Okay. So probably need to make another break soon."
4668880,4672560," All right. So, uh, let's do it like that. So this is going to be ID."
4672560,4682240," And, um, right. So if this is not the correct kind, we probably have to say that this is a bogus"
4682240,4692480," amogus message, right? So that's very important. Um, we can even go as far as checking the size of the"
4692480,4698960," structure and making sure that it is equal to the expected one. Um, for instance, we can say,"
4698960,4709360," okay, common hello struct size equal, right? So there's this kind of equivalent here, uh, equal to"
4709360,4716320," the view byte length, right? View byte length. So that's what we have in here. So we make sure"
4717280,4725680," we can even first check that the size of the structure is correct, right? And then the first"
4725680,4730800," byte contains that. So because what if it's equal to zero? So that means there is no byte. So we have sec fold."
4731840,4738480," Uh, right. So we have sec fold. Uh, now let me, let me see."
4738480,4752240," Uh, so this is ID. And, um, yeah, so now we can start actually filling up these things. So this is going to be"
4752240,4761920," x and we're reading x. It's going to be y. We're reading y. And here is the hue. Here comes the hue."
4761920,4770080," And here we have to divide by 256 and multiply by 360, right? So we have to convert all of that stuff"
4770080,4775360," back. Uh, and on top of that, we also need to have the moving. Uh, right."
4777360,4784000," Let's go, let's go, let's go, bro. Let's go. All right. So I think that's about it. So it complains"
4784000,4790400," about something here. So, but we don't have the message, uh, bogus amogus message from the server."
4790400,4799040," So let's actually just put the view in here and, uh, remove that. So we migrated one message to binary."
4799600,4818560," Uh, so this is basically incorrect, incorrect. Hello message. Something like that. Uh, something like that."
4818560,4828880," Right. So we don't need to do that anymore. Right. So hello struct is the same size as we expect in here. And, uh,"
4828880,4834160," uh, so the kind is equal to that. And we, there we go. We deserialize this entire thing. All right."
4834160,4839200," So we deserialize it. And it seems to be compound as well. All right. So let's refresh it. And, uh,"
4839200,4849920," there we go. So it works, but then it disconnected. Uh, so received bogus amogus message from the server."
4849920,4865760," We do not know anything about the player. We do not fully, uh, do something."
4865760,4872240," I think I forgot to create the player as well. Okay. So let's go ahead and create the player."
4873040,4882480," Uh, right. So, but yeah, it's more like me ID. Okay. Okay. So this is reasonable. This is reasonable."
4882480,4885680," Seems to be working. Seems to be twerking. So that's pretty cool."
4889680,4898640," Seems to be working. Seems to be working. All right. Um, okay. So we can't have two players."
4901360,4909600," Uh, we have two players. I see if bogus amogus message from the same expected binary data."
4915680,4928560," Hmm. That's very interesting. So what kind of messages are we, are we receiving? So let's,"
4928560,4934240," let's actually log everything. And I think we're logging everything, right? So it kind of"
4934240,4944080," intentionally disabled all that stuff. Uh, let me see. Okay. So what do we have in here? Uh,"
4944080,4950640," we received the message, which is blob. This is the first thing we received. Then we received, uh,"
4950640,4958000," player joined and like a couple of players, like who joined and stuff like that. And then we received."
4958000,4965440," Okay. So this is the error message, by the way, I think I need to, uh, for the bogus amogus things,"
4965440,4970720," I have to indicate that there are errors. Otherwise it's like not clear what I'm reading right now."
4971760,4981760," Uh, right. So yeah, there we go. So now I can see what's error, what's not. So first we receive the"
4981760,4988800," blob, uh, which sets the player and stuff like that, which sets the player. So that means for the second"
4988800,4997680," message, it will go to the else branch of this entire thing, right? So me equal to undefined indicates that we"
4997680,5003200," we have not received greeting yet. If it's not equal and defined, that means we can receive the rest of"
5003200,5009920," this stuff. So after we received the blob, we should have, uh, we should have actually set the player and"
5009920,5018560," we should have not failed at that. So that means at this particular point, um, expected binary data."
5022960,5026560," Wait a fucking second. Is that because, Oh, it's fucking a weight."
5026560,5038800," Okay. So essentially, essentially it goes into a weight and then like, you know, continues handling"
5038800,5047520," the rest of the messages and we receive the Jason, we receive the Jason, uh, before we finish. Oh,"
5047520,5058960," this is so fucking dumb. Holy shit. Holy fucking shit. Um, so can I, can I control"
5058960,5069040," like what kind of things I can send them here? So can I do something like web socket, uh, binary message"
5071200,5079440," blob to array buffer because it, this is so fucking dumb. This is so fucking dumb. I swear to God,"
5079440,5083920," it must be a solved problem because like, I'm definitely not the first person who actually"
5083920,5091440," encountered that, uh, binary type property. Wait, wait, sounds interesting."
5094480,5104800," Are you fucking serious?"
5104800,5115440," Well, I mean, I didn't really have that high of an opinion about web dev,"
5117440,5123680," but I just lost all of the respect for web development. This is not a real profession."
5123680,5129920," This is, it's a fake profession. It's a fake job. It's just like, it's literally a fake job."
5129920,5143520," I have zero respect to this job. Like seriously, zero. Um, this is so dumb. This is fucking dumb. Uh, anyways,"
5143520,5153520," so let me actually take a look at this thing. So, um, okay. Here's the binary type and, um,"
5153520,5159200," returns a string that indicates how binary data formal is, but it can be said to change how binary return"
5159200,5172000," default is. So wait a second, array buffer. So binary type, what kind of binary? Okay. So it's our,"
5172800,5175520," it's, it's, and it's literally only two of them."
5175520,5180560," Okay."
5180560,5190240," So, um, what I want to do, I want to actually try to just print, uh, yeah. So we'll already print event."
5190240,5195600," I just want to see what's, what's happening in here. So when I'm, when I'm doing this kind of stuff,"
5195600,5201360," I'm doing this kind of stuff, received message. Okay. So it's, it's data is literally array buffer. So you"
5201360,5207920," don't even have to wait or anything like that. This is actually perfect. So, and, uh, can I just do data,"
5207920,5217920," uh, type of type of, and if you take a look, so we received message object. So it is object. So what"
5217920,5225280," you have to do instead, you have to do, you, you have to use the instance of instance of, uh, array buffer,"
5226800,5234000," array buffers. So yeah, it's true. Okay. So that's cool. So it means here we can do instance of array"
5234000,5241520," buffer. Uh, all right. So let's actually do, uh, you don't have to do that anymore. Okay. So that's"
5241520,5246320," pretty cool. You don't have to do a weight. So that solves all of the problems automatically."
5246320,5252800," And that's about it because that's about it. So if I refresh the whole shit, I can move around."
5252800,5260080," I probably don't want to log all the messages, messages. Uh, right. So, and if I go to here,"
5260640,5277760," look at that chat, look at that. Okay. Let's make a small break. I need to, uh, yeah. So I need to take"
5277760,5284400," a break from this bullshit. Uh, so, yeah. So, uh, let's define more structures, right? So we migrated a"
5284400,5290480," bunch of messages, like one single message to, to binary and it works great. Uh, so, and we actually"
5290480,5297280," did that in a way that, uh, we can continue doing that incrementally. So let's actually move, uh,"
5297280,5302560," player joined message to binary as well, right? It's going to be interesting. So we basically have"
5302560,5312240," like a combined, uh, you know, system where we both use both JSON and binary. Um, okay. So it looks"
5312240,5317920," reasonable, looks reasonable. So let's take a look at how we can do that. So the next message is going to be"
5317920,5325840," player joined, right? So this is going to be player joined, uh, and let me find a potential definition"
5325840,5335360," for this entire thing. So here are the sizes and I think I'm going to be putting them in here. Uh, and"
5335360,5343600," so we have that, uh, maybe I'm going to actually, so since hello is like, hello structure is defined near"
5343600,5353680," hello interface. What they can potentially do is, um, you know, define player joint, uh, nearby here as"
5353680,5359920," well. You know, it will be interesting. Try to remove hello. Let's, let's remove hello and see if it doesn't"
5359920,5368560," break anything. Okay. So something breaks in some places, bots, we haven't migrated bots to the new kind of"
5368560,5374320," style yet. All right. That's very interesting. So in the server also complains a little bit because"
5374320,5380400," it was, uh, importing hello, but now it doesn't need hello. So that's totally fine. So now only bots,"
5380400,5394000," bots. So let's go ahead and do, uh, this thing. So next, um, next error. Okay. So on the, in bots, we're"
5394000,5400560," actually using Node.js implementation of web sockets. The question is, do I have to do the same bullshise"
5400560,5406320," with, um, I feel like I have to do the same bullshise, right? So when I connect the socket,"
5406320,5416720," uh, I probably have to do, uh, binary, binary type. So node buffer. So in the node implementation,"
5416720,5424560," this situation is even worse. So it's not even blobs, it's fragments. No."
5424560,5436320," Oh, there's a use. What's up? What's up? What's up? What's up?"
5440000,5450000," Array buffer and buffer are different. So what the fuck is buffer? It extends you int 8. Uh, so"
5450000,5457680," and it's, uh, it looks like a, holy shit, don't fucking tell me that it's a pure node thing."
5459280,5477440," Uh, right. So, oh my god. Oh my god. Okay. Oh my god. Okay. So let's actually migrate this client"
5477440,5487040," in here. Uh, so bot me equals that. So now what we have to do, we have to grab, we have to grip it,"
5487040,5498480," grip the expressions, right? So like so. Uh huh. Let's put it in here. Um, so what we're doing here is"
5498480,5504240," very interesting. So yeah, we're doing the turn. So that means we're turning the bot. We"
5504240,5510240," identifying the direction where the bot has to move and we're also starting the tick timer. So"
5511280,5519600," that is fine. That is fine. So we can move this kind of stuff to here as well. And I think generally..."
5519600,5525440," Oh yeah. So the interesting thing about the bots is that each bot doesn't really care about the rest"
5525440,5532480," of the bots. So we never kind of keep track of that at all. So that's totally fine. That's totally fine."
5532480,5536080," Okay. So let's remove this code and I'm going to go to the compilation."
5536080,5544080," Errors. A compilation errors. And we're going to just fix them. Okay. So this is me. This is a bot me."
5544080,5554320," All right. So ws. So this is a bot. And here ws. This is a bot. I think we don't need question marks in"
5554320,5562160," here because ws is not... Yeah, it's cannot be undefinable. Um, all right. So I suppose we migrated this"
5562160,5572240," entire thing. Uh, now let me just do watch and I'm going to go in here. Uh, can I? Yeah, let's go."
5572240,5579680," So let me join this entire stuff. Okay. So we're, we can move around. So we're using the binary protocol"
5579680,5588400," for the syntax thing. And now I'm going to do a run bots. All right. So that seems to be working."
5588400,5596000," That seems to be twerking. Look at that. It is working. It is in fact twerking. And now they're all gone."
5596000,5602400," Cool. Um, so I think it makes sense to maybe commit whatever I have already. Um,"
5603520,5616080," So yeah, migrate hello, uh, message to binary. So I'm going to have a commit message per, um,"
5616080,5624320," um, we're going to have commit per message. That's what we're going to have. I'm going to put that in here."
5626000,5634240," All right. Cool. So now common thing that we share between all these things player joins. So that's very"
5634240,5642880," interesting. Expert const, uh, expert const, um, player joined struct."
5642880,5653120," So the difference between player joined and hello is that hello is addressed to you. What it says is that"
5653120,5661600," hello new player, you are this person, right? So you have this id, x, y, and hue. When player joined,"
5661600,5668320," it's just a notification. Somebody with these parameters have joined. So hello is about you."
5668320,5675600," Player joined is about somebody else. Right. So that's basically what it is. Uh, but apart from that,"
5675600,5682320," they basically the same structures, honestly, like I can even copy paste them like so. Look at it. Um,"
5682320,5688640," all right. And I can probably do something like equals in here. It's pretty cool. It's pretty cool."
5688640,5697040," And I wonder, I think I can just try to remove, uh, player joined. So to prompt compilation errors in all"
5697040,5702800," of these places, right? Yeah. So now everything is broken. Uh, and I can just go to the compilation"
5702800,5708480," errors and fix all of them. Uh, okay. So next error. Uh, so we're going to have player joined, which is"
5708480,5715600," fine. Uh, next error. Okay. So, uh, reconstructing the state of the other place. Oh, this one is"
5715600,5722000," interesting. This one is very interesting. So when you joined, we send hello to you and then we are"
5722000,5729200," reconstructing the state of the game, meaning that for every player that exists, we send in player join event"
5729200,5735680," for you. So you can then register all of these players on your site. So this is basically what we're"
5735680,5743120," doing. Uh, all right. So, and we're not sending joint to yourself because you already know about yourself"
5743120,5751440," through the hello message. Uh, all right. So in here, we also like sending player moving, uh, messages,"
5751440,5756960," right? So, because maybe somebody is currently moving. We also want to notify you about that,"
5756960,5766080," which is rather interesting. Okay. So this is where we can optimize some stuff a little bit. This is where"
5766080,5773600," we can optimize some stuff a little bit. Moving, if you take a look at the player, uh, where is the"
5775680,5794960," moving? We can allocate a single byte within player joined event and just encode all these four"
5794960,5802800," booleans in there. So then we don't have to send additional player moving, right? So you joined, you"
5802800,5808960," received hello message, which identified you. It gave you ID, it gave you X and Y and hue, and then you"
5808960,5815200," receive sequences of player joined. But then, uh, you receive a sequences of player moving because some of"
5815200,5824240," them can be currently moving. So we can remove player moving completely and just actually include the moving"
5824240,5832080," mask, uh, those greatly reducing the amount of messages we have to send, uh, to new players."
5832080,5836720," So bit, yeah, so we're going to have beat fields and stuff like that."
5836720,5844000," Uh, so that's actually kind of cool, I think. Uh, so that will require, I feel like"
5844000,5851360," extending the definition of the structure. So let's actually do player joined, uh, where's the, where's the structure?"
5851360,5857600," So this is a hue and this is going to be moving. All right, so I'm going to allocate you int, uh, allocate,"
5857600,5866640," uh, you int 8 field. So this is another allocator in here. Uh, all right, so that's actually super cool, I think."
5866640,5871520," Look at that, look at that, look at that, look at that. Cheers."
5875600,5886000," Um, so hue and moving and so on and so forth. Um, okay. Um, so in the server, in the server, so this is"
5886000,5892960," what we're sending in here. So, okay, so I'm going to do array buffer and I'm going to just do common"
5892960,5902720," player joint, player joint. Is it size? Do I have, do I even have size? Uh, it's a struct. Yeah, so player"
5902720,5910160," joint struct and then we wrap it into the data view. So then we just have it like that. Um,"
5910160,5922480," okay, so now we need to do these things. Um, common, it's a new, a new, um, player joint struct."
5923600,5933040," Right, uh, kind right. So right accepts the view, then the offset, which is zero, and then we have to"
5933040,5942000," do message kind player joined. Come on. Yeah, there we go. So it's, I think it's part of the common, like so."
5942000,5950400," All right, so the next one is going to be id. Um, an id comes from other player id."
5951280,5960960," Then we have x, and this is x of the other player, y of the other player, hue of the other player."
5960960,5969120," Uh, so in the hue, we have to divide it by 360 and multiply it by 256. Um, so maybe I just have to"
5969120,5975120," store the hue in 256. Well, I mean, it's not gonna... Yeah, we'll see, we'll see. It's kind of dumb,"
5975120,5980320," uh, but it is what it is. So it can be fixed later. So this entire idea was actually developed before we"
5980320,5988320," were serializing binary stuff. So it's fine. Uh, and on top of that, I want to have the moving. And I need"
5988320,5998240," a special function that takes the moving type and converts it into a mask. Uh, right, so I can have moving,"
5998240,6004560," which is this thing, which is just that. Uh, right, uh, so I think we can introduce something like moving"
6004560,6011440," mask. Uh, and it's supposed it's going to be part of the common. Uh, so it's going to simply take this"
6011440,6018560," type and convert it into a mask so you can then write it somewhere. Um, so let's go in here and let's"
6018560,6026800," introduce, let's also export this entire thing. So function, uh, moving mask is going to accept"
6026800,6033840," moving, moving and returns a number just like that. So how are we going to be approaching all that? This"
6033840,6038720," is rather interesting. So we can do something like object keys, uh, object keys"
6038720,6047360," of the moving. All right. And those things, I wonder if they are in the correct order."
6047360,6053200," That's the problem in here. That's kind of the problem. So the order is not defined at all."
6053200,6059600," This is really annoying. This is really annoying. One of the things I can do probably"
6059600,6066160," is something like that. I can do keys and I'm going to just say that this is a direction,"
6066160,6074080," uh, right. And the keys are here, but then I'll have to edit to do to kind of fix that later. All right."
6076160,6090640," So I wanted to preserve this specific order direction, directions for direction in directions. Actually,"
6090640,6105520," yeah. So let's first of all, do it to do. Um, um, um, it's really easy to forget to update this array. If the"
6105520,6113840," definition of type direction changes, right. So I need to do something about that, but I don't know"
6113840,6119200," how exactly, how exactly do that yet. So I'll do that later. And it's not really that important."
6119200,6125840," So direction vector, it doesn't preserve the order. So the order here is very important. The order here"
6125840,6132160," is very important. So I'm going to do the funny thing. So we're going to do it like that directions,"
6132160,6136160," length. And it doesn't matter. Again, it doesn't matter. I can, it can be fixed later, but it's just"
6136160,6150080," to do, uh, don't get wind up about it. Uh, so this is the mask mask. And, um, yeah, essentially if, uh, moving"
6151840,6165040," directions, uh, we, uh, increment this mask, so we just do something like this. So I, uh, and just mask."
6165040,6171840," So, and then we just return this mask."
6174160,6186240," Uh, that is rather interesting thing. Is it going to work? I think it's going to work. So, uh, let me go to the node."
6187600,6201360," So if I have X one and then I do one, okay. And then I do X, it has to be or, yeah, it has to be actually or not end."
6201360,6210560," Okay. That makes sense. Cool. Cool, cool, cool. Uh, so yeah, that that's literally it. If I go to the server,"
6211280,6217760," uh, now it is updated. Everything seems to be fine. Uh, and now we should be able to send this entire thing."
6217760,6229520," So where do we send? So this is a joint player, uh, player ws send view. Right. So we send the view."
6229520,6236880," So in terms of bytes, how many bytes we send in here? So this is bytes sent counter plus view bytes"
6238160,6245600," byte length. So we don't need that. And this is the message counter. Uh huh. So here order doesn't"
6245600,6251360," matter. So we can do it like that. The only reason again, I introduced this array is because the order"
6251360,6256160," matters. Right. So, and I'm not sure if object keys preserves the order. Like I need to research that."
6256160,6260640," I'm not a JavaScript developer. Right. I don't know this kind of shit. And again, it doesn't really matter"
6260640,6266560," that much. Okay. So, uh, this is what we got. Everything seems to be Gucci and maybe even potentially"
6266560,6274160," tamaguchu look at that. Um, so, um, so this is that, so maybe I have to go to the next errors."
6274160,6283520," Okay. So notifying who joins. So this is basically for the rest of this stuff, uh, joint player."
6283520,6290240," This one is interesting actually, because we can construct this thing once. Right. And just,"
6290240,6296000," just send it over and over again, because we're iterating others, but the joint player kind of stays the"
6296000,6305600," same here. Okay. That's kind of cool. Uh, player joined. Let's go up and let's steal some of that stuff."
6305600,6312560," Right. So now we'll go next error. Uh, and I think I'm going to be doing it in here. Uh, so"
6312560,6325840," so this is the joint player sent. Uh, we are constructing, we are constructing the joint player in here."
6326000,6332160," Right. So that's the joint player. And then we're just sending all of that stuff in here."
6332160,6344720," So we're sending the other player, uh, the player. Uh, yeah. So we're sending the joint one and we can"
6344720,6351680," just keep it like that. So we just render this entire thing once. Right. We just rendered it once and that's"
6351680,6357920," about it. Oh, okay. So it might be actually missing. So that means we have to put it behind the condition."
6357920,6365440," All right. So this is behind the condition. So we serialized it like that. And then, uh, we just do it"
6365440,6373760," like that. Um, yeah, that's fine. That's fine. That's fine. That's fine. Okay. Seems to be compiling. So,"
6374320,6381840," uh, uh, what is the next error now? A player moving event. I don't really understand what you're talking"
6381840,6390160," about, Bob. Implicitly has any because, uh, cannot be used to index expression."
6393520,6407520," a player moving. Ah, I didn't get it. So because event queue. Ah, damn. This is very interesting."
6407520,6415360," Okay. Okay. Okay. So apparently we do need player like this kind of events because we have two parts,"
6416480,6428800," right. We have two parts, um, we have two parts, we have the tick, uh, and we have the thing that accumulates"
6428800,6437680," the events and stuff like that. So, yeah, so we'll have to do that. Um, so we have to preserve player joints."
6437680,6448480," So I rushed to delete it too soon. I think I rushed to delete it too soon. Uh, so let's bring it back then."
6448480,6455920," Um, so might as well actually just like, yeah, so we're going to keep them both. We're going to keep them"
6455920,6466960," both. Uh, player joined the player joint. Where is the common MTS player joined. So this is going to be"
6466960,6476560," somewhere here. All right. So, um, so that seems to be fine. It seems to be fine. So we keep both of them."
6476560,6485520," Okay. And it compiles. All right. But that's annoying because I was using errors as the way to know where"
6485520,6494640," I have to fix things. So I have to put underscore in here. Okay. Uh, so let's put it like this. So this is"
6494640,6506160," that now. Uh, so where is the rest of the errors? Where is the rest of the errors? So this is the next, um,"
6506160,6517040," event queue, event queue, event queue. So in here, I just have to update that. All right. So that updates"
6517040,6520800," everything automatically. So, and there's no errors anymore. Okay. So everything compiles."
6520800,6528320," That is perfect. That is perfect. Okay. Okay. Okay. Okay. Let's go. So let's open this thing and, uh,"
6528320,6534240," we can move around. Right. So, but we don't receive any player joined yet. So let me open the dev tools."
6535680,6543040," Uh, so let me open the dev tools and let me just do that. So it should now fail. It didn't even fail."
6543040,6552560," So can I just move around? I still, you're supposed to break, bruh. I think, uh, I just have to restart"
6552560,6558720," the server. Okay. So I just forgot to restart the server. Uh, everything we are in the watch mode. So"
6558720,6565440," everything gets, okay. So it's kind of funny that the automatic recompile. Okay. So this is fine. This"
6565440,6571200," is fine. We can move around. And now if I refresh this thing, yes, that's what I expected. Thank you."
6571200,6576160," Thank you. Thank you. Thank you. Thank you. Thank you. Thank you. Okay. So, um, it just couldn't"
6576160,6582480," parse the array buffer because it received a binary thingy. Cool. So let's go into the clients. Let's go into"
6582480,6591040," the client and in here. Um, so essentially we just parse the message as it is. What we have to do instead,"
6591040,6601120," I think, is we have to check whether the event data is instance, maybe even something like, um, instance,"
6601120,6609760," instance of, uh, array buffer, right? So if it is instance of array buffer, uh, we do one thing,"
6609760,6616080," otherwise we do the other thing. So, and this is where we have to do the player joined stuff. Um,"
6616080,6624880," right. So this is that, this is that, received bogus omogus message. All right. So how we are even"
6624880,6635520," approaching all of that? Mm-hmm. Shut it back up. Okay. So this is going to be this. Uh, so we've got the view,"
6635520,6644320," uh, delete trailing white spaces. Okay. I've got the view. If, um, so we're specifically expecting the byte"
6644320,6656880," length to be equal to common player joint struct size, right? So it's equal to that. And, um, I suppose the first"
6656880,6670800," byte, so common, uh, common player joint struct kind read view at the offset zero, uh, and it has to be equal"
6670800,6680160," to the message kind player joint, player joint. There we go. So if it's something else, we're going to say, um,"
6680160,6688320," um, bogus omogus. So this is a bogus omogus. So message kind, so do we have to put common in here?"
6688320,6692240," I think, I think I have to, yeah. So it's a little bit big, but I mean, it can be refactored later."
6692240,6698480," It doesn't really matter. Doesn't matter, bruv, doesn't matter. Uh, message bogus omogus incorrect, uh,"
6698480,6706240," player joint, player joint message. There we go. So we'll get that. So in here, uh, we just have to do"
6706240,6720640," this kind of thing. Um, so we have id. So let's read id common player joint. So it's more like a player, uh,"
6720640,6732560," joint struct id read from view zero. So we read the id. So then now we can do players set, uh, players"
6732560,6747440," set message. It's actually just id id and x where reading x separately. So it's x sub y. Moving is going"
6747440,6753680," to be really interesting. Moving is going to be interesting. Uh, so we need a way to convert moving"
6753680,6767360," back. Uh, moving. So we can say something like moving from mask. So we can do something like that."
6767360,6772080," So we're reading that and this is going to be moving and hue, uh, is going to be just hue."
6774240,6783040," So we divide it by 256 and multiply by 160. Um, so yeah, that's about it. Uh, let's actually construct"
6783040,6797440," moving from mask. Uh, moving mask. So let's export function. Moving from mask. So here we accept the mask"
6797440,6804720," that we're going to be converting back. Um, and we're going to be returning the moving. So, okay,"
6804720,6812880," we kind of need this thing in both cases. So I'm going to just move it like this. Uh, and what I'm going"
6812880,6825360," to be doing what I'm going to be doing, I suppose. Uh, so moving is going to be, I'm going to explicitly"
6825360,6834720," say that it's that left false. This is not what I want. Emacs, you're getting crazy. Emacs, shut the"
6834720,6855360," fuck up. Jesus Christ. Okay. So up, down. All right. So in here, uh, if, if mask, I, this, uh, not equal"
6855360,6859920," to zero, see mantra. Thank you so much for tier one. Thank you. Thank you. Thank you. Uh, so what you,"
6859920,6868720," what you don't like. Okay. So that's what it didn't like. Uh, we just say true. Yeah. So something like"
6868720,6876160," this and this to return the movement. So we're constructing this and then back. Um, so we'll"
6876160,6882800," probably also have to have a moving, um, set moving mask in the future. I have a feeling that we'll need"
6882800,6890800," this function set moving mask where you accept the moving and you also accept the mask and what it will"
6890800,6898560," do, it will just set things correspondingly, uh, which probably and like moving from mask would be"
6898560,6905280," implemented in terms of this thing. I feel like, uh, so in essentially here, what we can do, we don't even"
6905280,6910640," have to return anything. So we're just iterating the directions. If this is true, well, I mean, I can even,"
6911440,6919600," uh, factor this and typing out like so, so direction I equal to this, boom, we don't have to return"
6919600,6929920," anything. And essentially now I can just set moving mask, moving mask like so. And on top of that, this"
6929920,6936320," also creates a new thing. So this one sets the existing thing. This one creates a new thing. Um,"
6936960,6942000," yeah, that makes sense. Sure. Okay. So that's actually kind of good. I like where it's all going."
6942000,6948320," Um, so moving from mask. So let's put it in here, uh, in here and here. Oh, I mean, yeah. So this one"
6948320,6955360," has to be like this. Okay. Um, so everything compiles. Everything seems to be compiled."
6957120,6964240," So now we can be, we can get notified about joint players and stuff like that. Uh, and we can get rid"
6964240,6974240," of this thing completely. So we're slowly moving the JSON messages into the, um, into the binary messages."
6974240,6978480," And at some point we're going to only have binary messages and something else and nothing else. And"
6978480,6985920," we will be able to get rid of these checks, which is perfect. Right. I really like that. Okay. That's"
6985920,6993360," pretty cool. Um, our number center is passed by reference value by value. So that's the most annoying"
6993360,6999120," part of the JavaScript is that they're passed by value. If you want to pass them by reference,"
6999120,7005040," you have to pass an object. Um, so I'm going to, I'm going to show you it's, it's kind of dumb,"
7005040,7013200," but it is what it is. So essentially, uh, just more, if you want to pass something by reference,"
7013200,7019440," like for example, you want to return a pair of values without creating an array or anything like that."
7019440,7025600," Right. So something like return payer. So you have to, you know, accept payer as an object."
7026240,7036800," Right. And then you just set, uh, things like that for twin. So in essentially to get a pair"
7036800,7041360," out of the function, right, to get a pair of the function, you have to first create such pair,"
7041360,7049920," right. Const, uh, like just initialize these kinds of things, uh, and then return payer, payer."
7049920,7055840," Right. So, I mean, you don't have to do that. You, you can just"
7055840,7062960," return an object or return an array or something like that. So, but sometimes, uh, you want to make"
7062960,7068240," a function that returns a pair of numbers, but doesn't create a new object. Well, that just means"
7068240,7074880," you have to create the object outside of the function and pass the object. And this is how you pass by"
7074880,7079840," reference because objects are passed by reference. Any primitive types are passed by values."
7082400,7085120," So, yeah. So that's how it works. It's extremely annoying."
7085120,7095760," So, yeah. Well, let's actually test if it works or not."
7095760,7100080," Let's actually do the testing."
7101520,7108800," So, let's restart the server. Super, super quick. And I'm going to just refresh myself."
7108800,7114960," Okay. So, here's me. And I'm going to join. And that seems to be poggers, actually."
7114960,7119280," The colors are fucked up, by the way."
7123360,7129120," It's super funny. The colors are fucked up. The hues, you can see that. You can see the hues are fucked up."
7129120,7133600," So, hue."
7133600,7140800," Okay. So, let me, let me see what we do with the hue."
7142880,7146880," So, maybe hue has to be a value from 0 to 1."
7146880,7152560," Maybe it has to be a value from 0 to 1, but I don't know."
7152560,7157920," I don't know. I don't know, man. So, do I want to spend some time"
7157920,7164160," refactoring all that shit or not? I'm not sure. Actually, hue, right."
7165200,7169600," So, we take the hue and we just multiply by that. Okay. So, that makes sense."
7169600,7177360," So, that is correct. Hue, right. Uh-huh. And another one, another. Okay. So, that makes sense."
7177360,7183680," So, divide by 360, multiply by 256. So, on the server side, it is correct."
7183680,7191600," Hue, read. When I'm reading, yeah, this is really interesting."
7193200,7198560," So, where is the other hue? Ah, I see. So, this has to be hue."
7198560,7201440," I'm still making mistakes in here. That's what's funny."
7201440,7212400," Even though I created this, like, very convenient framework for things, I still make mistakes."
7212400,7217440," Yeah. Okay. So, that's fine. Everything seems to be fine. All right. That's cool."
7217440,7220560," We migrated yet another thing in here."
7221360,7226640," So, I'm going to go ahead and we're going to go ahead and put it in here."
7226640,7229280," So, I'm going to go ahead and push that right into the repo."
7229280,7246560," And, by the way, by the way, so, we don't have to send the movings anymore, right?"
7246560,7251920," All right. So, reconstructing. Yeah, there we go."
7251920,7258880," Since we have this moving mask, we don't have to send the rest of the moving messages in here."
7258880,7260800," We don't have to send it."
7262800,7270880," So, there is a very interesting thing. So, I kind of need to roll back to what we had."
7272080,7277360," So, I'm going to roll back to the state before the stream, right?"
7277360,7278880," So, whatever we had before the stream."
7278880,7285360," All right. So, I'm going to restart this thing."
7285360,7286880," It's a watching mode."
7288480,7290160," I'm thinking some time. Like, what the fuck?"
7290160,7291600," All right."
7291600,7293040," So, let's do the surf."
7293040,7296400," Let's do the surf."
7296400,7301440," And one of the things I want to do, actually, I want to run the bots."
7301440,7302960," So, to create a bunch of bots."
7304720,7306480," And I'm going to refresh."
7306480,7309280," And as you can see, we just joined."
7309280,7310400," And they're moving around."
7310400,7312320," And they're moving around more or less correctly."
7312320,7315680," They're moving around more or less correctly."
7315680,7320800," So, now, if I remove that particular part."
7320800,7323840," If I remove this particular part in here."
7323840,7326880," that restores the messages."
7326880,7327440," Reconstruct."
7327440,7328240," Yeah. So, there we go."
7328240,7330640," So, we send the joined."
7330640,7333280," And then we send the player moving."
7333280,7334720," It's going to be completely broken."
7334720,7336400," Yeah."
7336400,7341120," So, because I think what's going to happen is that when I join."
7341120,7344240," They, at first, going to be all standing."
7344240,7345520," Until they make a turn."
7345520,7346960," And only then they're going to be moving."
7346960,7348800," Right."
7348800,7350720," So, that's basically what is going to happen."
7352320,7353600," So, I update it."
7353600,7354960," I need to restart the server."
7354960,7359280," All right."
7359280,7360320," So, I'm starting the bots."
7360320,7362480," Bots are connected."
7362480,7364400," And I'm going to first connect."
7364400,7367840," So, at first, some of them are going to be standing."
7367840,7368720," Which is not correct."
7368720,7369840," Yeah."
7369840,7371760," Have you noticed that?"
7371760,7372880," I can even refresh that."
7372880,7378000," So, at first, they're standing."
7378000,7380160," And then, as they make a turn."
7380160,7381440," As the state synchronizes."
7381440,7382960," And then, they're teleporting."
7382960,7383600," And stuff like that."
7383600,7384720," So, this is literally why."
7384720,7388160," Along with player joined."
7388160,7390560," We also send where they're moving."
7390560,7392720," But since we migrated to binary protocol."
7392720,7394400," And we send the moving mask."
7394400,7396320," Along with the player joined."
7396320,7398640," We don't even have to send these extra messages anymore."
7398640,7399120," Actually."
7399120,7401680," We don't have to do that anymore."
7401680,7403200," Like at all."
7403200,7407600," So, let's actually go back to binary protocol."
7407600,7408640," That we just implemented."
7408640,7411680," So, we already have advantages in here."
7411680,7412560," So, that's cool."
7412560,7415040," So, where's the main?"
7415040,7415600," I don't know."
7415600,7418240," Okay."
7418240,7420240," So, we're already optimizing things."
7420240,7421280," We're already optimizing."
7421280,7422960," Okay."
7422960,7424160," So, here's the binary thing."
7425280,7427520," And if I do the server."
7427520,7429200," And I need to reconnect the bots."
7429200,7439600," Oh, it didn't work properly unfortunately."
7439600,7444160," So, that's bizarre."
7444160,7444880," Oh, okay."
7444880,7445920," So, yeah."
7445920,7447440," I see what's going on."
7447440,7451200," So, the bots also need to be migrated to the new kind of style."
7451200,7457440," So, this is bots."
7457440,7463200," And when we receive array buffer, we do that."
7463200,7467760," Otherwise, is the player moving?"
7467760,7471920," Oh, okay."
7471920,7472320," I see."
7473920,7479680," So, I suppose here what we have to check is event data."
7479680,7483280," I can even do something like type of string."
7483280,7485440," So, that's what we want."
7485440,7488320," Okay."
7488320,7489200," Seems to be compiled."
7489200,7492080," And yeah."
7492080,7493920," So, that's a lot of bots."
7493920,7495360," Like, I don't need so many of them."
7495360,7496000," Come on, Brian."
7496000,7499920," Oh, it's ID."
7499920,7501760," It's not the amount of bots I'm going to do."
7501760,7502320," All right."
7502320,7505280," So, I just join and they're moving right away."
7505280,7507120," So, they're not stuck at first."
7507120,7508800," They're just moving right away."
7508800,7509040," All right."
7509040,7509680," That is cool."
7509680,7510960," That is cool."
7510960,7515760," So, now I can remove from the server this specific chunk."
7515760,7518160," I'm removing this specific chunk."
7518160,7519760," And it's not going to break anything."
7519760,7524480," Because this information is conveyed literally by this."
7524480,7524720," Right."
7524720,7526560," By just sending the moving mask."
7528800,7529760," So, that's very cool."
7529760,7531760," I really like that."
7531760,7532640," Okay."
7532640,7535840," So, everything seems to be recompiled."
7535840,7538240," And let's serve the server."
7538240,7541280," Let's restart the whole thing."
7541280,7543760," Okay."
7543760,7547440," So, how many bytes we sent per tick?"
7547440,7549040," We still send a decent amount of bytes."
7549040,7551440," Because it's like moving updates and stuff."
7551440,7551680," Right."
7552240,7553680," So, that's totally fine."
7553680,7554640," So, I'm going to go here."
7554640,7555280," And, yeah."
7555280,7556800," So, it's instantly."
7556800,7557760," They're instantly moving."
7557760,7559040," So, everything is correct."
7559040,7560800," All right."
7560800,7561440," I really like that."
7561440,7563440," That's perfect."
7563440,7569520," So, we can literally remove this chunk of code that was sending a lot of data."
7569520,7571760," Probably wasn't sending that much data."
7571760,7576720," But, I mean, it was responsible for a pretty good chunk of data that we were sending."
7578720,7579760," So, yeah."
7579760,7580880," All that is binary stuff."
7580880,7588640," So, let's do bots."
7588640,7595440," Ignore irrelevant binary messages."
7597280,7600640," And in here it's going to be a server."
7600640,7601840," Ignore."
7601840,7612800," Don't send redundant player moving messages."
7612800,7615840," And I'm going to push that right into the repo."
7615840,7619120," Actually, I want you to push that to the main rather than your mom."
7619120,7623600," For some reason, your mom is my default remote."
7623600,7626080," So, every time I push, by default, it's pushed into your mom."
7626080,7628720," Your mom is the name of the server."
7628720,7633600," Okay."
7633600,7635600," So, what's next?"
7635600,7638080," We need to start working on the next of the messages, right?"
7638080,7642640," So, player joined."
7642640,7642960," All right."
7642960,7644240," So, here's the player joined."
7645600,7649040," And the next one is player left, right?"
7649040,7650960," So, and this one is actually super easy."
7650960,7654080," Because it has only two fields."
7654080,7658400," So, it's literally the kind and the id who left."
7658400,7660960," So, super easy."
7660960,7661280," Should be."
7661280,7666880," So, join struct player left."
7666880,7668080," Let's put it in here."
7668080,7670720," So, this is the joint."
7670720,7671680," And this is in the left."
7671680,7673600," So, thank you for the raid."
7673600,7674960," Infinite code 01."
7674960,7675840," Hello, hello, Raiders."
7675840,7676480," How are you guys doing?"
7676480,7679440," So, put it like this."
7679440,7681360," So, this is going to be kind and id."
7681360,7687200," So, we broke up a couple of things."
7688800,7690320," And, excuse me."
7690320,7695840," So, next flight check next error."
7695840,7697600," So, I probably have to do something like this."
7697600,7701840," Doesn't fail, unfortunately."
7701840,7704160," So, something is broken with my flight check, I think."
7704160,7705440," Yeah."
7705440,7707760," So, we don't need that."
7707760,7709200," Well, I mean, it's just this."
7709200,7717760," I'm entirely sure how exactly it's going to go, but whatever."
7719520,7720480," Next error."
7720480,7721920," All right."
7721920,7723920," So, notify who left."
7723920,7725920," Notify who left."
7725920,7732080," So, that should be very easy."
7732080,7734480," If you ask me."
7734480,7742320," So, here's the view."
7742320,7745520," Player left struct."
7745520,7748080," So, the kind is player left."
7748080,7748320," Okay."
7748320,7753200," So, we'll have to introduce this kind of thing."
7753200,7754240," So, player left."
7754240,7758480," And here we have a kind is already set."
7758480,7759520," Kind is already set."
7759520,7762880," And this is the player id."
7762880,7764000," And that's about it."
7764000,7764800," Yeah."
7764800,7765520," That's about it."
7765520,7768640," So, we're then take player ws."
7768640,7773840," No, it's a left id, actually."
7773840,7780160," And we'll probably want to serialize it here."
7780160,7780320," Right."
7780320,7782400," So, we're iterating all of the left ids."
7782400,7784720," We're serializing this message once."
7785280,7789680," And then we're iterating through all of the players and we're just sending them the view."
7789680,7791120," All right."
7791120,7796080," And the byte counter is just the view byte length like this."
7796080,7796320," Yeah."
7798960,7803680," So, now we're notifying about the left players."
7803680,7804720," Okay."
7804720,7807440," So, next error."
7807440,7808720," What is the next error?"
7812000,7813520," So, player moving."
7813520,7819680," This one is interesting because we're iterating the event queue."
7819680,7823680," When I push into the event queue, what do I push?"
7825280,7827120," Ah, player left."
7827120,7829920," Yeah."
7829920,7830480," I see."
7830480,7831440," Event."
7831440,7833920," Yeah."
7833920,7836560," Are you okay now?"
7836560,7837920," All right."
7837920,7841040," So, next error."
7841040,7843760," It still complains about this shit."
7843760,7846480," So, type any."
7846480,7848400," So, event player."
7848400,7850240," There's a bunch of events."
7850240,7852560," It's player left."
7853360,7854880," Did I actually put..."
7854880,7860160," Oh, I put underscore in a different..."
7860160,7865360," I'm not consistent with how I just do this kind of..."
7865360,7865600," Okay."
7865600,7868960," All right."
7868960,7869600," So, whatever."
7869600,7871600," It's too late to fix anything."
7871600,7874560," Are you okay?"
7874560,7875920," Okay."
7875920,7876880," It seems to be okay."
7876880,7878960," So, yeah."
7878960,7879680," In a common..."
7879680,7882080," I'm going to remove all of these types anyway."
7882080,7883920," So, this is fine."
7883920,7884480," It's fine."
7884480,7885760," Don't worry."
7885760,7887600," Don't worry, chat."
7887600,7888720," Don't fucking worry."
7888720,7889280," Don't..."
7889280,7889760," Don't even..."
7889760,7891440," What?"
7891440,7893120," What?"
7893120,7895840," Oh, it's not even consistent."
7895840,7897600," So, for the left, it's on the right."
7897600,7898880," And for the right, it's on the left."
7898880,7911360," Oh, I'm sorry."
7911360,7913840," So, let's go to the clients."
7913840,7915120," Motherfucking client."
7915120,7916800," Bruv, bruv, bruv."
7916800,7917760," Motherfucking client."
7917760,7918880," Bruv, bruv, bruv."
7918880,7924400," Bruv, bruv, bruv, bruv."
7924400,7931280," So, yesu, yesu, yesu."
7931280,7933680," So, this is the player left."
7933680,7935760," What we have to do now is..."
7938560,7941280," We have to take this thing and check."
7941280,7945040," So, this is the player joint."
7945040,7949760," I can actually select something like this."
7949760,7952320," So, player left."
7952320,7956000," When the player is left, what we want to do..."
7956000,7959280," We want to simply remove the id from that thing."
7959280,7964320," So, it's gonna be common player left struct."
7964320,7968720," And we take id and we read that id from the view."
7968720,7970880," And that's it."
7970880,7974400," So, yeah."
7974400,7976080," It's just that."
7976080,7980320," Pretty easy, pretty simple."
7980320,7985600," So, the only thing that will now have to migrate is player moving."
7985600,7988000," So, yeah."
7988000,7992880," So, everything seems to be compiling."
7992880,7994160," Everything seems to be compiling."
7994160,7995440," Let me restart the server."
7995440,7997440," Right."
7997440,8000480," And I'm going to just run the bots."
8000480,8002640," The bots are running."
8002640,8003040," Right."
8003040,8004000," So, let's join."
8004000,8006640," Everything is Gucci."
8006640,8007600," Everything is Tamaguchi."
8007600,8011440," So, now let's check how it reacts to player left."
8011440,8012560," Does it remove all of them?"
8012560,8013040," It does."
8013040,8013280," Okay."
8013280,8015440," So, player left are actually working correctly."
8015600,8017520," Right."
8017520,8024320," So, what does protobuf actually solve?"
8024320,8027200," Probably some sort of organizational problem of Google."
8027200,8031120," Just like any frameworks from Facebook, Google,"
8031120,8034080," like some Twitter or whatever the fact."
8034080,8037040," So, none of them solve any of your problems."
8037040,8039920," They usually solve their internal organizational problems."
8041600,8046320," So, all right."
8046320,8050320," So, let me see."
8050320,8050720," Let me see."
8050720,8052880," That's actually."
8052880,8053520," I know."
8053520,8053840," Right."
8053840,8057920," So, because I've worked in big corporations."
8057920,8059520," I know how it goes."
8059520,8061840," All of that choice is just solve their internal stuff."
8061840,8069120," And so, releasing all of that publicly also kind of makes sense."
8069120,8076080," Because they kind of project their internal structure to the outside world."
8076080,8077760," Right."
8077760,8078640," So, that's what they do."
8078640,8082080," They project their internal structure to the outside world."
8082080,8084000," And why is it beneficial for them?"
8084000,8086240," Why is that beneficial for them?"
8086240,8088880," So, the potential new employees, right?"
8088880,8092320," So, we'll get used to that structure."
8092320,8095840," So, it's easier for them to integrate people into that structure."
8095840,8096080," Right."
8096080,8099760," So, they sort of inoculate the environment."
8099760,8105200," I don't know."
8105200,8105440," Okay."
8105440,8109280," But I feel like the word, that specific word here fits perfectly."
8109280,8111200," It's just they inoculate the environment."
8111200,8117760," So, then they can grab all of the people and just, you know, integrate them into their structure."
8120480,8122080," This is how we ended up with Kubernetes."
8122080,8122720," Exactly."
8122720,8123120," Exactly."
8123120,8124400," That's what I'm talking about, bro."
8124400,8125600," Exactly."
8125600,8126560," All right."
8126560,8127760," Okay."
8127760,8137280," So, migrate player left message to binary."
8137280,8141040," I'm going to push that into main."
8141040,8145200," Google 8 Olorama programmers."
8145200,8145600," Yeah."
8145600,8147440," So, is it pushing?"
8147440,8147760," Is it?"
8148800,8150160," It's not pushed into your mom."
8150160,8150720," So, that's fine."
8150720,8151680," All right."
8151680,8153120," So, what's the next message?"
8153120,8155040," So, the last message that we have."
8155040,8160640," Well, I mean, there's quite a few messages that are sent from the client to server."
8160640,8161760," Like, I'm moving."
8161760,8168720," And this one is rather interesting because I'm moving could be literally a structure"
8168720,8172320," with the moving mask."
8172320,8172480," Right."
8172480,8175280," So, here we have start moving, stop moving."
8175280,8178480," That doesn't fucking matter."
8178480,8180640," Just, like, send an entire mask."
8180640,8182800," Yeah."
8182800,8184160," I think that's going to be great."
8184160,8187760," Thank you so much for 86 radius."
8187760,8190160," I was about to make a break because I need to take a piece."
8190160,8191040," Hello, everyone."
8191040,8191920," So, let's make a break."
8191920,8193520," Okay."
8193520,8196240," So, let's migrate the rest of the things."
8196240,8196560," Right."
8196560,8198560," So, the next one is going to be player moving."
8198560,8200400," Right."
8200400,8205120," And, essentially, instead of, like, having start and direction and everything,"
8205120,8210000," let's just send the moving mask."
8210000,8210160," Right."
8210160,8213280," The entirety of the moving mask and it kind of solves the entirety of the problem."
8213280,8215600," So, I think it's a good idea."
8215600,8216960," Right."
8216960,8219600," So, let's go ahead and just do that."
8219600,8223760," So, player moving."
8223760,8227120," Also, kind of similar to ammo moving."
8227120,8229600," So, the difference between ammo moving and player moving."
8229600,8232880," ammo moving is sent from the client to the server"
8232880,8236720," and player moving is sent backwards from the server to the client."
8236720,8238080," So, that's the difference between that."
8238080,8240400," Right."
8240400,8242560," So, player left."
8242560,8244000," So, player moving."
8244000,8246720," And, in here, we're going to have a kind."
8246720,8248160," Then, id."
8248160,8251200," Then, we're going to have x and y."
8251200,8253760," And, x and y are going to be floats, obviously."
8253760,8254000," Right."
8254000,8255200," So, they are floats."
8255200,8257040," So, this is y."
8257040,8261040," And, we're just going to have moving."
8261040,8265440," So, and moving is a mask that replaces both start and direction."
8265440,8268400," Both start and direction."
8269840,8270240," All right."
8270240,8270720," That's cool."
8270720,8275680," So, but this thing is going to be just simply uint8."
8275680,8276880," Right."
8276880,8278800," And, everything seems to be all right."
8278800,8280320," So, let's go to the compilation errors."
8280320,8281040," Super quick."
8281040,8282160," So, this is that."
8282160,8284240," Next one."
8284240,8284960," This is that."
8284960,8288000," And, what's the next error?"
8288000,8289680," All right."
8289680,8291280," So, I think that's it."
8291280,8291600," Right."
8291600,8293440," So, I don't see any more errors in here."
8293440,8294640," So, no more errors."
8294640,8295760," Let's go into the server."
8295760,8298160," And, let's fix everything."
8298160,8299840," Yeah."
8299840,8300080," Okay."
8300080,8302320," Next one."
8302320,8303600," Next error."
8303600,8304400," No errors."
8304400,8304800," Really?"
8304800,8308400," What the fuck are you saying, brother?"
8309760,8310800," Player moving."
8310800,8312480," Okay."
8312480,8317600," So, when we're sending."
8317600,8317920," Okay."
8317920,8321040," So, when we're handling the player moving situation."
8321040,8324240," Notify about movements."
8325840,8327360," This one is interesting actually."
8327360,8330160," This one is actually very interesting."
8330160,8337280," We probably want to."
8337280,8347840," We constantly receive moving and we sort of accumulate them."
8347840,8348720," Right."
8348720,8350880," So, we sort of keep accumulating them."
8356320,8360160," What if we also mark."
8360160,8363600," Just simply mark the players that have moved."
8363600,8367600," And, we generate the movements for them automatically."
8367600,8372320," So, there is this interesting paradigm."
8372320,8374960," There is this interesting paradigm."
8374960,8378560," Where I first collapse events."
8378560,8383680," Such events as player joined, player left and so on and so forth."
8384480,8386560," This is a very interesting paradigm."
8386560,8387360," So, essentially."
8387360,8390080," The server receives messages."
8390080,8394240," Player joined with some sort of ID."
8394240,8395760," Player joined two."
8395760,8397760," Player joined three."
8397760,8400240," And, then maybe player left one."
8400240,8401040," Right."
8401040,8403360," And, let's assume that within this single tick."
8403360,8405440," Within a single tick."
8405440,8407840," This is the messages it received."
8407840,8409360," So, as you can see."
8409360,8411680," Within a single tick."
8411680,8413920," A player joined and then left."
8415040,8419280," So, we kind of don't want to notify the players."
8419280,8420960," That within this single tick."
8420960,8422560," Somebody joined and left."
8422560,8425280," So, they left no impact on the server."
8425280,8428480," What's the point of even notifying anybody."
8428480,8430560," About this kind of situation."
8430560,8432240," So, one of the things we do."
8432240,8434080," On the tick."
8434080,8436880," We iterate through all of the joint and left events."
8436880,8438080," And, we kind of collapse them."
8438080,8441600," If there is a corresponding left for the joint."
8441600,8443280," We kind of like just remove them."
8443280,8444400," Okay."
8444400,8445600," We just remove them."
8445600,8447040," So, that's basically what we do."
8447040,8447840," Right."
8447840,8449360," And, we have these two sets."
8449360,8451920," Joint IDs and left IDs."
8451920,8453280," We iterate through the events."
8453280,8454320," If the player joined."
8454320,8456160," We add them to the joint IDs."
8456160,8457360," If the player left."
8457360,8459920," And, it exists within the joined IDs."
8459920,8460720," We remove that."
8460720,8461600," But, if it doesn't."
8461600,8464080," We add it to the left IDs."
8464080,8466240," And, so, this is like basically."
8466240,8468560," Grouping and collapsing of these events."
8468560,8470080," Within a single tick."
8470080,8471600," And, then."
8471600,8472720," After we've done that."
8472720,8474480," We separately iterate."
8474480,8475600," Joint IDs."
8475600,8477360," Doing notification for the people."
8477360,8478880," Who joined within a single tick."
8478880,8480640," Then, separately."
8480640,8482160," Iterating left IDs."
8482160,8483520," And, doing all of that stuff."
8483520,8485200," And, only then iterating."
8485200,8486960," Player moving."
8486960,8488160," So, for the player moving."
8488160,8489520," I feel like we want to do."
8489520,8490880," Kind of a similar thing."
8490880,8492880," I think we want to do."
8492880,8493920," Kind of a similar thing."
8493920,8495760," So, essentially."
8495760,8497680," If somebody moved."
8497680,8498240," We're going to."
8498240,8501040," Add them to the moved IDs."
8501040,8504800," So, that sounds interesting actually."
8507840,8508560," Somebody moved."
8508560,8509040," Or."
8509040,8512800," So, we have player with socket."
8512800,8513440," So, this is."
8513440,8516480," Not really player with socket."
8516480,8519280," It's more like a player on server."
8519280,8519840," Right."
8519840,8520080," So."
8520080,8523280," Player on server."
8523280,8527120," It's basically the player."
8527120,8527360," Right."
8527360,8527840," ID."
8527840,8528160," X."
8528160,8528480," Y."
8528480,8528880," Moving."
8528880,8529360," Mask."
8529360,8529680," Q."
8529680,8530480," And, stuff like that."
8530480,8532080," But, with additional information."
8532080,8533440," Which is."
8533440,8536560," Which is socket right now."
8536560,8537600," So, one of the things."
8537600,8537840," We."
8537840,8539120," Can."
8539120,8540720," Add in here."
8540720,8542000," We can say."
8542000,8542400," Moved."
8542400,8545440," Moved."
8545440,8547520," And, essentially."
8547520,8548800," As we collect."
8548800,8550400," All of the events."
8550400,8552000," If we receive."
8552000,8553520," I'm a moving event."
8553520,8555120," We're going to just."
8555120,8555520," Mark."
8555520,8557280," The player."
8557280,8557840," We're going to just."
8557840,8558560," Mark the player."
8558560,8559520," As moved."
8559520,8560480," So, on the tick."
8561200,8562640," It is going to notify."
8562640,8563840," You know."
8563840,8564880," The rest of the people."
8564880,8565120," Right."
8565120,8566480," So, we don't even have to do it."
8566480,8568320," So."
8568320,8569760," Yeah."
8569760,8571840," So, we have."
8571840,8573040," Joint IDs."
8573040,8574080," Left IDs."
8574080,8574720," And so on."
8574720,8575360," And so forth."
8577600,8579600," Phantasma 55."
8579600,8580240," Thank you so much."
8580240,8580720," For."
8580720,8581760," To one with a message."
8581760,8582960," Idea for the normies."
8582960,8584240," RTS game."
8584240,8586320," Does anybody."
8586320,8587280," Even still play."
8587280,8588000," RTS games."
8588000,8588480," I thought."
8588480,8589200," This genre."
8589200,8589920," Actually."
8589920,8591600," Died a long time ago."
8591600,8592800," It kind of killed itself."
8592800,8593600," At some point."
8598000,8599440," So, player left."
8599440,8599840," Is the same."
8599840,8600720," As a player exit."
8600720,8600880," Yeah."
8600880,8601200," Exactly."
8601200,8602640," It's the same."
8602640,8605360," All right."
8605360,8606400," So, interestingly."
8606400,8607200," I feel like."
8607200,8608080," Player."
8608080,8609360," We could perform."
8609360,8612000," This collapsing."
8612000,8613120," At the point."
8613120,8613440," Of."
8613440,8616480," Collecting the events."
8616480,8616880," I think."
8616880,8617840," That's what we can do."
8617840,8620400," So."
8620400,8621120," How many changes."
8621120,8622000," Have I made in here."
8622000,8624160," How many changes."
8624160,8626720," I kind of want to."
8628000,8629600," Yeah."
8629600,8629840," So."
8629840,8632400," What I want to do."
8632400,8634080," Is."
8634080,8635200," Literally."
8635200,8635920," Get rid."
8635920,8637120," Of."
8637120,8637360," The."
8637360,8638400," Player."
8638400,8638880," Joint."
8638880,8639680," Player."
8639680,8640160," Joint."
8640160,8640480," And."
8640480,8640800," Player."
8640800,8641200," Moved."
8641200,8643280," Structures."
8643280,8643520," Like."
8643520,8643920," Literally."
8643920,8645200," Get rid of these things."
8645200,8645360," And."
8645360,8645680," I think."
8645680,8646160," I know."
8646160,8647040," How to do that."
8647040,8649120," I think."
8649120,8649360," I know."
8649360,8650080," How to do that."
8650080,8651040," I hope."
8651040,8651680," I'm not going to."
8651680,8652560," Get stuck."
8652560,8654960," I may."
8654960,8655680," Actually."
8655680,8655920," But."
8655920,8657120," It's."
8657120,8657520," Besides."
8657520,8657920," The point."
8657920,8658640," So."
8658640,8658960," Now."
8658960,8659360," Event."
8659360,8659840," Is going to be."
8659840,8660800," Only player moving."
8660800,8662240," All right."
8662240,8662560," So."
8662560,8663680," Do we have any errors."
8663680,8664240," Anymore."
8664240,8665040," Okay."
8665040,8665760," No errors."
8665760,8666480," In the server."
8666480,8668160," Let's take a look."
8668160,8669120," At this stuff."
8669120,8669440," Right."
8669440,8669760," So."
8669760,8670640," We don't have."
8670640,8671280," This thing."
8671280,8672800," All right."
8672800,8673360," So."
8673360,8674000," Let's take a look."
8674000,8674800," The errors."
8674800,8675200," Let's take a look."
8675200,8675600," The errors."
8675600,8675600," Next."
8675600,8676160," Error."
8676160,8678400," Flying."
8678400,8679440," Okay."
8679440,8680560," Next."
8680560,8680880," Error."
8680880,8681280," Come on."
8681280,8682800," Okay."
8682800,8683040," So."
8683040,8683840," Player set."
8683840,8685760," So."
8685760,8686560," Players."
8686560,8686800," And."
8686800,8687360," Players."
8687360,8687840," Set."
8687840,8688480," Why."
8688480,8689040," Can't."
8689040,8689360," I."
8689360,8689840," Set."
8689840,8690080," This."
8690080,8690400," Player."
8690400,8690560," In."
8690560,8690800," Here."
8690800,8693040," Is that because."
8693040,8695760," Moved."
8695760,8696080," Ah."
8696080,8696720," I see."
8696720,8697040," So."
8697040,8698320," Because I have to do."
8698320,8698640," Move."
8698640,8699680," Defaults."
8699680,8700080," Sure."
8700080,8701280," Next."
8701280,8701920," Error."
8701920,8702720," Is the next error."
8702720,8704480," This is what I'm talking about."
8704480,8705440," So."
8705440,8705760," We."
8705760,8706160," Adding."
8706160,8706720," Player."
8706720,8707600," Joined."
8707600,8708400," We."
8708400,8708720," Adding."
8708720,8709040," Player."
8709040,8709840," Joined."
8709840,8710160," But."
8710160,8710960," What I think."
8710960,8712160," We should be doing."
8712160,8713520," We should be doing."
8713520,8714400," That thing."
8714400,8714960," That."
8714960,8715680," Collapsing."
8715680,8715920," Thing."
8715920,8716480," That we do."
8716480,8716960," In a tick."
8716960,8718400," Right."
8718400,8719280," So."
8720240,8720880," We just do."
8720880,8722320," This."
8722320,8725600," So."
8725600,8726480," Joint."
8726480,8726880," Id."
8726880,8728080," Right."
8728080,8729360," So."
8729360,8730480," That's what we're going to be doing."
8730480,8731440," And that actually."
8731440,8733360," Means that we don't really have to."
8733360,8733600," Oh."
8733600,8733840," Okay."
8733840,8734080," So."
8734080,8734480," The player."
8734480,8734880," Joined."
8734880,8735280," Counter."
8735280,8735680," Player."
8735680,8736080," Currently."
8736080,8736480," Counter."
8736480,8736720," Okay."
8736720,8736880," So."
8736880,8737360," That's fine."
8737360,8737760," That's fine."
8737760,8738080," That's fine."
8738080,8739840," All right."
8739840,8740000," So."
8740000,8740960," The next one."
8740960,8742720," Flight."
8742720,8743280," Check."
8743280,8743680," Next."
8743680,8744560," Error."
8744560,8746400," And this is kind of the same thing."
8746400,8746800," Right."
8746800,8747600," Instead of doing."
8747600,8748000," Player."
8748000,8748400," Left."
8748400,8749520," Left."
8749680,8752320," IDs."
8752320,8755520," We just do that."
8755520,8758880," So."
8758880,8759760," We just do that."
8759760,8762000," And I can remove it from here."
8762000,8762320," So."
8762320,8763280," This is."
8763280,8763840," What was the."
8763840,8764560," What was the."
8764560,8765600," It was just the ID."
8768800,8771200," And all of that happens within."
8771200,8772080," A single."
8772080,8772160," So."
8772160,8773680," The frame."
8773680,8774480," So now."
8774480,8775200," We can."
8775200,8776320," Get rid of that."
8776320,8777680," And now."
8777680,8778160," We can."
8778160,8778880," Put that."
8778880,8779600," At the end."
8779600,8780480," Where we clean."
8780480,8781200," The event."
8781200,8781600," Q."
8781600,8783680," All right."
8783680,8783920," So."
8783920,8784560," Where we clean."
8784560,8785040," The event."
8785040,8785360," Q."
8785360,8786560," And."
8786560,8786560," And."
8786560,8787200," What's funny."
8787200,8787520," Is that."
8787520,8788800," At some point."
8788800,8789520," We can even."
8789520,8790880," Get rid of the event."
8790880,8791200," Q."
8791200,8793360," That's the thing."
8793360,8795360," We don't need it anymore."
8797280,8798320," Because now."
8798320,8799200," When I receive."
8799200,8800080," I'm a moving."
8800080,8801120," So what I'm doing in here."
8801120,8801840," I'm pushing."
8801840,8802720," I'm a moving."
8802720,8804000," Into the event queue."
8804000,8805840," Instead of doing that."
8805840,8806880," Let's."
8806880,8807920," For the player."
8807920,8808400," Uh."
8808400,8808720," Right."
8808720,8809040," So."
8809040,8809280," Who."
8809280,8810320," Who's the player."
8810320,8810720," Or."
8810720,8810960," Like."
8810960,8811680," For the ID."
8811680,8811920," Right."
8811920,8812400," So let's do."
8812400,8813600," Uh."
8813600,8814960," Players."
8814960,8816080," Uh."
8816080,8816960," Kevaron28."
8816960,8817520," Thank you so much."
8817520,8818320," For tier one."
8818320,8818560," Thank you."
8818560,8818800," Thank you."
8818800,8819600," Thank you."
8819600,8821760," So we're going to get the message ID."
8821760,8822000," So."
8822000,8823600," And that gives us the player."
8823600,8825200," So we get some sort of a player."
8825200,8826480," So if player is."
8827840,8828240," Um."
8828240,8829520," So message."
8829520,8830560," Oh yeah."
8830560,8831680," We already know ID."
8831680,8834320," So we already even know the player."
8834320,8836080," Uh."
8836080,8837360," So we can just say."
8837360,8837920," Player."
8837920,8839360," Moved."
8839360,8840960," And true."
8840960,8843120," And that's it."
8843120,8847040," And we can now get rid of the event queue."
8847040,8849280," So."
8849280,8851600," Instead of event queue."
8851600,8853600," And accumulating the events for the tick."
8854400,8857040," We accumulate the difference."
8857040,8858880," Within a single tick."
8858880,8860320," And then."
8860320,8861680," At the end of the tick."
8861680,8863680," We're notifying everyone."
8863680,8865040," About that difference."
8865040,8866960," That is insane."
8866960,8868160," That is so fucking cool."
8868160,8868560," Actually."
8868560,8870640," Hmm."
8870640,8874960," So yeah."
8874960,8875840," So we were."
8875840,8878080," Accumulating the events."
8878080,8879120," Then to handle the."
8879120,8879440," And the tick."
8879440,8880560," We don't accumulate that."
8880560,8882080," We accumulate the diffs."
8882080,8882880," Because things like."
8882880,8883680," Joined IDs."
8883680,8884880," Left IDs."
8884880,8886880," And players that moved."
8886880,8889120," Maybe we should do something like."
8889120,8889840," Moved IDs."
8889840,8890720," I don't fucking know."
8890720,8891120," Right."
8891120,8892000," So moved IDs."
8892720,8895120," All of that is just the diff."
8895120,8896160," Between."
8896160,8898240," Between the ticks."
8898240,8900480," It's the diff between the ticks."
8900480,8903520," This is a very interesting way of thinking about it."
8903520,8904160," I really like that."
8904160,8906560," I really fucking like that mate."
8906560,8908080," Really fucking like that."
8908080,8908880," But of course."
8908880,8909520," Everything is broken."
8909520,8911040," So let's actually go through the compilation errors."
8911040,8912720," Next error."
8912720,8915520," So event queue."
8915520,8917840," So here we're doing notification for this stuff."
8917840,8919360," We don't have to do that anymore."
8920000,8921360," We really don't have to do that."
8921360,8925760," What we have to do."
8925760,8928000," Is to iterate through all of the players."
8928000,8930000," And if the player is like moved."
8930000,8934080," We are sending information about that."
8934080,8935840," So let me do players."
8935840,8937120," For each."
8937120,8939680," So this is the player."
8939680,8944560," So this is the player."
8944560,8946080," This is the player."
8946080,8948880," And if player moved."
8948880,8950560," If player moved."
8950560,8954000," So we're going to be sending notification about that."
8954000,8954640," First of all."
8954640,8956160," We have to like clean it up."
8956160,8957360," After we've done that."
8957360,8959760," And then we do sort of like an internal thing."
8959760,8962240," Where we iterate through all of them."
8962240,8966160," So this one is kind of annoying."
8966160,8967120," In the sense that."
8970160,8972720," This is like a quadratic."
8972720,8974400," Square."
8974400,8975040," Right."
8975040,8977680," Square algorithm."
8977680,8980240," But maybe that's fine for now."
8980240,8980560," Right."
8980560,8982160," So let's say other player."
8982160,8984480," Other player."
8984480,8985680," So we can optimize it."
8985680,8986880," We can collapse it a little bit later."
8986880,8988240," So it doesn't really matter that much."
8988240,8993040," So and this is where we're going to be sending the player moving."
8993040,8993280," Right."
8993280,8994240," So somebody moved."
8994240,8995680," So we need to fire everyone."
8995680,8998640," Like everyone to everyone who moved."
8998640,9003440," If we implement batching of the messages."
9003440,9006560," We'll be able to just like iterate all of these things."
9006560,9008800," Batch them up into a single."
9008800,9012800," Into a single message."
9012800,9014640," And send it as a single message."
9014640,9016160," Right."
9016160,9017840," So this is what we can do."
9021840,9022880," I really like that."
9022880,9024240," I really fucking like that."
9024240,9025440," Okay."
9025440,9025680," Go."
9025680,9029040," So let's go ahead and do that."
9029040,9029920," So the other player."
9029920,9030240," So."
9030240,9035040," I suppose for this one."
9035040,9036560," We have to just."
9036560,9038400," Create the thing."
9038400,9041920," Conquer the amazing messages in 2024."
9041920,9042160," Yeah."
9042160,9043040," That's what we're going to be doing."
9043040,9046320," So player moved."
9046320,9048560," Moving struct."
9048560,9051440," It's more like a player sync."
9051440,9051680," Right."
9051680,9053520," So we're kind of syncing the player."
9053520,9053840," Rather."
9053840,9055360," In terms of like."
9055360,9056080," I mean syncing."
9056080,9058080," Not syncing."
9058080,9058320," But."
9058320,9059600," Syncing."
9059600,9060720," You know what I mean."
9060720,9062960," So this is the size."
9062960,9064240," Then we allocate."
9064240,9065360," Array buffer."
9065360,9065920," Like this."
9065920,9068000," And then we have a new data view."
9068000,9069520," Like this."
9069520,9070480," And this is the view."
9070480,9071600," Like this."
9071600,9073600," What are you syncing?"
9073600,9076880," Classic German ad."
9076880,9078080," Love it."
9080080,9080480," Okay."
9080480,9084400," So now."
9084400,9085600," What we have to do."
9085600,9086080," View."
9086080,9087440," Kind."
9087440,9090160," Not really kind."
9090160,9090400," But."
9090400,9090880," Common."
9090880,9092640," Moving."
9092640,9093920," Struct."
9093920,9096720," Kind."
9096720,9100080," Right."
9100080,9101600," View."
9101600,9102640," Offset is zero."
9102640,9106000," Offset is zero."
9106000,9108640," And value is message kind."
9108640,9110080," Player moving."
9110080,9111760," Do we have such thing?"
9111760,9113600," I think we do."
9113600,9114800," No, we don't."
9114800,9117600," Player moving."
9117600,9124000," So that is fine."
9125520,9126240," So now."
9126240,9129280," The rest of the thing."
9129280,9131360," Player left."
9131360,9134000," Not player left."
9134000,9135040," But player moved."
9135040,9136160," Player moving."
9136160,9137120," Okay."
9137120,9137920," ID x."
9137920,9139840," So now."
9139840,9141040," This is id."
9141040,9144960," Which is the player id."
9145760,9146880," So this is x."
9146880,9148800," X."
9148800,9150640," Y."
9150640,9151760," Y."
9151760,9152640," X."
9152640,9152640," X."
9152640,9152800," X."
9152800,9153040," Y."
9153040,9153360," Y."
9153360,9154240," And moving."
9154240,9158800," So this is the moving."
9158800,9160720," Common."
9160720,9162320," Player."
9162320,9164400," Moving mask."
9164400,9166880," Moving mask."
9166880,9168560," Okay."
9169440,9170640," We serialized this trip."
9170640,9171680," Now."
9171680,9173680," What we're going to be doing."
9173680,9174960," Is we're going to be sending all that."
9174960,9175840," Cool."
9175840,9179360," So let's do."
9179360,9182320," Other player."
9182320,9183360," W."
9183360,9183920," S."
9183920,9184560," Send."
9184560,9185760," View."
9185760,9187680," Like this."
9187680,9189680," But then we have to do."
9189680,9191040," Bytes."
9191040,9191520," Send."
9191520,9192240," Counter."
9192240,9192480," Right."
9192480,9193760," So we have to increment."
9193760,9194960," View."
9194960,9196160," Byte."
9196160,9196560," Length."
9197360,9201200," And also message."
9201200,9201600," Send."
9201600,9203120," Counter."
9203120,9204080," Plus."
9204080,9205680," It's not really message."
9205680,9205920," Send."
9205920,9206960," It's more like a packet."
9206960,9207360," Send."
9207360,9210160," So I think we should think about them as packets."
9210160,9211520," So yeah."
9211520,9214160," This is how I want to go about that."
9214160,9215600," So."
9215600,9219920," And we don't need this thing at all."
9219920,9221200," Right."
9221200,9221920," Notifying."
9221920,9223840," None of that is needed."
9223840,9226080," I really like this idea of."
9226960,9228880," Just accumulating the diff."
9228880,9229680," Right."
9229680,9230800," So accumulating the diff."
9230800,9232720," And then notifying about the diff."
9232720,9235680," So tick message received."
9235680,9237840," This is how messages you received."
9237840,9246640," So this is not exactly how we want to go about that."
9250320,9251120," Tick message received."
9251120,9251760," Tick message received."
9251760,9255120," So we have to count them."
9255120,9256640," Now count them somehow differently."
9256640,9258640," Since we got rid of the event queue."
9258640,9264960," It is not particularly possible to use it like that."
9264960,9266480," All right."
9266480,9267600," So player moving."
9267600,9268800," Yeah."
9268800,9270640," It's not used I suppose."
9270640,9272080," None of that used anymore."
9272080,9274080," All that is redundant."
9276080,9278400," So let's go to the next errors."
9278400,9283280," So it means now within the message."
9283280,9284880," So within the message."
9284880,9286960," Where is the message?"
9286960,9287680," I don't see it."
9287680,9291360," Maybe it's something like message."
9291360,9293840," Connection."
9293840,9294800," I don't see it."
9294800,9294800," I don't see it."
9294800,9296160," Where is the problem?"
9296160,9296480," Okay."
9296480,9297520," Oh yes."
9297520,9298000," Here it is."
9298000,9301920," Messages received."
9301920,9305680," So this is the total messages received per tick."
9307520,9310000," So this is bytes received within tick."
9310000,9316560," Why can't we have messages received within tick?"
9316560,9318160," And this is just plus one."
9318160,9321120," And you can see."
9321120,9321760," So let's."
9321760,9326080," Bytes received within tick."
9326080,9326960," So we increment that."
9326960,9328960," And then we set it to zero."
9328960,9332720," And this is messages received within tick."
9332720,9337520," And this is messages received within tick."
9337520,9339200," So why don't you like."
9339200,9343520," So I probably misspelled it somehow."
9343520,9345280," I don't really know where exactly it is."
9345280,9345680," Oh yeah."
9345680,9346000," I see."
9346000,9346960," Okay."
9346960,9348880," So there is no errors."
9348880,9351520," I guess I refactored everything."
9351520,9353520," I guess everything is refactored."
9353520,9356240," So I managed to get rid of the event queue."
9356240,9360320," Which is something I didn't expect to do today honestly."
9360320,9361760," I had like a rough plan."
9361760,9365840," Of how the thing is going to look like at the end of the stream."
9365840,9368480," And this is the last thing I expected."
9368480,9370320," To get rid of the event queue honestly."
9370320,9373840," It's kind of bizarre."
9373840,9375600," But maybe it's completely broken."
9375600,9376560," Maybe it's not going to work."
9376560,9377920," But yeah."
9377920,9378480," It's kind of cool."
9378480,9380320," So we get rid of that."
9380320,9383760," So now we need to test if it still works."
9383760,9387760," The fact that you don't need event queue is so cool."
9389680,9390160," Okay."
9390160,9393920," That expands my understanding of how you make this kind of games."
9393920,9394640," I really like that."
9394640,9398640," I really, really like that."
9398640,9399280," Testing time."
9399280,9399600," Yeah."
9399600,9400640," So we need to test."
9400640,9402800," Like we're not going to do performance testing or anything."
9402800,9405040," We just need to do the smoke test."
9405040,9405280," Right."
9405280,9406320," So maybe it's completely broken."
9406320,9406720," I don't know."
9406720,9408880," All right."
9408880,9410560," So are you working?"
9410560,9411280," Are you twerking?"
9411280,9412880," All right."
9412880,9413440," Let's connect."
9413440,9414800," Okay."
9414800,9415760," So disconnected."
9415760,9416800," And I wonder why."
9416800,9420240," So let me see."
9420240,9423040," I don't see any errors though."
9423040,9424160," Okay."
9424160,9427200," So maybe it's something on this side."
9427200,9431840," I think I know what exactly is going on here."
9431840,9432080," Yeah."
9432080,9433600," It's the client side."
9433600,9434880," we haven't migrated to."
9434880,9438480," Bogus Amogus player joins."
9438480,9444960," Incorrect player joins."
9444960,9445280," Oh yeah."
9445280,9445520," I see."
9445520,9445920," I see."
9445920,9446560," So that's fine."
9446560,9449520," Incorrect."
9450080,9451360," Incorrect."
9451360,9452240," Yeah."
9452240,9454240," So I wouldn't."
9454240,9455040," Yeah."
9455040,9456880," This is not how we want to go about that."
9456880,9461680," So player moving."
9461680,9462800," Right."
9462800,9465360," So this is going to be player moving struct."
9465360,9472160," And now what we're going to be doing is very simple."
9472160,9474880," We need to only sync x, y, and moving."
9477440,9481040," So in the common player moving struct."
9481040,9487600," Read has to be x, read view, zero."
9487600,9489520," So we're just reading that."
9489520,9494960," But we also need to actually read the ID first."
9494960,9496480," So let's actually read the ID."
9496480,9501360," We don't."
9501360,9501600," Yeah."
9501600,9503440," So this is something that can happen."
9504800,9508000," We can even copy paste some of that stuff."
9508000,9513520," So this is going to be the ID."
9513520,9518400," So this is the ID."
9518400,9519680," All right."
9519680,9523920," Bogus, we don't know anything about player with ID."
9523920,9526800," Let's get rid of that."
9528960,9530240," I'm being really careful."
9530240,9533760," So this is what we want to set in here."
9533760,9536080," Okay."
9536080,9537760," So player."
9537760,9540400," Player moving."
9540400,9543600," So what you don't like in here."
9543600,9545760," It's bizarre."
9545760,9550000," Player moving."
9550880,9555200," So common set moving mask."
9555200,9555520," All right."
9555520,9556880," So we're setting the moving mask."
9556880,9558960," But the question is, what is the mask?"
9558960,9563040," We can just set it like this."
9563040,9566400," So this is going to be that."
9566400,9567520," And this is going to be that."
9567520,9569200," All right."
9569200,9573920," So now let's read x and y."
9575360,9578080," So we're going to be also setting x and y in here."
9578080,9586160," So we might as well actually read all of these things after we identified the player."
9586160,9586480," All right."
9586480,9588560," So all right."
9588560,9589520," That is good."
9589520,9591920," So we don't need that stuff anymore."
9591920,9594080," And we don't have anything anymore."
9594080,9597040," In fact, so we only have these shifts."
9597040,9603760," I guess we, in terms of receiving messages, we fully migrated to binary protocol."
9603760,9610560," As you can see, in both of the branches in here, we first check that we are within the binary stuff."
9610560,9612960," That means we don't have to do that anymore."
9612960,9617120," So we can just always assume that it is binary protocol."
9617120,9623520," So we fully migrated to binary protocol in terms of receiving messages."
9623520,9625440," Not in terms of sending them yet."
9625440,9629600," But in terms of receiving them, we fully migrated to binary protocol, which is good."
9631600,9636960," Okay, so when we're sending things, like we still have ammo moving."
9636960,9639600," But this one is easy, actually."
9639600,9641920," This one is easy."
9641920,9644320," This one we can just send the the moving mask."
9644320,9650720," Okay."
9658320,9658800," Let's go."
9658800,9658800," Let's go."
9658800,9663120," Okay."
9663120,9664000," So let's refresh."
9664000,9665920," Okay."
9665920,9666240," Okay."
9666240,9666240," Okay."
9666240,9666480," Okay."
9666480,9668640," And all right."
9668640,9669840," Bogus and mogus messages."
9669840,9672080," That is bizarre."
9672080,9678080," Because I don't handle moving."
9678080,9679760," Like I thought I do handle moving."
9679760,9680480," Wait a second."
9680480,9682560," I thought I do handle moving."
9682560,9683680," And here it is."
9683680,9687440," Player undefined."
9687440,9690560," So Bogus."
9690560,9693600," Received bogus and mogus message from the server."
9693600,9697840," And it's really unclear where exactly that happens."
9697840,9700640," So it looks like moving struct is incorrect."
9700640,9701600," That's what it feels like."
9703360,9706080," Maybe I just need to restart everything."
9706080,9707040," Maybe that's what happened."
9707040,9715040," No, it's still when it receives something."
9715040,9717520," But I know that it receives something from here."
9717520,9719680," All right."
9719680,9723200," So that means it couldn't properly do the moving struct."
9723200,9727600," Okay."
9727600,9731840," So server mts and moved."
9731840,9734320," All right."
9734320,9738960," I wonder what exactly happened."
9738960,9742320," Because we allocate this thing."
9744400,9744960," And here."
9744960,9745360," Right."
9745360,9746560," So this size."
9746560,9750160," So maybe."
9750160,9754080," Message kind is wrong."
9754080,9754480," Yeah."
9754480,9755920," So message kind is wrong."
9755920,9756720," Yeah."
9756720,9757760," Yeah."
9757760,9758080," Thank you."
9758080,9759680," I can see that."
9759680,9762080," So it's a little bit long."
9762080,9764160," But I'll factor it out a little bit later."
9764160,9764400," Right."
9764400,9766320," So I'll make it look a little bit nicer."
9766320,9766640," Thank you."
9766640,9767200," Thank you so much."
9770160,9773840," So yes."
9773840,9775840," Okay."
9775840,9780960," Fucking doesn't work."
9780960,9782000," All right."
9782000,9786080," Set moving mask."
9786080,9788480," Okay."
9788480,9791040," So let's try to maybe log the messages."
9791040,9791760," Just to see."
9791760,9794320," So now at least it parses them."
9794320,9794480," Right."
9794480,9795280," So that's good."
9795280,9797520," Received message."
9797520,9797840," Okay."
9799600,9800960," That's very very good."
9800960,9802960," It doesn't update them."
9802960,9804560," This motherfucker doesn't update them at all."
9804560,9808320," Set moving mask."
9808320,9809920," So."
9809920,9813840," Did I do that correctly?"
9813840,9816720," So first time just moving it to the right."
9816720,9819120," Taking one out of that."
9819120,9821520," And yeah."
9821520,9823040," So that seems to be correct."
9823040,9824080," So set a mask."
9824080,9825360," Maybe on the server."
9827520,9828720," We get moving mask."
9828720,9830480," Maybe moving mask is not correct."
9830480,9833120," I don't know."
9833120,9836960," So let's try to now in here."
9836960,9840080," Take a look at the moving mask."
9840080,9841760," So it also resets over here."
9841760,9842640," So if it's false."
9842640,9843840," It's going to be correct as well."
9843840,9848160," So let's do console.log player."
9848160,9848800," Just player."
9848800,9850400," Let's take a look at the entirety of the player."
9851440,9853520," So okay."
9853520,9855520," So it doesn't show moving."
9855520,9857040," I have to expand it."
9857040,9857280," Yeah."
9857280,9858320," It doesn't set anything."
9858320,9861280," Unfortunately."
9861280,9865440," So I'm holding and..."
9865440,9868320," Bruh."
9871040,9871600," It is."
9871600,9871600," It is."
9871600,9872720," All of them is false."
9872720,9873920," That is."
9873920,9875600," Unacceptable."
9875600,9876160," Honestly."
9876160,9878480," So."
9878480,9882320," Did I forget to."
9882320,9887840," So it's zero."
9887840,9889520," It literally sent zero."
9889520,9893760," Why did it send zero?"
9893760,9895840," Moved."
9899680,9900960," So player moving."
9900960,9903040," So when I received ammo moving."
9903040,9906560," Because I never actually send."
9906560,9906880," Okay."
9906880,9907920," So that explains it."
9907920,9910320," So what I have to do is in here is just moving."
9910320,9913760," And then I take the direction."
9913760,9916000," So take the direction."
9916000,9916960," And."
9916960,9919680," Message started."
9919680,9922240," Yeah."
9922240,9924160," Start."
9924160,9927280," I forgot to do this thing."
9927280,9928480," Luckily I actually found it."
9928480,9928640," Right."
9928640,9929920," So luckily I found this problem."
9929920,9930960," Okay."
9930960,9931840," So that's cool."
9931840,9937360," Okay."
9937360,9938640," It's moving."
9938640,9939120," Finally."
9939120,9940480," Finally it's moving."
9940480,9941600," So I was complaining about something."
9941600,9941840," Okay."
9941840,9942800," So that's fine."
9942800,9944400," All right."
9944400,9946400," So now let's take a look at the client."
9946400,9948080," And let's get rid of that."
9948080,9951600," Let's get rid of that."
9951600,9953920," And let's also do it like that."
9953920,9957280," All right."
9957280,9959120," So we're moving around."
9959120,9962400," So can I connect the second player now?"
9962400,9967040," Can we connect the second player now?"
9967040,9967280," Okay."
9967280,9968960," So the second player is connected."
9968960,9972000," And now I'm going to try to run the bots."
9972000,9976800," So they are moving."
9976800,9978160," So they are moving."
9978160,9984800," So average bytes sent per tick."
9989680,9990800," That is actually cool."
9990800,9995680," Look how many bytes we sent per tick."
10002160,10004640," So that is way less than we had before."
10004640,10005840," It's like a magnitude is less."
10005840,10013680," Also we still use JSON for armor moving."
10013680,10016320," We need to get rid of the armor moving."
10018160,10021760," So it should be really, really easy to introduce that."
10021760,10027920," So it's going to be kind, then ID, and then moving mask."
10027920,10031200," How many we had before?"
10031200,10036320," Around like 10, 5 kilobytes or something."
10036320,10042080," You asked in a very inconvenient moment when I was already in the flow."
10042080,10043600," All right."
10043600,10045600," So, okay."
10048640,10049760," So just a second."
10049760,10050880," It's magnitudes actually."
10050880,10052640," It's magnitudes."
10052640,10054240," Let me do everything."
10054240,10058080," Let me just check that everything is correct."
10058080,10060320," No, it's fine."
10060320,10066080," I'm also interested to see what's the improvement."
10066080,10067840," It could be improved even further."
10067840,10069040," It could be improved even further."
10069040,10070720," All right."
10070720,10073360," So migrate."
10073360,10076560," Layer moving to binary."
10077440,10077840," All right."
10077840,10081680," And let's actually go to before the stream."
10081680,10082960," Right."
10082960,10083840," To before the stream."
10083840,10086320," So let's recompile."
10086320,10096160," Come on."
10096160,10096720," You can do that."
10096720,10097120," All right."
10097120,10100400," So, all right."
10100400,10101440," Let's go."
10105440,10109120," seven kilobytes."
10109120,10112800," Like, five, seven, eight kilobytes."
10112800,10113760," This is how many we have."
10113760,10120560," Like, this is how many we were sending to the players, just to notify them about the state of the game."
10123040,10127040," And we shrink it down to 500 gigabytes."
10127040,10129920," By using binary protocol."
10129920,10131520," So that's pretty cool."
10131520,10133440," All right."
10134000,10136320," So we can now go back to here."
10136320,10136320," So we can now go back to here."
10136320,10137760," Right."
10137760,10138640," So that's the compile."
10138640,10140000," Run that."
10140000,10142400," So this is the server."
10142400,10144560," Run it."
10144560,10149200," All right."
10149760,10151440," So this is the average byte send per se."
10151440,10152160," Like 500."
10152160,10154800," So it's pretty cool."
10154800,10158800," And so, yeah."
10158800,10161760," So it's in terms of sending."
10161760,10165120," So I don't think I can, like, improve that thing that much."
10166400,10169680," But I can definitely improve receiving the amount of bytes."
10169680,10169840," Right."
10169840,10173200," So because we're still receiving JSON, I can reduce that as well."
10173200,10175600," So."
10175600,10179280," Okay."
10179280,10181280," Let's go."
10181280,10182000," Let's go."
10182000,10186240," So now I'm going to create a struct for this thing."
10188880,10190080," I'm a moving struct."
10190080,10191120," I'm a moving."
10191120,10193600," I'm a fire in Malaysia."
10193600,10196800," Okay."
10196800,10200880," So this is going to be kind, id, and just moving."
10200880,10202800," That's, yeah."
10202800,10203920," So we're going to be moving."
10203920,10206320," Emacs."
10206320,10207440," Should have a copy max."
10207440,10208560," So this is going to be eight."
10208560,10213360," And I think I can right away just, like, remove this entire thing."
10213360,10214080," We're going to need that."
10214080,10217680," So I'm a moving struct."
10217680,10218880," So id moving."
10218880,10222720," And you just send the current moving state."
10222720,10223280," And that's it."
10223280,10226240," So next error."
10226240,10227360," So there's no errors in here."
10227360,10228480," What about the server?"
10228480,10230320," Next error."
10230320,10231280," So I'm a moving."
10231280,10234400," So I'm pretty sure there is a moving."
10234400,10235920," Yeah."
10235920,10238320," But I mean, wasn't it removed?"
10238320,10239040," It was removed."
10239040,10240800," So that means there should be an error in here."
10240800,10241200," Bro."
10241200,10242480," Yeah."
10242480,10243520," That's what I'm talking about."
10243520,10245440," Show me the error."
10245440,10246080," Or maybe."
10247040,10247840," Yeah, finally."
10247840,10248960," It found the errors."
10248960,10249200," Yeah."
10249200,10250240," This is what I'm talking about."
10250240,10251840," Okay."
10251840,10254640," So on the server, we're receiving a moving."
10254640,10256160," And."
10256160,10261840," So it means, yeah."
10261840,10264560," So as you can see here, we're receiving JSON only."
10264560,10266800," So that's kind of interesting."
10267840,10274400," Honestly, like, the server receives a lot of messages, right?"
10274400,10275360," So a lot of messages."
10275360,10280960," And not being forced to parse them as JSON could be beneficial for the performance, actually."
10280960,10282240," If you think about it."
10282240,10284320," All right."
10284320,10286800," So Bogus and Moogus messages counts, yeah."
10286800,10290560," Yeah, yeah, yeah."
10290560,10292480," So let me see."
10292480,10293440," Let me see."
10293440,10295600," What's the type?"
10295600,10296720," If I'm sending..."
10296720,10299280," Let's actually start with the client."
10299280,10302640," I think with the client it's a little bit easy, right?"
10302640,10308320," Because then on the server, we'll be able to see how, like, what exactly is wrong with the messages."
10308320,10309520," So we don't have a moving."
10309520,10311600," Next error."
10311600,10313040," Okay."
10313040,10313280," Cool."
10313280,10317360," So on the server, new array."
10317360,10325440," So I'm allocating a moving struct size."
10325440,10330000," So here the kind is a moving."
10330000,10332240," So I think there is no a moving."
10332240,10332720," Yeah."
10332720,10336320," a moving."
10336320,10337520," Okay."
10338480,10343280," So, and in ammoving, we have id."
10343280,10347360," This is not that."
10347360,10354160," I'm going to instruct."
10354160,10357280," We have kind id."
10357280,10360880," Do we have x and y?"
10360880,10367280," We don't have x and y because this is from client to server and client has no saying in where it is located."
10367280,10368480," So that's totally fine."
10368480,10372080," So this is moving and..."
10374640,10377840," So this one is the me."
10377840,10378800," Uh-huh."
10378800,10386160," Me moving common moving mask."
10386160,10388080," Yeah."
10388080,10392000," And the rest of the stuff is not moving."
10392000,10394080," Okay."
10394880,10395920," And then we're just sending that stuff."
10395920,10396880," And then we're just sending that stuff."
10396880,10399200," So just send view."
10399200,10401360," Okay."
10401360,10406880," Um, and we can even repeat the whole thing."
10406880,10409200," Hmm."
10409200,10416080," So what we can do now, we can do moving direction true."
10418080,10423600," And here it's literally the same, except this is false."
10423600,10425440," All right."
10425440,10426160," Seems to be compelling."
10426160,10427280," So there's no errors."
10427280,10430560," Uh, let's start the server."
10430560,10431280," Let's start the server."
10431280,10434320," So the server is going to be expecting, um,"
10435280,10437600," the JSON, but we're going to be sending."
10437600,10439520," Uh, yeah."
10439520,10441520," We're going to be sending a role."
10441520,10446560," Uh, kind of, I kind of lost the error."
10446560,10449120," Where is the error?"
10450080,10452400," I think it didn't say anything regarding the error."
10452400,10453440," God damn it."
10453440,10456560," Um, so"
10456560,10460160," get fucking damn it."
10460160,10463440," I need to find the moment."
10463440,10467040," I need to find the moment when I receive this message."
10467040,10470240," And I, the only thing I want to know is what it's type."
10470240,10472080," What it is type."
10472080,10473600," What's its type."
10473600,10474720," JSON parse."
10474720,10475760," Where is the JSON parse?"
10475760,10476320," Let me see it."
10476320,10477040," JSON."
10477040,10478240," Yeah."
10478880,10482000," So I just want to take a look at what it's, what's its type."
10482000,10487280," Can I do something like maybe throw new error?"
10487280,10489680," Uh, something like this."
10489680,10494400," Uh, yeah, I can even do something like type of."
10494400,10497680," Show me your type, brother."
10497680,10499440," Show me your type."
10499440,10500880," Okay."
10500880,10503200," So that's the only thing I care right now."
10503200,10504720," Just what's the type of that thing."
10504720,10505760," So we can work with it."
10507760,10511440," and where is the error map?"
10511440,10511840," Okay."
10511840,10516080," So because of the stats, I can't see yet."
10516080,10517600," Let's not log anything then."
10517600,10520320," One more time."
10520320,10522880," Oh, it wasn't, it didn't recompile it."
10522880,10523280," Get them."
10523280,10524000," It's okay."
10524000,10525040," So that explains it."
10525040,10527440," All right."
10527440,10528080," So, okay."
10528080,10529440," So let's try to do that one more time."
10529440,10530720," It's still recompiling."
10530720,10532240," It's in the watch mode."
10532240,10532800," Okay."
10532800,10533680," Come on, you can do that."
10533680,10535600," Why does this take so much time to compile?"
10535600,10536080," Bruh."
10536080,10536480," Okay."
10536480,10536960," Finally."
10536960,10539120," All right."
10539120,10541040," Okay."
10541040,10542400," Refresh."
10542400,10542640," Move."
10542640,10543920," Finally."
10543920,10546000," Okay."
10546000,10547600," So what's the, what's the type?"
10547600,10548320," What's the type?"
10548320,10548960," What's the type?"
10548960,10549600," What's the type?"
10549600,10552720," Going deprecated objects."
10554160,10554880," Okay."
10554880,10555600," So that's cool."
10555600,10560400," Since we can see everything, we can see everything."
10560400,10562480," Maybe we don't even have to do it like that."
10562480,10563600," So console the log."
10563600,10566880," All right."
10566880,10568400," We can do something like this."
10568400,10573920," Okay."
10573920,10575360," Refresh."
10575360,10575680," Boom."
10575680,10577680," It's a buffer."
10577680,10578560," It's a fucking buffer."
10579920,10586560," I wonder if when I'm opening WSS, can I do binary?"
10586560,10588000," Oh, I can't."
10588000,10598240," So that means when I get WS, what I have to do, I have to set binary type to array buffer in here."
10598240,10600720," So is that what needs to be done?"
10600720,10603200," Because I don't want to be dealing with this like Node.js shit."
10603200,10606560," I just want to have array buffers because that's what I get used to."
10606560,10608080," All right."
10608080,10609120," So this is array buffer."
10609120,10609520," Perfect."
10609520,10609840," Thank you."
10609840,10610400," Thank you so much."
10610400,10611120," That's perfect."
10611120,10613680," Absolutely fucking perfect, mate."
10613680,10615520," Absolutely fucking perfect."
10615520,10616880," Okay."
10616880,10619280," So what do we have is..."
10619280,10622240," So this is event data."
10622240,10624000," This is not what we want to do in here."
10624000,10624720," That's for sure."
10624720,10627120," But yeah."
10627120,10630400," If event data..."
10634080,10645840," If event data is instance of array buffer, we're going to do this usual thing."
10645840,10648800," Otherwise, we're not going to do anything."
10648800,10651920," Otherwise, we're going to mark it as a bogus amogus message."
10651920,10654080," Bogus amogus."
10654080,10654480," Yeah."
10654480,10656640," So essentially, we just copy this thing."
10657600,10660080," I'm going to increment the bogus amogus messages."
10660080,10665280," So if it is array buffer, what we have to do now..."
10665280,10668240," We have to do new data view."
10668240,10669760," Data view."
10669760,10672000," Event data."
10672000,10673200," Like this and this."
10673200,10676320," This is the view."
10676320,10677440," Const."
10677440,10678080," And there we go."
10679440,10681600," So none of that matters in here."
10681600,10681840," Right?"
10681840,10682640," None of that matters."
10682640,10686240," We need to do the check."
10686240,10688640," This kind of check."
10688640,10692000," So that's how we check things."
10692000,10692640," Player move."
10692640,10694240," And this is..."
10694240,10695680," I'm moving."
10695680,10698320," Cool."
10698320,10700480," If it is, I'm moving."
10700480,10702000," What we need to..."
10702000,10703600," We need to grab the ID."
10703600,10706000," We need to grab the ID."
10707840,10709680," So we kind of know our own ID."
10709680,10710960," Well, we..."
10710960,10712400," Wait."
10712400,10714160," We don't need ID in amammoving."
10714160,10715040," Don't we?"
10715040,10715360," Yeah."
10715360,10715760," Okay."
10715760,10718080," So I just realized that we don't need this kind of stuff."
10718080,10719440," So it's only kind and..."
10719440,10720480," Okay."
10720480,10721200," That's cool."
10721200,10726320," So what we have to do in here is a common set moving mask."
10726320,10727440," Player moving."
10727440,10730560," And we have to read that mask."
10730560,10735440," Common amammoving struct."
10736960,10738480," And this is moving."
10738480,10741600," And I'm reading view at zero."
10741600,10742720," Cool."
10742720,10744160," So I read the mask."
10744160,10745520," I set the mask."
10745520,10748080," And then I mark myself as moving."
10748080,10749680," All right."
10749680,10753200," Everything's fine."
10753200,10753520," Okay."
10753520,10755040," So I think I managed to do that."
10755040,10759200," So it's still not going to compile because I changed some stuff on the client."
10759200,10759440," Right?"
10759440,10761520," So because there's no ID anymore in there."
10763440,10764560," So let's go here."
10764560,10771440," So ID is not needed because we identify ourselves by the connection."
10771440,10776320," So that means this entire thing should compile now."
10776320,10776960," So ID write..."
10776960,10779280," Oh, yes."
10779280,10780240," So this is the second one."
10780240,10782800," Okay."
10782800,10784320," So now in the bots."
10784320,10786080," Amammoving."
10786080,10788480," We don't have amammoving."
10788480,10790080," But in the bots, by the way..."
10790080,10790640," Yeah."
10790640,10790880," Yeah."
10790880,10792720," So in the bots, we have this kind of situation."
10794400,10796000," And there's two places."
10796000,10796320," Yeah."
10796320,10798480," So new direction and so on and so forth."
10798480,10801920," But it should be relatively easy to just copy paste some stuff from the client."
10801920,10804800," And that's about it."
10804800,10807440," So let me see."
10807440,10812160," It's more like bot.moving."
10812160,10816080," And bot.ws."
10816080,10817120," So this is that."
10817120,10820560," And this is the second one."
10824400,10827200," Okay."
10827200,10829920," So everything come out."
10829920,10830800," We're done."
10830800,10833840," We migrated completely to binary protocol."
10833840,10836160," There is no JSON in here at all."
10836160,10837520," There should be no JSON in here."
10837520,10839600," So JSON."
10839600,10841680," JSON parse."
10841680,10846800," It's when you receive a string, but you will never receive a string."
10847520,10848400," So it doesn't matter."
10848400,10852960," So you can just like literally ignore this entire thing."
10852960,10855760," You can just literally not."
10855760,10856400," So when we..."
10856400,10858480," If it's a player moving..."
10858480,10858640," Yeah."
10858640,10859760," You'll never receive this thing."
10859760,10861280," And we don't care."
10861280,10865600," We're going to just ignore this thing."
10865600,10871440," Yeah."
10871440,10874240," So we have to be a little bit careful in here."
10874240,10877840," Because when we are updating our own thing."
10877840,10883520," JSON unaligned."
10883520,10884560," JSON begun."
10884560,10886320," Well, not really."
10886320,10887200," So this one..."
10887200,10891280," This is where we handle player moving."
10891280,10896000," And I think I can steal some stuff from here."
10896640,10896880," Yeah."
10896880,10898160," So this is the player moving."
10898160,10901520," And I can just do it like that."
10901520,10907920," So we're always receiving the binary data."
10907920,10910080," So this is no brainer in here."
10910080,10913120," This is no brainer."
10913120,10915520," We don't need to even check stuff."
10915520,10920480," Well, we'll still probably need to check it at some point."
10920480,10922800," But not the way I do it right now."
10925440,10927520," So if it is moving."
10927520,10932640," And the id is equal to bot me id."
10932640,10933920," So yeah."
10933920,10942720," Id equal bot me id."
10942720,10947680," What I need to do is instead of the player."
10947680,10950880," I need to use bot."
10950880,10953200," But there is also no view in here."
10953200,10956320," Where is the view?"
10956320,10960000," View is here."
10960000,10963600," And it's not even event."
10963600,10965600," Or is it?"
10965600,10970320," So it doesn't know what is..."
10970320,10974240," Data is not assigned to the parameter."
10974240,10977200," Because it doesn't know what it is."
10977200,10977840," I see."
10977840,10978800," Because it's data."
10978800,10980160," One of these."
10980160,10981040," We have to check."
10981040,10984160," If event data."
10984160,10989040," Instance of array buffer."
10989040,10992400," We'll just do that."
10995360,10996080," All right."
10996080,10997520," So bot."
10997520,11006000," This one is not needed."
11006000,11009040," All right."
11009040,11010240," So any errors?"
11010240,11012400," I don't think I have any errors."
11012400,11012720," Okay."
11012720,11013600," So everything."
11013600,11014400," Everything is compliant."
11014400,11015200," There is no JSON."
11015200,11018000," So no JSON in the bots."
11018000,11020400," JSON in client."
11020400,11021600," There is no JSON in client."
11021600,11023360," And the JSON in the server."
11023360,11025920," This is a wrong server."
11025920,11027040," I need mts."
11027040,11028240," JSON."
11028240,11029520," There is no JSON in the server."
11029520,11031040," Everything seems to be working."
11031040,11032720," Everything seems to be twerking."
11032720,11033600," At least compiling."
11033600,11034640," Right."
11034640,11035760," So we don't know if it's working."
11035760,11036960," But at least it's compiling."
11036960,11039040," Okay."
11039040,11042080," So let's try to run the server."
11042080,11044480," The server is fucked up, by the way."
11045840,11049760," I need to bring back this."
11049760,11051920," Yeah."
11051920,11055040," I need to bring back the login."
11055040,11057200," All right."
11057200,11059280," So that's what we have."
11059280,11061280," All right."
11061280,11062000," I can move around."
11062000,11063440," Okay."
11063440,11067120," I can bring the second player."
11067120,11068320," Okay."
11068320,11070000," So that's cool."
11073040,11077600," So it's kind of like being weird."
11077600,11079120," I don't know why."
11079120,11086320," I don't know what's up with that."
11086320,11089280," It's not particularly smooth."
11089280,11094720," Maybe because of the reds."
11094720,11096880," Okay."
11096880,11098400," Let's actually start the army of bots."
11098400,11100880," And see what is going on."
11101840,11102480," Is it running?"
11102480,11102800," Okay."
11102800,11104480," So here are the army of bots."
11104480,11110640," So like when I'm streaming, it's like significantly slower."
11110640,11112400," So that is fine."
11112400,11117120," So this is not what I want."
11117120,11118960," Okay."
11118960,11122960," So the tick is actually processed very fast."
11122960,11124400," So it's within 60 FPS."
11124400,11125440," So it's totally fine."
11128160,11131760," So the amount of bytes sent per tick is very small."
11131760,11134320," The amount of bytes received per tick is very small."
11134320,11136640," Everything is super small."
11136640,11138960," Even if we..."
11138960,11139200," Okay."
11139200,11142240," So I think it's something because I'm streaming."
11142240,11146480," Received per tick also went down."
11146480,11146720," Yeah."
11146720,11151280," Received per tick."
11151280,11153760," Because we're now just sending like robots."
11153760,11160400," So I suppose we can work with that."
11160400,11161680," I suppose we can work with that."
11161680,11166320," Okay."
11166320,11170880," I'm a little bit worried about strange lag."
11170880,11174720," So let me try to go back to what we had before."
11174720,11176240," So first I want to commit everything."
11176240,11183200," ""Migrate."
11183200,11185760," I'm moving to binary."""
11185760,11186880," All right."
11186880,11190560," So let me also push all of that into the repo."
11190560,11194240," Time to push the payload to your mom."
11194240,11194880," Yeah."
11194880,11195920," So, but just a second."
11195920,11198560," I want to go back to before the stream."
11198560,11200720," All right."
11200720,11205920," So, and just see if it's still lagging with the old code."
11205920,11212400," Huh."
11212400,11219440," It is."
11219440,11220080," It kind of is."
11220080,11223360," It kind of is."
11223360,11224960," So this is probably because I'm streaming."
11224960,11226160," So this is the old code."
11228000,11231760," We can test that it is in fact old code."
11231760,11235440," Yeah."
11235440,11239920," So this is like a huge footprint of things."
11239920,11241440," So that's definitely old code."
11241440,11242400," All right."
11242400,11243440," Let's push that into your mom."
11251520,11256720," I think it's already kind of push to your mom."
11256720,11261600," All right."
11261600,11263200," So she's ready."
11263200,11264960," She's ready."
11264960,11266320," So let's say to your mom."
11266320,11269760," So there's no team looks."
11269760,11274240," So what is that?"
11274240,11275840," Multiplayer prototype."
11276640,11276960," And."
11276960,11280480," What's the status?"
11280480,11282480," Clean FDX."
11282480,11284320," Git reset minus minus heart."
11284320,11286240," Yeah."
11286240,11287840," So take a look at the log."
11287840,11288240," Migrate."
11288240,11290240," I'm moving to binary."
11290240,11290560," Okay."
11290560,11294400," So everything's fine."
11294400,11296160," So let's install everything."
11296160,11300080," Your mom not there, unfortunately."
11302480,11306000," so npm run built."
11306000,11316800," And in the serve, I would like to maybe set."
11316800,11318480," Yeah."
11318480,11321200," So let me do it like that."
11321200,11323920," And 27."
11323920,11326400," Still haven't fixed that one yet."
11326400,11328240," Still haven't fixed that one yet."
11329120,11329600," All right."
11329600,11332880," So let me grab the IP."
11332880,11334720," Right."
11334720,11335440," So cut."
11335440,11338160," SSH config."
11338160,11340240," So this is the IP."
11340240,11342480," Let's go to here."
11342480,11343760," 69.69."
11343760,11344800," It's not available."
11344800,11345680," That's fine."
11345680,11347440," Right."
11347440,11348320," So and do."
11348320,11350960," Let's do npm run server."
11350960,11352960," All right."
11352960,11353440," Let's go."
11353440,11356560," Okay."
11357520,11359120," It's lagging like hell."
11359120,11366160," So I think it's worse than it was before."
11366160,11370640," Right."
11370640,11372720," So you guys already joined, right?"
11372720,11373760," So let's actually see."
11373760,11377040," So how do you feel?"
11377040,11379840," How does it feel lagging?"
11379840,11380720," It feels lagging."
11380720,11382720," It's worse than last time."
11382720,11382960," Okay."
11382960,11384000," So there's something maybe."
11384000,11388000," This is something with how we synchronize things."
11388000,11390560," So yes, it is lagging."
11390560,11390720," Okay."
11390720,11392000," So I'm just connecting everyone."
11392000,11394080," Let me see."
11394080,11396560," Random teleportation."
11396560,11396960," Yeah."
11396960,11398000," So that's understandable."
11398000,11403920," Let's try to go back to what we had before."
11406880,11408240," So stash."
11408240,11409120," Okay."
11409120,11412400," So stash get check out this thing."
11412400,11416560," So let me take a look at the log."
11416560,11418160," Indicate the client disconnected."
11418160,11418480," All right."
11418480,11420160," Stash pop."
11420160,11423600," And okay."
11423600,11426720," So npm run."
11426720,11429040," Not really watch, but surf."
11429040,11430000," All right."
11430000,11431680," So we're using the old version."
11431680,11436720," Okay."
11436720,11438080," So how many people connected?"
11438080,11446800," Still lagging."
11446800,11448000," Yeah, it is still lagging."
11448000,11449040," All right."
11449040,11449760," That's kind of weird."
11449760,11458640," Similar line."
11459280,11459680," All right."
11459680,11465680," I'm already streaming for four hours."
11465680,11468240," So only lagging some key press."
11468240,11470800," Yeah, but this is an old code."
11470800,11471760," So there's some..."
11471760,11472480," There's..."
11472480,11474400," The problem is not with the new code."
11474400,11475200," That's for sure."
11475200,11476960," The problem is not with the new code."
11476960,11477920," So this is the old one."
11477920,11481120," I don't remember being disliked this time."
11481120,11483040," Maybe somebody is actually dedosing us."
11483040,11483840," I don't freaking know."
11483840,11486640," So yeah."
11486640,11488000," Wait a second."
11488000,11489920," Let's actually try to run it one more time."
11489920,11491680," So how many..."
11491680,11493440," Maybe somebody is literally dedosing us."
11493440,11495120," No, it's not that many people."
11499280,11501200," Total messages sent."
11501200,11505040," That's a lot of messages."
11505040,11507760," That's a suss amount of messages, I would say."
11507760,11511600," Well, I mean, no."
11511600,11512240," It's sent."
11512240,11513360," It's that we sent."
11514480,11515920," In terms of messages we received."
11515920,11518000," I guess it's fine."
11518000,11520080," I guess it's fine."
11520080,11521280," All right."
11521280,11523760," So I'm already streaming for four hours."
11523760,11524080," All right."
11524080,11527840," So I'm going to investigate that a little later."
11527840,11528720," Maybe tomorrow."
11528720,11532560," And I'm going to concatenate my conclusions to the board."
11533120,11533360," Right."
11533360,11536880," So because obviously I would try to investigate that."
11536880,11538320," But I'm already super tired."
11538320,11541440," Because I've been refactoring this entire thing for four hours."
11541440,11541760," Right."
11541760,11543840," So yeah."
11543840,11545600," So I won't be able to do it right now."
11545600,11547040," So maybe the next thing."
11547040,11547360," All right."
11547360,11548320," That's it for today."
11548320,11550320," Thanks everyone for watching right now."
11550320,11553120," Thank you for helping me to test all of that."
11553120,11557600," And I see you all on the next recreation programming session with Ahu Amista Azuzin."
11557600,11558000," I love you."
11558000,11560800," All right."
11560800,11561680," This is the other day."
11561680,11564240," And I think I figured out what exactly was the problem."
11564240,11569600," I introduced a bug in the last commit I did on the stream."
11569600,11572560," So it's so funny."
11572560,11572720," Right."
11572720,11573920," So it worked fine."
11573920,11577600," But then with the last commit at the last moment,"
11577600,11579040," I introduced the stupid bug."
11579040,11582960," And I was already too tired to actually figure out what was the bug and stuff like that."
11582960,11584400," So let me demonstrate you."
11584400,11586720," So I'm going to take a look at the latest commit I did."
11586720,11586960," Right."
11586960,11589120," So the last commit I did on the stream is this one."
11589120,11593360," So since then, I actually did a little bit of refactoring and stuff like that and figuring it out."
11593360,11596640," So let's go to the latest one."
11596640,11601040," So on your mom, I do in fact have the latest commit."
11601040,11601440," Yeah."
11601440,11602880," So this is the latest commit."
11602880,11605440," And let's actually recompile just in case."
11605440,11611920," But maybe it would be even better to just set the watch mode."
11611920,11613280," If you know what I'm talking about."
11613280,11613520," Right."
11613520,11615280," So run watch."
11615280,11617920," So every time I do check out, it actually recompiles everything."
11617920,11618480," Hopefully."
11618480,11619520," Right."
11619520,11620880," So let's actually do surf."
11620880,11622800," And without anybody."
11622800,11623040," Right."
11623040,11625440," So I'm not streaming live right now."
11625440,11627040," Just being alone on your mom."
11628160,11630480," It's already having a stroke."
11630480,11630720," Right."
11630720,11632560," As you can see, it's teleporting around."
11632560,11633760," It's absolutely horrible."
11633760,11634000," Right."
11634000,11636560," So it's like it's even being stuck."
11636560,11637040," Right."
11637040,11638480," So yeah."
11638480,11638720," Okay."
11638720,11640080," Let's actually kill it."
11640080,11643440," And the last commit that I did on the stream was this one."
11643440,11643840," Migrate."
11643840,11645440," I'm moving to binary."
11645440,11649440," So what we have to do, we have to go to the commit before that and check it out."
11649440,11654960," So let's actually take the commit hash and do checkout like this."
11654960,11657680," So hopefully that did recompilation."
11657680,11659680," I'm not sure if it did recompilation."
11659680,11661040," All right."
11661040,11666480," So but we can we can try to run it and see because I would expect it to actually."
11666480,11669280," No, no."
11669280,11670960," Okay."
11670960,11672080," So we need to do surf."
11672080,11673760," Let's go."
11673760,11674160," Let's go."
11674160,11674720," Let's go."
11674720,11676000," Let's refresh that."
11676000,11677520," And as you can see, it's totally fine."
11678240,11680640," So it's not teleporting around or anything."
11680640,11682240," It's totally fine."
11682240,11686800," So I introduced the bug in the last commit, in that specific commit."
11686800,11688000," I can even go here."
11688000,11688240," All right."
11688240,11691920," So let's actually grab the commit hash in here."
11691920,11694240," So this is the first bad commit."
11694240,11696320," Git checkout."
11696320,11698000," We're going to put it in here."
11698000,11699200," So everything recompiled."
11699200,11700400," That's actually nice."
11700400,11703600," And let's actually serve the thing."
11703600,11704320," All right."
11704320,11707520," So I'm going to refresh this in desktop and it's starting to teleport around."
11707520,11711520," So this is the first commit where I introduced a bug."
11711520,11713840," So what exactly happened in here?"
11713840,11714960," What exactly happened in here?"
11714960,11717680," Let's actually draw like a time diagram."
11717680,11721680," Not sure how these kind of diagrams are officially called."
11721680,11723120," So let me know in the comments."
11723120,11723280," Right."
11723280,11726880," So because I'm not a software developer, I don't know the terminology."
11726880,11730080," So imagine that the time kind of goes down."
11730080,11730400," Right."
11730400,11732000," So this is basically time."
11732560,11735040," Maybe I'm going to actually make it a little bit brighter."
11735040,11739280," So when you have two entities that are interacting with each other."
11739280,11740000," The client."
11740000,11740240," Right."
11740240,11743280," So this is the client and this is the server."
11743280,11747280," So the way it worked before the bad commit."
11747280,11751280," So the client would send the message."
11751280,11751920," I'm moving."
11751920,11752640," Right."
11752640,11755760," So and the way it would send it is probably something like this."
11755760,11755920," Right."
11755920,11758240," So because there's a little bit of a latency in here."
11758240,11758480," Right."
11758480,11759920," So a little bit of latency."
11759920,11762400," The message is sort of like traveling to the server."
11762400,11766000," And the message we have in here is I'm moving."
11766000,11766480," Right."
11766480,11767440," So I'm moving."
11768800,11771200," So the way it worked before the bug."
11771200,11774880," I'm a moving would just tell you that you started."
11774880,11779520," Started to move in a certain direction."
11779520,11779920," Right."
11779920,11782480," So basically it would give you two parameters."
11782480,11785120," Whether you started to move in a certain direction."
11785120,11787600," Or stopped moving in a certain direction."
11787600,11789120," And based on these two parameters."
11789120,11793600," The server would then update the moving mask of player."
11793600,11793920," Right."
11793920,11798240," And you know figure out in what direction the player is actually moving."
11798240,11805360," And then only then notify the client about the actual state of the player."
11805360,11808000," With the message player moving."
11808000,11808240," Right."
11808240,11810000," Player moving."
11810000,11815520," And that player moving message is going to contain x and y."
11815520,11817040," Right."
11817040,11818640," And also I think that's it."
11818640,11818880," Right."
11818880,11820880," So this is basically it would contain."
11820880,11825520," So and when the client client sends I'm a moving message."
11825520,11827920," It doesn't update its own state."
11828560,11830480," It doesn't update its own state."
11830480,11832800," It's only waiting for the player moving."
11832800,11834160," Right."
11834160,11837920," And then as soon as it receives player moving with its own id."
11837920,11841120," Only then it updates this its state."
11841120,11843920," And because of that it actually synchronized very nicely."
11843920,11845280," Right."
11845280,11847600," And it doesn't feel like it's teleporting around."
11848720,11849920," So what happened."
11849920,11856240," I changed the way I actually sent I'm a moving."
11856240,11862240," So now instead of sending the direction and whether I started moving in this direction or not."
11862240,11869520," I would update my moving mask and just send the entirety of the moving mask to the server."
11869520,11869760," Right."
11869760,11875680," So the entirety of the moving mask to the server and continue using the you know the new moving mask."
11876320,11880160," So what's interesting is that because of this latency because of the latency."
11880160,11883440," I'm having one state."
11883440,11888880," But for the entirety of this time server doesn't even know that I have this state."
11888880,11889680," state."
11889680,11889920," Right."
11889920,11892400," So it assumes completely different state."
11892400,11895600," So in the entirety of this time."
11895600,11900000," Only then after this delta time of the after this latency."
11900000,11905680," It updates its state and starts updating the player with its own state."
11905680,11911120," But because of this a little bit of a time some discrepancy was building up."
11911120,11914880," And when everything is synced up player starts to teleport."
11914880,11915760," Right."
11915760,11917360," So that's basically what happened."
11917360,11920160," So this was a bad idea."
11920160,11920480," Right."
11920480,11927680," So the the fix is basically go back to this paradigm where the client doesn't update its state directly."
11927680,11930640," It only updates it when it receives the player moving."
11930640,11930880," Right."
11930880,11932400," And what it gives to the server."
11932400,11934880," It gives to the server information the direction."
11934880,11938960," And whether it started moving that direction or stopped moving in that direction."
11938960,11942000," So this approach actually worked fine."
11942000,11944320," And I want to go back to that."
11944320,11945520," So let's go ahead and do that."
11945520,11947440," Let's go ahead and do that."
11947440,11948800," So I'm going to go to the latest commit."
11948800,11951360," And let me let me see."
11951360,11955280," So I'm going to go into the definition of I'm a moving."
11955280,11957360," I'm a moving structure."
11957360,11960240," So as you can see here, we have a moving mask."
11960240,11961920," And that's about it."
11961920,11967280," So what I want to do, I want to go back to direction."
11967280,11967680," Right."
11967680,11974560," So it's going to be basically a value 0, 1, 2 or 3 that corresponds to the direction."
11974560,11978560," So and by the way, I changed the direction to be enumeration."
11978560,11979920," I think I did that off screen."
11979920,11980160," Yeah."
11980160,11982160," So I did that off screen."
11982160,11984240," And by the way, the player state."
11984240,11984480," Right."
11984480,11986880," So moving is now also a mask."
11986880,11991360," So what I used to do, I used to have moving as a structure."
11991360,11991760," Right."
11991760,11993200," So moving was an interface."
11994320,11998480," And it would be a structure that had a key of the type direction."
11998480,12000640," And it would be a Boolean."
12000640,12000960," Right."
12000960,12006320," So basically, I would have like a bit mask as an object in JavaScript."
12006320,12006560," Right."
12006560,12008320," Which is kind of silly."
12008320,12014640," So I decided if I'm sending a mask over network, why not just also maintain the actual state"
12014640,12016320," of the player as the mask?"
12016320,12017520," It just makes everything easier."
12017520,12017760," Right."
12017760,12021360," So because of that, I don't have to serialize and deserialize the mask."
12021360,12024400," I can just grab the mask and just send it over the network."
12024400,12029040," And if I need to check whether player is moving in a certain direction, I can always do something"
12029040,12036480," like take the moving mask, shift to the right with the index of the direction, because direction"
12036480,12038000," right now is enumeration."
12038000,12038240," Right."
12038240,12041120," So left is zero, right is one and so on and so forth."
12041120,12042000," Right."
12042000,12046480," So basically move with the direction and basically take the lowest bit with one."
12046480,12047040," And there you go."
12047040,12049920," You know whether you're moving in that direction or not."
12049920,12051040," So it's totally fine."
12051040,12052560," This is how I would do that in C."
12052560,12055440," So I think it's a very good approach in here."
12055440,12057520," So let's go back to Emma moving definition."
12057520,12057760," Right."
12057760,12058720," So Emma moving."
12058720,12062080," So now we have the direction."
12062080,12064880," And since it's a number from zero to three."
12064880,12068000," So I think we only need one byte in here."
12068000,12068160," Right."
12068160,12070240," So we don't need to allocate too much in here."
12070240,12073200," So first comes the kind of the message."
12073200,12073440," Right."
12073440,12075760," So this is the kind, then the direction."
12075760,12079920," And also we need information whether we started to move in that direction or not."
12079920,12081040," So this is going to be start."
12081040,12083200," And that's about it."
12083200,12086560," So now we have a structure of three bytes completely unaligned."
12087120,12088960," But we don't really care."
12088960,12090000," We don't really care."
12090000,12092400," So let me align this entire thing like that."
12092400,12095920," So I also actually added verifiers to the structure."
12095920,12098320," So essentially now it has a verify method."
12098320,12101600," So for example, in a client, if you do verify."
12101600,12102400," Yeah, there we go."
12102400,12107920," So I used to first check the size of the structure and then look at the first byte and check that it's"
12107920,12109440," equal to a certain kind."
12109440,12113440," Now I tacked all of that away to verify a verify method."
12113440,12118080," And it's actually very convenient in here, especially in the client where you have to sort of like chain"
12118080,12119680," these verifications."
12119680,12119920," Right."
12119920,12120800," So you receive the message."
12120800,12121280," We check."
12121280,12122560," Is that a join message?"
12122560,12122880," No."
12122880,12123200," Okay."
12123200,12125200," So is that a left message?"
12125200,12125440," No."
12125440,12125760," Okay."
12125760,12126640," Is that a moving message?"
12126640,12130640," It is a moving message and everything is Gucci and everything is Tamaguchi."
12130640,12131840," All right."
12131840,12136000," So now we have the kind, the direction, the start and the size."
12136000,12136240," Right."
12136240,12137840," So everything seems to be working."
12137840,12140800," So this is your mom, if I'm not mistaken."
12140800,12140960," Right."
12140960,12147840," So I think I need to set up incremental compilation or watch mode on my local machine."
12147840,12148080," Right."
12148080,12153760," So let's actually go to a multiplayer prototype and I'm going to do just to run watch."
12153760,12155600," All right."
12155600,12156640," So it should not compile."
12156640,12156800," Right."
12156800,12158720," So because we changed the definition of this entire thing."
12158720,12159920," Yeah, there we go."
12159920,12163920," So in common, yeah, return moving, we don't really have that stuff anymore."
12163920,12166800," So now it's direction and start."
12166800,12167040," Right."
12167040,12167760," So that's what we have."
12167760,12171040," So let me enable flight check mode just to see what kind of errors we have in here."
12171040,12174800," Flight check next error."
12174800,12177280," There's no errors in here, surprisingly."
12177280,12177600," Okay."
12177600,12180080," So we're going to assume that there's no errors in here."
12180080,12182960," Let's go to maybe, let's start with the server."
12182960,12183200," Right."
12183200,12185520," So let's start with the server and see what we have in here."
12185520,12187920," So flight check next error."
12187920,12192960," So let me update everything and enable flight check mode."
12192960,12195600," So it looks like there's only one error in here."
12195600,12196240," Okay."
12196240,12198880," So we received the message from I'm a moving."
12198880,12199120," Right."
12199120,12200320," So that's what we did."
12200320,12203840," And we used to actually send a moving mask."
12203840,12205920," There's no moving mask here anymore."
12205920,12208400," This one is actually kind of interesting."
12209840,12211040," So I really like this idea."
12211040,12212880," I think I also did it off screen."
12212880,12216800," So to the player, I added new moving mask in here."
12216800,12218080," Right."
12218080,12225280," So the idea is that when you receive the messages and modify the mask, you're not modifying the actual mask of the player."
12225280,12227680," You're modifying a copy, right?"
12227680,12227760," Right."
12227760,12230080," So you receive a bunch of I'm a moving and stuff like that."
12230080,12231840," And you modify the copy of the mask."
12231840,12240720," So, and then when the time has come to process the tick, what you do, you check in."
12240720,12246320," Is the player's moving mask not equal to the new one?"
12246320,12250480," And only then you notify everyone that the player has moved."
12251200,12260720," So the idea is, what if you receive a bunch of I'm a moving events throughout the tick that canceled each other out?"
12260720,12265920," So by the time when you're processing the tick, the player's state didn't really change."
12265920,12272560," In that case, like there's no reason to even notify the rest of the players that something has changed."
12272560,12272960," Right."
12272960,12278320," So maybe you very, very quickly send I'm a moving in different direction and then you stop moving."
12278320,12278880," Right."
12278880,12287520," So, and by the beginning of the tick, by the beginning of processing the ticks, nothing changed at all."
12287520,12292240," So we sort of like compressed all of these quick messages and right, didn't send anything."
12292240,12293120," I think it's a good idea."
12293120,12295120," I really, I really like this idea."
12295120,12297600," So let's actually go here."
12297600,12302080," So we don't really have a mask in I'm a moving structure anymore."
12302080,12307440," So what we have instead is the direction and whether we started moving or not started"
12308000,12309120," or stopped moving."
12309120,12310240," Right."
12310240,12311360," So let's actually take a look."
12311360,12312640," So we need to do start."
12312640,12315520," The idea is going to be the following."
12315520,12316880," So I'm going to read this start."
12316880,12328160," And if you started moving, what I have to do, I have to basically set the corresponding bit in the new moving mask to one."
12329120,12329440," Right."
12329440,12332000," So what is the corresponding moving bit?"
12332000,12336240," I think that bit is basically the direction, right?"
12336240,12338640," So I'm a moving direction."
12338640,12348160," And maybe it would make sense to save this entire thing into a separate variable, even something like that."
12348960,12353760," So I'm going to start const start emacs."
12353760,12354320," Are you fine?"
12354320,12354640," Okay."
12354640,12357120," So it lagged a little bit."
12357120,12358720," So start moving."
12358720,12361920," How do I set that bit?"
12361920,12362560," Right."
12362560,12365920," So essentially, let's imagine we have like a bit mask and stuff like that."
12365920,12368320," And I need to set this specific bit."
12368320,12368640," Right."
12368640,12371840," So and this is the direction, you know, two."
12371840,12372080," Right."
12372080,12378480," So because the actual indices of the bits are zero, one, two, three."
12378480,12383200," So I need to set the second bit in here to one."
12383200,12385440," So I will take one."
12385440,12385680," Right."
12385680,12392160," So I'm basically taking one and I'm going to shift it to the left by the direction like so."
12392880,12399920," And afterwards, I will just or, I will just or this entire thing with this thing."
12399920,12401280," And I probably will assign it."
12401280,12402960," I think I can do something like this even."
12402960,12405200," Yeah, there we go."
12405200,12408320," So and if I do or it will just always set it to one."
12408320,12409280," Okay, that's cool."
12409280,12413040," So when we stopped, we need to do the opposite thing."
12413040,12413360," Right."
12413360,12419680," So in here, let's imagine that I need to set this specific bit to zero."
12419680,12419840," Right."
12419840,12422160," So I need to set this specific bit to zero."
12422800,12423360," All right."
12423360,12426240," So I can basically construct the same kind of thing."
12426240,12429520," I can do one to direction."
12429520,12433760," And so that essentially means I will create this sort of mask."
12433760,12439680," And what I can do now, I can use the, you know, conjunction operation."
12439680,12445680," So essentially, if I invert all of the bits in here like that, if I invert all of the bits"
12445680,12452560," like that and then end it with the original mask, Emacs, Emacs don't have a stroke, please."
12452720,12458240," And it's specifically all of the corresponding bits where you had one, they're going to stay"
12458240,12458880," the same."
12458880,12461840," But where you had zero, it will be set to zero."
12461840,12464480," So that's how we sort of like set it to zero."
12465040,12466000," So that's about it."
12466000,12467120," So that's about it."
12467120,12469120," I think that's about it."
12469120,12470720," We don't have to do anything anymore."
12470720,12471760," So, and I think that's it."
12471760,12473760," So there's no errors in the server."
12474640,12478000," And now if I go to the client, right?"
12478000,12480160," So let's actually see what we have in the client."
12480960,12485760," So let's enable flight check mod and next."
12485760,12486960," Okay."
12486960,12489280," So here, yeah, this one is interesting."
12489280,12495760," As you can see right away, we're setting the moving bits, you know, for the current local"
12495760,12499520," player without even waiting for the confirmation from the server."
12499520,12500880," This is the main problem in here."
12500880,12502160," I should have not done that."
12502160,12503520," I should have definitely not done that."
12503520,12504480," But I've done that."
12504480,12506400," It is what it is and it isn't what it isn't."
12506400,12508080," So let's not do that, right?"
12508080,12509200," Let's not do that at all."
12509200,12514000," So in here, since it's a key down, we need to start moving."
12514000,12518400," So that means here, what I have to do, I have to set one, right?"
12518400,12519520," To start moving."
12519520,12520960," And what's going to be the direction?"
12520960,12523120," So direction, we already kind of know the direction."
12523120,12525600," So I just need to write it to the corresponding thing."
12525600,12532240," So this is the direction, right view direction."
12532240,12533600," There we go."
12533600,12535760," So in the second error is probably here."
12535760,12536800," So let's not do that."
12536800,12542640," We can even copy paste this entire thing and replace the moving mask."
12542640,12544000," We don't have to send it."
12544000,12545840," So in here, we have to set it to zero."
12545840,12546320," There we go."
12546320,12548480," So that should work."
12548480,12551040," We have still a little bit of a problem with bots."
12551040,12554240," So what was the line?"
12554240,12557760," Line was 72, 72."
12557760,12558000," Okay."
12558000,12561840," So, okay, okay, okay."
12562720,12563200," Yeah."
12563200,12563600," All right."
12563600,12565440," So this is rather interesting."
12565440,12569440," So on the bot, when you do a turn, so how the bots work, right?"
12569440,12572800," So they basically move in a certain direction for a certain amount of time."
12572800,12576880," And then when it's time for them to turn, we do the full stop."
12577600,12580480," And then we send in what direction we're moving."
12580480,12585360," So because, yeah, so because we switched to the mask, right?"
12585360,12587760," I thought that full stop is super easy to do."
12587760,12590800," You just set it to zero and you only send a new mask."
12590800,12592240," It's not going to work like that."
12592240,12603040," So what we have to do, I think, we have to go back into iterating through all of the directions and telling the server that, like, stop this specific direction."
12603840,12611520," So since the direction is enumeration, I also employed, like, the C style trick."
12611520,12614480," We still continue using C tricks, right?"
12614480,12621040," So now I have enumeration and to know how many elements I have in enumeration, I use count in here, right?"
12621520,12623040," So that's basically what I'm doing here."
12623040,12624720," So let's iterate all the directions."
12624720,12626400," So it's going to be from zero."
12626400,12635120," Direction less than, I think it's common message direction count, right?"
12635120,12637680," So direction count plus plus direction."
12637680,12643840," And in here, what we can do, we can take the bots moving mask, right?"
12643840,12648880," So then take the direction and take the lowers bit."
12648880,12657360," And if we are moving in that direction, we need to tell the server that we don't move in that direction anymore."
12657360,12658640," Okay."
12658640,12660080," So how are we going to be doing all that?"
12660080,12663200," So I'm going to do common."
12663200,12666080," I'm a moving struct."
12666080,12670800," So first of all, I have to write the kind into the view."
12670800,12677040," And what's going to be the kind is going to be message, message kind."
12677040,12678400," I'm a moving, right?"
12678400,12679200," So I'm a moving."
12679200,12680240," So this is the kind."
12680240,12683200," Then we need to set the direction."
12683200,12687920," I'm a moving direction, right view."
12687920,12690880," The direction is this direction."
12690880,12692800," As you can see, that's the current direction."
12692800,12698880," And then since we're doing full stop, we always set start to false, right?"
12698880,12700400," So this is false now."
12700400,12701920," There we go."
12701920,12709840," So since we're going to be reusing view, I think I only need to sort of set it once to the corresponding kind."
12709840,12713120," And we can just like change the direction and start."
12713120,12714720," We can even probably do it like that."
12716000,12716640," But I don't know."
12716640,12719120," So I'm going to be reusing view down below."
12719120,12720560," So I didn't think it's a good idea."
12720560,12724080," But anyway, so this is how we do full stop, right?"
12724080,12725280," So we iterate all directions."
12725280,12729520," If we move in that direction, we tell in the server we're not moving in that direction anymore."
12729520,12733600," But we need to actually send this thing."
12733600,12735280," So let me quickly do that, right?"
12735280,12737280," So now we're sending this in that thing."
12737280,12741120," So now we are picking up, picking the random direction, right?"
12741120,12742320," So picking the random direction."
12742320,12746160," And we're actually setting ourselves to that direction."
12746160,12747360," We should not do that anymore."
12747360,12750960," We should receive that from the player moving, right?"
12750960,12755360," So because that's the confirmation that it received this entire thing."
12756000,12762800," So in afterwards, we just need to notify the server that we're moving in that specific direction."
12762800,12764960," I think I can do something like this."
12764960,12771840," So we don't need to even set the kind anymore because we already set it to I'm moving like up there."
12771840,12773120," So it's totally fine."
12773120,12778080," So in here, we're moving to the new direction and we're actually moving."
12778080,12779440," So start is one."
12779440,12781200," But for these things, it's zero."
12781200,12782480," All right."
12782480,12784640," I think that's basically it almost."
12784640,12785920," So it's oh yeah."
12785920,12786320," Okay."
12786320,12788880," So we can just like reuse that view."
12788880,12791200," Yeah, there we go."
12791200,12792400," So that seems to be working."
12792400,12793840," That seems to be twerking."
12793840,12799840," So let me now see if it works at least locally, right?"
12799840,12801840," If it works at least locally."
12801840,12804080," So I'm going to run the server."
12804080,12809920," So just serve locally teleporting is you can't really feel the teleporting locally"
12809920,12814000," because it's like the latency is actually too low, right?"
12814000,12815760," So it's not going to tell us anything."
12815760,12824240," So what we need to do, we need to bring that code to the server and see if it actually fixes anything or not."
12824240,12831440," So let's do a committee committee and then fetch the latest changes, you know, on the server, on your mom."
12831440,12833680," So I'm going to do the following thing."
12834720,12848080," So change, I don't know, the paradigm of armor moving to what it was before."
12848080,12850160," And maybe I need to take a look at the commit."
12850160,12852000," What was the last bad commit?"
12852000,12854880," I think that was the that was the last bad commit."
12854880,12856720," But I want to take a look at the log."
12856720,12860240," So yeah, that's that's the commit."
12860240,12862000," Where is my commit message to before?"
12862000,12866720," So as far as now, you don't have to specify the entirety of the hash."
12866720,12870560," You can just specify part of the hash and git will recognize it properly."
12870560,12875680," Just where I'm moving to what it was before this specific commit."
12875680,12878640," And I'm going to push that right into the origin."
12880400,12881920," So pushing that into the origin."
12881920,12884080," And this is your mom."
12884080,12886880," I can try to run your mom on the latest commit."
12886880,12888320," So let me take a look at the git log."
12888320,12891360," Okay, so let's check out main."
12891360,12892640," Right, so this is git log."
12892640,12895840," And I'm going to run the serve."
12895840,12898480," So this is before the fix that we just did."
12898480,12900400," Right, so this is before the fix."
12900400,12902400," And as you can see, we're teleporting around."
12902400,12903600," We're teleporting around."
12903600,12907520," Okay, so let's actually close that and let's fetch the origin."
12908640,12911120," Right, and merge origin main."
12911120,12916160," Okay, so let's actually now serve and see if that fixes anything."
12916160,12918480," It's not serve, it's serve."
12918480,12919920," All right, let's go."
12919920,12921520," Let's refresh this entire thing."
12921520,12922720," And it's fine."
12922720,12924960," So that was literally the problem, right?"
12924960,12927840," That was literally the problem."
12927840,12930560," I wish I could test that with the viewers, right?"
12930560,12932400," But unfortunately, it's upline currently."
12932400,12937440," Right, so and I decided not to do a dedicated stream to this fix because it's very small."
12937440,12938880," It's a very small fix."
12938880,12940800," So you know what I'm thinking?"
12940800,12948800," It would be kind of cool to actually know what is this latency between the client and the server."
12950480,12953920," Right, just some information for the player to estimate, right?"
12953920,12958080," So like why the game responds so slowly."
12958080,12960320," And I think it's kind of easy to implement that."
12960320,12960800," All right."
12960800,12967280," So essentially, we can introduce like a new kind of events, a new kind of command, which is a pink command."
12968080,12975680," So essentially, client sends a pink command to the server with a certain timestamp."
12975680,12977120," Let's say it's going to be T1."
12977120,12979760," Let me grab the tablet."
12979760,12980000," Right."
12980000,12984000," So the current time, the current time step T1."
12984000,12986640," Then what the server does, right?"
12986640,12987840," So this is pink."
12987840,12988720," This is pink."
12988720,12995920," And what the server does, it just sends that exact timestamp back to the client, right?"
12995920,12997840," So just send it back with the pong."
12997840,12999520," Right."
12999520,13003120," And the client will receive that at the time of T2."
13003120,13008960," And since it knows, right, so what exactly it was sent, it can compute the delta time"
13008960,13016400," and maybe display that to the player or maybe even use to correct the state of the player or something"
13016400,13016800," like that."
13016800,13020400," I think this is something that the games do all the time."
13020400,13026480," And yeah, I think I finally got to the point where I do need to measure latency."
13026480,13026720," Right."
13026720,13029840," So finally, finally, I'm learning something again."
13029840,13034720," I've never done any network like serious network game programming in my entire life."
13035600,13037440," So I'm actually learning things."
13037440,13037760," Right."
13037760,13040000," So, and I'm really happy actually that I discovered things."
13040000,13046400," So let's go ahead and maybe introduce like a new command in here and even test how our"
13046400,13052160," serialization framework, you know, allows us to do that easily."
13052160,13052480," Right."
13052480,13056320," So we're testing maintainability of our framework essentially."
13056320,13059600," So what we'll need to do, we'll need to define a new structure in here."
13059600,13059840," Right."
13059840,13061440," So let's go ahead and do that."
13061440,13065280," So what I need to do in here is a pink struct."
13065280,13065520," Right."
13065520,13066960," So this is going to be pink struct."
13066960,13069840," We have to define it within a lambda."
13069840,13074160," So we have to create an allocator, which we're going to use to allocate fields."
13074160,13076320," So in here, we definitely going to have a kind."
13076320,13081360," And the other thing I need to have in here is probably some sort of a timestamp."
13081360,13081600," Right."
13081600,13082960," So this is going to be timestamp."
13082960,13087120," So in a timestamp, let's actually say that it's going to be you insert it too."
13087120,13087360," Right."
13087360,13091920," So I think we're going to just simply send the performance now."
13091920,13092400," Right."
13092400,13094240," So, and that's about it."
13094240,13099520," So the responsibility of the server is going to be just send the whatever number the client sent back."
13099520,13100800," Right."
13100800,13102400," So that's what we're going to have in here."
13102400,13104080," So then we're going to have the size."
13104080,13105440," All right."
13105440,13108640," And the size is just the size of the allocator."
13108640,13109840," So this is that."
13109840,13115280," And then we also need to have a verification method."
13115280,13115520," Right."
13115520,13117040," So this is going to be ping."
13117040,13118480," Do we even have a ping?"
13118480,13120640," So we need to introduce new two commands."
13120640,13122080," Ping and pong."
13122080,13124560," Ping is something that the client is going to send to the server."
13124560,13127200," And pong is something that the server will send to the client."
13127200,13128640," Right."
13128640,13131040," So this is the first thing."
13131040,13133120," So now we need to define pong."
13133120,13139120," And pong, interestingly, is going to be, I think, the same."
13140800,13146400," It's probably going to be the same, which kind of worries me."
13146400,13148560," So I also need to return all of these things in here."
13148560,13154000," So I need to return the kind, timestamp, the size of this entire thing, and the verify method,"
13154000,13156640," which will verify the structure."
13156640,13159200," So, and here as well."
13159200,13162080," So it's pretty much the same."
13162080,13164560," So it's kind of, it's kind of weird."
13164560,13168880," Can we just reuse the same structure for both ping and pong?"
13168880,13171200," The only difference between them is kind."
13171200,13174640," But then like how we're going to verify that."
13174640,13181600," So we have a verify method that is kind of bound to a specific kind."
13181600,13181760," Right."
13181760,13184240," So you can't have two kinds in here."
13184240,13186080," Can you?"
13186080,13188720," You can't really have two kinds in here, unfortunately."
13188720,13193360," That's, that is a little bit sucky-wucky."
13193360,13197840," What if we, what if we have two verify methods?"
13197840,13206400," So what if the structure is ping pong struct, and then you have method verify ping, and then verify pong."
13206400,13218640," So, yeah, so the way you're going to use that is essentially you have, you're going to have ping pong struct verify ping for some view."
13218640,13225440," And if it's true, you do the ping stuff, and then you're going to try to verify pong."
13225440,13228400," And if it's true, you're going to do the pong stuff."
13228400,13229840," Right."
13229840,13231040," So why not actually?"
13231040,13233280," This is a very interesting paradigm."
13233280,13240720," So essentially, if you, if you have several messages that share the same structure, you can just have several verify methods."
13240720,13240960," Right."
13240960,13246000," So depending on the kind and stuff like that, it's pretty convenient, I think it's pretty convenient."
13246000,13251040," So verify ping, verify, verify pong."
13251040,13253120," All right."
13253120,13254560," So that's what we have in here."
13254560,13255760," Okay."
13255760,13259840," So on the client, how often are we going to be sending the pings?"
13259840,13261920," How often are we going to be sending the pings?"
13261920,13263360," Maybe once in a while."
13263360,13263600," Right."
13263600,13264880," So what is the fps?"
13264880,13265600," Once a second."
13265600,13266640," So do we have fps?"
13266640,13267440," I don't know."
13267440,13273840," So ping cool down."
13273840,13276560," And let's say we're going to have like 60 ticks."
13276560,13283520," Every 60 ticks, you have to send ping to the, you know, to the, to the server."
13283520,13283760," Right."
13283760,13287520," So here, when we're rendering everything, we check in whether we have a connection."
13287520,13289120," Ws is a web socket."
13289120,13289360," Right."
13289360,13290560," So here we don't have a connection."
13290560,13291600," We say disconnected."
13291600,13293520," So here we do have a connection."
13293520,13295840," So then we are updating the players."
13295840,13298800," Then blah, blah, blah, blah, blah, blah, blah."
13298800,13301520," So essentially here, what I want to do, I want to do cool down."
13301520,13304960," So ping cool down."
13304960,13305200," Right."
13305200,13306560," I'm going to subtract one."
13306560,13312960," And if at some point we reached the cool down less or equal than zero, the time has come to"
13312960,13317760," send the ping and also probably reset to 60."
13317760,13321200," So it would be nice to maybe factor this out to a magical variable."
13321200,13321440," Right."
13321440,13323280," So ping cool down."
13323280,13324720," Let's actually find."
13324720,13326880," So this is going to ping cool down."
13326880,13328560," And this one is going to be const."
13328560,13329520," Ping cool down."
13329520,13330400," It's going to be 60."
13330400,13333120," Why did you not put an underscore in here?"
13333120,13333440," All right."
13333440,13338880," So in here, we need to allocate a rate buffer of this size."
13338880,13340880," I'm a moving size."
13340880,13342560," I'm a moving struct size."
13342560,13342800," Right."
13342800,13347760," So, and we also want to slap data view on that so we can modify specific fields and everything."
13348320,13351360," So this is the view, const view."
13351360,13355360," So in here, we just take, I'm a, it's not, I'm a moving."
13355360,13356480," What the fuck am I saying?"
13356480,13359200," It's a ping pong, bruv, bruv, bruv ping pong."
13359200,13369840," So ping pong struct, I take the kind and I write into the view, the kind that is common message kind"
13369840,13377360," ping, not pong, but ping specifically explicitly saying that this structure is pong, is ping, not pong."
13378000,13380080," Then I need to set the timestamp."
13380080,13381440," So what's going to be the timestamp?"
13381440,13385280," I think it's just going to be performance now."
13385280,13385520," Right."
13385520,13389200," So I'm taking the current timestamp and I'm setting it in here."
13389200,13392480," And then I just send this over the socket."
13392480,13392880," There we go."
13392880,13397120," So we just send a ping to the server."
13397120,13397760," That's pretty cool."
13397760,13399120," All right."
13399120,13402880," So then where do we receive the messages?"
13402880,13405120," So here we receive different messages, as you can see."
13405120,13408480," So here's the player joined, player left, player moving, blah, blah, blah."
13408480,13412000," And then here we are going to be specifically waiting for the pongs."
13412000,13412240," Right."
13412240,13418240," So ping pong struct verify pong."
13418240,13418560," Right."
13418560,13420480," So we're specifically looking for the pong."
13420480,13422240," So this is the view of this thing."
13422240,13429520," And in here, so what we can do, we can just extract the timestamp."
13429520,13429760," Right."
13429760,13432160," So we're reading the timestamp from here."
13432160,13434000," We're also taking the current thing."
13434000,13435040," So performance now."
13435040,13438640," And here is our ping, essentially."
13438640,13441440," This is literally our ping."
13441440,13448640," We can even save it to some sort of like a separate variable, I think."
13448640,13450160," So where can..."
13450160,13450320," Okay."
13450320,13454320," So this is the place where we store the state of the player on the client."
13454320,13454480," Right."
13454480,13455600," So this is going to be ping."
13455600,13457120," It's going to be originally zero."
13457120,13457840," Right."
13457840,13458960," So and here."
13458960,13460240," Okay."
13460240,13463360," So once in a while, we're just like doing the ping."
13463360,13467840," We receive the pong and we compute the ping, which we can then display somewhere."
13467840,13468080," Right."
13468080,13472800," So for now, we can just display this entire thing in the logs just to see how it works out."
13472800,13474160," Right."
13474160,13477520," So and on the server, on the server, we also have to do a little bit of a work."
13477520,13477840," Right."
13477840,13479040," Server MTS."
13479040,13480560," So, okay."
13480560,13483440," So this is where we receive the messages from the clients."
13483440,13486560," One of the messages we can now receive is a ping message."
13486560,13486880," Right."
13487360,13489280," So let's quickly do that."
13489280,13494240," So this can be else if common ping pong message."
13494240,13499920," Verify specifically ping because we can only receive ping from the client like so."
13499920,13503920," And what we're doing here, and this is actually kind of cool."
13503920,13509200," So what we can do, we can basically change its kind and send it back."
13509200,13510560," Yeah."
13510560,13511760," So that's actually convenient."
13511760,13516160," So we don't need to modify timestamp because we need to send the same timestamp to the client"
13516160,13518080," so it can measure the latency."
13518080,13518560," Right."
13518560,13526480," So the only thing we do, we take the kind and we write into the kind, the message kind pong."
13526480,13526800," Right."
13526800,13528320," So we change it to pong."
13528320,13530160," So it's going to be pong and this is common."
13531120,13533040," And simply send it back."
13533040,13540960," So it's just send view."
13540960,13542400," So it's complaining about something."
13542400,13544320," I'm not really sure what exactly."
13544320,13546240," So message not king kind."
13546240,13547360," Right."
13547360,13550880," So in here, we probably want to update some of this stuff."
13550880,13555520," So we already updated that we received some new messages."
13555520,13555840," Right."
13555840,13559680," So yeah, message counter received."
13559680,13559920," Right."
13559920,13561360," So this is what we received."
13561360,13566720," The only thing we have to do in here is probably update how many messages we send."
13566720,13568000," Right."
13568000,13569360," So this one is rather interesting."
13569360,13573600," When I do ws send."
13573600,13574800," Right."
13574800,13577360," So that's the things I'm updating."
13577360,13578960," That's the things I'm updating."
13578960,13582640," So bytes send counter and message set counter."
13583200,13588480," But I have these counters only, only in the tick."
13588480,13594640," So what I'm thinking is that, so message bytes send."
13594640,13599760," I think I need to make them global and available in the input handler."
13599760,13603280," Because our code in the server is actually split into two parts."
13603280,13607040," Sort of like the input handler that received the messages."
13607040,13609120," And then the tick handler."
13609120,13609680," Right."
13609680,13614400," So essentially, as we receive inputs, we just accumulate inputs and accumulate"
13614400,13616240," the discrepancy for the state."
13616240,13621280," And then when the tick fires up, it looks at the discrepancy and then sends out the messages."
13621280,13627280," So usually the code that receives the inputs never really sends out anything."
13627280,13632560," But since we need to respond to the pings, I think this is something that we can do."
13632560,13632880," Right."
13632880,13634560," So, but because of that, I think."
13637520,13639920," I think this is not particularly accurate."
13639920,13640240," Right."
13640240,13646000," Because it doesn't, the pink will not include the entirety of the part where we are processing"
13646000,13651680," the joined IDs, processing the left IDs, sending out all of these things and everything."
13651680,13652960," Blah, blah, blah, blah, blah, blah, blah."
13652960,13657680," I feel like the pink has to be actually, you know, processed in here somewhere."
13657680,13659280," So, but how can we do that?"
13659280,13662240," So that means we should not send it right away."
13662240,13672480," We rather should, you know, maybe have some sort of a structure in here."
13672480,13672720," Right."
13672720,13677680," So join the IDs, you know, ping IDs."
13677680,13682800," So whoever needs to be pinged in here, whoever needs to be pinged in here."
13682800,13689280," And what's funny is that it has to be a map from a number, which is going to be the ID"
13689280,13692240," of the player to the timestamp."
13692240,13693040," Right."
13693040,13695120," I think this is going to be a little bit more accurate."
13695120,13695280," Right."
13695280,13701920," Because this approach will include the entirety of the processing of the state and everything."
13701920,13702160," Right."
13702160,13703600," So I think it's kind of important."
13703600,13704880," Right."
13704880,13706720," So let's quickly do that."
13706720,13711200," So essentially we don't, we won't be able to do this kind of cool trick anymore."
13711200,13717040," So let me see pinged, ping IDs, right?"
13717040,13722640," So this is going to be ping IDs and we just have to set the ID."
13722640,13724880," So as far as I know, ID is the correct one."
13724880,13728640," So this is the ID and we just need to read the timestamp."
13728640,13736240," So, uh, common pin point extract timestamp, uh, read view."
13736240,13739520," So this is read view and that's about it."
13739520,13739760," Right."
13739760,13741200," So that's about it."
13741200,13742320," Okay."
13742320,13745280," So that's pretty cool."
13745280,13749040," Then now, uh, in the place where we hand in the ticks, right?"
13749040,13752240," So we first processing the joint IDs, right?"
13752240,13757600," So notifying everyone, then processing the left IDs, then updating the state of the players"
13757600,13759760," and everything, uh, right."
13759760,13766880," So this is not, yeah, we're just notifying the movements and everything and then, uh,"
13766880,13768480," updating and stuff like that."
13768480,13773280," So the last thing is going to be probably ping, pings, sending out pings."
13773280,13778880," So let me see, um, ping IDs."
13778880,13781200," I probably want to do something like for each for them."
13781200,13784880," Uh, so first comes the value and then the key."
13784880,13785440," Okay."
13785440,13788720," So this one is going to be timestamp and this is the player ID."
13788720,13789600," Right."
13789600,13791120," So that's what we have in here."
13791120,13798240," Um, so for the player ID, I have to take the players and I have to get that player."
13798240,13805440," So what's interesting is that maybe at some point we will not have any, like any players."
13805440,13806720," Right."
13806720,13809920," So maybe somebody send the ping and then left."
13809920,13813920," So that means there is a possibility of the player not being present in this table."
13813920,13817200," So if the player not equal to undefined, right."
13817200,13822720," So, so this may happen, uh, right."
13822720,13827520," A player may send a ping and leave."
13828400,13828720," Yeah."
13828720,13830240," So this is plausible."
13830240,13831680," This is straight up plausible."
13831680,13833280," Uh, okay."
13833280,13838960," So after that, I need to do new, maybe I can steal some code from the client."
13838960,13840960," Um, right."
13840960,13843200," So ping pong struct."
13843200,13846160," So this is what I want to steal in here."
13846160,13847200," There we go."
13847200,13848640," So I'm allocating the size."
13848640,13854400," I'm sending the kind to pong and I'm sending back the timestamp."
13855120,13855360," Right."
13855360,13859920," So I'm sending back the timestamp and I just then send ws, uh, right."
13859920,13861600," Which is part of the player."
13861600,13868400," So in here, finally, I have an opportunity to update the statistics of the counters correctly."
13868400,13868720," Right."
13868720,13872080," So this is going to be byte and this is message counter."
13872080,13873600," Uh, all right."
13873600,13880000," So, and afterwards, uh, I need to clean up ping IDs and we're Gucci, I think."
13880000,13881040," I think we're Tamaguchi."
13881040,13884480," So now it is more or less correct because it includes like everything."
13885120,13888560," Uh, in processing of the, of the input of the server."
13888560,13890240," All right."
13890240,13891360," So does it compile?"
13891360,13896400," I'm not even sure what, is that your mom or is that your mom?"
13896400,13897360," Okay."
13897360,13898400," So this is your mom."
13898400,13904560," Uh, maybe I can change the, uh, you know, so this is your mom."
13904560,13904800," Right."
13904800,13907840," So this is your mom and this one is the streamer."
13907840,13909120," Uh, right."
13909120,13910400," So this is the streamer."
13910400,13911200," Right."
13911200,13913120," At least I can, I can distinguish them now."
13914000,13915040," Um, all right."
13915040,13919040," So let me now see, I'm going to do that locally."
13919040,13919200," Right."
13919200,13920320," So I can move around."
13920320,13921680," Let me do the dev tools."
13921680,13924080," Uh, and in a dev tools."
13924080,13924800," Oh, there we go."
13924800,13926160," So here's the pink."
13926160,13929040," It's usually like 12 milliseconds."
13929040,13929520," Look at that."
13929520,13932000," Yo, that's pretty cool."
13932000,13937920," Can I, uh, can I actually, you know, print that on the screen?"
13937920,13939920," I think I could print that on the screen."
13939920,13940960," I think it's plausible."
13940960,13943920," Uh, let's go to the client MTS."
13943920,13951440," And so here when we're disconnected, so we don't want to print anything when we're disconnected."
13951440,13952080," Somewhere here."
13952080,13952400," Okay."
13952400,13956080," So where is the text?"
13956080,13958080," So this is how we render the text."
13958080,13963040," Uh, and so let's set the phone to something smaller."
13963040,13967040," Uh, label is going to be something like ping."
13967040,13970160," Uh, let's say ping MS."
13970160,13970480," Right."
13970480,13976880," So, and in here, I suppose we can just do like a fraction of width."
13977840,13978240," Right."
13978240,13981280," So let's just do fraction of width depending on the size."
13981280,13983200," It's going to be, it's going to be different."
13983200,13984880," So this is your mom."
13984880,13986000," This is streamer."
13986000,13987840," And let's actually refresh this into, I think."
13987840,13989840," And yeah."
13989840,13994720," So can we just reduce the amount of digits in here?"
13994720,14001840," So JavaScript, uh, JavaScript format floats."
14001840,14002320," All right."
14002320,14006960," So how do you format the floats, how to format floats in JavaScript?"
14006960,14007200," Okay."
14007200,14012560," Uh, two fixed cheeses."
14012560,14013040," All right."
14013040,14016480," So, uh, two fixed."
14016480,14020320," I have, I want to have two digits after the, after the period."
14020320,14021680," Uh, all right."
14021680,14024080," So that seems to be, all right."
14024080,14024640," Look at that."
14024640,14026400," I think the font is a little bit big."
14026400,14030080," Uh, I really like how crappy the quality of the phone is."
14030080,14030320," Right."
14030320,14035840," So this is because I'm kind of stretching the canvas and I could fix that, but this is the"
14035840,14036400," prototype."
14036400,14039280," So that's how, how little I care about it."
14039280,14039520," Right."
14039520,14040560," So it's a throwaway code."
14040560,14041920," So nobody cares."
14041920,14043760," Uh, can I make like 18?"
14043760,14045200," Uh, all right."
14045200,14048880," So because of that, I would like to maybe reduce that."
14048880,14050960," So let's actually factor this out."
14050960,14053920," Let's say that this is going to be some sort of a padding."
14053920,14055280," Uh, right."
14055280,14060320," So this is padding and let's reduce that a little bit."
14060320,14061920," Let's reduce that."
14061920,14063680," Uh, okay."
14063680,14065040," That's pretty cool."
14065040,14067040," That's actually very cool."
14067040,14076400," I wonder if I can, uh, you know, send the bots and see if that actually reduces the ping."
14076960,14077280," Right."
14077280,14078240," Okay."
14078240,14085360," And just a little bit, reduce the ping a little bit, but, uh, overall it feels nice."
14085360,14086320," It feels okay."
14086320,14087600," Okay."
14087600,14090640," So let's actually close this thing and let's commit that."
14090640,14091840," I want to test that on your mom."
14091840,14094080," Never get sold."
14094640,14101600," Uh, so yeah, uh, introduce, uh, ping, right."
14101600,14103600," Pink pong commands."
14103600,14107120," And I'm going to push that right into your repo."
14107120,14109040," Right."
14109040,14110560," Okay."
14110560,14111520," So this is your mom."
14111520,14117120," Let's actually fetch, uh, origin, uh, merge origin main."
14117120,14119200," Uh, okay."
14119200,14123920," So now if I do run serve, uh, it's not serve, it's serve."
14123920,14124720," Right."
14124720,14126960," Let's take a look at the ping on your mom."
14126960,14129280," Uh, all right."
14129280,14131280," So, yo, what the fuck?"
14131280,14133920," All right."
14133920,14139040," So, um, um, that's the 100 milliseconds."
14139040,14143040," I mean, for 100 milliseconds for web developers is actually perfect."
14143040,14146640," It's actually super fast for, for the real time gaming."
14146640,14151440," It's kind of oof, oof, oof, oof."
14151440,14153600," But, but at least it feels all right."
14153600,14154080," Right."
14154080,14155360," At least it feels all right."
14155360,14159600," I wonder if I, on your mom, I also send out a bunch of bots."
14159600,14161920," Uh, so let me actually try to do that."
14161920,14163120," So multiplayer."
14163120,14167120," So I'm going to connect the bot through the local network, I suppose, from within your mom."
14167120,14169040," Uh, I think it's going to be fine."
14169040,14170640," So I just want to have a bunch of players."
14170640,14172240," Uh, all right."
14172240,14174960," So now it stays the same."
14174960,14177280," So the ping roughly stays the same."
14177280,14178400," Okay."
14178400,14180720," Kind of interesting."
14180720,14183360," So the, your mom is actually located in Germany."
14183360,14183600," Right."
14183600,14186400," So, and I'm in Asia right now."
14186400,14189760," So that's probably why it is so slow for me."
14189760,14193040," So the next time I'll do live stream."
14193040,14193280," Right."
14193280,14197280," So we'll test it for, uh, with people from Europe."
14197280,14201120," So, and we'll figure out whether the, the ping is actually better for them."
14201120,14204000," But I suspect that the ping is going to be better for them."
14204000,14206560," It's just like, I'm too far away for, from, from your mom."
14206560,14208400," All right."
14208400,14210480," So, uh, that's basically it."
14210480,14212800," Thanks everyone who's watching right now."
14212800,14214560," I really appreciate that."
14214560,14215360," Have a good one."
14215360,14219440," And I see you all on the next recreation programming session with Amistazozin."
14219440,14227520," So the next step in this entire endeavor is finally integrating this networking code to the"
14227520,14228800," ray casting thingy."
14228800,14229520," Right."
14229520,14234080," So again, we have this game that we've been developing, uh, right."
14234080,14237600," And I want you to make this game, uh, multiplayer game."
14237600,14238160," Right."
14238160,14242880," So yeah, I finally figured out how to do networking more or less."
14242880,14246560," Uh, I'm still new about it, uh, but now I know a little bit more about it."
14246560,14250480," So yeah, the next room is going to be actually integrating this entire thing."
14250480,14255120," But to integrate this entire thing, I also need some sort of like sprites for the player."
14255120,14255360," Right."
14255360,14258320," So, because now the player will be able to see each other."
14258320,14260000," So how they're going to look to each other."
14260000,14263040," So I'll probably need to spend some time like drawing the sprites."
14263040,14264960," I'm not going to do anything super fancy."
14264960,14265280," Right."
14265280,14266880," Something super simple."
14266880,14269440," Uh, but yeah, that's the plan for, for the next stream."
14269440,14270320," That's it for today."
14270320,14271120," Thanks everyone."
14271120,14274960," And I see you all on the next recreation programming session with Ahu Amistazozin."
14274960,14276960," Love you."
