start,end,text
320,6960," looks like we're live hello everyone and welcome to yet another recreational programming session"
6960,12800," with a mr azuzin let's make a little bit of an announcement and officially start the stream as"
12800,20960," usual as usual so let me switch to announcement right uh red circle uh live on twitch and what"
20960,28000," are we doing today on twitch dot television website so today we're doing a real software"
28000,32080," engineering how about that i bet you don't expect that to happen so i'm going to give the link to"
32080,36720," where we're doing all that twitch.tv and i'm going to ping everyone who's interested in"
36720,41440," being pinged and there you go the stream has officially started the stream has officially"
41440,51680," started so uh i've been developing my own animation framework similar to the one that 3d3d3blue1brown uses"
51680,57840," right so 3blue1brown uses the engine that is called manim which is mathematical animation engine"
58000,62400," my engine is called programming animation engine right so it's for programming videos"
62400,67600," uh right so i developed it in c for visualization i'm using ray leap nothing particularly special"
67600,74640," and um recently while discussing on uh on discord i came to the conclusion that i would like to have"
74640,81840," sounds right even though i can add sounds sort of like in the post-production right i can add sounds in"
81840,89200," the post-production but if the animation is complicated and procedural it would be better"
89200,94960," if the uh animation itself actually decided when to play sounds uh let me demonstrate you"
94960,100480," uh right so essentially let me rebuild everything just in case i'm gonna start the animation right so"
100480,107200," recently i did the following thing where you have to actually supply your animation which is a dynamic"
107200,113600," library as a parameter to the engine right so uh essentially you can have several different"
113600,120480," animations as a pluggable things as plugins right so and that animation engine is responsible for"
120480,126240," previewing your animation for playing stopping and stuff like that and also for rendering final video"
126240,131840," through ffm pack right so the only thing you have to do you have to actually uh develop the dynamic"
131840,137760," library right so uh let's go ahead and just try to do that so the thing that i developed in here is"
137760,142320," called lip plug that is so nothing but you can special so this is the animation and as you can see"
142320,148240," it already plays the sound right so it just simulates it assimilates very simple uh tuning machines"
148240,154320," it's a little bit too bright for my liking honestly so let's actually try to fix that one of the things we"
154320,163600," can do in here uh is essentially go to the uh plug.c and maybe switch the theme right so let's actually"
163600,167760," go ahead and switch the theme uh i'm going to quickly do something like this there we go and"
167760,172800," i'm going to reload the entire thing and continue playing the animation so the point of this framework"
172800,178640," is that everything is like hot reloadable and dynamic and so on and so forth so you can actually tweak"
178640,183920," and adjust like little details of your animation it is very important for the creative process in my"
183920,189120," opinion and it was actually demonstrated to be important when i was developing mutualizer right so"
189120,195760," a lot of technology technology for this specific animation framework was taken from mutualizer right"
195760,201440," so another project that i've made uh you can find it in here so i'm going to actually paste it in here"
201440,207520," so probably it probably makes sense to add it to the description for uh people on youtube if it ever"
207520,212640," gonna be uploaded to youtube right so you can probably hear the sounds i'm not sure if you"
212640,216640," heard them so let me actually make them a little bit louder so let's replay the animation yet again"
216640,221920," yeah you can hear them so they're actually kind of cool i really like the sounds in here so they're"
221920,223680," very very much satisfying"
223680,231760," very cool so and after that what you can do what you can do you can go ahead and try to render this"
231760,237360," entire thing so there's no indication of rendering but you can take a look at the at the logs essentially"
237360,242000," right so they go in the logs you have a back and it's rendering its thing it's trying to render the"
242000,245280," whole animation right i don't know for how long it's going to be maybe it's going to be like"
245280,252480," for like 20 seconds or so we'll see we'll see so while we're waiting i can see people are subscribing so"
252480,255680," let me actually acknowledge the subs uh let me actually acknowledge the subs uh let me actually"
255680,260400," acknowledge the subs so thank you everyone uh for subscribing duality for you thank you so much"
260400,268320," for giving me the message hi hello welcome so valini thank you so much for doing a pug at sodium a pug"
268320,275280," indeed uh so we've already rendered 11 12 seconds right so it's actually really slow right it's not"
275280,280800," rendering in real time right because it takes time to encode stuff and everything and uh as you can see"
280800,286560," right so it rendered the final thing if you take a look at the final thing that it rendered you will notice"
286560,294480," something interesting it doesn't play the sounds right it doesn't play the sounds and this is because"
294480,299920," the sounds are not baked by ffm pack there's a little bit of a weird problem with uh offsetting"
299920,304720," stuff in here but i mean we can fix it a little bit later all right so we can fix all of that a little"
304720,311520," bit later and essentially the reason is how do we even play the sounds how do we even play the sounds"
311520,319360," somewhere in the uh in the state of the plugin in the state of the animation we loaded up the sound"
319360,325600," right so here is the sound uh which is like you know writing a thing into the cell and then somewhere"
325600,330480," along the way when the time is right when the time is right so we're specifically looking for a"
330480,338480," particular position in the animation uh we just issue play sound and it plays the sound through uh through"
338480,344240," ray leap that's what it does it just plays the sound through a relief but the problem is if you are"
344240,351120," rendering the ffm pack just playing it through ray leap is not gonna automagically bake it into ffm pack"
351120,359760," it is not going to do that like at all uh right you have to somehow feed that sound into ffm pack"
359760,365760," uh right so you may think about oh let's just take the audio device and redirect it to the ffm pack and"
365760,373120," stuff like that but like how are you supposed to synchronize it with the frames right because we're"
373120,380160," not rendering the frames at actual uh speed that we're gonna play them we're rendering them as soon"
380160,387280," as we can right and we're just feeding them into ffm pack and we're telling the ffm pack uh right like"
387280,395920," make a video that plays those specific frames that we slowly generated at 60 fps like just capturing"
395920,400720," the audio from the system is not going to be synchronized with that because we're not encoding"
400720,406880," the frames at 60 fps it doesn't make any fucking sense what we need to be doing we need to be also"
406880,414400," feeding feeding feeding the sound feeding that sound into the input ffm pack at the same speed as we're"
414400,419440," feeding the frames so they're synchronizing stuff you know what i'm talking about you know what i'm"
419440,426160," talking about so essentially the way we're doing all of that the way we're doing all of that is when"
426160,431280," we're starting ffm pack we're starting it as a separate process as a child process and we're telling it"
431280,438400," bro uh use your standard inputs use your standard input as a source of the frames as the source of"
438400,446720," the video and expect raw video rgba frames and we're literally generating like a raw uh you know frames and"
446720,454880," just sending them in there we need to do the same with audio we need to tell it okay here is your first"
454880,461360," input your second input from somewhere i don't really know where is going to be raw audio"
461360,469120," expect raw pcm pulse uh you know signal module modulation thingy uh and we're going to be sending"
469120,473440," those things and we're going to be sending those things at the same speed as we send in the frames"
473440,479520," right so essentially we manage to render a frame and then we look okay within this that specific frame"
479520,485280," what kind of uh sound we're going to play and we put also chunk of that sound so we're sending the"
485280,489920," image to the standard input and the chunk of sound for that specific frame we're going to be sending"
489920,496160," into the input for the audio and that's how we're going to synchronize all of that so that's the idea"
496160,503600," so fifa type maybe a fifa time that sounds like a cool idea right so for mutualizer i didn't use this"
503600,509200," kind of stuff because it's a platform specific thing right so but here i don't really care about"
509200,514000," niche operating system for video games right so i'm making a thing for myself and i'm using a real"
514000,520960," operating system for real work so because of that i can use the mechanisms of a real operating system"
520960,527600," right so i think it's totally fine for me to use make fifo in here right so and photoscope doesn't know"
527600,531920," make fifo is actually a pretty cool thing i don't remember if i used that before but we'll see we'll see"
532480,540080," so essentially it creates a special file right so it's it creates like a you know pipe file and uh"
540080,548000," basically your process may create such file and start writing some stuff into that file and then"
548000,554400," you can tell ffmpeg okay read stuff from that file and through that special file our process is going"
554400,561360," to be sending later to ffmpeg and ffmpeg being the dummy it is uh it will think oh it's just a sound file"
561360,567120," but no it's not a sound file it's actually secretly a pipe through which we're sending"
567120,574240," the raw data you know you know you know so that that's basically the idea right so ffmpeg is not"
574240,581360," really dummy right it's a good uh smart software software i think uh right i'm just you know joking around"
581360,588000," so i'm saying that i'm obligated to say that to not get cancelled by ffmpeg twitter okay so"
588000,597680," on the modern internet you are not allowed to joke or say anything but bad about ffmpeg because ffmpeg"
597680,604320," twitter is gonna cancel the out of you for doing so because of that i was joking ffmpeg is a really"
604320,609600," good piece of software it's extremely smart so yeah like i really love it thank you so"
609600,615920," much for providing such a you know important piece of software to me for free i really really appreciate"
615920,626240," that so uh thank you thank you thank you anyways uh so yeah that's pretty cool but here's the interesting"
626240,633360," thing here's an interesting thing uh how does like our plugin system work how are this plugin system"
633360,640400," works so essentially we we split the whole engine into sort of like two things maybe i can draw that"
640400,650720," chat by the way maybe i can actually draw that uh you see this one freaking this one so um where is my thingy"
653360,659520," uh-huh i want to make it a little bit brighter and then um so we have a panium right so this is"
659520,664400," what we have we have a panium which is just an executable right it's simply an executable"
664400,675360," and what it does it works with our animation which is a lib plug plug dot so as so stands for shared object"
675360,681600," so that means it's a dynamic library right so it's an analog of dll right so on windows you have dlls"
681600,687760," um i think on mac os you have dean lib or something like that on linux you have so which is a shared"
687760,692640," object it's shared between several executables and stuff like that so your animation is actually"
692640,700560," something like this so when essentially panium uh calls a special method of lib plug um i think it's"
700560,708400," called plug update to generate each individual frame right to generate each individual frame and it will be"
708400,713600," calling this function in two in two separate modes it's going to be calling it when it's just previewing"
713600,717840," the animation and it's going to be calling it when it's rendering it with ff and back we can take a"
717840,723600," look at the code where exactly that happening so if we take a look at the panium uh here is the main event"
723600,730640," loop of panium right so uh here we begin drawing and stuff like that and here is the huge if else statement"
730640,739920," look at that it consists of two branches then and else and at the top we have ffmpeg and here we"
739920,746240," basically have opposite of fmpeg so if we have ffmpeg that means we're rendering the final video and we're"
746240,754560," calling plug update with an intent to capture its frame take its pixels and send those goddamn freaking"
754560,761120," pixels to ffmpeg so it can encode that if we're not into ffmpeg we're still calling plug update"
761120,770800," plug update but with an intent to just display it on the screen right so essentially um we need to somehow"
770800,779360," for the plugin to indicate okay i want to play this sound but if i'm in a preview mode if i'm in a preview"
779360,786560," mode i'm gonna just play it with play sound of ray deep so the user the animator can hear that sound"
786560,793120," to estimate how the animation like looks and stuff like that but if i'm in ffmpeg rendering mode i need"
793120,801520," to grab like literally the samples of the sound and start sending that shit to ffmpeg how can we do that"
802160,810080," how can we do that right so let me take a look so plug.c so play sound right play sound can only play"
810080,814320," this thing i don't think we can just capture that stuff from ray leap i don't think ray leap has a"
814320,821600," very convenient way to do that what i'm thinking is that we literally need to abstract away the process"
821600,830400," of playing sound in panem that's what we need to do we need to somehow abstract that away so"
830400,835520," we can do different things depending on the mode whether we're previewing animation or whether we're"
835520,841120," rendering the final video somehow we need to do different things right but the logic has to stay"
841120,845840," the same we need to separate the logic of the animation from the actual process of playing the sound"
846800,854480," right so and we are in a separate dll thingy so that means we can maybe have some sort of a function"
854480,861360," that points back to panem right so essentially leap plug at some particular point of playing the"
861360,869520," animation tells the engine i want to play a sound do the appropriate thing at the time so but we never"
869520,875200," actually done that before the only thing we've done before we called from panem to leap plug but now we"
875200,889760," need to be able to call back we need to call back call we need to introduce a callback right so and"
889760,896800," the main sort of like an entry point into the animation is again plug update right so plug update"
896800,903120," and it already kind of notifies uh the plugin whether it's rendering or not rendering we don't really use that"
903120,909520," information but it doesn't really help us with abstract in a way because to abstract it away"
909520,916240," properly to abstract it away properly our plugin need an access to ffmpag process and it doesn't really"
916240,927680," have that so uh basically when the panem calls plug update to render the next frame i think it also should"
927680,937360," pass uh some sort of call back let's put it this way um you know panem play sound right panem plays out and"
937360,943440," it's going to be a function pointer which accepts essentially the sound right so it accepts essentially"
943440,950560," the sound and um then and depending on the mode right so we're going to literally do different things"
950560,955680," right so if we're in the preview mode which is going to forward it to play sound from ray leap which is"
955680,961920," totally fun where is the play sound uh i don't see it yeah so to do this one or if we're uh like"
961920,966400," rendering the entire thing we're going to grab the sound and we're going to sort of like schedule"
966400,974640," uh sending its samples to ffmpag that's going to be the idea that's going to be the idea but there's a"
974640,979040," little bit of a problem in here there's a little bit of a problem in here in the sense that we're starting"
979040,986800," to have like a lot more parameters and this seems like a huge complexity magnet in a sense that we"
986800,994160," obstructed away one functionality of the um you know of the engine what if we want to abstract away more"
994160,999760," so that means we'll have to add more and more callbacks in here so one of the things we'll probably"
999760,1005600," have to do we'll have to take this entire thing and maybe create some sort of a separate structure"
1005600,1012800," right so something like struct environment right environment uh right and in here we're gonna have"
1012800,1018160," all these things in here right so all the parameters that we passed so this is going to be delta time"
1018160,1022560," right so i want to be a little bit more descriptive for this entire stuff because there are fields"
1022560,1027840," here we can have a screen width right depending on the mode the screen width might be different we're"
1027840,1031760," going to be previewing if we're previewing the screen width is the size of the window if we're"
1031760,1036800," rendering it's usually fixed right to fit the certain resolution of the video all right so that's that's"
1036800,1041520," what we're going to be doing so that's why it's sort of customizable uh right so another thing is we're"
1041520,1048720," notifying the plugin about whether we're rendering or not it's not usual for abstracting things away"
1048720,1053680," but it's useful for telling the plugin to act differently for example maybe plugin may"
1054160,1063120," uh have a custom input handling like mouse and keys and in rendering mode when we are rendering the final video"
1063120,1069920," that doesn't make any fucking sense so uh the plugin is going to be using this boolean to sort of disable"
1069920,1077120," its input handling functionality specifically for rendering the video or do something else when it expects the user input"
1077120,1083360," right so it's still kind of useful to notify the plugin whether we're rendering or not but it we can't rely on it when we are"
1084160,1089680," such features as play sound just in my just personal opinion right so and here we're going to be just"
1089680,1094880," passing the environment nothing but it is special right so this is going to be environment uh and environment"
1094880,1101280," there we go and probably the interface of the plugin is also going to accept uh essentially"
1101280,1109360," um this particular thing so that means it make maybe sense to put that definition somewhere here as well right"
1109360,1118400," so somewhere here as well and then when we are doing the update the update we're going to be simply accepting"
1118400,1126080," the environment like so so let me also like that and that's basically the you know refactoring that i"
1126080,1130240," want to do right so we'll have to go to the compilation errors and do a little bit of a compiler assisted"
1130240,1136880," refactoring to fit everything appropriately but that's the idea that's the idea of the whole thing i never"
1136880,1141040," tried anything like that right so i'm not even sure if it's going to work we'll see we'll see we'll"
1141040,1146400," discover it on today's stream so people subscribe more i can totally see that thank you so much"
1146400,1153040," janertson i hope everyone's unique name correctly with the message um c is better than rust"
1153040,1161600," probably i guess maybe uh it's just another programming language it is as good as a programming"
1161600,1165920," language it's a little bit overhyped overrated programming language but it's a useful programming"
1165920,1173200," language nonetheless you can write some useful software in it um don't turn it into a tribalistic"
1173200,1181600," thing please please we are doing a real have you seen the title have you seen the title we're doing"
1181600,1189280," a real software engineering in here there is no place for tribalism in a real software engineering"
1190080,1196240," right so we're looking at the problem we're looking for the tools uh that can solve that problem and we"
1196240,1203600," just use inappropriate tools no tribalism no picking a team no anything like that we're serious real software"
1203600,1212240," engineers in here okay thank you so much for this so um let me see let me see so let's try to maybe compile"
1212240,1218160," that so this thing um so this thing um is actually i already sort of factored it out to a separate sort of"
1218160,1225600," header but i can't include that header uh in here i think i can't really include in here because it's going"
1225600,1233520," to be colliding with the names right so maybe because of that it makes sense for me to create a separate header"
1233520,1240240," uh a separate header uh a separate header where i'm going to store all of that if not define environment"
1240240,1249840," h and then define and then uh let's do and even here so this is include guard so to be fair environment is"
1249840,1257840," such a huge name what if would be better to maybe called env maybe env is a little bit better just a tiny bit better"
1257840,1266720," i really like short names really really like short names so there's a huge uh huge uh padding in here"
1266720,1273520," so can i realign this and that i can apparently i i can in fact can i can in fact can i do in fact can"
1274320,1280320," i don't know i don't speak english i'm sorry so plug let's see uh so here we're going to be accepting"
1280320,1288880," this and i think and we're going to be including uh and dot h there we go so uh and in here obviously"
1288880,1295440," we also include and dot h all right let's go to the compilation errors and see how badly we screwed up"
1295440,1303440," uh all right so they have in here uh so delta time delta time okay okay so i suppose instead of delta"
1303440,1311360," time we have to just do how how many times we use delta time uh quite a few times all right so maybe"
1311360,1318400," it makes sense to just for a quick uh fix to create a separate variable in here so delta time like so"
1318400,1324320," so maybe that makes it a little bit easier so the same with w and uh h right so w is going to be"
1324320,1331280," environment screen width right so this is an environment screen width then uh and look environment screen"
1331280,1340560," height float h environment screen height uh all right and that's fine now it fails at the executable"
1340560,1345040," so before i go into the refactoring executable i think it makes sense to actually take the play sound"
1345040,1353360," and replace that with environment play uh sounds uh did i call it panim play sound maybe maybe something"
1353360,1362800," like that so if i calling it panim play sound um panim play sound is not particularly great so because"
1362800,1368720," why do we need to have a prefix if we already have this structure structure by itself kind of introduces"
1368720,1375920," the prefix so i'm going to just call it play sound instead i think it makes more sense uh so plug dot c"
1376640,1383120," play yeah play sound like so so as you can see we actually abstracted shut away all right let's go"
1383120,1390000," to the compilation errors in here uh panim render fps so what you don't like it probably doesn't like"
1390000,1396240," something about this thing aha i see so now we need to construct an environment look at that"
1397360,1407200," look at that so we are in the rendering mode so because of that play sound has to do something"
1407200,1416160," special right uh let's maybe introduce a function function dummy play sound dummy play sound and in"
1416160,1420000," here we're going to accept the sound but we're not going to really play it because it's a dummy play sound"
1420640,1426080," uh right so i'm going to literally ignore this entire thing and maybe i'm going to just do the log"
1426080,1438320," trace log uh log info um you know animation try to play a sound can we even say what kind of sound"
1438320,1445520," we're playing here this is a very interesting question so we take a look at the raylib uh include the raylib.h and"
1445520,1452240," so we can only have an access to the audio stream and what is the audio stream the audio stream"
1452240,1459200," uh has channels sample rate sample size processor which is a pointer to some obscure thing and as far"
1459200,1466400," as you know audio uh audio buffer is also yeah all of them are pointing to opaque structures we literally"
1466400,1473360," can't know what kind of sound that is we literally can't know anything about that so we can only say"
1473360,1477760," animation try to play a sound which is fine for now i suppose which is fine for now"
1477760,1483360," anyways so here what we need to do we need to construct a new special environment right so the"
1483360,1491520," environment is going to look like so so we're going to have a screen width i set screen width so this is"
1491520,1496720," going to be a render width so here we're going to have height this is the height and then we're going to"
1496720,1503600," have delta time delta time i'm going to put that stuff in here and we also need to say whether we're"
1503600,1508880," rendering currently we are in fact in a rendering mode as you can see so that means we are in fact"
1508880,1513520," rendering look at that and to play a sound we're going to be using dummy play sound because we have"
1513520,1519440," not implemented all of that stuff yet so essentially now we just pass this entire thing or maybe we can"
1519440,1524800," use a little bit of a clitoral magic right so a little bit of a clitoral magic so there's a special"
1524800,1532160," macro in uh ray leap that allows you to do things like that so clitoral let's go look at that look at"
1532160,1537280," that beautiful beautiful function it feels like almost 10 programming in javascript do you guys like"
1537280,1543920," javascript everybody loves javascript it's one of the most popular programming languages i hate it anyway so"
1546400,1551600," so let's continue the refactoring uh right so what's going to be the next thing so in here"
1551600,1559600," um so and has no member our play sound yeah it is called play sound okay so what else do we have in"
1559600,1569200," here so we can actually kind of do a similar thing uh right so plug update uh collateral uh environment"
1569200,1575920," like so so what we have in here screen width which is going to be taken from the uh size of the window"
1576400,1583520," then we have height so we have a height and then we have delta time which is taken from the actual"
1583520,1589920," frame time right the actual frame time uh rendering we're currently not rendering this as a preview mode"
1589920,1596720," and to play a sound we can just use a play sound function from ray loop we're just forwarding it in"
1596720,1603840," so and that's about it so you see we're using plug update in two different situations and for these"
1603840,1609200," two different situations we're using different environment we abstract that stuff away from the"
1609200,1614880," plugin right so that's basically how it works that's basically how it works and it compiles"
1614880,1622160," would you look at that would you look at that it compiles mate it compiles thank you so much"
1622160,1629040," binv daniel i hope i pronounced your name correctly thank you so much for tier two subscription don't waste money"
1629040,1633520," i don't get any money from twitch anyway don't waste your money right so because it's like"
1633520,1639280," makes no difference it literally makes no difference but i really appreciate the gesture thank you so much"
1639280,1643440," uh thank you thank you thank you thank you let me sip my tea"
1646960,1654960," um okay again so uh let's see if it still works like i don't fucking know maybe i broke shit uh usually"
1654960,1664560," usually that happens uh all right and i'm going to just do build panim build lip as so and i'm gonna just"
1664560,1672480," run it uh is it playing sounds it is playing sounds i can hear the sounds all right so now i'm gonna stop everything"
1672480,1682480," so my space doesn't work what the space is supposed to pose this entire shed so what happened excuse me"
1682480,1693120," um so i don't freaking know oh i think i know what the fuck is going on no no i don't that's that's very"
1693120,1701200," surprising to me um so i'm going to go to the panim itself because this is where we handle all that"
1701200,1709200," so there should be a pose thing yeah so there is this thing paused yeah and depending on whether it's"
1709200,1717760," paused or not ah i remember yeah i accidentally removed that so essentially the way it all works if you're"
1717760,1726400," paused we're sending zero as the frame time as the delta time so that means the there was no time"
1726400,1731520," change in here and that's how we paused it since i didn't have like a big if in here or anything like"
1731520,1739440," that i didn't notice actually removing this entire thing yeah that's actually kind of funny uh so yeah so"
1739440,1746720," now that should fix uh all that stuff and it should be able to pause the animation okay so now i can press"
1746720,1752560," r and that should start rendering that should start rendering and we should see once in a while the"
1752560,1759200," animation like play the sound or something like that uh right so we should once in a while see the log"
1759200,1767520," saying this kind of thing hopefully i don't know um doesn't really say anything maybe because it renders"
1767520,1774240," slowly but let's just let it do its thing for a little bit and yeah let's see we'll see oh i said yeah"
1774240,1781440," that's right you're so right i said local alert warning so it's never going to actually print anything"
1781440,1788720," is the finger going to stomp over the output no it's not going to this thing will this thing will"
1788720,1796640," so the problem is that when we are getting the pixels out of the frame buffer texture really for"
1796640,1803440," whatever reason which i don't understand actually logs that so it logs at the fps we are rendering"
1803440,1809280," things and it's just like it's it's insane so we disable logging and because of that we never see that"
1809280,1813920," so to be able to see this kind of thing to be able to see this kind of thing we need to maybe log"
1813920,1826880," with a warning right so i think that makes sense so info um and yeah etc trace log and so dummy warning"
1826880,1833120," there we go so let's try to reveal this and i think hopefully now we're gonna see some interesting"
1833120,1839040," stuff so it's still doing its stuff all right so let's render uh-huh so can we see"
1839040,1841120," this ship uh we'll have to wait a little bit"
1841120,1852400," so yeah animation try to play sounds so we'll get that we actually get that animation try to play sound"
1852400,1859760," so yes so yes so it's like look how many sound this tries to play"
1859760,1865760," look how many sounds it tries to play interesting so the most interesting part is going to be like"
1865760,1874320," how we're going to be feeding the um the sounds i can try to maybe use standard error or some other"
1874320,1881120," stuff but maybe it would make sense to actually go straight for make fit for um i think it's going"
1881120,1892800," going to be actually very useful to try to do make fit for um so as the first step what we're going to try to do um i suppose we're going to try to"
1892800,1901360," port video compression video encoding to make fit for that's the first thing we can try"
1902240,1904960," and then we can try to add the sound in there"
1904960,1914000," that's just how it sounds yeah 12 fps is okay speed yeah it's just the speed at which it is encoding it is"
1914000,1920480," the speed at which it is encoding and creating the final video because our goal is to create the mp4 file"
1920480,1926800," and mp4 is going to be playing at 60 fps you probably won't be able to see that because i'm streaming at 30 fps"
1926800,1932080," right so uh but it's going to be pretty smooth for me so if you take a look at like the parameters of"
1932080,1947520," the rendered video um so it is uh yeah it is 60 fps uh one uh 10 1080p right so 1080p and uh 60 fps so that's"
1947520,1954560," basically the video and if we take a look at we open it with uh mpv right so open it this is the video"
1954560,1961440," this is not the you know the application generating this kind of stuff this is video we're playing output mp4"
1962320,1968800," right i might actually open it with vlc to sort of like a demonstrate the point uh right so we are"
1968800,1975760," yeah vlc is having a stroke a little bit right but no sound is playing because there is no sound in here"
1975760,1982720," so uh yep that's pretty cool that's pretty cool i wonder why it is like slightly offset"
1982720,1986400," why this is slightly upset but it doesn't really matter we can fix it later"
1989280,1998160," so for a real software engineer it is important to not get distracted by little bugs that do not have"
1998160,2005040," any uh effect on like the actual feature that you're working on right so it's very easy to get distracted"
2005040,2011520," and start working on something else for us it is super important to just bake the sound into the uh into"
2011520,2022320," the final video so um ever since i went to mpv i can't vlc anymore so the thing is like i went for vlc"
2022320,2027120," because i wanted to demonstrate that this is actually played video because people may see something like"
2027120,2033200," something like this and say oh you're actually generating this is not the video right because mpv"
2033200,2038800," doesn't have any uh interface it actually it has an interface right so we can yeah so you can actually see"
2039680,2047200," so that's that's the interface of mpv uh so it is actually working to some extent so yeah"
2047200,2054720," anyways so let's go ahead and maybe commit whatever we have already all right so let's commit whatever we"
2054720,2065600," have um introduce um panim environment panim environment and we're going to push that right into the repo"
2069120,2076080," so uh next thing how do i do fifo how do i do fifo let's actually read about fifo a little bit"
2076080,2084320," make fifo so there is a command you can do that through cli which is rather interesting okay so but"
2084320,2091040," uh i think i want to do that through c and actually you can do that c sort of allows you to do that make"
2091040,2097840," fifo but we're going to be looking at the section three which is like apis and stuff like that"
2098560,2102960," so you provide the path name and you provide the mode i'm not sure what kind of mode i have to provide"
2102960,2109280," in here i suppose the usual mode right so um reading and writing probably not executing"
2109280,2115760," uh right so and i probably should not worry about the mods for the group and the other because i'm"
2115760,2120640," going to be using that from the same process right so all that is going to be used from the same process"
2121360,2128720," so uh it creates a fifo a special file with the name path name um right so mode specifies the fifo"
2128720,2135040," permissions it is modified by the process umask uh in the usual way the permissions of the credit file"
2135040,2139760," are mode plus additional umask i suppose this is something like system wide i'd like never actually"
2139760,2146400," used umask it's kind of interesting so if e4 special file is similar to a pipe except it is created in a"
2146400,2151040," different way instead of being an anonymous communication channel a fifo special file is"
2151040,2158640," entered into the file system by calling makefifo once you have created a fifo special file in this way"
2158640,2164800," any process can open it for reading or writing in the same way as an ordinary file however it has to"
2164800,2172560," be opened at both ends simultaneously before you can proceed to do any input or output operations on it"
2172560,2178400," opening the fifo for reading normally blocks until some other process opens the same fifo for writing"
2178400,2183680," and vice versa the fifo it's a section seven i think they're called sections or maybe they're called"
2183680,2188960," chapters uh see if you for seven for non-blocking handlings of fifo special files i don't think we"
2188960,2195040," care about non-blocking i kind of find with this kind of stuff blocking so that's that's totally fine"
2195040,2201840," uh right return values so on success it returns zero on error it returns minus one and error no is set to"
2201840,2208400," indicate an error what kind of stuff we can have in here uh so different like usual stuff a path name"
2208400,2214720," already exists for instance i don't think we care about handling any specific error per se if an error"
2214720,2221440," happens we're gonna just say okay an error happened so that's about it excuse me and that's about it"
2221440,2230960," okay uh so that's pretty cool um and what we're gonna be doing well to be fair to be fair we may want to"
2230960,2238800," handle e-exist right we may want to handle e-exist because if the file already exists we may not want"
2238800,2245920," to crash we can just reuse the existing file you know what i'm talking about right so maybe that file was"
2245920,2253520," left by the process terminating incorrectly or for some other thing uh right so but we'll see we'll see"
2253520,2261360," it's like mem map but on disk it doesn't really map any memory right so mapping the memory means that you can address"
2261360,2268240," that memory as far as as far as i know you can't address this file it literally acts like a pipe it's a named"
2268240,2275200," pipe so you just send some data into that pipe in one process and then other process just reads that data so"
2275200,2280800," there's no memory addressing or anything like that i think i feel like i'm not really that much of a"
2280800,2287120," low level person but i feel like that when you map in the memory and addressing is implied there is no"
2287120,2291680," really addressing in here maybe there is some sort of notion of a cursor but i actually kind of doubt that"
2291680,2298720," maybe there is no cursor in here but anyway so okay that's pretty cool i think i fully understand how this"
2298720,2306320," function works uh let's go into the ffm pack and here is the thing the interface of the ffm pack thingy"
2306320,2314160," is opaque right so as you can see we're pointing at a very much opaque structure uh right and inside of"
2314160,2320560," the linux implementation that structure contains oh this one is rather interesting right so it actually"
2320560,2328240," contains the pipe we're creating a named pipe specifically for uh the input in here i wonder if there"
2328240,2334960," is a way to tell ffm pack to read from the standard error or something like that uh but i'm not 100"
2334960,2340960," sure okay let me actually google that um so maybe i can even use a little bit of a chat gpt because i"
2340960,2346720," have an access to uh to chat gpt through dagda go did you guys know did you guys know that you can use"
2346720,2357760," chat gpt for free in like through dagda go but only gpt 3.5 right uh how to make ffm pack read"
2357760,2366240," from std error uh read uh sound maybe a raw sound from std error maybe you can just do something like"
2366240,2376160," that to make a raw sound from std error yeah you use directly pipe zero but it's zero is not std dumb"
2376160,2382800," machine i specifically said std error and it just"
2382800,2397680," and then then it said pipe zero it reads from standard input but it says to wait wait did it"
2399840,2409360," holy sh*t it"
2409360,2418640," uh okay so it suggests you to use pipe zero right then redirect standard"
2426080,2438560," okay ask okay ask it to use pipe one yeah okay so we can actually ask why not just use pipe one"
2438560,2441120," okay"
2441120,2448640," but isn't it i think it's pipe two wait wait wait wait yeah it's it yeah it's pipe two"
2450400,2456080," this is so f*cking bizarre like whatever so but one useful thing by the way one useful thing that"
2456080,2461600," this mother flipper still provided is this command that we probably will need that we probably will"
2461600,2471040," need so to be fair um i don't really plan to have more like input channels honestly i don't really plan"
2471040,2479120," to have more uh so maybe it's totally fine for us to use standard input and standard ah there's only one"
2479120,2487200," standard input f*ck i'm an idiot we can't just do that we can't just do that so yeah i'm actually"
2487200,2492720," probably asked the completely incorrect thing so i confused the directions of the pipes i'm sorry"
2493920,2500640," i just confused the directions the pipes anyway uh anyway anyway uh so maybe we need to"
2500640,2508720," hmm we still need to do make fifo okay so let's go ahead and try to maybe create them"
2508720,2516080," uh so what i'm gonna do i'm gonna do make fifo um okay okay so where is the make fifo so we have to"
2516080,2522880," probably include a bunch of things in here right so sys types and so on and so forth um so we already"
2522880,2530960," so we already include c types but we also need uh stats okay so that's cool uh let me maybe put this"
2530960,2538720," stuff in here so make fifo uh and then here i'm going to create panim um video right so we're creating"
2538720,2544400," panim video and what i want to like what kind of permissions do i want to have right so read write"
2544400,2553520," xz uh so and here i kind of want to leave it as it is right so so that means um i don't really need"
2553520,2561920," an execution right so i only need to read and write so it's going to be one one zero so one two four so"
2561920,2569840," that means it's going to be around like six uh six zero zero right so i think doing something like this"
2569840,2575920," is fine for that specific file right something like this is fine for this specific file uh right so we"
2575920,2583520," can even introduce something like panim panim video path right so which is going to be this kind of thing"
2583520,2588800," so we're going to create at the current uh at the current folder for now right so all of that can"
2588800,2594480," change in the future so that's totally fine uh right but uh for now i think it is totally fine"
2594480,2602000," so if less than zero right if it is in fact less than zero what we can do uh i'm just looking what is"
2602000,2616080," going around here okay okay okay um we do that uh f print f and if error null is not equal e exists"
2616080,2622080," right if it's not equal to a exist we have to log an error and we can actually use rayliblogger so we can"
2622080,2636240," do a trace log log error and we can say could not actually ffmpg could not create uh fifo as um panim video"
2636240,2645360," path video path and we can also specify why because of this reason so str error error error no um so it would be"
2645360,2650960," nice to be nice to maybe actually use this thing panim video path and after that we just return null"
2650960,2656880," right if it does in fact exist maybe it makes sense to actually throw some sort of a warning"
2656880,2669440," uh log warning uh saying ffmpc uh s already exists uh right so yeah that's like this thing already exists"
2669440,2675120," panim uh video path but we're not going to exit right we're going to just like issue a warning to the logging so"
2675120,2681680," for the user to know and then we continue doing things as usual um so yeah uh what that means"
2681680,2688880," that means we can just use this thing now directly we can just use it directly so that means we can get"
2688880,2694240," rid of these pipes and stuff like that uh right so the easiest way to get rid of mentioning all these pipes"
2694240,2699920," is to probably even uh just rebuild and go through the compilationers i think that's going to be the easiest"
2699920,2705920," thing so let's go ahead and do that uh so yeah there's a little bit of a weird garbage in here"
2705920,2711600," that's totally fine so what do we have in here uh so we're saving the pipe one of the things i'll"
2711600,2716400," probably have to do by the way one of the things i'll have to do i'll probably have to open that file"
2716400,2724320," afterwards uh that makes a lot of sense to me like all right so we freaking neighbors anyways so"
2724320,2735840," let's call it something like video v4 uh right so does it have a special that no it's just integer so we"
2735840,2745120," can say we can say integer video v4 right so video v4 and we can just open that file um right so it's going"
2745120,2753920," to be pointing video path like so and i think open also accepts some sort of parameters so what are the flags"
2753920,2766720," so we're going to be opening it for uh for writing right so um wrongly i think it is called wrongly"
2766720,2777040," yeah so we're opening it for wrongly if we couldn't open it so as far as i know it may fail so it will"
2777040,2784480," return a negative number in that case i think we can quite safely just say that uh right so it's going"
2784480,2798160," to be trace log log error um so ffmpeg um could not open fifo s because of s right so we can specify"
2798160,2806000," upon your video path str error error no and then we're going to exit with null in here so we have a video"
2806000,2815920," fifo we have a video fifo um so then we fork a child uh we fork a child so in here as the input we're"
2815920,2824320," going to be actually passing panim uh video path right so panim video path and that's about it actually"
2824320,2832720," so let's go through the rest of the completion errors it gets me every time it gets me every time"
2832720,2840400," actually people told me that uh they've seen this kind of assertion in the wild in other projects so"
2840400,2848400," people who watch me actually started to to do the same thing this is so funny uh this is such a funny"
2848400,2854720," meme like i mean yeah so on the modern operating system malloc pretty much never returns null and if"
2854720,2859840," it returns no that means like something absolutely horrible has happened like you ran out of all of the"
2859840,2867200," memory and all of this swap that's what happened so if it returned null you ran out of all of the ram and"
2867200,2875360," even swap so at that point like what like what you put how application has to react to this kind of thing"
2875360,2883040," like there's only one thing to do in this case just fucking die so yeah makes sense buy more ram"
2884720,2891280," um it does make sense unless you're doing some sort of like embedded stuff but we're not doing embedded"
2891280,2900160," in here right uh program slow just buy more cpu exactly you get it you freaking get it my friend you"
2900160,2905840," freaking get it all right so we need to include some stuff in here so because it can't see open uh"
2906400,2911760," right so we're including more and more uh posix headers we're including more and more posix headers"
2911760,2918400," uh okay so what else do we have in here so we're opening pipe fd we probably don't have to"
2918400,2926240," with pipes anymore i just realized how bizarre it sounds but that's true we don't have to with pipes"
2926240,2933360," anymore uh all right so we don't we can do this kind of thing uh and then we're just yeah everything's"
2933360,2940000," fine that's pretty cool so then we're closing the pipe on our end we don't have to close any pipes"
2940000,2948400," anymore so that's totally fine uh all right so we're assigning pipe so in now instead of pipe we should"
2948400,2956560," have something like video fifo right so pipe equal this is a video fifo and we're going to be assigning the"
2956560,2966320," video fifo like this so i wonder what is going to do so if fork didn't work out if fork didn't work out"
2966320,2974000," i think one of the things we probably have to do we have to close the video fifo right so we try to fork"
2974000,2980880," a child that didn't happen but fifo is already kind of opened so that's kind of a shame um"
2981760,2987200," right so we have to close it or maybe if we actually open it somewhere else but in that case"
2987200,2992240," child is kind of yeah i don't know i don't know how exactly we're going to react to all of that but"
2992240,2997600," i guess that's fine for now i guess that's fine so this is a video fifo all right so what's the next thing"
2997600,3006320," so when we're ending the rendering right when we're ending the rendering we take the pipe and we're closing it"
3006320,3017520," maybe uh this is exactly what we have to do as well just close the video fifo uh and that's about it so"
3017520,3025520," and when we're writing we're not writing into pipe anymore we're writing into video fifo okay so it would"
3025520,3031680," be kind of nice when you end the rendering to delete the file uh but let's actually keep it as it is because"
3031680,3039520," i want to be able to see that file um all right so okay so everything seems to be compiling every"
3039520,3045120," everything seems to be compiling so let's actually go ahead and try to uh to do all that stuff uh all"
3045120,3050000," right so i'm going to just run this into i think so this is the animation it is playing and stuff like"
3050000,3054720," that i'm going to press r and i'm going to take a look at what we got so we've got a panning video and"
3054720,3063920," let's take a look at the logs in here and i don't see okay so is it rendering anything is the ff unpack"
3063920,3072800," rendering anything i don't see anything nothing is happening chat literally nothing is happening"
3072800,3078480," huh that is bizarre"
3080640,3085200," okay so i'm going to kill this entire thing pipe clogged yeah that's probably what happened okay"
3085200,3090320," this is actually kind of interesting so it has a special sort of flag in here like uh you know p which"
3090320,3096640," stands for pipe i suppose we can even take a look at its file pipe named pipe look at that"
3096640,3103120," at least it doesn't stick fault yeah it's super reliable it is super reliable so i wonder if we have"
3103120,3108640," some uh ff impact child processes ff impact no there is no ff impact child process maybe i should have"
3108640,3114800," actually checked for them so it feels like maybe yeah maybe nothing was actually sent in there or"
3114800,3119680," anything like that so let's do a little bit of a logging at least all right so let's do a little"
3119680,3127840," bit of a logging uh indicating that you know we started the thing um so i've been trying to"
3129280,3132880," read anything to read anything from that file wait"
3132880,3149600," is it blocked on open until somebody else open it wait a ff wait we open it what if it all blocks the open"
3149600,3157920," until the other process actually opens it as well that probably means that we have to try to open it after we"
3157920,3165280," created the child that could be the case actually probably i feel like that's the case i feel like"
3165280,3170640," that the kids i even thought like what if i just open it after i created the child that that yeah this"
3170640,3178080," is literally that look basically almost that look kind of involves two um two agents right so waiting"
3178080,3185440," on each other we don't even have the second agent uh there's no there's nobody on other side to to wait for"
3186080,3190720," uh i think that's basically so let me actually read more about make before to confirm because i remember"
3190720,3196880," the documentation was talking about that a little bit uh special file instead of being anonymous once"
3196880,3202800," you have created open in this way any process can open it for you it has to be opened at both ends"
3202800,3211680," simultaneously before you can proceed to do any input or output right so opening for for reading normally"
3211680,3218720," opening for for reading normally blocks until some other process okay so but it's for reading we're"
3218720,3224880," opening it for writing though we're opening for writing so i don't know but it feels like it could be also"
3224880,3232240," blocking for for the other reasons so anyway let's uh move this entire thing to after"
3233760,3239840," um to after we created all that stuff so it doesn't block so essentially we're gonna create the child"
3239840,3245280," so this entire branch of if is literally executed in a different process right so because it's it's"
3245280,3252480," happening after the fork right it is happening after the port oh oh and vice versa literally okay okay"
3252480,3256720," i said thank you thank you thank you so i mean i mean like my attention span is a little bit like"
3256720,3262560," you know sparse when i'm streaming right so because of that i may miss certain things people quite often"
3262560,3268960," like complain and being angry at me for not reading documentation properly but they don't realize that"
3268960,3274400," i have to uh like pay attention to a lot of things when i'm streaming and also have to constantly talk to"
3274400,3279520," entertain people and stuff like that right so it is kind of normal to skip things some things so"
3279520,3284560," essentially when you're streaming you're kind of losing like 50 points of iq uh like automatically"
3284560,3291440," right so try to stream for yourself and do the thing that i'm doing on the stream and you understand"
3291440,3298560," what i'm talking about right streaming kind of like actually lowers your skill uh like automatically so"
3298560,3304160," i'm actually on the stream performing worse than i'm usually performing uh like without streaming"
3304160,3307440," uh right because i don't have to talk i don't have to pay attention to the chat i don't have to do"
3307440,3314720," all these things and stuff like that so yeah uh 50 points is all yeah it is what it is there's nothing"
3314720,3323600," to be ashamed about um anyways uh so let me see let me similar so that probably the case why it kind of"
3323600,3332640," blocked um the fly zozin is kind of genius i find those and it's kind of like limited by being depressed"
3332640,3341040," all the time so i don't know okay so are we gucci are we tamaguchi okay so it tried to create this thing"
3341040,3351680," but it's still freaking yeah you know what maybe it does in fact exist uh right maybe it does in fact"
3351680,3354320," let's take a look at the output wait"
3354320,3363840," so there is probably output ff impact is not even created"
3363840,3371040," um have you built it maybe i haven't built it yes that's a good good question"
3372480,3376480," uh just just a second i think i forgot to build it later on okay"
3376480,3386800," okay that explains that explains everything uh that freaking explains everything okay so let's actually"
3386800,3395600," do that um yeah okay forgot to build um so almost didn't succeed in the game industry according to"
3395600,3402560," jonathan blow right almost didn't succeed there interestingly by the way right if we failed to"
3402560,3407280," open this entire thing like what we're going to be doing what are we going to be doing like um i don't"
3407280,3414400," really know we have to kind of like kill the child uh and some other things but i'm i don't freaking know"
3414400,3418960," how can you even kill the child it's kind of difficult to do but anyway"
3421120,3428480," so let's try to rebuild this entire thing and uh run it one more time okay so i am starting the whole"
3428480,3436640," okay it is working holy shit it is doing things through the pipe we're rendering through the mother"
3436640,3445120," flipping pipe i'm so fucking happy mate i'm so fucking happy so that means we can if we manage"
3445120,3450880," to create one pipe we can create the second one there's nothing that can stop us"
3451280,3457120," you have one pipe you can create the second one maybe even the third one uh just once at the door"
3457120,3461680," to somebody and had a random russian voice in the background saying how can we kill the child like"
3461680,3462400," you're welcome"
3462400,3468640," all right comrades how can we kill the child"
3472160,3481360," so that's why i always wear headphones right so um is that the time that's my accent it's my accent"
3481360,3490080," i'm culturally appropriating my own accent so it's fine fine"
3492080,3500560," uh so no more output statistics oh that's pretty cool all right so we've got what do we get show us"
3500560,3505520," show us what you've got all right so it doesn't have any sounds or anything like that but that's fine"
3505520,3507280," that's totally fine"
3507280,3520480," okay so i'm happy i'm actually super happy um one of the things we probably have to do after we ended the"
3520480,3528160," rendering right so we have to do uh remove um fufo files right how do you remove the files i think you"
3528160,3535120," unlink them as weird as it sounds removing the file yeah deleting the name uh is actually unlinking it"
3535120,3545040," so that's what it is uh you literally unlink the the name um okay so let's go ahead and now add the"
3545040,3550800," second pipe let's add the second pipe so we're gonna have panning video path audio paths"
3550800,3562480," audio and this is gonna be a this is gonna be a this is gonna be a audio fifo cool"
3562480,3570480," so we created the first one so i might as well copy paste this entire thing and just"
3570480,3581040," query place video with the audio boom boom boom all right so now uh i'm gonna be opening the audio"
3581040,3592240," like so boom boom boom boom boom and like so as well boom boom cool so when i'm ending the rendering"
3593040,3595760," i'm closing audio here i'm closing audio here as well"
3595760,3605600," also probably means that i need to save this entire stuff okay now"
3605600,3613680," so what we're going to be doing in here what we're going to be doing how do we send the"
3613680,3620880," raw audio i remember that uh chat gpt actually told us very useful flags but i already forgot about them"
3621440,3632960," uh right freaking jumping around ui jumping around stop jumping around uh so command uh ffmpec"
3632960,3646480," command line to accept roll sound uh via uh via std in yeah so i just need the flags all right so that's"
3646480,3653600," roughly so we're going to be using 16 bit one right i wonder if you can do um the floats all right can i"
3653600,3661040," can i send um you know 32 bits floats a little engine"
3661040,3670880," no okay so it sounds plausible i i hope it didn't confabulate that i think it didn't like i'm pretty sure"
3670880,3677120," it didn't uh so because it's kind of convenient for me with f32 le because i'll when i'm going to be"
3677120,3682320," working with the samples i think that's the samples are going to have like i'm pretty sure that the"
3682320,3687840," samples are going to have but we'll see maybe it depends we'll see we'll see uh all right so here"
3687840,3692560," is the format right so for now i'm going to just keep it as it is um also"
3693360,3700480," um yeah all of that is going to be rather customizable so two channels i'm actually not"
3700480,3708000," sure about two channels but we'll see we'll see uh at least we have some stuff to start with"
3708000,3715040," right and then we do input and then we do panim uh audio path right so as you can see this is exactly"
3715040,3720400," what i was talking about you're providing the input for ffmpec in chunks right so this is the first input for"
3720400,3725680," the video right and all these parameters are related to this input and here is the second input which is"
3725680,3730480," the audio and here's all the parameters related to the audio and this is the output right so you have"
3730480,3740800," three chunks in here you have three chunks um so we have a stuff to send the frame we need to introduce"
3740800,3753360," the stuff to like to send the sound right so send frame send sound uh ffmpec dot h so boolean ffmpec send"
3753360,3761920," sound samples uh ffmpec ffmpec void data so in here in case of a frame we basically submit width and height"
3761920,3767600," but uh in here we probably have to submit the size in bytes but i'm not having a search or maybe maybe"
3768400,3772880," uh let's call it size for now like i haven't decided the like measure unit for this thing"
3772880,3780240," yet we'll see we'll see i haven't decided it yet um all right so we're gonna do something like that so"
3780240,3785920," maybe it's gonna be false for now uh let's ignore all these parameters let's ignore all these parameters"
3785920,3792960," and uh something like this so essentially this function is going to basically write some data into"
3792960,3797840," the audio of fifo instead of video fifo right so two separate functions to send the frame you do"
3797840,3804240," video fifo to send the sound you do the audio fifo um right and they're kind of the same in both cases"
3804240,3810320," right so just send the data in case of the frame it's it also needs to flip things around right because"
3810320,3816640," of how we receive the pixels from raylip raylip actually swaps them around because of the stupidness"
3816640,3822160," of different coordinate systems like as usual screen coordinates and opengl coordinates right"
3822160,3828000," so we've got into that mess and now we can't get out of it anymore so we have to put hacks everywhere"
3828000,3833600," uh right but the sounds it has to be a little bit easier so the main problem i see in here is that um"
3833600,3840560," in the abstract of a function if you take a look at the environment right so we accept the sound and sound"
3840560,3847360," is a raylib object uh and if we take a look at what that raylib object contains it doesn't really"
3847360,3854000," contain that much of a useful information for us unfortunately um so i'm going to take a look at the"
3854000,3860800," sound okay so we have a frame count how many frames we have at all uh so we have an audio stream which"
3860800,3867680," contains the sample rate which is useful information to say to ff impact sample size like yeah so depending"
3867680,3872560," on the format and stuff like how many channels but then we end up with these sort of like um"
3872560,3879280," a black box pointers that don't have any useful information so we need to get the samples out of"
3879280,3886640," the sounds somehow so there is a second structure in raylib which is called wave and that is basically"
3886640,3894880," uh sort of like a device independent backend independent data of the sound it literally just like"
3895440,3901760," it points at the chunk of the memory that stores the samples and has the description of these samples"
3901760,3907680," so what we need to do do we have a function that accepts the sound and gets the wave of the sound so"
3907680,3914080," there should be something like a load wave i know you can load the wave from um from a file right so"
3914080,3921680," you can load the wave from a file and this is very useful but can you load the wave from the sound uh so"
3921680,3929200," export wave as code that's very interesting uh all right so you can load wave from memory which is"
3929200,3937520," understandable so you can load you can do the other way around you can load the sound from wave you can"
3937520,3945040," load sound from waves but can you load the wave out of the sound get wave of the sound i don't think so"
3945040,3951200," uh i actually don't think so you can do wave copying so i suppose what we're looking for we're looking"
3951200,3958400," for a function that uh starts with rl api wave how many of such functions do we have okay so load wave"
3958400,3965040," wave copy it just copies another and that's about it like you can't have uh you know yeah you should"
3965040,3971600," have used google i forgot about it it's kind of funny how i create tools to solve specific problems and then"
3971600,3981440," later i forget about this stuff uh it's actually kind of funny uh so yes yes yes so i suppose i suppose"
3981440,3988640," chat there is an easy way to solve that um we can when we are loading the assets of the animations"
3988640,3995440," we can load wave from the file right so let's let me actually do that so it's going to be load wave"
3996240,4002320," we're loading from the file and then we're also loading sound from the wave so we have a copy of"
4002320,4009360," sort of like a compiled sound thing and a wave and its corresponding wave and we're sending both to the"
4009360,4016000," panem when we want panem to play a sound we literally give it both of these things and say play it and"
4016000,4021520," depending on what it's currently in what mode it is currently in whether it's previewing or rendering it's"
4021520,4027360," going to use either sound to just play it through ray deep or the wave to just send it to ffmpeg"
4027360,4031360," so we can obligate the animation library"
4031360,4036320," to provide both of those things because it's not that hard right so it's not that hard if you manage"
4036320,4042640," to load the sound you know how to load the wave right so provide both um i think that's all right"
4042640,4049680," solution for now it's an all right solution for now so that's basically the plan i think that's basically"
4049680,4056080," the plan so but already starting for one hour and i ran out of get empty and you know what that means"
4056080,4062560," you know what that means chat time has come for a little bit of a small break um all right so let's"
4062560,4072160," go ahead and uh just see what we can do in here let's see what we can do in here um we need to uh"
4072160,4079920," we need to do the following thing so let's go ahead and just like load the sound for this thing as well"
4079920,4088560," so by the way here's the thing um i recently realized that within the animation there is two lifetimes"
4089200,4095920," the so-called state of the animation lifetime and the assets lifetime so the thing about the state"
4095920,4103840," lifetime is that it survives the plugin reload like you reload the plugin and resets when the um you"
4103840,4111120," know engine asks to reset asset is kind of the other way around it's always reset when you reload the"
4111120,4116080," plugin but it doesn't change throughout the animation and doesn't change when you reset the animation so"
4116080,4120960," it's two separate lifetimes and it's kind of interesting so and because of that i sort of"
4120960,4129920," group them into separate um chunks in here but to um change the schema uh of the plugin at the runtime you"
4129920,4135520," have to actually add things at the at the bottom so sometimes i have like a third section in here"
4135520,4142000," where which are the things that i edit only recently uh right so then i should not forget to sort them out"
4142000,4148160," right so i edited at the right time this thing so i need to add it to the uh to the state uh block in"
4148160,4154240," here right i think it's kind of important to know uh which of the variables belongs to which runtime so"
4154240,4157600," that's why you should program in rust by the way because in rust you can explicitly"
4157600,4168880," anyways um so yeah and by the way so i even have a special arena for sort of like the string literals that"
4168880,4175200," are part of the state right so that survive um you know reloading the plugin and stuff like that so"
4175200,4185440," there's a special arena in here so um anyways anyways anyways anyways anyways um so let me see"
4185440,4191840," so maybe you should two structs but two structs means that the engine has to be aware of that"
4192560,4199840," so that means we're moving this idea of two lifetimes from just a specific animation to an"
4199840,4206560," entire engine enforcing it on everybody but we don't really have to enforce that on everybody like it's"
4206560,4213520," not really necessary it's up to the animation to to do this kind of stuff right so it's kind of like too"
4213520,4219520," much so we've come up with this kind of idea uh that is useful for this specific animation and just"
4219520,4225600," because it was useful for this specific animation we have to enforce it on everybody that is bizarre"
4225600,4232320," why would you do that why would you create such an invasive framework like what why are you so"
4232320,4240720," authoritarian agile care tell me why are you so authoritarian that you want to enforce just one good"
4240720,4248880," idea that worked for just one case on literally everybody making everybody suffer that's why nobody"
4248880,4255120," likes framework because they do this kind of shit they just enforce arbitrary random ideas on everybody"
4255120,4262880," don't be authoritarian developer that's not good so anyway"
4264880,4274160," let's continue uh authoritarian developers am i right uh so what are we having here what are we"
4274160,4280400," having here so we need to now when we load the sound we also need to load the wave all right so i'm"
4280400,4289040," going to say plant wave and this is a plant sound and when i'm loading the sound i suppose what i need to"
4289040,4294720," do i need to do i need to load the wave all right so i'm just loading the wave to be fair i should let"
4294720,4303200," the compiler do the job and let me uh know about all of these things so p planned sound load sound from"
4303200,4310240," wave right so load sound from wave i should pass this entire thing in here uh right and let's go to the"
4310240,4317680," compilationers let's go to the compilationers and see what they will tell us okay so when we're unloading"
4317680,4325920," the things we need to unload the sound which is the plant sound and also the wave which is the plant wave"
4325920,4333040," right we're loading all that which will enable us to uh reload all of these things right so that's pretty"
4333040,4339040," cool so when we play play uh play in this and i think we're just providing the sound so we need to update"
4339040,4345360," an environment so we're accepting the sound also we should accept the wave right and depending on the"
4345360,4352800," mode rendering or not uh we're going to be just using different thing in here all right so what else do we"
4352800,4366800," we have in here so play sound uh play sound uh p uh plant plant wave p plant wave let's go aha so dummy sound"
4366800,4376400," is very interesting so dummy sound it it is accepting sound and wave right so and we are ignoring both of them"
4377200,4382880," uh now if i try to do that uh now if i try to do that so now yeah this one only accepts the sound"
4382880,4391920," so what we have to do we have to have a custom uh thing so i think we're going to have a preview preview"
4391920,4399120," play sound a preview play sound uh and the preview play sound uh and the preview play sound is going to"
4399120,4408080," accept both of these things but it's going to ignore the wave it's only going to play the sound"
4408080,4417920," uh-huh so we are ignoring the wave like so and then just play this sound like so that's pretty cool"
4417920,4424720," what else do we have all right so that's fine uh now i'm going to just run this entire thing and i want to just"
4424720,4432000," hear okay i can see that the sound is playing uh right it's kind of quiet but you you can hear it nonetheless"
4432000,4444240," all right that's cool look at that that's beautiful epic epic epic epic all right so and how we're going"
4444240,4453840," to be doing all of that stuff so preview play sound the preview play sound uh so this one um is going to"
4453840,4460160," be sending the way waves to to the currently playing ff unpack"
4460160,4466320," and that's what we're going to be having but the problem with the wave is that it's using"
4466960,4473920," a custom format i'm pretty sure i'm pretty sure it is using custom format so let me actually see"
4473920,4479520," uh what kind of thing does it use so i'm going to stop this entire thing and i'm going to just simply"
4479520,4486720," look at the logs right so let's find plant wave because when you're loading this entire thing it also"
4486720,4496000," prints yeah there we go so it has these parameters in here right so it's 44 010 hertz right so this is how"
4496000,4502560," many samples it has per second then uses 16 bits and two channels and what's interesting is that"
4502560,4509040," this is basically the parameter of the wave and not all of the sounds are going to be with those"
4509040,4515520," parameters right so we need to somehow pass that information to ff unpack but you can only open the"
4515520,4521600," ff unpack with the fixed parameters but what if your animation actually load loaded a bunch of sounds"
4521600,4526640," with different parameters you kind of have to normalize all of them to to a single set of"
4526640,4533440," parameters the you know frame rate so sample rate the size of the sample and the amount of channels"
4533440,4540400," right so you need to do stuff like that somehow uh so let's actually maybe not think about it too much"
4540400,4547520," and let's actually hard code these parameters and make it work for that specific example because"
4547520,4553840," we have only one sound right so let's just make it work for that specific examples maybe that's gonna"
4553840,4560640," be okay and then once it is working we can see how we can make it work with several samples with different"
4560640,4568960," parameters if you know what i'm talking about right all right so where is the ffm pack so i'm gonna go"
4568960,4573760," here and i'm gonna just open all of that stuff with these parameters"
4576160,4585200," so in terms of format we already yeah so we do s 16 le so this is a little ending i suppose so this"
4585200,4589920," is a frame rate it's already that and this is already okay so it's already basically the format"
4589920,4596480," that we expect it's basically correct format uh right so that means we already can send some stuff"
4596480,4602160," and when we're sending like what exactly are we going to be sending right so the amount of bytes"
4603280,4608240," i think um i think it's it's safe to assume that this is going to be the amount of bytes"
4608240,4613840," that's the easiest thing to do because in that specific case it is super easy to just say okay"
4613840,4623120," uh write those bytes into the audio fee for right right ffm pack audio fee for uh so we're gonna take"
4623120,4630880," the data and we're gonna write this amount of bytes i guess that's it right so that that's about it so if"
4630880,4641120," this thing failed for whatever reason uh we are going to return false like so and it also makes sense to"
4641120,4653600," log that stuff so log error ffmpeg fail to write sound uh to write into ffmpeg"
4654160,4664400," um into audio fee for ffmpeg audio fee for and here we can say ffmpeg video fee for"
4664400,4671760," so that's good that's gucci that is in fact i'm a gucci uh stb ffmpeg yeah that would be actually kind"
4671760,4675680," of cool but i mean it's such a small thing that you can implement it yourself right so you just need to"
4675680,4683680," create a bunch of pipes and you're good to go and you're gucci you're tamaguchi as usual uh str error"
4683680,4695360," error no all right cool and i suppose the same to do applies here as well i think i think we can say"
4695360,4704400," that this thing applies here too uh such a small thing this kind of dude dude dude dude dude dude"
4704400,4705760," have you seen stb image"
4711280,4716400," um let me show you maybe i already have it somewhere like mutualize it i think i can find"
4716400,4727200," it in here stb um external and so it's probably raylib uh external stb you know"
4731520,4736320," stb image"
4736320,4747840," it's anything but small um it's a single file but it's not small so as far as now mini audio is even"
4747840,4753040," more like crazy i think it's 100 000 or something like that let me actually find it because it's kind"
4753040,4760640," of bizarre mini audio yeah look at the mini audio stb style mini audio"
4761520,4763200," uh uh mini audio"
4763200,4776800," insane mini as i know right but the fifo does that means no sound mixing yet just checking"
4776800,4781760," and understand yeah yeah so there's no sound mixing that's for sure uh right we had coded the parameters"
4781760,4786240," of the sound right so we can only play the sounds with the specific parameters with the specific sample"
4786240,4790480," rate with the specific size of the sample with the specific channels and we can't mix them"
4791520,4798880," right but i want to implement it like that so something is working so then we can fix uh"
4798880,4801040," you know the the consequent problems um"
4801040,4810160," uh so that's basically the plan uh that's basically the plan so you understand everything correctly"
4810160,4817200," you understand everything correctly uh 90 000 lines of docs yeah basically i want if you compare like"
4817200,4824160," docs like comments versus lines like how many lines mini audio you can probably do that with clock i'm"
4824160,4831120," pretty sure mini audio all right so we're going to put it in here and then we're going to go to the"
4831120,4840160," mutualizer raylib src external and if i take a look at what what is it called mini audio yeah so i'm going to"
4840160,4846000," paste it in here i'm going to say clock uh can i provide like a single file to clock i'm not sure"
4846000,4854000," no 69 000 look at that nice actually 69 000 so and there's not that many comments though"
4854000,4860000," hmm so it doesn't and this is blank"
4863520,4870640," so let's go here and i'm gonna just do something like that yeah that's that's about right so you have"
4870640,4877920," 13 000 blank lines this is how many comments you have and this is the actual amount of code"
4877920,4883600," actually like majority of the of the lines are code not the not the comments right so"
4885520,4894720," majority of the stuff is the actual code anyway anyway anyway anyway anyway uh so let's remove that"
4894720,4907680," so we've got a little bit of a stuff in here that's fine actually it's kind of funny how"
4907680,4915280," would complain that dude you are comparing number with with a string right in fact i just like uh"
4915280,4923360," mistyped the the comma with uh with a comparison so that's what actually happened anyways uh when i'm"
4923360,4930320," trying to actually play the sound and i'm playing it not with a dummy play um sound but maybe let's call"
4930320,4937280," it ffnpg play sound right so we're going to be ignoring this one but we're going to be using this one"
4937280,4942960," so let me go and just compile it right so there's no dummy play sound anymore but there is a ffnpg play"
4942960,4952400," sound uh right so and what we have to do we have to pipe this stuff in there interestingly interestingly"
4952400,4958080," how exactly we're going to be doing all that so if i take a look at raylib.h and the definition of the"
4958080,4965680," wave the wave structure itself is a really lightweight thing it is extremely lightweight thing and"
4966880,4977360," what we can do what we can do we can essentially keep track uh of the currently played the wave so"
4977360,4983600," here we have a state right so just state of the paneme engine uh right i didn't create any separate"
4983600,4988080," structure or anything like that i just made it global variables because the state is very small"
4988080,4993680," right it is very small so it's totally fine i suppose one thing we can introduce in here we can"
4993680,4998800," introduce the wave uh right so and this is basically the wave that we're currently playing we can only"
4998800,5004160," play one wave at the time we don't do mixing we don't do anything that's fine for now and i'm gonna"
5004160,5012800," just like initialize it with zero right and maybe one of the things we're going to be doing is having"
5012800,5024880," some sort of a wave cursor wave cursor which indicates uh where we are in the wave right so it moves through"
5024880,5031680," the wave from left to right sending sort of these frames that's what it does it's sending all of these"
5031680,5038800," frames uh and essentially right so since the wave is zero and wave cursor is zero uh it's not going to"
5038800,5043760," send anything or it's not going to play anything because it's basically pointed at the end of that wave"
5043760,5052480," when you are doing ffm pack um you know play sound what we're going to be doing we're going to be taking"
5052480,5058720," that wave and we're going to be playing it okay so the global name wave is actually very unfortunate"
5058720,5066240," let's actually call it something like ffm pack wave uh and ffm pack uh wave cursor uh right so here we're"
5066240,5072640," going to say ffm pack wave is equal to wave uh and then uh we ignore the sound so that's totally fine"
5072640,5079920," and we're going to say ffm pack uh wave cursor is equal to zero so essentially if you try to play"
5079920,5086080," consequent sound it's going to abrupt the previous sound so that's how it's working we don't have mixing"
5086080,5089280," right so we're just like you're playing one someone is currently playing you play another"
5089280,5094320," one it's gonna just stop the previous one and start playing another one right so since we don't really"
5094320,5100160," play the sounds very frequently right now it is going to be fine so it is going to be fine for now"
5100160,5104720," uh all right so that's the implementation of the whole thing right so that's the implementation it's"
5104720,5111600," kind of funny right so this is two different play sounds depending on the mode uh right so depending on the"
5111600,5118320," mode and in the preview mode we ignore the wave and in the ffm pack mode we ignore the sound right so it's"
5118320,5123200," kind of cool uh right to see this kind of stuff in different modes so it's obstructed away from us"
5123200,5130480," it's obstructed away okay so what are we doing here uh what do we do we basically send the"
5130480,5137920," the frame we send the frame uh and the second thing we have to do we have to send the sound right"
5138800,5142560," how are we going to be doing all that this is a very interesting question how we're going to be doing"
5142560,5151520," all that uh so we can if we know the amount of frames basically the sample rate um"
5151520,5161600," sample rate is a for seconds right sample rate is for a single second so that means we need to"
5162640,5173200," um divide this thing by fps right so we need to define this by fps uh so this is how many frames per second"
5173200,5184880," we have uh for a single second we have nff unpack linux 44 one so we have that thing so we take this"
5184880,5192080," antenna thing and we're dividing it by the fps so this is how many samples we have to send per frame"
5192080,5198960," effectively so there could be some sort of a rounding errors i suppose so i don't really know"
5198960,5204720," how like what's the best way to do in that specific case we can just like round it down and"
5204720,5210560," if we're using integer division i guess we are already rounding it down uh right so in here we have"
5210560,5217840," basically samples per second so can we say it's it's sps is that a thing by the way is that the"
5217840,5223680," thing that you can say is just basically samples per second so we have frames per second and it's"
5223680,5233600," it's actually not uh per second it's a samples per frame that's funny because it's so you have fps and"
5233600,5242000," you have sp it's actually the other way around uh spf so it's the samples per frame frames per second"
5242000,5246400," and the samples per frame uh signed pistons field"
5246400,5249600," pistons field"
5249600,5258960," sorry so this time right so essentially we just have to take this amount of samples and send them to the"
5258960,5265840," um to ff unpack and advance the cursor by this amount of samples that's basically the idea"
5265840,5270800," we're kind of ignoring rounding errors because i'm too freaking lazy to take them into account oh i'm sorry"
5272560,5277600," so i'm just writing some sloppy code even though we're doing real software engineering today"
5277600,5283840," that's basically real software engineering writing sloppy code that just works and get the done"
5283840,5288720," did you guys know that that's that's actual real software engineering that's what it is"
5288720,5293200," and that's what you're going to be doing in uh real software job cheers for that"
5295920,5302720," dirty code clean code clean code does not exist clean code exists in some magical fairy tale books"
5302720,5309680," right some magical fairy tale books uh real world code is dirty because real world is dirty"
5309680,5321360," uh so what are we having here how we're gonna be doing all that um i need to figure out how"
5323200,5333840," like how do we do that uh frames sample rate so total number of frames right so this is basically"
5333840,5341920," considering channel so channel takes into account yeah so frame takes into account channel and the channels"
5341920,5348960," are if i understand correctly they're interleaved right so they're sort of interleaved uh so that means"
5349760,5363280," that means we have uh s 16 le for the left and then the second one is for the right and that's a"
5363280,5369440," single frame that's a single frame essentially"
5369440,5385680," essentially essentially essentially essentially uh and because of that um sample size beat beats per sample"
5385680,5393520," right right so um this one this one this one is annoying actually this one is actually annoying because"
5393520,5402800," what kind of stuff oh my god like does it accept samples or does it accept frames"
5402800,5405760," yo what if"
5408240,5417120," so if we have a sample frequency samples per second frame we're getting into that again where like i'm"
5417120,5420560," confusing uh samples and and frames"
5420560,5433600," uh so frame count samples per second uh so that means it's the amount of pairs left and right"
5434960,5440560," uh it's the amount of pairs left and right so this is how raylib handles that but is"
5440560,5444640," ffm pack does ffm pack handle that the same way"
5444640,5452640," uh right does ffm pack handle them the same way probably i don't know"
5452640,5461680," so i'm not sure so that means i'll only have to like experiment and see if it works or not"
5461680,5463440," right so that's the only way for me to know"
5463440,5476560," so we have a ffm pack uh ffm pack wave cursor so that's what we have so that means what i have to"
5476560,5484800," do i have to take ffm pack wave and i have to take its data right so i'm gonna be converging it to a"
5484800,5490240," point into a character because i want it to be a byte but maybe to be precise let's do something like"
5490240,5495200," this right so i want it to be exactly by to do i have a st int i don't think i have a city in so"
5495200,5502240," let's actually include a city in all right so um because this thing is void and you can't do in a"
5502240,5508960," standard c you can't do pointer arithmetics on void you can't do that at all so we're gonna add the the"
5508960,5514320," cursor in here so but what we're adding i suppose we're going to be adding the frames right because i'm"
5514320,5524480," processing per frame so i'm gonna multiply this entire thing by ffm pack uh sample size right so"
5524480,5533920," i'm multiplying by the sample size um so it's in amount of bits right so it's in amount of bits and"
5536080,5543040," then i also need to multiply it by the amount of channels right because this wave cursor is frames"
5543040,5552080," um right so ffm pack wave um channels so that's how we are approaching all of that that's how we're"
5552080,5561920," approaching so this is basically um sample size channels size of the frame uh frame size and we can do"
5561920,5568800," something like this frame size we can put it in here and that gives the pointer from which we want to"
5568800,5579280," render some stuff right um i can just go and do ffm pack send sound samples ffm pack and i'm providing"
5579280,5588640," this pointer um maybe i'm gonna even do something like data sample data that we want to send so this is a"
5588640,5598480," sample data and we also want to have a sample size right so it's going to be size t sample size and the"
5598480,5606320," sample size is render samples per frame right so because we're rendering single frame samples per frame"
5606320,5615760," multiplied by the frame size uh right but it's more like frames per uh per thing so but again i'm not sure"
5616560,5623440," if i'm doing things correctly like like i don't know like i only have to experiment right so i can only"
5623440,5629360," experiment in here uh because the terminology here is confusing samples frames like what exactly we're"
5629360,5636320," talking about in here i don't freaking know uh anyways so afterwards uh afterwards afterwards"
5636320,5642160," uh each audio frame should consist of two i understand that i understand that i understand all of"
5642160,5647760," this stuff like i don't know what ray leap exactly means because ray leap is notorious for like under"
5647760,5652720," documenting some things and actually meaning slightly different things and i don't know what exactly ffm pack"
5652720,5657520," expects like sure thank you for explaining me things that i already know that's not the problem"
5657520,5662320," thank you i really appreciate that but that's not the problem"
5667360,5673120," there's always that one guy that one guy that is going to lecture you about the things that you"
5673120,5677200," already freaking know because they didn't understand what's exactly the problem i'm dealing with"
5677200,5683280," anyways i'm sorry"
5683280,5692560," what do we have in here so then we're going to be uh updating this kind of stuff uh this kind of stuff so"
5694080,5700480," we're going to do something like this and uh this is how many of them yeah this is how many of them i"
5700480,5707120," added here all right so this is assuming like without overflows and and stuff like that without any overflows"
5707120,5717040," but we may have some overflows if you know what i mean"
5719600,5730720," so because because because because because because i'm gonna take so we have a frame count right so we're"
5730720,5745360," gonna frame i'm gonna have frame count um if i take frame wave cursor and add render this thing and if it's going to become"
5746320,5754320," greater it's going to become greater than the frame count that we have in here right so this is a frame"
5754320,5762960," count if it's going to become greater that means uh what i have to do is"
5762960,5774640," uh slightly different so i need to clamp the right side somehow i need to clamp the right side somehow but the"
5774640,5784880," question is what's the easiest way for me to clamp it um it would be easier if i actually had a separation of"
5784880,5790720," sort of like i don't even freaking know"
5790720,5804000," so the beginning and the end right so the beginning of the is the wave cursor uh right and then the end is going to be that but plus the"
5804800,5810960," think so and then i can sort of clamp it and then fill everything else with this sort of emptiness"
5810960,5818080," right so and i also will have to fill everything with emptiness all the time so that's one of the things i"
5818080,5818880," will have to do"
5818880,5828560," all right so uh let me now try the following thing so i can say something like um"
5831040,5838480," begin right so that's basically the wave cursor this is where we begin this is where we end so it's going"
5838480,5843440," to be uh this kind of stuff so ignore everything else down below in here and just like experimenting"
5843440,5848960," with different ideas i'm just experimenting with different ideas so we're going to do plus one in here"
5848960,5859920," and uh if end is greater if end is greater than uh the amount of frames in here right so the amount of"
5859920,5865520," yeah the amount of frames in here if it is greater we'll have to clamp it to that specific thing and i'm"
5865520,5869360," going to be literally assigning it to this entire stuff because i'm going to be using this"
5869920,5876960," usual trick there were the end points at the element after the end so then i can quite easily do things"
5876960,5882800," like and uh minus begin to denote the amount of things that i have so yeah so this is basically"
5882800,5889120," like frames begin and frames end so maybe because of that i want to actually call them frames begin and"
5889120,5896560," frames end so and this is going to be frames and frames and so it's a little bit easier to clamp it"
5896560,5902160," like that if you know what i mean it's just like a little bit easier for me so then we need to you know"
5902160,5907840," the sample data all right so this is going to be the sample data so we take this kind of stuff and we're"
5907840,5915440," just taking the uh frame begin and this is the frame size uh and then we need to denote that this"
5915440,5920720," the sample size that we want to render right so the sample size that we want to render is going to be"
5920720,5932480," essentially uh frames frame frames and minus frames begin and it's also frame size so that's pretty cool"
5932480,5940560," uh and then we're just sending this entire thing so if i come back sample data sample sample size and we"
5940560,5948400," are updating this wave cursor by how however much we've written in here right however much we've written"
5948400,5957440," in here and also then we need to fill up everything else with uh with emptiness right so that's what we have"
5957440,5964960," to do so in the way we can actually do that the way we can actually do that we can take we can do another"
5964960,5975920," right in here uh we can do another right so we're writing uh silence uh silence data right so just silence"
5975920,5982240," maybe and we're writing sort of like the opposite like how much is left so it's going to be a render"
5982240,5992720," spf minus right and all that so sample size is yeah um so essentially what we have to do we have to"
5992720,6000720," actually subtract uh the amount of frames in here because we are like doing that in the frames and then"
6000720,6009040," multiply it by frame size so because of that i think i'm gonna do silence size right silence"
6009040,6020560," lens size right silent size multiplies by frame size and multiply the frame size and silence size like so"
6020560,6028480," there we go something like that so i'm gonna go off of the assumption that um"
6029760,6033440," the sample rate that expected by"
6033440,6042560," expected by ffmpack is basically sample rate so that's what it is i think it's because it's kind"
6042560,6049920," of bizarre but yeah it is what it is um so that's the weird logic i have in here it could be wrong"
6049920,6056640," actually it could be wrong uh but uh if it's wrong we probably be able to hear that right we'll be able to"
6056640,6061040," hear that so let me go through that one more time so we have a sample size a single sample size and"
6061040,6066400," amount of channel so this is a single frame size right so this cursor points at the frame so we have"
6066400,6072880," begin and end and is like after that if we went over the sample over the wave that we're trying to print"
6072880,6079120," we just clamp it like that then we get an exact pointer at the data knowing the begin and then how much"
6079120,6084240," bytes we want to write in there we just write this amount of bytes also updating the cursor advancing"
6084240,6089120," but this is a sample size this is incorrect okay i'm really glad that i decided to go through all of"
6089120,6096000," this stuff because i just found a bug that's fine that is fine so now i need to do the silence right so"
6096000,6104400," silence is going to be uh basically this stuff frame size we're just writing this entire stuff we don't have to"
6104400,6112400," do anything else cool uh so now let's try to uh rebuild this entire thing we're trying to rebuild this entire thing"
6112400,6118240," and it's complaints about some yeah that's totally fine that is totally fine so we have a frame begin"
6118240,6125680," undeclared frames begin okay so it's actually frames begin you can't see that but now you can so we don't have"
6125680,6132400," silence right let's introduce that thing let's freaking introduce that uh silence it's probably"
6132400,6142880," somewhere in in here so static silence uh and it's going to be basically render and like spf render spf"
6142880,6149120," um that's going to be in bytes right so this is all going to be in bytes and on top of that we're"
6149120,6153840," going to multiply it by the frame size and frame size right now is sort of like hard coded so it's four"
6153840,6159360," bytes right so that's basically what it is and that's how we're going to be going about that"
6159360,6164720," so we're just going to have this silent buffer right with with zeros and stuff like that i'm"
6164720,6168640," going to be writing it into into the file so yeah that seems to be compiling"
6168640,6177840," so mental quality for algorithm design is awesome you're talking about my algorithm thank you i suppose"
6177840,6180640," maybe i don't know i don't know exactly what you're talking about but cheers"
6180640,6197040," so yep yep yep yep all right i'm a little bit scared how it's going to go uh so let me grab my"
6197040,6204880," headphones and also maybe turn down the sound a little bit so it doesn't scare away everybody"
6206080,6214080," and yeah let's go i'm gonna start the animation so the mission is already started actually"
6214080,6216480," surprisingly okay so let's just listen"
6216480,6221760," that's the animation"
6227520,6235440," all right all right that's cool now let's instruct it to render everything so just one more time i'm a"
6235440,6238800," little bit paranoid let's render"
6238800,6244720," uh library configures mismatch okay"
6249280,6253280," it's blocked for whatever reason"
6253280,6264560," yeah seems like it's block does it produce anything in here um doesn't seem like it"
6264560,6269200," interesting"
6271520,6281280," uh okay let's kill it and go into the uh ffmpeg right so ffmpeg.c uh and what else do we have in"
6281280,6292160," here ffmpeg.c let me see if we open the audio things correctly i think we do right so we created a bunch of"
6292160,6298560," files so if you take a look at the uh yeah so we have a panim audio and we have a panim video right so we have"
6298560,6304800," both of these things in here everything seems to be fine that's cool um all right so then"
6304800,6313120," we go down here we open in the audio ffo right do we pass yeah so we pass everything correctly it"
6313120,6319760," seems like it's like we pass everything correctly um so interestingly we pass resolution and frame rate"
6319760,6326400," maybe this is something that we also pass in here right so maybe at some point we will uh but yeah"
6326400,6331520," and then we're just saving video fifo and stuff like that we're ending rendering we're closing all of that"
6331520,6339920," stuff uh right so we send in the frames do we open it for for writing yeah so it is for writing only i"
6339920,6346720," don't see any problems in here so when sending a frame we're sending it to audio fifo so it's just being"
6346720,6355920," blocked without really saying or doing anything so that is a bit bizarre that is a bit bizarre"
6355920,6366880," so let me see how exactly it to run this entire stuff what was the did it even say anything so"
6368000,6373120," audio codec maybe this is because i never specified the audio codec"
6373120,6381520," this is how we meant to work with the ffm pack specific command line arguments this is the easiest"
6381520,6387200," way to work with it this is not the only way to work with it uh as far as you know blender uses its"
6387200,6391520," libraries but what i found is that working with its libraries is a huge pain in the ass"
6392320,6401040," uh right so it's easier to just do it like that usually um probably sound device is in use because"
6401040,6407760," of playing sound of animation we're have not doing nothing with the devices like to be fair it's kind"
6407760,6416800," of weird why people fixate so much on audio devices when i'm talking about rendering a video do you guys"
6416800,6423440," realize that the sound is just data it's just a sequence of bytes and what we're doing we're just"
6423440,6432160," sending sequence of bytes to um to a pipe devices like hardware actual hardware have nothing to do with"
6432160,6441920," that like it's just like why is living like what we're just sending samples like literally bytes to a"
6441920,6447280," pipe to an encoder that is going to just shuffle those bytes around and send them on the hardware on"
6447280,6455600," the hard drive nowhere in that entire chain audio devices are involved you can even do this entire process"
6455600,6465280," on a machine that doesn't have a sound card yes you can have a program that generates as samples sound"
6465280,6474080," samples sends them to ffmpeg and ffmpeg just encodes them like audio device is nowhere in this entire logic"
6474080,6477280," it's just bytes what we're doing we're encoding bytes"
6477280,6484640," at least that's what we're supposed to be doing unless ffmpeg is doing something weird and quirky like"
6484640,6495040," actually using audio devices but i'm not 100 sure all right so yeah it's just like no it has nothing to"
6495040,6502080," do with audio devices like audio devices are nowhere to be seen in this entire logic nowhere um so anyways"
6502080,6511520," um what do we have in here so we actually say use um this specific audio codec uh this specific audio codec"
6512480,6520080," um why is it blocking though why is it blocking so it's not supposed to be blocking or anything"
6520080,6523040," or maybe we're just not sending data appropriately"
6523040,6530800," maybe we need to figure out where exactly we're blocking so that's one of the things we have to do"
6530800,6535760," um i feel like we're blocking on sending on sending some of that stuff maybe"
6538640,6542320," maybe we don't send enough or maybe we send too much"
6542320,6558960," uh maybe we send too much okay so let me let me see we can do something like this uh trace logo log"
6558960,6574640," warning right so sending frame um rendering sending frame uh sending sound right so we're sending the sound"
6574640,6578800," then we're sending the silence um"
6578880,6594560," okay so i'm gonna put this login in here so let me let me see let me see so it's going to be knob"
6594560,6600960," uh-huh uh-huh and let me just restart this entire stuff okay let's start rendering"
6601840,6610000," uh-huh so something interesting has happened in here um they already exist library configuration so"
6610000,6616960," sending it is not even saying anything it is not even saying anything regarding any of that stuff"
6619680,6624000," which is interesting maybe we should wait a little bit"
6624000,6636640," so rendering it didn't log any of these things which means that it blocked before"
6636640,6643280," like even trying to go here all right that is something so we're slowly bisecting this entire thing"
6643280,6651440," so if fmpeg start uh rendering so let's go into the ffmpeg c uh all right and let's see where exactly"
6651440,6660240," we are uh failing so we can do something like trace log log warning um ffmpeg"
6663680,6674800," opening opening opening opening s which is going to be panim video path and then opening a set video"
6674800,6689120," though and then audio path all right so then we can say um ready ready to render render"
6691040,6694880," all right so let's try to recompile this entire thing and see what is going on"
6694880,6707200," so let's go opening penny yeah it's stuck on opening audio right so it managed to open panim video"
6707200,6709360," but it's stuck at here"
6709360,6720880," i'm actually surprised like is it this the same kind of situation that like it shouldn't be because we're"
6721040,6727840," yeah i don't freaking understand is that a deadlock kind of situation is that a deadlock kind of"
6727840,6735360," situation um so wrongly hmm"
6735360,6740000," what if we"
6740000,6750480," what if we just sleep for a little bit is that something we can do i don't think it's the problem"
6751040,6758320," honestly i don't think it's the problem but maybe we just like need to wait until ffmpeg just"
6758320,6761280," tries to open all of these things or something like that"
6761280,6770960," sleep one yeah it's not really debugging right it's well maybe it is debugging right so maybe"
6772240,6778960," yeah maybe i just have to do them in a different order maybe all the mirrors right i suppose open unlocks"
6778960,6780800," as soon as"
6780800,6791760," yeah that could be a thing actually so but i mean the fact that we uh got this logging means that this thing"
6791760,6796960," unlocked unlocked successfully"
6796960,6801360," so opening"
6801360,6809200," yeah so it was opening panim video so then it got unlocked that means ffmpeg on its side also opened"
6809200,6818240," it and then we're trying to open this thing that means on its side ffmpeg didn't open it yet"
6819520,6827600," and it probably what if it's not going to open it what if it's not going to open it until we start"
6827600,6828400," sending things"
6828400,6838720," i feel like we should try to do the non-blocking thing that the documentation was talking about"
6838720,6845920," so i don't know how exactly if ffmpeg is doing all that but it might as well not open this file until we"
6845920,6850640," actually start sending frames so we should start first sending frame and only then it will open it"
6850640,6856400," maybe it's doing that lazily that's the thing maybe it's literally doing that lazily we don't know how"
6856400,6863600," exactly it's doing that so yeah it could be doing anything right so that kind of makes sense but anyway"
6863600,6869600," let's actually try this slip one to see if it maybe fixes or anything but i actually doubt that"
6870160,6875680," uh actually doubt that i think a proper fix would be to make this stuff non-blocking i think that's"
6875680,6883360," going to be the proper fix um right so let me let me see and to be fair like it should be non-blocking"
6883360,6889360," you can maybe even assign some sort of like a buffer size on this pipe so you can send a bunch of stuff"
6889360,6894480," and just move on uh and that stuff is going to stay there until the process actually opens the file start"
6894480,6901200," reading that stuff um so yeah so i didn't see any problems now anyways anyways anyways anyways anyways"
6901200,6909360," so we rebuild this entire thing so let me try to uh do this stuff and uh yeah it didn't it didn't help"
6909360,6915360," right it didn't help this thing didn't open the file yet it didn't open the file yet"
6916960,6923440," cool uh so what we need to do let's see what the documentation about make fifo says"
6923440,6927040," about non-blocking stuff right make fifo"
6927040,6937440," okay see fifo for non-blocking handling of fifo special files okay so let's go um can i just"
6937440,6945200," yeah i can actually i can actually say enter in here all right so first in first out special files named pipe"
6945840,6952000," a fifo special file a named pipe is simpler to pipe except that it accesses to uh part of the file"
6952000,6956800," system there is a lot of texting oh well not that much actually okay so we can try to read all that"
6956800,6961760," right so because what can it's just like a one page i think we can we have enough attention spam to read a"
6961760,6967600," single page it can be opened by multiple processes for reading or writing when processes are exchanging data"
6967600,6974640," via the for the kernel passes all the data internally through writing it to the file system without"
6974640,6981200," without writing it to the file system those the fifo special file has no contents on the file system"
6981200,6987600," the file system entry merely serves as a reference point so that processes can access the pipe using"
6987600,6995600," a name in the file system the magic of the unix philosophy so fifo is like you basically i guess i guess"
6995600,7000880," you can you can call them like that but as far as i know like they are unidirectional maybe i don't know"
7000880,7007360," like what's the actual difference between people special files and unique stuff um okay the kernel"
7007360,7015040," maintains exactly one pipe object for each fifo special uh file that is opened by at least one"
7015040,7021760," process the fifo must be opened on both ends reading and writing before data can be passed normally opening"
7021760,7029040," the fifo blocks until the other end is opened also a process can open a fifo in a non-blocking mode in"
7029040,7037920," this case opening for reading only succeed even if no one has opened on the right side yet um and opening"
7037920,7044640," for writing only fails with nxio no such device or address unless the other has already opened this one is"
7044640,7050800," kind of interesting the process can open if you for in a non-blocking mode in this case opening for read"
7050800,7060640," only succeed even if no one has opened on the right side yet and opening for right only fails with nxio no"
7060640,7067280," such device or arrest unless the other end has already been opened that's kind of bad because our problem is"
7067280,7075040," that we're opening for writing but the other side hasn't opened it for reading yet and the linux"
7075040,7080000," opening the fifo for read and write will succeed both in blocking and non-blocking mode oh in linux"
7080000,7088800," okay so they're probably actually describing possex right so but we're using a real operating system"
7088800,7093920," called linux where opening the fifo for read and write will succeed both in blocking and non-blocking"
7093920,7101840," mode um possex leaves this behavior undefined this can be used to open a fifo for writing while"
7101840,7107840," there are no readers available this is exactly what we want linux actually solves the problem"
7107840,7114320," like i really like the freaking uh the freaking plot twist they're describing the possex behavior and i"
7114320,7118400," feeling like holy fucking this is not what i want this is not what i want then but"
7118400,7121600," on linux it actually works exactly like you want so calm down"
7121600,7129120," so i really like how they wind you up in this paragraph and then calm you down with this one"
7129120,7134720," but don't worry if you're using a good operating system it's actually works fine it's actually works"
7134720,7142640," fine uh so supposedly this behavior undefined this can be used to open a fifo for writing while there are"
7142640,7148000," no readers available that's precisely our case that's precisely our case versus then uses both ends"
7148000,7153280," of the connection in order to communicate with itself should be very careful to avoid deadlocks"
7153280,7159680," that uses both ends of the connection we don't use both ends of the connection right so that's totally"
7159680,7167040," fine uh for details of the semantics of io uh on fifo c pipe uh blah blah blah blah blah blah blah so"
7167040,7172560," they say you can open it in a non-blocking mode that means it's basically grumbles and b i'm really"
7172560,7180320," sorry for open bsd and free bsd users do we actually have right now people who use bsd uh operating"
7180320,7188640," systems i know that bsd users actually use me uh bsd users watch me bsd watchers actually use me"
7192320,7199680," use for bsd i see how do you like it by the way so as a as a daily driving operating system does it"
7199680,7204960," have a lot of trouble running linux applications because as far as i know it has a linux compatibility"
7204960,7214880," mode um so yeah i use f and obsd okay yes daily drive okay there's a lot of bsd users in the chat what"
7214880,7219680," the everyone with the playstation and tennis which is a beast up well i mean that's a little bit of"
7219680,7224640," cheating uh i've been using free bsd on a thinkpad for a few months the linux compatibility mode kind"
7224640,7232240," of sucks uh okay that's interesting um the links is called translation is great can even run games"
7232240,7237280," like factoria uh as if it was native interesting so it works for some people it doesn't work for other"
7237280,7244800," people uh oh yeah by the way maybe maybe you have a similar behavior for fifo in here so don't"
7244800,7251200," look at make fifo look at fifo 7 right so this is where they explain i think well i mean maybe it's"
7251200,7257600," only linux but i don't really know uh so but to be fair this is the most reasonable behavior right just"
7257600,7265920," always allow open like read and write in non-blocking mode like it's like this doesn't sound like a good"
7265920,7272800," behavior to me honestly like it's just like i don't know how is that useful so you need to be flexible like"
7272800,7287040," that you need to activate power management manually oh i see um okay so let's take a look at the open man"
7287040,7290080," page let's take a look at the open man page open"
7290080,7300480," no okay so i guess that's what we're doing that's what we're gonna be doing so i just wanted to block on"
7300480,7306400," reason rights so that's what i want just block on reason rights but not opens like blocking on opens"
7306400,7314480," it's kind of meh honestly just just saying just saying it's kind of meh where is the opening okay"
7314480,7318320," so we're gonna do wrongly and do that non-blockingly please"
7325280,7330400," i don't see any reason to use bsd to be honest well do you see any reason to use linux"
7330400,7341760," you see reasons to use linux precisely because of the people who"
7341760,7345680," were using it when you didn't see any reasons to use linux"
7349920,7356960," software doesn't become useful out of nowhere it's the people who make software useful"
7356960,7363840," by using it and developing it that's how it works"
7363840,7374880," now okay so we enabled non-blocking mode for everything"
7376720,7381120," all right let's see if it's gonna work let's see if it's gonna work so i'm not sure i'm not sure"
7381120,7396640," i'm not sure i'm not sure not sure all right so let's go"
7400240,7402640," so something something went wrong"
7402640,7411200," huh could not open fifo panim audio no such"
7411200,7417680," device it's literally what it described it is literally what it described because it didn't open"
7417680,7428000," but it said that on linux is going to succeed both what it promised me that is going to work exactly as i"
7428000,7437200," want it it made a promise guys it's it's promised me that it's going to work what the is going on"
7437200,7444320," so it it literally did the thing that it said it won't do"
7444320,7445680," fuck you"
7445680,7449440," like so"
7449440,7456480," protests can open if you for an unblocking mode in that case opening for reading only succeed even"
7456480,7463040," if no ends open it and on the right side yet an opening for right only fails and like no such"
7463040,7466880," devices address and this is exactly what they did but then they here they said it's not going to"
7466880,7471200," happen on linux and the linux opening the fifo for read and write ah"
7471200,7478400," so read and write simultaneously"
7480320,7488720," fuck i just didn't read it correctly so if you open it for read and write some events it will okay jesus"
7488720,7502800," i don't know honestly how are we gonna even like no such device or whatever like"
7504080,7508720," how can i ask this thing to like open it as soon as possible"
7508720,7517920," um i don't freaking know like i've got no ideas like it just doesn't do what i want it to do so"
7517920,7522720," it's kind of bizarre it's kind of bizarre"
7524480,7527600," can i like interleave them somehow probably not"
7527600,7545280," maybe i could try to generate only audio can i try to generate on the audio i can try to generate only audio"
7547120,7554000," sound like an interesting so it has only one file so it will probably only use that one by the way"
7554000,7560640," what if i swap these things around what if i just literally swap them will it manage to open"
7561760,7568160," uh the audio device but won't be able to open the video one so because they handle them in a different"
7568160,7575360," order could it be the case that actually sounds interesting okay uh all right so what did it say"
7575360,7580080," what did it say yeah that's literally what happened"
7580080,7590560," so it couldn't open video so the order even matters in here the order even matters so if now if i swap them"
7590560,7592800," back uh right"
7592800,7602800," and i try to run it and just do that and it couldn't open it still couldn't open the video"
7602800,7607120," did i did i recompile or whatever i feel like i forgot to recompile maybe"
7607120,7611040," no it's video"
7611040,7614720," couldn't open fifo video"
7619600,7626800," i don't fucking know man i don't fucking know hmm so i kind of understand what is going on right"
7626800,7633920," i kind of understand it's just like it probably opens it up lazily it probably opens it up lazily"
7636480,7643040," there are other matters if i'm back wrongly read write i'm actually not sure"
7643040,7646240," i'm actually not sure if that's a good idea"
7646240,7656000," because that means i'm gonna be also a consuming end is that a good idea um we can try"
7656560,7662960," um what we can try i'm just like a little bit afraid because i want to be specific that i am only"
7662960,7667760," writing end and you are only reading end and i want to be explicit about that"
7669040,7675440," but maybe read write also will work who knows um runly rd okay so let's give it a try"
7675440,7679280," why not uh we're not really losing anything"
7682240,7692160," so rd rd or dwr or dwr okay so try to rebuild this entire thing and uh"
7692160,7694480," okay"
7694480,7703280," uh failed to write into file for resource temporarily unavailable yeah it couldn't write into that because"
7703280,7711040," it's temporarily unavailable it is temporarily unavailable okay so you know what i'm thinking um"
7711040,7716000," i think we need to google up that specific use case because i'm pretty sure people"
7716000,7722240," tried that before people tried that before and they probably discussed that so i'm gonna"
7722240,7727760," make a small break i'm gonna refill my cup of tea and we're gonna go on a googling adventure"
7727760,7732240," maybe you can google it up right while i'm making tea and you will tell me what exactly is problem in"
7732240,7740320," here right because what it looks like is that it uh opens the one um one input and it doesn't open"
7740320,7746320," the second one until you start sending something to the first one uh right until it's sending to the"
7746320,7752080," central one and then it kind of lazily opens finally opens that file and then starts doing things"
7752080,7760400," so that's what it feels like right so that's what it feels like i don't know exactly what ffm pack is"
7760400,7765280," doing but judging by its behavior i think it just opens some of the inputs lazily it doesn't open"
7765280,7773200," all of them simultaneously but can it open even all of them simultaneously right it's just like it's"
7773200,7781440," meta since uh let me let me try the following thing before i go on on a break i'm gonna do wrongly and i'm"
7781440,7788800," i'm gonna do blocking and we're gonna just try to see like where exactly is it blocking uh let me see"
7788800,7797040," all right so i'm gonna do that uh so who did it block on opening audio okay so that's fine um"
7797040,7805840," so opening video it managed to open video and then it opened audio now what if i swap them right what if i"
7805840,7814960," swap the process of opening those things will it somehow fix that um or do something different"
7814960,7827120," okay so what did it say uh right so opening audio and it's stuck on opening audio and never open it because"
7827600,7832560," ffm pack tries to open uh video so yeah"
7832560,7839040," all right that's cool that's funny that's actually funny and ironically all right let's make some break"
7839040,7849440," and um that is really freaking funny right so these pipes are bizarre honestly they are bizarre maybe we"
7849440,7854800," can use something else right so maybe unique socket but i'm not pretty sure no no no we can't use unique"
7854800,7860960," socket because unique seconds require a special way of opening them right so you literally have to do"
7860960,7867440," this usual thing like with tcp sockets it's just instead of address you provide the file path right so"
7867440,7876320," you can't really open unique socket with open can you uh okay so all right so multiple named pipes don't work"
7877600,7884160," all right component and determined version specified so when was it reported"
7884160,7894080," so it's not the all right all right let's see i see very funny"
7894080,7905200," so is there any workaround uh is there any workaround doesn't work uh raw"
7908240,7910720," i don't quite understand"
7910720,7915920," named pipes what's the difference between these two"
7915920,7919120," so ffm pack one"
7919120,7926080," uh by the way by it does not work i mean everything hangs just if a bank in second show is waiting for"
7926080,7929840," something that doesn't read both inputs and parallel yeah so that's exactly what's going on"
7930560,7935520," so having to pass between processes without very careful synchronization has never worked okay that's"
7935520,7940800," very interesting so we're learning something for further back or anything else what is your real world use"
7940800,7947520," for that kind of construct and to be honest i don't see okay so without synchronization you will quite"
7947520,7954960," rapidly uh different threats uh different threats i'm actually wonder can i provide"
7954960,7961680," like audio in video in the same thing now does it have the ability to get the file"
7961680,7967600," descriptor directly you could maybe create i think it has a way to do that i think it has a way to do that"
7970160,7981120," so it has a syntax it has a syntax that is something along the lines of input pipe id because i've seen"
7981120,7988800," them doing this kind of stuff and to be fair since i'm forking ffmpeg since i'm forking ffmpeg"
7988800,7996480," i might as well yeah i might as well create two pipes right so my ability to that's a good idea so"
7996480,8003200," that's probably way to go from here uh just have two pipes just have two pipes so that means i'll have"
8003200,8010160," to revert the entirety of the work that i've done with make fifo uh which was actually kind of useful"
8010160,8015200," right i learned about make fifo i never used them before right but apparently like making two pipes"
8015200,8023760," simultaneously is not a like a very common thing apparently in linux right so and the fact that it"
8023760,8030560," was discussed and kind of dismissed 12 years ago actually says that i probably should not be doing that"
8030560,8037520," yeah so eleon to you you're right so i'm probably gonna go that way so but we're gonna do that after"
8037520,8043600," the break i'm gonna do that after the break um okay so while on the break i've got a pretty cool idea"
8044160,8051200," honestly so i think we can just go back to our original solution with just the pipe"
8051200,8058800," so i've already done quite a few things in here but it's fine right so with just pipe and reading from"
8058800,8066640," standard input and essentially instead of opening one ffmpeg we can open two ffmpeg right so the one"
8066640,8072960," that is going to generate the video and the one is going to generate the audio um right and then we're going"
8072960,8079760," to produce two separate files and we can then then merge these two files with another ffmpeg call"
8079760,8085600," right because in the first unpack you can say okay i have the video track and i have the audio track"
8085600,8091600," produce a like a video file that uses that at the video track and that as an audio track it is a thing"
8091600,8097440," that the ffmpeg is actually good at right it's kind of the thing that what it's created for for this kind of"
8097440,8104240," problems right so just basically pre-render all that stuff in separate files uh i think that's"
8104240,8109120," a pretty cool idea right so and maybe that's the direction we have to go in instead of like this mac"
8109760,8121520," make v4 and stuff like that um so we may have actually two separate ffmpeg starters like uh ffmpeg start"
8121520,8131200," rendering video right something like this ffmpeg h start rendering video and another one start rendering"
8131200,8138320," audio and then here we can accept some interesting stuff in here for example uh frame rate uh or maybe"
8138320,8146400," sample rate so it's more like a sample rate then um i don't know sample size um not really sample size"
8146400,8155440," it's just like um um so const char uh whatever right so right now we had coding all these parameters so"
8155440,8162560," it's actually accept avoid in here so yeah and then we have separate uh things in here right so you have"
8162560,8169680," to sort of like keep in mind um like which one is for rendering the video and which one for rendering"
8169680,8174480," the audio right so that's one of the things you have to do though one of the things we probably want"
8174480,8183120," to accept in here honestly is a file path uh const char output path right so that's that so this is"
8183120,8192000," going to be the output path and for the audio also like this um open up two ffmpegs yeah that's a good"
8192000,8199920," idea honestly um like the picture that you didn't recognize uh what's the difference oh okay so that's"
8199920,8204000," what the picture was actually saying okay this was kind of weird for me to understand what the what"
8204000,8210400," the they're saying uh it's still really difficult for me to understand what the they're saying"
8210400,8224000," so this is a single ffmpeg i guess whatever all right so um let's go ahead and bring back the pipe"
8224640,8232000," this is really confusing honestly i don't fully understand uh i'm sorry so we need to bring back"
8232000,8245920," this thing uh so boom so we then we end the rendering so is that ending the rendering that didn't that didn't"
8246560,8254240," change anything oh my god okay so maybe i can do the following stuff yeah let's actually discard"
8254240,8258880," all the changes in here i don't know why i'm selecting redoing all that stuff uh right so let's"
8258880,8266320," go to ffmpeg linux i'm gonna revert all of that stuff i said ffmpeg linux please thank you so much okay uh so this is the"
8266320,8277040," the file so start rendering video constra output path right so here we're just opening the pipe and we're"
8277040,8282800," duping that pipe up as the standard input right so that's what we're doing in here essentially so we"
8282800,8291280," also take output mp4 and i probably want to do output pattern here uh so this is specifically starting"
8291280,8302720," rendering the video uh now let's start rendering the audio where is that stuff so i feel like it would be"
8302720,8310560," better to copy paste rendering of the video and just adapt it accordingly uh all right so here we open in"
8310560,8317760," the pipe and stuff like that so then as an input we say the format what was the format does anybody remember"
8317760,8326480," what were the parameters i forgot so i think it was s16 le i think that was the for the format right so"
8326480,8336800," then you specify the uh rate audio rate i think oh my i already forgot what were the what were the"
8336800,8345440," parameters uh right who remembers like i don't want to ask chat gpt again so and an amount of channels uh is"
8346400,8351040," damn so it's one of the things like i have to remember well i mean i don't even remember the"
8351040,8354880," names of the parameters i know the parameters themselves but i don't remember their names"
8354880,8359280," i was just like stupid naming all the flags and stuff like that can never remember"
8359280,8366560," uh okay so ffm pack uh accept role audio audio"
8368080,8379680," uh on stdin right yeah so ar it's a it's a rate and ac is okay okay so ac is the amount of channels"
8379680,8385840," it's going to be two maybe we should one channel but i mean i think i have a stereo for the for that"
8385840,8393920," specific file so that's fine all right so what we have in here is essentially we don't really have any"
8393920,8403280," video though per se so maybe i should get rid of that um so i'm not really sure so i think i'm going"
8403280,8408560," to just get rid of that and just say like yeah uh we're going to be doing this thing and it's going"
8408560,8418720," to determine that specific um you know container by by looking at the extension right so that's what's going"
8418720,8423920," to be doing that's what it's going to be doing so i hope this is enough for now"
8423920,8435040," and now i need to make send uh sounds all right so send sound samples"
8435040,8445120," and that should be pretty straightforward because it's going to be simply write ffmpeg pipe we're going to"
8445120,8451520," supply the data and we're going to say write that data if that thing failed for whatever freaking"
8451520,8462400," reason we're going to say trace log log error error ffmpeg failed to write into ffmpeg"
8462400,8469040," pipe for that specific reason it would be nice to say what exactly we failed to write so we can"
8469040,8476720," distinguish whether it was video or audio so this is going to return false and here we're going to have"
8476720,8490720," return true fail to write a frame into ffmpeg so fail to write sound into ffmpeg okay cool let me try to"
8490720,8495680," build this entire stuff and go through the compilation errors and everything so video uh we're going to say"
8495680,8506000," output mp4 cool uh so what else do we have in here so this is ffmpeg width and height it's doesn't like"
8506000,8511680," okay ah so we need all of that stuff for the frame rate resolution and we don't need that stuff anymore"
8511680,8516960," because it's a different mode it's a completely different okay so that's cool uh now i'm gonna go to"
8516960,8527760," panim and uh this is ffmpeg video all right we also need ffmpeg audio uh we have both of them uh so we"
8527760,8532320," also kind of distinguish whether we are in rendering mode by looking at the video i i guess we're gonna"
8532320,8538240," leave it as it is i guess we're gonna leave it as it is okay let's go uh so end rendering we're ending"
8538240,8547520," rendering on the video and also on the audio right so we end in both of them um and then we're setting"
8547520,8555680," both of them to null right so that's fair enough i think and this is the video all right that's cool"
8555680,8561120," what else do we have in here so we're sending the frame to the video part but we're going to be sending"
8561120,8570000," the sample to the audio part right so okay so and we're also sending the silence to the audio part as"
8570000,8579600," well uh and here when we start okay so this is pretty cool this is pretty cool so ffmpeg video"
8579600,8587920," right so this is the video and then we're going to say ffmpeg audio ffmpeg start start rendering audio"
8589120,8594080," output wave right so we're going to do the wave and it doesn't really accept any parameters right"
8594080,8600160," now but in the future it probably will uh right and that's it so that's the easiest solution right so"
8600160,8604960," uh we're not going to merge them right now we're not going to merge them right now so we're going to"
8604960,8612560," just generate them separately and see how that entire idea works out um hopefully it does work out um"
8612560,8618960," it's kind of interesting all right so the first is going to generate the a single frame"
8618960,8623280," right to generate a single frame then for that specific frame we're going to generate some sounds"
8623280,8626880," and basically hope for the best and basically hope for the best okay"
8626880,8631920," all right so let me see what's going to happen uh let's go"
8631920,8642960," okay that's pretty cool uh so we now have this logging that we introduced sending frames sending"
8642960,8646880," sounds and frames and sound remember for debugging purposes i completely forgot about this thing"
8646880,8652800," all right all right so let's get rid of that stuff uh so we already know that all of that is working"
8652800,8658960," uh rendering yeah so there is at least three of these things"
8658960,8670160," okay let's go and let's try to do the one time by the way let's take a look uh output mp4 i don't see output"
8670160,8677280," wave honestly where is the output wave there is no output wave in here which is a shame how is that how come"
8678720,8688000," um how come let's go"
8688000,8688400," hmm"
8688400,8698240," so fail to write sound into ffmpeg pipe bad address"
8699920,8710800," ha that is bizarre uh why is it bad address don't quite understand excuse me uh let's kill all of that"
8710800,8718800," stuff and try to maybe disable the um the video stuff let's try to disable the video stuff and see how it"
8718800,8727040," goes so i'm gonna go through compression errors and every mentioning of the video is going to be removed"
8727040,8730640," uh-huh"
8730640,8735600," so we're only going to be generating the video"
8735600,8744160," well i mean yeah we're going to be generating the frame but we're not going to be actually taking it or"
8744160,8752560," anything so and something was wrong with the sound"
8752560,8755920," all right"
8755920,8766720," right sound ffmpeg pipe bad address huh that's very interesting"
8769920,8773040," so bad address"
8773040,8779840," oh i lost the trail of thoughts because i heard the sound playing"
8779840,8789040," yeah i just remembered what i wanted to check uh what is this ffmpeg linux"
8789040,8796480," yeah so it should work it should actually works we're opening the pipe and then"
8797120,8802800," it should write into that pipe so i don't see any problems in here per se"
8802800,8808080," so this is start rendering the audio why does it say that the pipe is bad"
8808080,8813120," is that because of the llm right so it could be because of the stupid llm"
8813120,8816240," or maybe it just didn't give me the correct stuff"
8816240,8824720," guest uh channel layout for the input stereo why did you guess it though why would you need to guess it"
8824720,8834880," because because like i actually told you didn't i so failed to write sound into ffmpeg bad address"
8834880,8844000," no output streams to write to finishing so it literally failed to do that it literally failed to do that i wonder"
8845280,8858400," why um i wonder why i wonder why um so let me go through so this is the video right so nothing particularly special"
8858400,8866320," let me try to google this kind of stuff except really audio in without the llm because i feel like maybe llm actually"
8866720,8870960," you know tricked me raw video and audio std in"
8870960,8876880," uh oh my god"
8876880,8883360," raw audio okay so this is a raw video"
8883360,8891680," uh this one is sample rate so we have a sample rate channels"
8892880,8901360," uh so maybe this is the thing i have to be using because ar doesn't look like the correct thing or"
8901360,8906080," anything um so maybe they are a shortcuts"
8906080,8910640," so i really don't trust chat gpt"
8910640,8916080," on that one so this is the channels all right"
8917680,8922560," but i mean the names kind of make sense but i mean like everything that llm usually spit out makes"
8922560,8928080," sense right so that's kind of the point that's kind of the point and by the way here is the mapping"
8928080,8933760," right so this is how you can merge things right so with the fabric you can handle multiple inputs and"
8933760,8944400," then use map flag too yeah blah blah blah so there's two channels why the pipe is broken"
8944400,8949360," by the way i should have actually closed this thing"
8954240,8966240," it failed again it failed to write sound wait maybe it just generated it too quickly"
8966240,8970560," so maybe that's what's going on let's listen to this thing"
8976800,8980320," i'm so fucking sorry i hope it was not too loud for you"
8980320,8989760," was it too loud yep i'm so sorry i i didn't expect it myself"
8989760,9000720," um yep we just like lost half of the viewers"
9003120,9006240," yeah never do audio programming with headphones yeah it's kind of dangerous i'm really sorry"
9006240,9010160," it wasn't that bad luckily okay"
9010160,9018720," um jesus uh all right so i'm gonna bring this thing down a little bit and gonna try to listen"
9018720,9028080," that's actually insane but for you it probably was fine right it was probably fine uh so at least it"
9028080,9035760," started good at least it started good and then it went to shit and i have no idea actually why it went to"
9035760,9047120," shit um so because i didn't fully understand the channel thing or because of something else"
9048960,9057200," so this is that so s16 le right so i'm pretty sure we're using s16 le um yeah"
9057200,9063760," all right that was actually kind of better i hope i didn't damage my my hearing"
9063760,9075040," i hope i didn't damage my hearing uh okay so let me now see so like the the fact that pipe is"
9076560,9081600," says it's bad pipe it's kind of weird like why does it say it like that it's like i haven't finished"
9081600,9088240," doing things doesn't make any sense to me um yeah anyway"
9088240,9101840," so if the sample rate is actually maybe we just have to send by samples let's try to send things by"
9101840,9105280," samples so this is a samples and this is the amount of channels"
9105280,9119440," um right so and wave cursor is going to be pointing at um at the samples right so uh sample size so this is"
9119440,9127840," a sample size uh samples begin samples begin samples end right so and this is the amount of samples per"
9127840,9134480," i think uh i think uh i think uh and because of that what we have to do in here is ffmpeg wave"
9134480,9145040," uh sample uh actually channels all right so that's the actual amount of samples we have in here um so"
9145040,9148880," so maybe we can do something like uh sample count"
9148880,9162160," sample count and this is the sample count all right so this is a sample data um and"
9163360,9167040," we're starting from the beginning right we're starting from the beginning right so we're starting from the"
9167040,9167520," beginning right so we're starting from the beginning right so we're starting from the beginning"
9167520,9172080," and then we're sending um sample size"
9172080,9184960," uh samples samples samples samples samples samples samples ffmpeg audio uh sample data sample"
9184960,9192800," uh-huh yikes and sample sizes okay okay so we're gonna do something like this"
9193760,9204320," um so maybe i should have actually called it sound sound data and sound size yeah this is more like sound"
9204320,9210560," data and sound size because we have sound and we have silence right so that's kind of the main difference"
9210560,9224640," in here so this is samples uh samples begin samples again silent size uh samples samples uh sample size"
9224640,9235520," all right and then we're just literally working on the level of samples right and frames is basically two samples"
9238000,9245600," so of course i forgot to replace samples and with samples in here and sample count must be"
9245600,9252560," amount of frames multiplied by channels that makes sense sample size is that thing so how often do i use"
9252560,9259600," sample size in here i use it in couple of times specifically to denote the size and bytes because that's"
9259600,9264880," what we're doing okay so let's go through the compilation errors uh let's go to the compilation errors samples"
9265680,9268880," so sample begin uh right"
9268880,9279760," oof samples begin but multiplied by the sample size though i completely forgot about that part"
9279760,9289680," so there's a little bit of a mistake in here so sample count is the amount of frames multiplied by"
9289680,9295360," channels understandable sample size is that thing sample begin is the cursor sample end is plus that"
9295360,9301440," then if it's bigger than the amount of count we do that all right so where do we begin at sample begin"
9301440,9307040," sample size that makes sense the amount of bytes is basically difference in sample size okay so then we're"
9307040,9313360," sending that back so then we're updating the wave cursor by that right so we're updating it by that"
9313360,9320080," so the silence is how much is left in there how much is left in there um all right minus how much we"
9320080,9326800," we have written in terms of samples specifically it's all samples uh and then we're just writing that much"
9326800,9336160," silence in there so because of that uh simple it's a silence right so how how much we write in there uh yeah"
9336160,9344000," so we have to yeah we have to do something like this right so it's how much we're printing in there and yeah"
9345280,9353120," uh amount of channels let me double check some stuff uh we had coded all of these things"
9353120,9360400," so the output path and so on and so forth okay ah seems to be combined all right"
9363920,9373840," did it work i'm gonna put my headphones down there and let's go"
9373840,9386000," that didn't work that didn't work uh so that's bizarre i'm not gonna lie so that means it probably was not"
9386000,9393280," caused by that thing by confusion between frames and samples and some other thing uh let's try to do"
9393280,9402240," that one more time all right so then it stopped and this is what confuses me this what literally"
9402240,9411040," confuses me like why the fuck it is like that fail to write sound into ff impact pipe why channels option is"
9411040,9420400," deprecated okay that's fine guess the channel layout stereo okay so ff impact channel uh layout"
9420400,9427040," uh channel layout"
9427040,9437120," um i'm not sure if it's useful no output streams to write to finishing so output wave"
9440320,9443760," file file pipe audio 36 packets red"
9443760,9455520," i have no idea why it is bad pipe probably maybe because ffmpeg just closed the pipe that could be"
9455520,9461680," the case ffmpeg could have just closed the pipe and because of that when we try to write more into that"
9461680,9469120," uh we can't do that but why did it close the pipe it didn't really error anything so no more output streams to"
9469120,9473120," write to finishing so input is pipe"
9473120,9476240," uh check the"
9476240,9481040," what the ff are you talking about like seriously"
9481040,9488640," you're like i'm trying to solve a like very complicated problem with that and you're hitting me"
9488640,9493520," with this what's going to be the next thing like have you tried like rebooting your computers like"
9493520,9497600," you're trolling me"
9497600,9510080," imagine like knocking me out of my trail of thoughts to tell me like maybe you ran out of"
9510080,9514240," disk space like what the ff is wrong with you people i swear to god"
9514240,9521040," okay what else could it be in here what else could it be in here um"
9521040,9529120," channels options is deprecated so but if it's deprecated what can you what else do you suggest to use in"
9529120,9539040," here library configuration mismatch um input from pipe"
9539040,9546560," input from pipe so maybe i just didn't do it correctly or did i"
9548480,9556960," normal output streams to write to finishing"
9556960,9568160," um so what if i what if i said like no like can ffmpac actually produce like wave videos or something like"
9568160,9576320," that um so let me accept ffmpac generate wave file"
9576320,9584080," generate sun wave with the ffmpac that's an interesting"
9584080,9595760," idea uh pc m i have freaking necessary only go away what is love phi"
9598480,9601200," so the input is this kind of thing and then"
9601200,9604080," the codec"
9604080,9614080," so it generates to generate a signal for five seconds during this you just use wave right so"
9614080,9620480," this is some sort of a filter i suppose and this is the like parameters of the filter and then"
9620480,9627200," this is just the output just saying wave should be enough you can add okay so we can add that"
9628720,9632240," um but it's not particularly useful i suppose the rest is just like"
9632240,9636240," we can add that but i think it's it's the output"
9636240,9642240," all right it's the output it's the output"
9642240,9648080," dude i'm if you're gonna continue like saying obvious trivial"
9648080,9652160," shit to me copy paste it from google i'm gonna fucking ban you i'm not even joking"
9653200,9658480," like you're intentionally just trying to piss me off already at this point holy fuck uh okay"
9658480,9668480," all right all right all right uh what was the thing okay so i don't think"
9670000,9677920," that's the the co maybe the codec actually but i suppose it's going to pick up the codec that"
9677920,9680960," is makes the most sense"
9680960,9688160," uh strange that the thing same thing works for yeah exactly that's that's really strange like i'm not"
9688160,9695840," really sure what exactly is the problem in here uh right so what exactly am i doing wrong"
9695840,9704400," okay so it it waited for a little bit it waited for a little bit so and then"
9706960,9717360," the fact that it just like stops is so bizarre to me okay so maybe i need to uh try maybe i need to"
9717360,9724560," try some like logging um i want to see what exactly are the things that we're writing in there"
9725520,9731600," um so let's do the following thing trace log it's gonna be log warning"
9731600,9743120," uh sound um so it makes sense probably to do the sound size just to get an idea of like what is going"
9743120,9759760," so uh sample size in bits or bytes that's a very freaking good question"
9759760,9766240," finally thank you so much somebody actually asked like a well-informed questions that's a good one"
9766960,9775440," um i don't know so that could be actually the case um you know what"
9775440,9782000," how do i check that look without the debugger like okay let me try my my hypothesis"
9782000,9789120," uh let me let me try to check my hypothesis like tw i appreciate you thank you"
9789120,9794720," like we need more people like you could like ask actually well informed questions and not"
9794720,9802640," some copy should copy paste it from llm um okay so this is the stuff"
9802640,9808880," what i need to do when i load um"
9808880,9821440," the plugin so load wave just like print trace log log warning"
9824720,9832960," uh so what i want to do d p plant wave sample size"
9832960,9839920," so this is a sample size and let's actually do something like a trace log"
9842000,9846880," log warning"
9846880,9860240," um okay so probably one s thank you holy sh*t twint holy sh*t uh that deserves vip"
9860240,9865040," twint let's go"
9866800,9873760," thank you finally finally somebody who looks at the screen and understands what the f*ck is going on on"
9873760,9881120," the screen not just like picking up on keywords and trying to meme from programming humor or something"
9881120,9887920," like that i really appreciate people like you i wish we had more people like you on twitch i wish we had"
9887920,9894400," more people like you on twitch thank you so much who f*cking understand what the f*ck is going on on the screen"
9894400,9899040," because we're starting to get less and less such people on twitch honestly for whatever f*cking reason"
9899040,9904960," it's just like probably all the people who had any clue about software development already left"
9904960,9908320," because of the f*cking circus the software development section turned into"
9908880,9910080," so yeah cheers for you"
9910080,9918640," and maybe i'm gonna be the last person to f*cking leave it already um so anyway"
9918640,9922640," uh let me let me see"
9922640,9926480," let me let me see"
9926480,9932880," it is in bits by the way i should have actually looked into how i handle all that sh*t in neutralizing"
9933520,9941360," all right so how do you handle all that sh*t in neutralizing plug point let's see sample uh sample size"
9941360,9949520," so start rendering the track so it doesn't really matter per se"
9949520,9952960," um in all fairness"
9954000,9959600," in mutualizer everything is sort of like normalized all right it's sort of like normalized so it doesn't"
9959600,9966880," really matter so if i have a callback uh all right so what we're doing here i even like yeah i see i see"
9966880,9971120," i even do it like that and everything"
9973920,9983920," so we remember actually synchronizing with the sound yeah so the synchronization with the sound was kind of"
9983920,9991920," important so we have a wave which is a frame count so this is a base size yeah so this is a progress bar"
9991920,10000320," this is not what i actually need uh sample rate render fps wave sample"
10001600,10010480," and yeah so essentially we basically have a format in here which is f32 le and we just cast all of"
10010480,10017280," that to float so we never use a sample size ever because we know that everything is always in f32 le"
10017280,10024240," right so we know that so that's actually kind of cool all right so that means i'm kind of doing"
10024240,10031520," like a new thing that was never done before uh right so sample size let's divide this entire thing"
10031600,10036000," by uh by uh by eight right so in that case it's going to be two bytes"
10036000,10041920," so i'm not still not sure"
10041920,10052480," how exactly so and in here by the way so we have a frame count we're using the frame count"
10052480,10056240," so"
10056240,10064480," all right whatever uh let's go ahead and just like try to compile it i'm still confused about frames"
10064480,10068000," versus samples and everything all right let's go"
10068000,10078800," i'm doing things so we probably want to get rid of the login in all fairness so let's get rid of the"
10078800,10084480," the login i think it only uh you know stays in our way it only slows down the process"
10086160,10094000," uh so all right all right all right so all right all right so what we got okay let's go"
10105200,10117280," it's rendering uh okay so let's see i'm not all putting on my headphones all right so let's go"
10117280,10122320," that was dumb as"
10122320,10135120," but yeah and then okay so i really don't like that mpv does not create a window when it's just sound it's"
10135120,10135840," so annoying"
10135840,10140080," okay"
10140080,10148240," uh what the was that all right i think i'm"
10148240,10165040," i see i see so i suppose it has to be in frames so you you heard something uh let me show"
10165040,10169280," show you"
10169280,10171600," it's too fast"
10171600,10174160," it's too fast"
10174160,10178560," we have to do that in frames we have to do that in frames"
10178560,10181040," we have to do that in frames"
10181760,10185200," um clack clack clack clack clack yeah yeah so"
10185200,10191120," yeah i think we have to do that in frames we have to send frames in there"
10191120,10194000," and it was five seconds i think it was longer"
10194000,10200160," um so but at least we have something right so that we can work with at least we have something that we"
10200160,10206800," can work with we're almost there though we're almost there um all right so this is this stuff"
10206800,10212400," and we can say that the silence is actually four right because one sample is two bytes"
10212400,10221280," um all right so yeah so now that makes sense let's go back to to frames let's go back to frames so we're"
10221280,10228080," gonna have a frame count uh frame count which is just that right this is a frame count"
10229120,10238640," um so frame size is sample size divided by eight multiplied by the channels right so"
10240000,10254000," ffm tag wave channels uh ffm tag channel channels okay so frames uh frames so this is that okay"
10254000,10263440," i'm sorry this is fine this is fine just like if you don't know what you're talking about don't even try to help"
10265440,10274240," um that's the general rule of thumb okay so this is a frame count ah so and then we'll do frame size"
10274240,10281120," so we can kind of safely already just do that sending sound samples all right"
10281120,10283920," oh i mean"
10283920,10287920," samples"
10295440,10305520," so is that gucci is that tamaguchi i hope so"
10305520,10310320," uh right so let me see"
10310320,10320080," double check i'm sorry that i'm going over in oregon because the sound is usually like very annoying"
10320080,10325120," very finicky thing uh especially that different sort of libraries different software"
10325120,10331120," always throw around things like frames and samples and they sometimes mean different things sometimes"
10331120,10336800," they mean same thing and it's just like it's a confusion all over the place right so i suppose"
10336800,10346720," what um what if fm pack expects right is actually frames right so it's if its sample rate is actually"
10346720,10353440," frame rate uh right and frame is a pair of samples left and right left and right channels so to speak"
10354320,10359520," so uh this is the size of the single frame so the sample frame and the amount of channel so that makes"
10359520,10368640," sense uh then we do that then we clamp the end take a sound uh frames beginning the size and so on and so"
10368640,10376560," forth so i think i think it is good i think it is good um all right"
10380480,10386640," okay let's go is it rendering is it doing things i think it is doing things so hopefully it will take"
10386640,10390960," a little bit longer yeah so it will take probably a little bit longer now so it's already more than"
10390960,10396160," five seconds as you can see so the uh the size of the animation is like it's like 11 seconds okay so"
10396160,10404880," that makes all the sense okay i like what i see in here all right so i'm gonna put my headphones somewhere"
10404880,10424400," here far away i'm gonna turn down the sound uh and i'm gonna try to now play uh the outputs mpv output"
10427680,10436240," okay so that's cool um it's slower as it's supposed to be it's supposed to be slower actually"
10438240,10449920," uh it's supposed to be slower it started way too fast"
10449920,10456160," it started right away that's a problem it's not supposed to start right away"
10457280,10462480," um all right you see we didn't start right away"
10462480,10475120," is it okay that if i was saying 115 x yeah it was okay it's a speed of rendering not the playback um"
10476160,10480560," the intervals are correct i think if you look at the animation"
10480560,10493680," are you popping sounds when there is no song yes"
10493680,10503440," the rhythm is correct it's just the beginning of the silence is incorrect"
10506000,10513840," no something is wrong and i'm not really sure what exactly um so let me see so the beginning here"
10513840,10521440," we have a view wave cursor we have a wave cursor and we have ffmpeg wave which is"
10521440,10531680," zero initialized so since it's zero initialized um you're gonna end up piping the silence nonetheless"
10531680,10538400," all right so you're gonna end up piping the silence nonetheless um so let's take a look so this thing"
10538400,10547600," will end up being zero all right so then we do this stuff all right and what's going to give the frame"
10547600,10553600," count since uh this structure is zero initialized initially this is going to be zero so"
10554400,10560800," uh the frame uh the frame yeah so the frame count is going to be zero so the end is also going to be zero"
10560800,10562240," right so the end is going to be zero"
10562240,10570800," so that means we're going to pipe nothing in here we're going to pipe nothing in here so this is zero"
10570800,10579280," this is zero so it's not going to be updated zero minus that thing is going to be the full silence in here"
10580240,10586080," it's going to be the full silence so while we're not playing anything while we're not playing anything"
10586080,10589920," we should be piping silence so at the very beginning"
10589920,10598320," um so we should be piling uh piping sounds at the very beginning so i don't really know exactly why"
10598320,10607120," it is not the case right because so this is the frame size the intervals are correct the intervals are"
10607120,10616240," correct it's just the sample size okay that's a good one where is the sample size"
10616240,10626000," ah i see you know what okay so since we're yeah that's a good point leo thank you so much that's a"
10626000,10632000," good point um so since we're head coding that stuff anyway we can just put four in here anyway so who"
10632000,10638480," cares uh we had coded it here as well like why are we trying to unheadcode it in that in that place i"
10638480,10643920," don't think it makes sense yeah that's that's a very good point that's a very good point uh all"
10643920,10649600," right so let's actually try to recompile this entire thing and uh let's go i'm going to try to render it"
10650960,10659440," okay so is it render it is rendering okay that's cool um cool cool cool"
10659440,10670080," so that speed that is bigger than one it just indicates that it encodes it faster than playing"
10670080,10674960," it that it will be playing it right so that's what it indicates so it doesn't really mean that it's"
10674960,10690480," speeding up anything um so let me kill this entire thing and let me maybe go in here let me maybe go in"
10690480,10707520," here it's going to be mpv output perfect thank you so much thank you so much leo uh i'm going to give"
10707520,10722240," you vip as well go so um now let's try to enable video let's try to enable video uh ff and back video"
10722240,10725040," so let's go through all the places where it was commented out"
10730320,10741280," so and maybe let's use the video in here as an indicator so just one more time just double check"
10741280,10750000," no commented out ff impact videos cool all right so let's recompile all that stuff i'm going to remove"
10750000,10755200," the wave uh all right so we recompile this entire thing and i'm going to try to run this entire thing"
10755200,10764320," and let's go so is it going to work well we might as well just check there's two ff impacts in here"
10764320,10770960," there's two effects okay so hopefully it's doing things uh if we take a look at what's doing okay"
10770960,10778400," it's generating things uh-huh so they're fighting for the output which is kind of funny they're fighting"
10778400,10792560," for the output um maybe like generating all these things simultaneously is not particularly great idea"
10792560,10805920," but i'm freaking all right so it's almost done i suppose maybe there's also silent mode um but we'll see also"
10808000,10814560," so 0.2 x speed yeah this is because we're also generating the video we're also generating the video"
10814560,10822880," um all right i think it's done almost"
10822880,10829680," so are you done what is it waiting for"
10829680,10836800," it's waiting for something i don't really know what it's waiting for and it blocked panim"
10838320,10847440," why did it block it i have no idea why it blocked it is it waiting for okay let me see so ffm pack"
10849920,10858480," okay it's still alive uh let me try to see something um so search for ffm pack"
10858480,10864400," make sure i filter"
10864400,10870480," i'm just i'm just looking at the status whether it's like uh"
10870480,10879600," no it's it's not doing anything is it blocking right on one of the pies since encoding is slow maybe i don't know"
10880320,10886480," um but it's um but it's like it's supposed to be done right it's you see it's done it cannot finish"
10886480,10891760," itself for whatever reason uh it cannot finish itself"
10893200,10903760," um so if when we're done when we're done what do we do we just finish ffm pack rendering uh all right"
10903760,10910800," so we just finish both of these things and we're just doing that so there's nothing uh nothing particularly"
10910800,10911520," special"
10911520,10911680," special"
10911680,10920880," all right so let's kill this thing uh okay i killed it hopefully it also killed the ffm pack"
10922640,10927760," uh grab ffm pack so it's dead which is nice let's take a look at the video"
10927760,10931440," it's not even playable for fuck's sake"
10934240,10946960," uh all right so i think doing videos separately worked fine um i think doing videos separately for"
10946960,10948000," worked fine"
10951280,10956400," um so let's disable um so let's disable the audio and see if it will work without the video"
10956400,10959200," because i remember it's working so"
10963440,10969680," so let's go through all of that stuff so this ah freaking all right"
10969680,10976480," okay if i think like audio"
10976480,10982880," all right so silence is unused which is fine okay let's try to render the video"
10982880,10989840," without the audio let's go okay that is very simple that is very straightforward so it's"
10989840,10995280," it's generally slower than generating the audio right because i mean the resolution is pretty big and"
10995280,11001280," stuff like that so yeah it's a little bit annoying but we only need to generate like 10 seconds of that"
11001280,11002000," i think anyway"
11002000,11008720," so that's totally fine that is totally fine"
11016400,11028240," okay okay"
11047120,11047760," and it works"
11047760,11056160," yeah it's fine separately it's fine totally fine"
11056160,11063280," uh now um so if you take a look at the video that it generated um so"
11063280,11067360," fun"
11067360,11073200," no sound but and also a little bit skewed for whatever reason but it's fine"
11074160,11078320," so now um let's enable the audio"
11078320,11083760," let's enable the audio but disable the video"
11083760,11090320," so i just want to double check that they work separately"
11090320,11094480," as a separate thing"
11100080,11105120," so oops so this is going to be that"
11105120,11112160," okay"
11112160,11119520," so this one is faster because the the audio"
11121920,11132240," maybe you could add address to the tape because it's not clear where the start this is not a"
11132240,11133360," problem or so right now"
11133360,11142960," it's fine uh right so all of that they are separately working fine that's the funniest part"
11146320,11148480," and i wonder if you can merge them together by the way"
11148480,11153280," right so ff unpack merge"
11153280,11156960," video and audio tracks"
11156960,11158800," let's do google"
11158800,11166160," how to measure video files and ff unpack so well i mean the baseline of the functionality"
11166160,11170880," works already so yeah this is actually produced if we look at that"
11172720,11176720," um let me try so might as well actually call them maybe"
11176720,11182320," inputs so you have"
11182320,11187680," the audio and video inputs and then in here"
11187680,11197680," we just use that stuff so it's going to be input mp4 input wave so we copy the video we re-encode the audio"
11197680,11203280," and let's actually try to do that that should be relatively fast and if we take a look at the final thing in here"
11203280,11213680," so the base functionality is already implemented"
11213680,11219920," we can separately generate video and audio tracks and then manually merge them together"
11219920,11225520," right it's just like we can't really generate them simultaneously for some reason it's just like"
11225520,11233600," something blocks with pipes and whatnot but i mean if i need to like procedurally generate sounds i can"
11233600,11238400," already do that and with a little bit of a hackery i can just merge all of that together and maybe"
11238400,11246240," export that to um to to blender or something like that maybe i'm going to have like actually separate"
11246240,11253440," buttons on generating video and audio that's actually even better right so it gives me more"
11253440,11258560," flexibility i can decide okay so generate the video track and generate the audio track i'm going to"
11258560,11264720," actually leave it as it is right so that's fine there's no need to actually do everything simultaneously"
11264720,11270880," like just give me more flexibility i kind of like that honestly i kind of like that i think i'm going"
11270880,11278560," to stick with that i honestly think i'm going to stick with that hmm pretty cool so i think i'm going to"
11278560,11283680," declare this feature implemented this is exactly what i need basically right so"
11283680,11295280," and then boom boom boom boom okay isn't that progress my friend is not progress i think that's pretty"
11295280,11302080," freaking progress so i guess that's it for today thanks everyone who's watching me right now i really"
11302080,11308800," appreciate that thank you everyone who helped me to debug this uh disaster absolute freaking disaster"
11308800,11315040," absolute dumpster fire uh right so i really appreciate that have a good one and i see you all on the next"
11315040,11320400," recreation programming session with mr i love you"
