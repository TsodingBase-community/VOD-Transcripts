start,end,text
500,6160," So, hello everyone, and welcome to yet another recreational programming session with Amistazozin."
6160,9660," So, we're developing this game, a pretty cool game actually."
9660,15700," Oh, it works at, okay, so it works at 40 FPS, look at that."
15700,19460," So, it's probably going to go down over time as we consume more and more resources."
19460,26400," Right, so there's not really that much game, right, and it's super loud right now, so let me actually turn it down."
26400,28900," Right, so this is basically what we have so far."
29320,35520," There's sort of like a feature of this game is that it's purely software rendered, right, it's purely software rendered,"
35520,41540," and we're rendering it like the old-school Doom style, right, so we're raycasting and stuff like that,"
41540,43040," and I want to keep it that way."
43040,46440," I don't plan to use any WebGL or WebGPU or anything like that."
46440,48820," I really want to keep it like a software rendered."
48820,54100," And I was thinking what kind of game I want to actually create out of that, like with this engine,"
54540,60480," and I came to a conclusion that an interesting game would be probably an online multiplayer game, right."
60480,69200," And not only an online multiplayer game, but the one that doesn't really require installing a client or anything like that."
69200,75120," So my idea would be just the game is just a thing, a program that you run."
75400,83580," It starts up a web server, it starts up a web server, you join that web server in a browser, and then you start playing."
83580,92440," So if somebody else opens the same server in their browser, they join as a new player, and you can start playing with each other."
92500,96960," You just like go to the website, and you start playing with other people who went to the same website."
96960,100060," This is sort of my idea that I kind of want to implement."
100060,104960," The problem is that I never implemented multiplayer games."
104960,107640," Like, I have no idea how the fuck to do that."
107640,111120," Really, like, I have no idea how to do that."
111900,118400," And I'm not really that, you know, experienced with network applications in general."
118400,121000," I'm not really that experienced with network applications."
121000,125620," But I think that's the reason to try to tackle that anyway."
125620,129460," Right, so because that way I'll be forced to learn something new."
129460,147780," And so what I want to do, I want to dedicate today's session to just experimenting and exploring how could you write such, you know, network multiplayer online game, you know, using browser web technologies, right?"
147780,153140," So we're going to be writing that in JavaScript and stuff like that, but we're not going to be doing that directly on this game."
153140,163280," I want to experiment on a more simple example separately, so then I can figure out how to do that, and then I'm going to try to integrate that into the game."
163280,165520," So, and here's an interesting thing."
165520,180900," I want to add the networking capabilities to this game as early as possible, because I heard from way more experienced game developers that if you plan to make an online multiplayer game,"
180900,186380," you should add network capabilities early on, like, preferably right away."
186380,192880," The multiplayer is not something that you can slap after you finish the game."
192880,199420," So multiplayer system, so I heard, like, I have no idea, like, I have no experience in this kind of stuff."
199420,204480," So the multiplayer capabilities have to evolve with the game."
204480,207180," You can't just add them later."
207180,215700," They have to be integrated right away because the way you do networking may change depending on what kind of features your game has,"
215700,218820," and it has to be, like, really tightly integrated, right?"
218820,223080," So it's a completely different game if you don't have a network."
223080,228040," As soon as you add network, it becomes a different class of game completely,"
228040,231100," which requires different kind of architecture even."
231520,234120," So people say it's true, like, I don't know, right?"
234120,244940," So, and, but I heard a lot of horror stories where people tried to develop a game first and then just slap networking on top of it,"
244940,249720," and they get burned so fucking hard, they never tried to do that, like, at all."
249720,252900," So I'm going to try to learn from someone else's mistake, right?"
252920,255080," So I'm going to try to add networking early on."
255080,258800," So, yeah, it's kind of interesting."
258800,266220," So, and, yeah, what we're going to do, like, what kind of examples do I want to, what kind of example do I want to create?"
266220,277120," Essentially, I want to create an example where you join the website and you play as some sort of, like, maybe circle in a 2D space,"
277120,282000," and you can control that circle with the arrow keys or something like that."
282000,287200," So if somebody else joins, they join as a different circle with a different color,"
287200,291680," and they also can move around, and you can see them moving around, right?"
291680,296900," So, and, like, several people can join, and they can see how they change their position and stuff like that."
296900,300260," So, yeah, I want to experiment on Tzodinio."
300260,307240," I guess it is, like, it's like Slithery or whatever, Agario, right?"
307240,308560," It's this kind of case."
308560,310700," That sounds interesting."
310700,313220," Maybe I should try to, like, implement Agario or whatever."
313220,317920," Yeah, so you go, you run around as a circle and stuff like that."
317920,318460," I don't know."
318460,319640," It's going to be super simple."
320740,329760," So, yeah, first, before I go into that, I want to establish sort of, like, a mental framework."
329760,335920," How do I think about these kind of applications and these kind of games?"
335920,339460," Let me actually plug in my tablet, and I'm going to draw a little bit."
339460,343520," Right, so I'm going to draw a little bit."
344300,358640," So let's start my paint, because I feel like network client-server applications are not that fundamentally different from regular applications, right?"
358640,363240," So imagine that you have a game, right?"
363240,366200," So you have your game, something like this."
366200,369860," Right, and it's a single-player game."
370700,374960," So what you usually have, you usually have some sort of input, right?"
374960,386780," So here is the input, which is probably keyboard, keyboard, mouse, how do you spell mouse?"
386780,390240," Mouse, yeah, and gamepad, right?"
390240,394900," So gamepad, joystick, the stick of joy, right?"
394900,396220," So and stuff like that."
396220,398240," So you have this sort of, like, input."
398240,404240," The input goes into the game, and then goes the output, right?"
404240,417020," So then after the game accepted the input, it computed the next state of the game, and it sort of, like, displayed that state in the output, which is usually monitor, right?"
417080,424740," So it's a monitor, so what else, sound, right?"
424740,431480," So it's the speakers, speakers, speakers, et cetera, et cetera, et cetera."
431480,433180," So basic thing."
434820,447500," Right, so if we're talking about, like, old game consoles, right, so that had several joysticks, several gamepads, so the architecture of the game would be slightly different, right?"
447500,461960," So even though such game is multiplayer, when you have several joysticks, it doesn't involve any networking, so you can still kind of treat it as a single-player game with just an additional input, right?"
461960,465160," So the input for the second player, right?"
465160,468080," And fundamentally, game doesn't really change that much, right?"
468080,470960," So it's just, like, you have more input to handle."
470960,472320," That's it."
472320,474380," So, yeah."
474380,485280," So networking kind of adds a lot of complexity, but if there is no networking involved, but still there is several people, it's actually pretty much the same."
485280,487200," It's actually pretty much the same."
487840,497540," So, and as I usually like to do things, as I usually like to do things, let's imagine the dumbest solution possible, right?"
497540,502720," So the way I like to explore things and I like to learn things is that, okay, I have a problem."
502720,506620," What's the dumbest moronic solution I can come up with?"
507120,518760," Right, let's implement that and then let's see what are exact specific problems we're experienced with that solution and start iterating on them and improving them."
518760,527920," So, if I want to make a multiplayer game where the inputs are actually located on separate computers, right?"
527920,539060," So, for example, game is on one computer, the server, then you have two clients and basically you have two inputs over a network on separate computers."
539060,540640," So, let's actually see how it's going to look like."
540640,544340," So, this is going to be server, right?"
544340,547080," So, this is the server and this is the client."
547960,551260," This is the client and this is the client."
551260,554320," So, maybe client one, client two, but I don't really want to enumerate them."
554320,555460," So, something like this."
555460,558200," So, the way it's supposed to work, right?"
558200,562880," So, the client sends the input and the server tells what to display."
562880,569800," So, in a most ideal situation, let's imagine that we have infinite resources."
570760,577800," infinite resources, we have like infinitely fast network, like with the latency equal to zero or something like that."
577800,581040," Like, it's so fast."
581040,593520," When we have this kind of network, we can actually treat this system of server plus client as basically a single device."
593520,595500," Can't we?"
595500,598360," We actually can, right?"
598360,607040," So, essentially, in that case, this system is not that much different from this one, right?"
607040,617020," So, a gamepad, you can think of a gamepad as just a client which is connected over a very, very fast network, right?"
617020,625020," And in that case, essentially, what you can do, client just takes all of the input it receives from the user."
625020,630180," It takes all of the input it receives from the user, and it sends all of the input to the server."
630180,639220," Server updates the state and sends back the entirety of the state of the game to the client, and client just displays that."
639220,641540," And, of course, it does that for each individual client."
641540,648280," So, you can think about the system as multiple keyboards, multiple gamepads, and also multiple displays."
649640,661360," Right, so, if we had, like, infinitely fast servers, infinitely fast clients, infinitely fast networks, you could implement it like that, and it would be really easy, and it would be kind of close to this kind of situation."
661360,662540," Can't you?"
663620,679660," Right, it's just like, you kind of write separate programs for server and client, where you don't really have to do that in here, but this is not really something that you're not used to, per se, right?"
679880,692440," So, it's kind of like, when we are programming some sort of a system, we quite often write separate programs that we run on separate parts of those systems."
692700,699860," In case of a web applications, web developers are really familiar with this kind of concept, you have front-end and back-end."
699860,714500," So, essentially, you connect to a server, server sends you back a program that the client is supposed to run, that program connects back to the server, and now you have two programs communicating with each other."
714500,715580," Right."
715980,720540," And what's interesting is that this kind of situation also happens even on a single machine."
720540,723180," You would imagine, oh, it's only web applications."
723180,728520," No, on a single, like, machine, that also happens when you're doing graphics with GPU."
728520,732220," Shaders are programs that run on a GPU."
732220,744380," So, when you run an application on a CPU, what it does, it takes a shader, a program that runs on GPU, uploads it to GPU, establishes the connection between this program,"
744380,751340," and now you have two programs running on CPU and one program running on GPU, and they're communicating and telling each other, like, what needs to be done."
751340,753200," Usually, it's from CPU to GPU."
753200,755860," I don't know, from GPU to CPU."
755860,756760," Is there any information?"
756760,759100," Maybe there is some information, but I'm not a graphics programmer."
759100,759600," Right."
759600,771980," This kind of idea that you program a single system, you program a single system, but yet for different parts of the system, you write completely separate programs that communicate with each other."
771980,773340," It's actually super common."
773340,775420," There is nothing new in here."
775420,787320," So, even though I never worked with these kind of network applications, right, I'm kind of already familiar with this concept that I have a system of several parts with different programs."
787320,787900," Right."
787900,789300," So, I'm totally fine with that."
790060,807200," So, yeah, it's basically, yeah, it's just a keyboard that runs a signal over a very slow wire, and also, I can program that keyboard."
807200,811480," I can send some code into that keyboard, and it could do some things for me."
811820,812080," Right."
812080,813540," So, I should treat it like that."
813540,825600," So, but obviously, fucking obviously, sending the entirety of the state of the game from the server to each of the clients, it's kind of a waste of resources."
825600,834400," Like, if we just run away from the concept of infinite resources, like, this is going to be a waste of resources, it's going to be super slow, we're not going to go anywhere."
834400,836880," We're not going to go anywhere."
836880,839320," How can we solve that?"
839320,841260," How can we solve that?"
842180,851940," Well, we can actually calculate the state of the program on clients as well."
851940,860340," Let's actually let all of the parts of the system have a copy of the state of the game."
860340,864260," Basically, have a copy of the state of the game."
864260,868060," And they're running this copy simultaneously, right?"
868060,871280," They're running them simultaneously, and they're updating them simultaneously."
871960,872480," Right."
872480,878760," So, and essentially, if one client receives some sort of input, it sends that input to the server."
878760,881540," Usually, the input is probably going to be very small."
881540,883540," You probably start holding the key."
883540,884160," Right."
884160,885760," We notify the server."
885760,888460," Oh, we're holding the key that moves to the right."
888460,889460," Right."
889460,891260," So, the server takes a note."
891260,891720," Oh, okay."
891720,897880," So, this client is holding a key to the right and notifies all the clients."
898160,902120," Everyone, that motherfucker is holding key to the right."
902120,909480," And everyone simultaneously, okay, I'm updating my state as if that motherfucker is holding key to the right."
909480,912860," But we're not sending the state to everyone all the time."
912860,916220," We're all computing our own state."
916600,919420," We're just saying, what happened in this system?"
919420,921520," What happened in this system?"
921520,929580," And, of course, like different computers run differently, maybe at different frame rates and stuff like that."
930000,933560," So, and this state may actually differ over time."
933560,936860," They can accumulate some sort of a difference between them."
936860,945240," So, because of that, there should be also additionally some sort of a mechanism that lets server to say, okay, let's synchronize our states."
945240,945560," Right."
945560,947560," We've been running for quite some time."
947560,948380," Right."
948380,951700," Probably some discrepancies have been accumulated."
951700,952140," Okay."
952140,953860," Let's synchronize each other."
953860,955140," So, here is the state."
955620,955880," All right."
955880,959640," So, and then we send the entirety of the state or something like that."
959640,960520," Right."
960520,970140," So, this is basically my idea as a person who never done any game multiplayer network programming in my entire life."
970140,972260," This is my trail of thoughts."
972260,975200," Do we have any professional gaming developers in the chat?"
975200,978820," Is that the right direction to think towards to?"
978820,980660," Is that the right direction at all?"
980660,983100," Because it kind of makes sense, right?"
983100,984300," So, that's what you want to do."
984300,984880," Right."
985000,986940," So, it's basically a single system."
986940,989480," You can treat it as a single gaming console."
989480,990300," Right."
990300,994920," But with different parts that are connected over slow connections."
994920,1000300," So, I think it makes sense."
1000300,1001380," I think it makes sense."
1001380,1008500," So, I built a multiplayer engine that runs natively as well WebAssembly but has a hobby."
1008500,1010560," Oh, okay."
1010560,1010880," Cool."
1014380,1018420," I work with something close to that."
1018420,1019980," This works very well."
1019980,1020420," Okay."
1020420,1022000," It's reassuring, actually."
1022000,1022820," It's reassuring."
1022820,1026380," Sounds like a plan."
1026380,1028660," No idea if that's the right way."
1028660,1029320," Exactly."
1029480,1032380," I also don't know if that's the right way but I think it's a good start."
1032380,1032960," Right."
1032960,1033920," I think it's a good start."
1033920,1038160," Let's try to implement this idea of you connect to a web page."
1038160,1038700," Right."
1038700,1049680," And you connect as a circle and you can move around and you can see other circles moving around who connected through the browser using this architecture."
1050220,1050420," Right."
1050420,1053100," So, let's try to do that and see how it's going to go."
1053100,1054260," All right."
1054260,1058700," So, let's go ahead and just create a project where we're going to do all that."
1058700,1059640," Okay."
1059640,1059860," Good."
1060960,1065640," So, how should I call the project?"
1065640,1066260," I don't know."
1066260,1072360," Multiplayer game."
1072360,1073600," Yeah."
1073600,1075080," Prototype."
1075080,1077340," Multiplayer game prototype."
1077340,1079580," So, this is how we're going to call this entire thing."
1080580,1080800," Right."
1080800,1084500," So, the idea is that we're going to be using the TypeScript."
1084500,1084940," Right."
1084940,1087340," And we're going to be communicating over web circuits."
1087340,1090580," So, let's go ahead and do that."
1090580,1091880," So, we're going to NPM."
1091880,1094340," I need to initialize this choice."
1094340,1096480," I need to initialize this choice."
1096480,1100440," While we're initializing this choice, I think I need to acknowledge Lusops."
1100440,1103080," Thank you so much, Stausi1337."
1103080,1104700," 41st question with a message."
1104700,1106220," Study making an I.O. game."
1106220,1106440," Yeah."
1106440,1107440," That's exactly what I'm doing."
1107440,1109720," That's exactly what I'm doing."
1109960,1111060," So, the package name."
1111060,1111420," Okay."
1111420,1112340," So, version that."
1112340,1113120," Blah, blah, blah."
1113120,1114640," Nothing particularly special."
1114640,1115360," Keywords."
1115360,1115920," Author."
1115920,1117700," License is going to be MIT."
1117700,1121860," And, yes, everything is okidoki a karaoke."
1121860,1128760," So, let me install as a dev dependency type script."
1128760,1129520," Right."
1129520,1130400," Let's go ahead and do that."
1130400,1132060," Installing the type script."
1132060,1136100," So, everything's fine."
1136100,1136500," Okay."
1136500,1139340," So, we've got some stuff in TypeScript, which is very, very cool."
1139340,1141260," So, all right."
1141260,1145800," So, and I suppose in here, I want to take the TypeScript compiler."
1145800,1146280," Right."
1146280,1148540," So, and let's actually initialize the compiler."
1148540,1149260," Right."
1149260,1152940," So, that is supposed to create the TSC config."
1152940,1154900," Yeah."
1154900,1155620," TS config."
1155620,1157200," Okay."
1157200,1158760," So, everything seems to be fine."
1160660,1161100," Yeah."
1161100,1165280," I think I, right away, want to set the target to 2022."
1165280,1166940," Right."
1166940,1168300," So, I want to use the latest one."
1168300,1174080," And, in terms of the modules, in terms of the modules, I also want to use 2022."
1174080,1175460," We're not going to be using CommonJS."
1175460,1180660," Does anybody use this, like, a legacy module format, like a CommonJS or something like that?"
1180660,1183400," Or, is everybody using, like, ES modules these days?"
1183400,1184220," Right."
1184220,1186520," I think there's no reason to not use ES modules."
1186520,1189040," Because they're really convenient."
1189040,1191300," And they're supported even in the browser."
1191300,1193800," So, like, everyone should use them."
1193800,1195260," For new projects?"
1195740,1197300," Oh, only for new projects."
1197300,1198460," Damn."
1198460,1207560," Because, like, I was about to say, if you have, like, a normal modules, why the fuck do you need all of these packages, like, Webpack or White or VIT?"
1207560,1211140," Like, why the fuck do you need all of this crap if you just have a normal modules?"
1211140,1215140," Because I thought all of this crap is needed because JavaScript didn't have modules."
1215140,1217380," Now, you have modules, so you can throw away all of that crap."
1217380,1218720," Right."
1218720,1221480," And all the stuff's still on CommonJS."
1221480,1222040," Okay, I see."
1222040,1225620," I suppose it's really hard to migrate all that stuff, right?"
1225740,1229540," So, understandable, understandable, understandable."
1229540,1230420," All right."
1230420,1235560," So, let me actually do maybe a watch mod."
1235560,1238400," I really like to have some sort of, like, a watch mod."
1238400,1241760," I think I'm going to create a separate script in the scripts."
1241760,1243700," In the script, right?"
1243700,1244620," So, it's going to be watch."
1244620,1248320," And the watch is going to be TSC, watch, or something like that."
1248320,1251300," So, I just like to do this kind of thing."
1251300,1251960," So, watch."
1251960,1254160," And it just runs this entire thing in the watch."
1254160,1255420," No inputs were found."
1255740,1256440," Understandable."
1256440,1257520," Perfectly understandable."
1257520,1259460," So, let's create maybe a..."
1259460,1261880," Let's create server and client, right?"
1261880,1264920," So, we're going to have something like a server TS."
1264920,1265960," Right."
1265960,1267340," So, we have server TS."
1267340,1273760," And in here, we're going to say just a console log hello from server."
1273760,1274440," Right."
1274440,1276420," So, and let's create a client TS."
1277420,1283140," It's going to be console log hello from client."
1283140,1284320," There we go."
1284320,1286420," Everything is compiling."
1286420,1286840," Okay."
1286840,1289480," So, and that generated the JS."
1289480,1290580," Right."
1290580,1291260," So, look at that."
1291260,1292640," We generated some JS."
1294200,1297320," So, package JSON."
1297320,1299340," So, there's some other things I want you to do."
1299340,1302260," I think I want you to also enable source maps."
1302260,1306220," I think source maps are going to be super useful for us."
1306220,1307300," Yeah."
1307300,1307700," There we go."
1307700,1312240," It's kind of cool that it automatically just picks up all that stuff and just like enable everything."
1313300,1313920," All righty."
1313920,1318520," So, I wonder if I can try to run the server."
1318520,1320220," Right."
1320220,1321440," So, I need to go there."
1321440,1322840," So, node."
1322840,1325100," Can you even see what I'm doing in there?"
1325100,1326840," I think you should be able to see that."
1326840,1328920," Node server JS."
1328920,1330400," Hello from server."
1330400,1333360," If we do client, it's going to say hello from client."
1333360,1335580," But we want to run client from the browser."
1335580,1338320," So, we probably want to create something like index HTML."
1338320,1340740," I'll go ahead and do that."
1340740,1341500," Right."
1341500,1342700," So, I'm going to switch to HTML mode."
1342700,1343060," I don't know."
1343300,1350220," I, sometime I go, I just by default set XML mode for HTML and I am too lazy to actually change that."
1350220,1352180," So, yeah."
1352180,1353700," It's still using XML mode."
1353700,1356140," So, let's do head."
1356140,1361680," Actually, I think in the HTML mode, I have a special sort of like a shortcut."
1361680,1363060," Yeah."
1363060,1364040," I can do shit like that."
1364040,1364740," Look at that."
1364740,1365180," Look at that."
1365180,1367500," Can your Visual Studio Code do that?"
1367500,1368840," I don't fucking think so."
1368840,1371740," And I think I have tagging, which is like in line."
1371740,1372900," Look at, look at that."
1372960,1374180," Look at that efficiency."
1374180,1376000," Look at that speed."
1376000,1377160," Violence."
1377160,1378180," Momentum."
1383920,1411160," Oh, I forgot Dr. Disrespect got cancelled. Anyway, whatever. So I keep forgetting, keep forgetting like who got cancelled when and where is freaking internet. Internet these days is fucking insane. Anyway, so multiply a game for the time. So in here we have canvas and the idea is going to be the game, right? So my favorite kind of canvas."
1411680,1418560," And in here we're going to have script src client js. So this is a script."
1418560,1437100," All right. So now I need to serve this mother flipper. Right. I need to serve the, you know, HTML page. So that means I need to add more dev dependency. Did they even add type script? Yeah. So this is a dev dependency. Okay."
1437760,1445920," Let's install more dependencies. Okay. So HTTP server. Right. So HTTP server. And let's actually save it as a dev dependency. Save dev."
1446640,1454160," Uh, let's go. Let's go. Let's go. Let's go. Let's go. All right. It's installing something."
1454160,1464260," Is there any way for like to show a current tree? Like, you know, in cargo, you have cargo tree that shows the tree of dependencies and stuff like that."
1464260,1471140," So you can see how much bloat your application has. Do we have something like an NPM tree? Do we have anything like that?"
1471140,1473620," We don't even have NPM tree. NPM ls. Okay."
1473620,1480260," It even has, but this is not it."
1480260,1483700," This is not true."
1483700,1492340," Where is the rest of the thousand dependencies HTTP server actually depends on?"
1493220,1499460," Where is all of that shit? Is that under the flag somewhere? Like, what the fuck is that? What, what the fuck is this?"
1499460,1503460," So, uh, all. Okay. So let's do all."
1503460,1514420," Nah, fucking cowards. Fuck. They knew that. They, they fucking knew that. This is why they put it behind the flag."
1515620,1522740," Holy fucking shit. Because they knew that they will, it will make it look bad for everyone. So they had to put..."
1522740,1526580," Oh my fucking goodness. Holy shit. This is so pathetic."
1526580,1539460," Web devs. Am I right? Web devs."
1541460,1548660," I'm fucking telling you. Web devs are constantly lying, cheating, and deceiving. This is exactly what"
1548660,1556740," I said on that video where we did Quine and stuff like that. Freaking web devs. Right. They do that"
1556740,1560900," with native applications. They tell you, oh, you can write native applications on JavaScript. And no,"
1560900,1567300," you, you have to ship an entire fucking browser with it. Freaking web devs. Freaking web devs."
1571620,1579540," I'm joking, by the way. I'm joking. Anyways. Oh, am I? I don't fucking know. So, uh, all right,"
1579540,1585620," whatever. Uh, so we've got some stuff. So I think I need to bring the watch.js script that I use in"
1585620,1591380," the raycasting. It's actually a very convenient, uh, convenient script on this thing. Rather convenient"
1591380,1597700," script. So raycasting. So look at that. Like in the raycasting, I have watch.js, which basically contains,"
1597700,1608420," um, you know, two commands. Um, so it runs TSC in watch mode and simultaneously runs the HTTP server."
1608420,1612980," Also, it runs the hot reloading stuff, but I think I'm not going to support hot reloading for this,"
1612980,1618100," like a test application. Right. So I don't really need hot reloading in here. Uh, right. So it just like"
1618100,1623460," runs these two commands simultaneously. Right. And, uh, it works. So it automatically recompiles all the"
1623460,1628100," type scripts and also serves the content of the folder, which is rather convenient in my opinion."
1628100,1633780," Anyways. Uh, anyways, anyways, anyways, anyways. So we're going to go into the package dot json."
1633780,1642340," Uh, and instead of TSCW, we're going to just do node watch dot gs. TSCW, as you can see, is already run"
1642340,1649540," by this, uh, script. It's just like, it's only needed to run these two things somewhat. Um, okay. So let me"
1649540,1659060," restart the whole thing, right. So there's something, something's fishing module not found. Ah, it is"
1659060,1666820," trying to load the, um, the WS and some other size. So we don't need any of that size anymore. Uh, and as"
1666820,1675300," you can see, it is working. It is working. Now, if I go to localhost 69, uh, 69, uh, right. I think it"
1675300,1681380," loaded successfully. And if we take a look at the console there, it says, hello from client. There we go."
1681380,1688820," We set up a web project. That's pretty cool. So, um, we do have web sockets in the browser,"
1688820,1694900," right? So web sockets are already available. So you can just do web sockets. Uh, yeah, you can just have"
1694900,1700180," web sockets, but you don't really have web sockets in node.js. You really, you, you kind of have to install"
1700180,1706260," them, right. So as far as I know, it's WS, uh, right. And it's not really, uh, development"
1706260,1711460," dependency. It's like an actual dependency. So let's actually do saving here. So this is going to be WS."
1711460,1721140," Um, right. And how do you install typings for WS, right? Is it something like, I vaguely remember,"
1721140,1729700," it's, it's like a typed WS, right? How do you do typings chat? Uh, so install, uh, type script,"
1729700,1738500," uh, typings for web sockets. It's a type slash WS. Okay. So let me actually confirm that. Okay. So,"
1738500,1744580," all right. Okay. Uh, let's go ahead and do that. So maybe I should have saved it as a dev dependency."
1745780,1760020," Uh, not found. Uh huh. So types not typed types and it's a dev dependency. All right, let's go."
1760020,1766980," We can do that chat. We can fucking do that mate. Okay. So that's pretty cool. Uh, now let me open this"
1766980,1777860," syntactically up and can I just like import, um, you know, everything as WS from WS. Is that something"
1777860,1783460," I can do? Is it going to work? Let's take a look at errors. There's no errors in here. So that means I can"
1783460,1790740," just, okay, that's pretty cool. So let's take a look at APDWD. Uh, all right. So we've got the typings,"
1790740,1802180," which is rather convenient. So I suppose we will need things like WebSocket, uh, server. Uh, okay. So"
1802180,1809060," WebSocket. I think it's called WebSocket server. Is it called WebSocket server? No, it's not called WebSocket server."
1809060,1819300," Uh, I can't even go there anymore. Are you fine? So one. Ah, so if you do that, you don't have to do that."
1820100,1826580," So yeah, there we go. So we have a server. Uh, all right. So because I remember, I remember in the"
1826580,1835300," RaycastingWatch.js, uh, WebSocket server, how do you create? Yeah. Yeah. So we created you also provide"
1835300,1840900," the parameters and stuff like that. It doesn't really matter. Okay. So we have WebSockets. Uh,"
1840900,1848820," we have WebSockets. How are we going to be doing all that? So let's create a WebSocket, uh, new WebSocket"
1849780,1855140," server. Right. We get that. But the question is, what are the parameters that we can have in here?"
1855140,1861620," So when we are constructing the server, we can have server options. All right. So what are the server"
1861620,1868180," options? You can have port, host, backlog, and stuff like that. I suppose the only thing we kind of care"
1868180,1876020," about is the port. All right. So port 6969 is already kind of taken. So I suppose what we'll have to do"
1877060,1884020," is maybe use 6970, the same thing that we do in a hot reloading server in Raycasting. So let's do"
1884020,1891700," something like server, uh, port. Right. So this is going to be 6970. Uh, right. And, uh, that's what we're"
1891700,1898740," going to be doing here. So we're going to just put, uh, put, not post, port, server port, like so."
1899300,1904900," And does it even compare? It seems to be compelling, seems to be compelling. So the thing we have to do,"
1904900,1912180," we have to use on methods. And yeah, I suppose we only care about the connections as of right now."
1912180,1918020," So that's the only event we care about. So connection. And when we do the connection,"
1918020,1927780," so we have a callback. This is a server. And the second thing is a socket. So yeah, let's go ahead"
1927780,1933060," and do that. So this is going to be socket. Let's call WS. And, uh, we can maybe print something like"
1933140,1945780," console log, uh, somebody connected. Boom. Right. Uh, interesting, interesting, interesting. So,"
1945780,1952340," let's actually try to run it. So how can I even run it? I think the easiest thing for me would be to"
1952340,1961860," just do a separate command in here, something like maybe server. And let's just do node server"
1962580,1967460," JS. Right. I don't want to run it as part of the watch because I'm going to be constantly running"
1967460,1973940," this entire thing. Uh, right. So, and then I'm going to run server. Is it going to run? Yeah,"
1973940,1980260," I cannot import a module outside of the statement, uh, outside, outside of the module. Oh,"
1980260,1990260," oh, by the way, I remember, I think JavaScript modules, they, for some freaking reason, have a different"
1990260,1995140," extension or something like that. Do you guys know anything about that? Right. So I remember"
1995140,2002340," there was something like MGS or whatever, um, type module in your package.json. Maybe we can do"
2002340,2008420," like, I don't want to like add this kind of shit. Uh, so is there something like, um, I recently,"
2008420,2014020," yeah. So MGS, uh, JavaScript. So what's up with that? Um,"
2016100,2023220," the difference between, and I think if the file has a MGS extension, it's automatically run as module."
2023220,2029300," It indicates ES6 module file. Okay. Node.js original module system is common JS, uh, which require,"
2029300,2038180," since Node.js was created, MX, uh, okay. Node.js will treat CGS files as common and MGS as ECM. Okay. So it"
2038180,2045780," even recognizes CGS files as well. Uh, right. So, but the question is, is there something like MTS files,"
2045780,2056020," like, uh, you know, TypeScript, MTS files, MTS TypeScript. Is that, is that a thing even? Um, MTS is a cool file extension."
2058500,2069780," This is the, this is the state of web dev, by the way. It's not even tabs versus spaces. It's like,"
2069780,2076500," it's not even a new trivial framework every month. They're getting hyped up about a fucking extension."
2076500,2088420," That's how much software development has degraded. It's insane."
2088420,2095060," So, uh, yeah, the extension."
2098180,2104820," Okay. It's named after me. Okay. It's, it's their nickname, I suppose. Um,"
2104820,2112660," maybe we should give it a try. Um, maybe we should give it a try. Let's give it a try."
2112660,2118340," So, what if I, uh, call it MTS?"
2118340,2127220," Oh, so I have a watch mod running, so it automatically recompiled in that automatically created MGS. Okay."
2127220,2136100," So it means I can remove that shit. So now if I rename this thing, uh, yeah, and it's actually kind of"
2136100,2142020," funny, right? So the TypeScript compiler does know about all these extensions. Okay. So it's pretty cool."
2142020,2149140," And in a package, uh, JSON, if I just run this entire thing, right? Can I, can I just run it?"
2149140,2156020," Yeah, I can. Right. So it automatically switches to the, to the module,"
2156740,2164420," uh, to the module module or whatever. So pretty cool. But it's, it's unclear if it's listening to,"
2164420,2170980," to anything. So let's actually do the following thing. Um, oh, it doesn't even, doesn't even highlight."
2170980,2177860," It doesn't even highlight this shit. So let me, let me quickly do that. Let me quickly do that. So where"
2177860,2185540," where was the TypeScript? Scheisse. So how do you add them? Oh, this is how you add the new extensions, like"
2185540,2197060," new hooks in here. So if the extension is MTS, just enable the freaking TypeScript mode, brother. Just enable the"
2197060,2206340," TypeScript mode. All right. And now let me close this shit. And if I open this stuff, okay. So that automatically does that."
2206340,2213940," Okay. Alrighty. So what I want you to do, I want you to just put something like console.log and we're going to"
2213940,2229140," say, listening to WS localhost. Um, let's say, uh, we're going to do, uh, server, server port or what not."
2231620,2236260," And let me try to run this. And I think one more time, listening to, to this thing. Look at that."
2236260,2241460," Look at that. Isn't that poggers? Isn't that poggers? I think it's pretty freaking poggers. Can we now"
2241460,2251140," connect to all of that shit in a client? Uh, so in client MTS. Oh, by the way, uh, will just using MGS here work?"
2251220,2258820," That's a good question. Uh, an expected token export. Uh, I was hoping that maybe the browser"
2258820,2263940," will see MGS extension and we'll also switch to the, to the module mode. Uh, apparently it's not going to work like"
2263940,2270820," that. So now let's do it like this. Um, let's go. Okay. So hello from client. So now that means"
2270820,2280260," we will be able to just like do imports and stuff like that. Let me see. MGS. Well, I mean, in a server,"
2280260,2287060," in a server MGS, we already, yeah, we'll already do imports and that, that works fine in a so-called module mode."
2287060,2300660," TS is not as cool as MTS, probably. Um, okay. So in a client,"
2300660,2306980," what we have to do, my friend, what we have to do, my friend, why are you not, there we go, now we're"
2306980,2314740," talking. So let's do a closure, not really closure, but I mean the, um, the lambda. Let's just"
2314740,2320660," fucking run this lambda. So what we're going to do in here, we need to create a new le socket, a web, uh,"
2320660,2326500," socket. And how do you even connect to this? So where's the constructor? I don't see the constructor."
2327140,2337460," Show me the constructor. Uh, I don't see it. All right. So let me go to the ray caster and find how"
2337460,2343300," you connect to the sockets, right? New website. Okay. So you literally just do that. All right."
2343300,2351140," So you literally just do that. And then, uh, you have the connection w s. All right. So, and in here,"
2351140,2357940," I think it's on, uh, so you have to use, add the event listener instead, but we could, we could have"
2357940,2365540," used like on load or some other stuff. So, and in a listener, you provide the type, which is k,"
2366100,2373860," which is a key of web circuit event map, right? So we have open, um, let's actually try to add the"
2373860,2379940," listeners to all of these things, right? Just to see what the fuck is going on. Right. And let's log on"
2379940,2389460," all of them. Uh, right. So this is going to w s add event listener. Uh, and in here, we're gonna do"
2389460,2397540," this thing. So we get the event, uh, something went horribly wrong in here. Uh, so let me, let me try to"
2397540,2406180," fix that. There we go. This is what I want to do. And, uh, let's do console log. So it's going to be"
2406180,2413860," web socket, le socket. Then we're going to grab this entire choice. Boom. And also print the event."
2413860,2420980," Just want to see the entirety of the event. All right. Uh, okay. So let's save this entire thing."
2420980,2426420," Uh, there's a compile. It doesn't even fucking compile mate. Okay. So add the lister, not the"
2426420,2434900," lister, but the listener, uh, listener, uh, listener. Boom. Do you compile? You in fact compile already."
2434900,2441860," So that's pretty cool. Pretty poggers, pretty mother flipping poggers. Okay. So if I refresh the"
2441860,2448100," whole thing now, okay, web socket opened, uh, so, and in here, somebody connected."
2448100,2458980," It's that freaking easy. It's that freaking easy. Why people are getting stuck in the tutorial hell?"
2458980,2461300," Just write some code and it just works."
2464340,2476340," Um, all right. Who is somebody, somebody, um, okay. So what do we need in here? What do we need in here?"
2476340,2483780," Let's go into the server. Let's go into the server. So essentially, essentially we want to kind of,"
2483780,2490180," as soon as somebody connects, as soon as somebody connects, we probably want to register them in some"
2490180,2497860," sort of a table, uh, that maps that connection to, to the state of the player. Right. So let's actually"
2497860,2501220," maybe introduce the state of the player. So it's going to be interface. Let's say player."
2501220,2506340," Uh, and the player is probably going to have a position, right? So, and this is the only state that we're"
2506340,2511300," going to be tricking, uh, keeping track of. Uh, right. So we don't want to make over complicated"
2511300,2516580," example. The point of this example is to have something working, something twerking. Right."
2516580,2524020," So, uh, this is going to be X number and Y number. So that means we need to have some sort of like a"
2524020,2532340," players and we need to map the connection to, to the player. Right. So that means, do we have a map? I"
2532340,2539780," think we do have a map, right? New map. Uh, right. So yeah, there is a map in here. So we're mapping"
2539780,2549140," web sockets. All right. So we probably need to take the web sockets, web sockets. So yeah. So we're mapping"
2549140,2558660," web socket to the player. Right. So we have pleasures in here. Cool. Um, so I suppose another thing we need to"
2558660,2563380," do, we need to create the player first. So what's going to be the location of the player? I feel"
2563380,2569460," like the location has to be random. So let's use math random, but it depends on what's the size of"
2569460,2575540," the screen. So the server has to be concerned. It's not really the size of the screen. It's more like a"
2575540,2581460," size of the world. Uh, right. Let's like introduce something like a world width, right? So, and maybe"
2581460,2588340," world height, right? And we're going to have something like that. So world width, uh, and"
2588340,2594740," world height, but this is something that the client should know as well, right? This is something that"
2594740,2601940," the client should know as well. And in fact, um, the, we're going to be sharing the state between servers"
2601940,2608180," and clients. So that means there will be a lot of code sharing between these two applications. So I suppose,"
2608180,2615540," uh, these, they need to have, um, they need to have some sort of a, like a common module, right? Which is"
2615540,2622020," imported both by the client and the server, right? And we can move all of these constants in there,"
2622020,2627860," like maybe, maybe on the world width and world height, but server port, well, I mean, client also kind of"
2627860,2634420," concerned about the, uh, the server port. Yeah, actually server, server port is, is also a thing that"
2634420,2640020," you probably want to share between them, right? So let's create something like a common, uh, MTS,"
2640020,2648420," right? So, and let's simply move this stuff in here, right? So, and let's import everything as common"
2648420,2658020," from, uh, MTS, right? But I suppose, okay, so it's already compiled. Um, okay. So what does it say?"
2659300,2665860," So an import path can only end with MTS extension, when allow importing TS extension is enabled."
2676820,2684580," So what MTS does again? It's, it's basically TypeScript, but, uh, yes, yes, six module, uh, right?"
2684580,2694020," Why is that behind the feature flag? Like out of all things, uh, allow importing, uh, TS extension,"
2694020,2699300," allow imports to include TypeScript file extension requires module resolution bundler"
2700500,2704340," and I don't know, emit, emit declaration. What the fuck is?"
2704340,2716820," I, I accidentally opened a can of worm, okay? Jesus fucking Christ, bro. Can I just do MTS?"
2716820,2726260," Uh, I think, I think, I think you can. It's just like, um, yeah, so let me see. Can I access this"
2726260,2733940," thing like that? Uh, does not exist? Uh, is that common empty? I probably have to export them."
2733940,2745380," Do I have to export them? Yeah, okay, we'll go. So, and all of that shit is, uh, common, uh, server port."
2748260,2760900," Uh, so we use it in two places. Yeah, I see. I see. Common. Yeah, let's go. Let's go. Uh, why can't you do MTS?"
2760900,2769940," It's so fucking weird. Like it's not, it's not that hard for TypeScript compiler just replace MTS with MGS."
2770980,2780420," It's like, what's up with that? So if I do, um, like, MTS in TS, just then replace it with MGS."
2780420,2784020," Actually, TypeScript does way more complicated substitution than that."
2784020,2791700," The module resolution in, in node. Oh yeah, because it's supposed to work with different kinds of module. Oh my god."
2796980,2807460," Anyway. Okay. Whatever. It's not my problem. It's the problem of Microsoft. I don't have to deal with that."
2807460,2815300," Well, it's kind of, it's now my problem as well, but whatever. Okay. So let's take a look at the players."
2815300,2825540," How do I, uh, do that? Do I, yeah. Okay. So set, I want to set WS and the player, right? So let's go."
2825540,2836980," Uh, cool. What we are going to do. So we're going to be actually, um, yeah, we kind of want to,"
2838900,2844980," we want to kind of keep track of the player. Like, look, look. So even though socket uniquely identifies"
2844980,2853540," the player on this server, but the client doesn't know shit about the server size sockets, right? So"
2853540,2862260," it's not a reliable way to identify the players. Is it? Is it not? I think it is. The missile knows where it is"
2862260,2866340," because it knows where it isn't. So we need to have some sort of a fucking ID on the player."
2867140,2869060," ID is not a number."
2869060,2872980," Fuck."
2872980,2876020," Oh."
2876020,2885060," We're getting deep into this rabbit hole. Now we need to have some sort of an ID system."
2885060,2893220," Damn. Okay. So how are we going to be generating IDs? Is this like Twitter snowflake or whatever?"
2894580,2901620," It's weird snowflake. Uh, what's the, you know, you, you, you, you, you, you, you math random,"
2901620,2909300," can we just have a, like a counter? All right. Like, I know you're not supposed to use a sequential"
2909300,2913780," counter, but this is not really a classical web application or anything like that. It's just like,"
2913780,2922740," it's a game. Yeah. Count plus plus. I mean, come on. Uh, so we can always improve it later. Right."
2922740,2931700," So we can always improve it later. So let's do const ID ID counter, uh, plus plus. Right. So, and let's put ID"
2931700,2939540," in here. Uh, one of the things we can do afterwards, by the way, we can try to notify the client. Here's your"
2939540,2949460," fucking ID. So yeah, Twitter snowflakes. Oh my God. This is such a fucking irony. It never,"
2949460,2957460," it never fucking occurred to me. Wait, it never fucking occurred to me that the mechanism,"
2957460,2963380," the ID mechanism for like Twitter is called snowflakes. It's literally fucking Twitter snowflake."
2963380,2975460," Oh my, it never fucking, like I knew about that for so long and it never fucking occurred to me."
2975460,2978340," Holy shit. This is such a irony."
2978340,2990740," I'm sorry if it's too loud. Um, anyways, um, let's continue."
2990740,2996820," Why did it never occur to me? Uh, new tweet about it. Maybe I'm going to tweet about it,"
2996820,3002260," but I mean, how many people know about, you know, ID mechanism of Twitter? I mean,"
3002260,3007220," I know that tech, tech community is supposed to know that, but we're talking about tech communities"
3007220,3013860," in 2024. The people who have, uh, you know, computer science education happening on, uh,"
3013860,3020260," programming humor subreddit. So I don't expect that many people from this kind of, you know,"
3020260,3026340," computer science education to know what the Twitter snowflake. So anyway, we want to notify the player"
3026340,3033940," about their ID, right? Tech communities on Twitter. Yeah, exactly. Um, so we, we can just go ahead"
3033940,3039140," and send that thing. Right. So we can send it. So as far as I know, you can only send like buffers"
3039140,3045860," and shits, like strings and whatnot. And, uh, so essentially I want to send the JSON objects."
3045860,3051860," Right. So it's probably a bad idea for real time games. You know what I'm looking about? It would be"
3051860,3056020," better to use some sort of like a binary protocol, but this is the web tech we're talking about. So"
3056900,3062900," um, I know that there was like a binary version of JSON. Did you guys hear about it? Uh, so I think it's"
3062900,3072980," bson or something. Yeah, boy. Does anybody use this? Does anybody even use this? Like I rarely hear about it."
3072980,3083460," MongoDB. Okay. Interesting. How good of an idea to use that to communicate between the server and the browser?"
3085140,3090740," Because the thing is the advantage of the browser is that the browser has a JSON parse,"
3090740,3098260," which is literally implemented in C++, right? So an advantage of the browser is that you have"
3098260,3103940," a built-in JSON parser, which is like a very high performance C++ parser and it's super fast."
3103940,3110580," So, and if you have some sort of other format, you are kind of stuck with parsing this format using"
3110580,3115860," JavaScript or okay. So these days, maybe you can put the parser in the WebAssembly, but I mean,"
3115860,3121700," we're just prototyping. So I probably don't want to use this for prototyping, but exploring this kind of"
3121700,3123140," thing would be kind of interesting."
3123140,3130420," So we're going to be using JSON. So can I just send something like that? So I suppose we're going to"
3130420,3138340," be sending some sort of messages, right? So some sort of messages. And yeah, so what kind of messages are"
3138340,3147380," going to be sending? So maybe hello, right? Because it's a kind of a common message, like in different"
3147380,3155220," protocols, right? Especially SMTP protocol, right? For sending emails and stuff like that. So the first"
3155220,3160900," message that you send in there is hello message, right? So you connect to the server. The server says,"
3160900,3168820," hello. And along with hello, it may even tell you who you are, like, here's your ID or something. So I"
3168820,3176500," think an object layer may only specify. Oh, fuck. Do I have to convert it? I think it's like, how do you"
3176500,3178900," convert it to string? Oh, stringify."
3178900,3194740," And I suppose one of the things we probably want to do, do we have onClose?"
3194740,3207780," OnClose. And when I do onClose, so we have a close event. You have code, the reason type target."
3208900,3215300," What's interesting is that, okay, we are initializing all of these listeners within a"
3215300,3222100," closure. And within a closure, we know the connection. And we know the ID of the player,"
3222100,3228820," we know the current state of the player, and so on and so forth. Which is kind of cool. So,"
3228820,3234580," which makes me think, do I really need a mapping from WebSocket to the player? Because I know,"
3234580,3241460," I kind of know this socket all the time, anyway. But anyway. All right, whatever. So,"
3241460,3249620," I want to, when I close this entire thing, I can say something like ""console.log player,"
3249620,3260260," player, let's put it this way, player with this ID disconnected"". Right, so they disconnected,"
3260260,3269060," which means, I can take the player's ""delete ID"". Boom. So, and when we connect it,"
3269060,3281220," we can say ""console.log player ID connected"". All right, so this is the kind of stuff we can have in"
3281220,3286260," here. It doesn't even fucking compile, mate! Okay, so what is the study? What's up with that? OnClose."
3286260,3292980," Can I do an object which is possibly null? Are you fucking sure about that?"
3292980,3301540," OnClose. Ah!"
3301540,3311060," Like, I don't know, we get ws from here, which is the socket, and it's not possibly null."
3312740,3319780," It is not possibly null. So, that's kind of bizarre. Can I just, like, use a regular on in here?"
3319780,3328340," So, onClose. Maybe that's what I need to do? Okay, that actually worked, apparently. Okay, 32,"
3328340,3336900," what do we have in here? Players, number... Oh, we are identifying not by ID, but by the socket. Okay."
3337860,3345300," All right, let's scroll. Okay. I think we figured it out. What's the difference between this and OnClose?"
3345300,3357140," So bizarre. It also has ""once"", ""off"", ""off"". Jesus Christ, bro. Also, why there's so many ways to add a listener to..."
3361300,3371060," Oh, my God. Whatever. Okay. So, what do we have? What do we have? Let's restart the server."
3371060,3379300," Let's restart the server. Let me open this thing like that. So, I want to actually compare them"
3379300,3386740," side by side by side. Right, and I'm going to just put it like that. And I'm going to refresh the whole thing."
3386740,3396900," Look at that. Player zero connected. WebSocket open. WebSocket message. Kind. Hello. ID zero."
3400180,3407380," So, what if I refresh the page? Player zero disconnected. Player one connect."
3407380,3420660," So, that's already like a client server application. CircusClown application. So, yeah, seems to be working."
3420660,3427860," Seems to be working. Look at that chat. Look at that. Can your C do that? Can your C do that?"
3429780,3434500," We have two players. That's a good question, actually. Let's go ahead and do that. So, let me..."
3434500,3444420," Maybe I can just... So, I separated this tab. Then I'm gonna put this stuff like that. Right, there we go."
3444420,3459380," And so, let's open another one. Localhost six. Okay. So, player six connected. Player six connected. Then I can"
3459380,3466020," close this one. Player six disconnected. And then close this one. Player seven disconnect."
3466020,3475060," It keeps track of all that shit. All right. That's pretty cool. That's pretty cool. That's pretty cool."
3475060,3477220," But the players themselves are not really"
3480340,3485060," notified about the other existing players. If you know what I'm talking about. Right, they're not"
3485060,3491940," really, like, you know, notified about that. We also need to probably handle the hello message somehow."
3491940,3498020," Right. But I want to do all of that after a small break. So, let me make a small break. I'm gonna think"
3498020,3504340," how we're gonna organize the, you know, notification about the current state. Right. So, because once you"
3504340,3509700," connect to the server for the first time, you obviously don't have a copy of the state that"
3509700,3516980," you need to incrementally update. You obviously don't have it. So, upon connecting, you need to receive the"
3516980,3522980," entirety of the state of the game. Right. A copy of the state of the game. So, then you can incrementally"
3522980,3529140," update it as you receive different events that happen within the game. Right. So, it's kind of interesting."
3529140,3535860," So, hello might need to contain that entire state somehow. Right. So, along with ID, it should maybe"
3535860,3542500," contain, you know, the list of the existing players. The players that are already in the game. Right."
3542500,3545540," I think that makes sense. Right. So, it's a little bit more complicated than here."
3545540,3552580," So, yeah. I think I'm starting to understand why network games are so hard and people try to avoid doing"
3552580,3558580," that. Because the fact that now we have an ID system, we're keeping track of the players with"
3558580,3564020," ideas and stuff like that. Oh, my God. That's going to be fun. That's going to be fun. Anyway,"
3564020,3570660," let's make some break. Okay. So, let's try to handle the hello message in the client. So, it's going to be"
3570660,3577300," mts. And how are we going to be handling the message? All right. So, I suppose it's an event."
3577300,3586740," I'm going to look for 69. Let me take a look at what happened there. Did we get the message? We got the message."
3586740,3596260," So, it is located within data. How do you pronounce data? Data or data? Right. So, this is going to be..."
3596820,3606900," Is it even data? So, I suppose... Yeah, it is. It is. It is. It is. If I just print the data..."
3606900,3615460," So, you pronounce data... Okay. Data. All right. That explains it. All right. All right. So, let's see."
3616100,3623940," Okay. So, but I suppose this is a string. Is it a string? Type of... What's the type of this thing?"
3623940,3631220," It's a string. Okay. So, can I now take the JSON and just parse this entire stuff? So, this is a string"
3632340,3639300," event data. And let's call it something like a message. Right. So, this is the message. And"
3639300,3648420," if I refresh that now, here's the message. But you know what? I think for this specific message,"
3648420,3655620," it would be kind of nice to have an interface of some sort. Right. So, we can even put that in a common"
3655620,3662580," MTS. Right. So, because it's one of the common things. Interface, hello. Right. And we're going to"
3662580,3668900," say kind. I think this is how you do that. Right. So, you can literally say that a field doesn't really"
3668900,3674980," have a type. It has a type of a single value. Right. So, this is how you can do it. And in fact,"
3674980,3680660," this is how you do tagged unions in TypeScript. Tagged unions. I've already Googled it up."
3681780,3688660," I remember. I kind of vaguely remember. Yeah, this one. Yeah. So, this is how you do tagged unions in"
3688660,3695140," here. So, just like you have a tag. Right. But that tag has a type of like a single value. And depending"
3695140,3701620," on like what you dispatch in switch case, it will automatically like infer type of the entire of the"
3701620,3708020," interface, which is actually kind of cool. Right. It's kind of similar to how Kotlin, right, when you use"
3708020,3714420," is operator, like automatically casts the the variable to the specific type that you just"
3714420,3718900," checked. Right. So, it's super convenient actually. So, I think I need to add that to the description."
3718900,3724580," Right. So, this is the article. Right. But we're not going to be doing tag unions right now. But I mean,"
3724580,3731700," technically, we're already doing tag unions. So, anyways, anyways, anyways. So, they're going to be kind"
3731700,3741460," and id, which is going to be a number. So, the thing is, the thing is, the thing is, we can just cast this"
3741460,3746900," entire thing to hello. Right. But we'll need to import this entire stuff. Right. So, I'm going to import this"
3746900,3761060," as common from common.js. Let me enable fly check mode. Right. So, and yeah, common.js. And it doesn't work"
3761060,3773940," because... Oh, it's a something imports import. This is such an annoying feature of TypeScript."
3775300,3781540," So, it's like you have to import type. Like, why?"
3781540,3785380," And..."
3785380,3792900," Is it going to work? I didn't even, I probably didn't even export this entire thing. Yeah. So,"
3792900,3798740," I have to export this entire stuff. Are you good? Are you Gucci? Are you Tamaguchi? It seems to be Tamaguchi."
3798740,3804260," Okay. So, everything seems to be compiling. Yeah. There's no errors in here. Cool. I can do shit like that."
3804260,3816260," Sure. But this is not a check. Right. This is not a check. If we even take a look at the client.mgs."
3818500,3829460," Yeah. There's no check in here. Like a runtime. So, essentially, if the server sends Bogus"
3829460,3835060," message, somewhere down the line, we're going to crash."
3835060,3844580," Somewhere down the line, we're going to crash. We need to be able to check at runtime. Check the types"
3844580,3852580," at runtime. Welcome to TypeScript. Thank you so much. Okay. So, let's try to Google that. All right."
3852580,3858740," All right. All right. All right. All right. So, TypeScript. Check interface. Check if object"
3858740,3871140," matches interface at runtime. Not compile time. Runtime. Can you do that? Check if an object implements an"
3871140,3877140," interface at runtime with blah, blah, blah, blah, blah, blah, blah, blah. So, I load the JSON configuration"
3877140,3882740," file at runtime and use interfaces. Shut the fuck. Interface to define its expected structure. Okay."
3882740,3888500," Cool. Cool. Is it convenient to access the variables? Question. Is there a way to use this declaration to"
3888500,3892340," check the correctness of the file to check the correctness of the file load? The one to expected properties?"
3892340,3899220," There is... There is... A way. But you have to implement it yourself."
3899220,3901220," Fuck you!"
3901220,3916500," Why is this so fucking funny?"
3916500,3933220," All right. So, there isn't a way. Exactly. It's called user-defined type guard. And it looks like this."
3937060,3947300," What the fuck am I looking at? Is test accepts any returns arg is test."
3947300,3956740," Okay. And in here we just check the structure of the interface. So, arg is not null, not undefined. It has this"
3956740,3964580," property and that property has the type number. Of course, the actual condition of isTest function is totally up to"
3964580,3969140," to you. But the good part is that it's an actual function, which means it's testable."
3969140,3972980," Okay. Wait!"
3972980,3982580," Is this like in Kotlin with its is operator or some shit like that?"
3986900,3995220," I'll allow you to narrow down the type. Oh, it is! It fucking is! It is like Kotlin is, but you have to implement it as a function."
3997780,4021300," But it says as a function. So, the return type arg is test indicates that after you call this function - this is my hypothesis - after you call this function and it return true, the type checker will just always assume that the type of this argument - this is my hypothesis - after you call this function and it return true,"
4021300,4030740," the type checker will just always assume that the type of this argument is test. So, it's a way to"
4030740,4045300," communicate with the type checker. Right. So, if this value returned true, in that branch where it is true, assume that the argument you put in here is that - this is actually fucking smart."
4045300,4050500," Why TypeScript compiler doesn't generate these functions automatically for me?"
4050500,4059460," I mean, listen, listen, listen. You can say that TypeScript just generates something that you can strip off."
4059460,4069540," But this motherfucker generates you a polyfill for promises and awaiters when you use a syntax and you're"
4069540,4073860," targeting all the platforms. It generates you polyfills."
4074420,4081540," If it generates you an entire fucking additional runtime, why can't it generate a little bit more runtime"
4081540,4086100," for all of these types? Right. Wouldn't it be cool when I defined an interface?"
4086100,4091140," Right. And then I just use ""is"" and it would generate this code for me automatically."
4091140,4098500," Probably because of - again, it is totally fine with polyfilling."
4099540,4104980," old features. It generates an entire runtime. But specifically here, no, it's performable."
4104980,4109300," It's just so dumb."
4109300,4115460," You need to put ""allow auto-generated typeguards kappa"", I see."
4123620,4124340," Cheers, everyone."
4124340,4135460," What is polyfilling? That's what you should do with your mom at night."
4135460,4144820," Anyway, so let's go ahead and maybe implement some shise in here. I'm actually really curious what the"
4144820,4151940," fuck is that. So function is ""hello"". Right. So we're going to accept an argument."
4151940,4161060," It's ""any"" and it's going to return ""arg is hello"". I think that's what is going on in here."
4162260,4172100," Let me copy paste this shit. This is a lot. You have to do quite a few things in here."
4172100,4180340," All right. So we check that ""arg"", I suppose, not undefined and not null. And then it has a property,"
4180340,4188100," like a kind property. And that's... So in case of a kind, we just need to check if it's equal to ""hello""."
4188100,4191300," It's actually really easy. But we also need to check that it exists."
4191300,4198820," Is it a little bit unnecessary? Like imagine... All right. Let me actually experiment. So let's"
4198820,4203940," imagine that I have an object. All right. And I try to take your mom. It's just undefined."
4203940,4211780," And then I can say your mom equal ""hello"". It will just return false. So you don't really need to do"
4211780,4218980," that. Like it's kind of a... It's kind of a, you know, redundant. You only need to check if ""arg"" exists."
4218980,4229220," Then it has ""arg kind"" and so on and so forth. All right. So then we need to check ""arg id"" and if type of..."
4229220,4235620," Okay. So type of undefined is equal to undefined. So you also don't need to check that. What the"
4235620,4241220," the fuck is this stack overflow? Why do you need to do so much stuff? You don't need to do that in this"
4241220,4251700," one. Type of arg id equal number. All right. So this is compile. So let's close this scheie. Everything"
4251700,4262020," seems to be compiled, surprisingly. Okay. So we want to export this thing. Let's say export. All right. So, and in a"
4262020,4272900," client, in a client, what we want to do, if is hello message, we probably have to do something like common."
4272900,4279060," Is hello. And if I do message, holy shit, it actually works."
4279060,4290340," It is like Kotlin. It is like fucking Kotlin. Okay. So if I do that in here, it cannot recognize it. Okay."
4290340,4296980," So that's pretty convenient. All right, man. So, yeah. And if you do something like this, we're probably"
4296980,4305940," going to say something, um, received bogus amogus message."
4305940,4314260," And we can specify that. Let's actually put this message in here. And, uh, what can we do in case"
4314260,4319780," of receiving bogus amogus message? What do you guys think? We can just close the connection. Okay. Cool. Yeah."
4319780,4326420," We can just close. Fuck you. Fuck you server. We just closed. Um, interestingly,"
4326420,4329220," so let's keep track of IDs."
4329220,4337060," So we're going to have my ID and initially we don't really know it, right? Additionally,"
4337060,4342100," we don't really know it. So we're going to say undefined. And then as soon as we receive the message,"
4342100,4349060," we're going to say, okay, my ID equal to the message ID. There we go. So it's interesting. I think we can"
4349060,4355220," introduce a little bit of a state machine in here, a little bit of a state machine in here. So essentially,"
4355780,4366820," we're only going to do this entire stuff if my ID currently is undefined, right? When it's undefined,"
4366820,4373620," we explicitly waiting for, uh, for the hello message. My ID doesn't really work in here. So what's up with"
4373620,4380820," that? What the fuck is going on, brother? It's either undefined or number. Yeah, there we go. So that will work."
4380820,4390660," So if my ID is not undefined, that means we already been greeted, right? We already been greeted."
4391540,4396580," Uh, so that's pretty cool. And here we're going to expect other messages. And here maybe if we receive"
4396580,4403300," hello again, this is going to be a bogus amogus message. So whether a particular message is bogus"
4403300,4411540," amogus will depend also on the state of the client. That makes sense, right? So because in network"
4411540,4416260," applications, like clients also have some sort of like a state machine, right? So I just connect it. I don't"
4416260,4421380," know who I am, right? So I'm in that unknown state. As soon as I'm greeted, uh, I'm in a different"
4421380,4426020," state and this is where I can actually start playing, uh, and stuff like that. So that's pretty cool."
4426020,4431140," Uh, what is bogus amogus? This is the message. This is a sass message."
4431140,4441140," It's the message that is sass."
4446180,4457060," Um, yeah, so that's what it is. So dumb. Anyway. I'm sorry. Um, sass is in suspend. Yeah, exactly. Uh,"
4457060,4469620," okay. So we can say something in here. Uh, so connected as player, uh, and we can put ID in here. My ID. Right."
4472260,4477300," All right. Pretty pogors, pretty pogors, pretty pogors. So everything about everything, as you can see,"
4477300,4480420," compiles. Would you look at that? Would you look at that? Would you look at that? Would you look at that?"
4480420,4486820," Would you look at that? Yo, would you look at that? Um, let me restart the server just in case. So can you see"
4486820,4498500," this stuff? Uh, I'm going to do something like this and I'm going to maybe, why can't you just, yeah, thank you so much."
4498500,4507380," I'm going to refresh this entire thing. Okay. Player zero. Uh, and we didn't receive anything. Did we?"
4507380,4518900," No, we didn't. Something went horribly wrong. All right. So, um, we didn't receive the message. I guess"
4518900,4526420," that's what happened. Um, that doesn't make any fucking sense. Is that we didn't even receive an error."
4526420,4533540," That's what's weird in here. That's what's weird. Okay. So let me do console already hacked. Yeah, exactly."
4533540,4547140," Already fucking hacked. Uh, all right. So connected as player in defy. Um, all right. Oh, okay. Okay. Okay."
4547140,4554020," So essentially what I have to do, I have, I have to do it like that. Right. So we managed to connect."
4554020,4559860," Okay. Connected as player. Uh, I think I didn't, I just didn't see something. Maybe something was"
4559860,4565940," cached probably. Yeah, there we go. Connected as player four. Uh, this or doesn't make sense. Connected as"
4565940,4570340," player five. Connected as player six and so on and so forth. So that's pretty cool. That's pretty cool."
4570340,4583220," That's pretty cool. All right. All right. All right. All right. So interestingly, interestingly,"
4583220,4592420," interestingly. Okay. So in case of a server, in case of a server, so we, um, we need to send the entirety of"
4592420,4598580," the state, the entirety of the current state, um, after we send hello or maybe with hello, but whatever,"
4598580,4607460," we discuss that a little bit, uh, off screen on the break. And I have an interesting idea. We probably"
4607460,4614180," will need a message that we send to each an individual player when somebody connects, right?"
4614180,4619860," So when you connect, we need to notify the rest of the connected player. Okay. New player has connected."
4619860,4626020," Here's their ID. Here's their position. We need to do that. Uh, right. So let's actually even define,"
4626020,4633220," uh, this kind of message. So maybe expert interface player, uh, joined or something,"
4633220,4640580," right? So, and let's say it's going to be like a player joint. And in here we're going to have"
4640580,4647940," ID. And it probably makes sense to also provide the position, right? So it's going to be X and Y."
4647940,4653380," So I'm not introducing vectors because I don't want to overcomplicate the, you know, structure"
4653380,4658180," of the model yet, right? So we want to keep everything simple, right? So let's implement"
4658180,4662260," something working and then we can start adding maybe classes and stuff like that. Everything"
4662260,4668580," should be simple for now. All right. So we probably also need to be able to verify that message and that"
4668580,4674180," message, we're going to be constructing that message on the server and sending it to the client. So the client"
4674180,4679780," will need a function to verify that this is a correct interface. Um, all right. Can I just do something"
4679780,4689060," like we replace hello player joints? Uh, okay. So in here we have ID, then we have X and then we have Y."
4689060,4696180," You could have just generated that stuff in TypeScript, right? You could generate those things somehow."
4696180,4709060," Um, I wonder if I can actually extract this kind of thing to a separate function of sub sort, a similar"
4709060,4718740," one actually. Uh, is number, right? Arg any, arg is number. And this is where we can just do that."
4720500,4731860," Uh, return that. And this is that. So is number is number. I think we can do something like this."
4731860,4739220," Yeah. So then we can do is number. Boom."
4741460,4750100," I think we can do that. Yeah. So it doesn't compile. So what's up with that? What's up with that? So, uh,"
4750100,4756740," file changed. Oh, okay. So I think it's compiled. I just had a little bit of a brain fart."
4756740,4764580," Okay. So everything's fine. So is player joint, right? So we're going to have this kind of message. We're"
4764580,4773460," sending it to everyone every time somebody joins. So, and my idea, essentially when somebody new connected,"
4773460,4781060," we send them hello, effectively assigning new ID to them. So the client knows who they are."
4781060,4789540," And then we're starting to send them a sequence of player joint, player joint, player joint for the rest of"
4789540,4798020," the players. And we do that only for the one who just joined so they can restore the state of the game."
4798020,4803140," Right now, the state of the game is extremely simple. You either have a player in the list or don't."
4803140,4811380," Right. So, and essentially what we're doing, we are just sending a sequence of events for the new player"
4811380,4818900," to build up the correct state of the game. That's what we're doing. And I saw somebody in the chat saying"
4818900,4824740," that I want to send all of the events that happened before. This is not what I mean, by the way."
4824740,4832260," This is not what I mean. I'm sending only events that is needed for the new player to restore the"
4832260,4839540," correct state of the game. For example, you have N players right now. I will just send N player joined,"
4839540,4844740," so you can restore this state correctly. I'm not going to send all of the events who joined like 10 hours"
4844740,4850660," ago or something. I'm not going to do that. Why? It's a waste of time. So, I'm going to just only"
4850660,4855460," send you player joined for the player's core currently online. That only makes sense."
4855460,4868500," And it's going to be the same message that we're going to be sending to notify people that somebody"
4868500,4873300," joined. Right. It's the same kind of stuff. So, we don't really need like a separate mechanism here,"
4873300,4879620," which I think is kind of good. I think it's kind of good. Anyways, so let me see how we're going to be"
4879620,4887220," doing that. So, I really don't like this asynchronous nature of JavaScript."
4887220,4897620," So, I'll probably need some sort of a freaking loop on a server that, you know, simulates the state of the"
4897620,4905620," game. So, obviously, I don't have a request animation frame in here or anything like that. So, I'll probably"
4905620,4913700," be using setTimeout. Right. So, this is a setTimeout, this kind of thing. Right. And I'm probably going"
4913700,4921300," to be counting the ticks. Right. So, we're going to have a function maybe called tick. Right. And we call"
4921300,4927220," this function for the first time. And how often do we call it? So, we probably need some sort of like"
4927220,4938100," FPS on the server. Right. So, server FPS. Let's actually run the FPS, the server at 30 FPS. Right."
4938100,4944980," Let's run it at 30 FPS. And so, as far as I know, setTimeout uses milliseconds, doesn't it? I think it does."
4944980,4952820," Yeah, it uses milliseconds. So, we have to divide thousand by server FPS. Right. So, that's what we have"
4952820,4956900," to do. We have to do that on each tick. So, we have to, like, reschedule that over and over again."
4956900,4966180," So, yeah. So, the thing I want to do, like, if I were programming in a normal fucking language,"
4966180,4972260," right, in a normal proper language, I would have an event loop. Right. I would have an event loop."
4972260,4977540," And within that event loop, the first thing I would do, I would just collect all of the messages that I"
4978100,4985620," received in here, just collect all of them, put them into the buffer. And then, I would just process them"
4985620,4992820," within a single tick. Right. And send the output messages to the client. Right. So, I would somehow"
4992820,4999940," synchronize with that. Right. I would somehow synchronize with that. Maybe this is something"
4999940,5006980," that I can do. You don't use setInterval over setTimeout. I don't know what's the difference"
5006980,5014820," between setInterval and setTimeout. SetInterval. So, what is a setInterval? So, let's actually see."
5014820,5022100," Let's actually read about them. It doesn't really matter. I just need some looping. Method offered on the"
5022100,5029940," window. Okay. It repeatedly calls a function or executes. Ah, okay. So, it just repeatedly calls"
5029940,5037460," this function. We can do setInterval. It's just, like, I'm using this paradigm because this is what"
5037460,5046340," you do in requestAnimationFrame. So, all right. So, setInterval. Interval. So, it's going to be"
5046340,5053540," completely cold. So, I think this is something I can do here as well. So, is it going to be? Yeah."
5053540,5060900," The fixed time. Actually, I want to use setTimeout because it kind of gives me more control when I"
5060900,5066100," want to stop and not schedule another one. I know that in setInterval, it probably returns you some"
5066100,5070900," sort of ID that you can stop and stuff like that. But within this logic, it's kind of easier to just,"
5070900,5074820," like, never call this and stop. All right. I'm going to be using setTimeout. I think it's kind of..."
5074820,5079780," Like, I've already got used to this mental model of the frames. So, it's just easier for me to use it."
5079780,5082660," So, essentially,"
5082660,5091060," JavaScript is single-threaded and it also has an event loop and it's asynchronous. It just, like,"
5091060,5100020," processes the tasks, like, on each iteration. What we can do? All right. So, essentially, all of these"
5100820,5109300," callbacks are going to be fired at some point within JavaScript's runtime event loop."
5109300,5116260," And then, after the process and stuff like that, maybe a tick will be fired up."
5116260,5122500," Right. And then again and again and again. So, it's not something like... It's probably never going to be"
5122500,5129220," that I'm running a tick and then, in the middle of the tick, it will jump into one of these handers,"
5129220,5134180," like, on close or on receive message. We're probably going to have something like on message in here."
5134180,5141380," As far as I know, this is not how JavaScript works. It's like, it's not an interrupt in a sysense."
5141380,5146500," Right. So, it's never going to be that I'm running something here. In the middle of running something"
5146500,5153060," here, it will just jump into the message. Right. Do something in here and jump back. It's probably not"
5153060,5157220," going to happen. Otherwise, this language will be very difficult to program in."
5157220,5162500," Otherwise, it would be very difficult to program in. Right. So, you will have to have some sort"
5162500,5166580," of a synchronization and making sure that there's no race conditions or something like that. And since"
5166580,5171780," it's a language for newbies, they will try to avoid introducing a possibility of doing race conditions."
5171780,5181060," So, you can still have them, whatever. So, what I can do, what I can try, actually, I can try to have"
5181060,5191140," a queue of events. Right. Event queue. Some sort of event queue. So, and every time I receive some sort of"
5191140,5205780," events, I'm not going to be sending them out or handling them in these listeners. I'm going to be appending"
5205780,5217140," these events into this buffer, then handling all of these events in here. Right. In event, maybe off event queue."
5218420,5225300," And then I'm going to be just doing something like this. So, this is basically how we're going to be"
5225300,5235620," sort of synchronizing everything. So, we have fixed ticks. So, server has fixed ticks. Right. So, fixed ticks"
5235620,5243380," like that. And while it's waiting for the next tick to fire up, we receive messages from the clients and we"
5243380,5247780," just accumulate them. We don't even handle, we don't do anything, we just accumulate all the messages until the"
5247780,5253940," next tick fires up. Tick fired up, we look at everything we just buffered and we start processing"
5253940,5259780," them within a single tick. So, I'm trying to synchronize this kind of thing by ticks. Right. You know what I'm"
5259780,5264580," talking about? So, it's not all with the place and turns into spaghetti. Right. So, I'm trying to like mentally"
5264580,5270180," do that. So, I think it could be a good approach. Right. So, in here, specifically,"
5270900,5278980," we, we're sending out the hello right away in here. Which might be, which might be not a good idea."
5278980,5285140," So, this is something that we'll probably have to do something in here. Right. For somebody, for one of the"
5285140,5304980," events, we're going to push the player joints. Yeah. So, this is what we're going to do. The player joint."
5304980,5311540," Something like this. And we're going to be sending hello already in here. I think this is how I want to go"
5311540,5320580," about it. So, come on. Common. Come on. Player joint. So, we have x and y. So, here's x, player x,"
5320580,5329060," player y, and also player id. Can I, by the way, do something like this?"
5330260,5336820," Now, it's actually kind of convenient to just use id like that. Yeah. It's pretty convenient. But maybe it's"
5336820,5344820," also convenient to factor out these things like that to separate functions and something like this."
5344820,5353060," So, then later, I can do like that. And then, boom, boom, boom, boom. And then, maybe even boom, boom."
5353060,5358500," Look at that. Isn't that progress? I think that's pretty freaking progress. Look at that. It's so compact."
5358500,5367940," Holy sh*t. It's so compact. Bruh. So compact. Anyways. So, we're going to be pushing that stuff. Right. And everything."
5369780,5375380," And yeah. So, we're going to be handling this stuff. But we don't even know what's the type of the event"
5375380,5382500," queue. What's the type of this thing? It's a player joins. But then, what if we're going to have more events?"
5383140,5392660," So, we'll probably have to, you know, I don't know. Player start moving. Or something like that."
5392660,5398900," So, yeah. So, for now, we only have one thing in here. So, it's probably going to be fine."
5398900,5405780," It's probably going to be fine. Chat, it's going to be fine. Trust me. Chat, trust me. It's going to be fine."
5406900,5413140," So, anyway. So, what we're going to be doing here? Here, we're going to be doing switch upon event."
5413140,5417220," We don't even have a kind in here. But we do have a kind because we already have it."
5417220,5424820," So, let me see. So, it's any. This is disgusting, my friend."
5426500,5435540," So, because the player joined... Ah! It's the type within the common. So, we have to do import."
5435540,5444100," Import player joined from common MGS. That's the shit we have to do."
5444100,5451140," Bruh. Bruh. Okay. So, if I go... Okay. So, that seems to be working."
5451140,5458420," And in here, if I try to access the kind... Yeah, boy. Look at that. Look at that. We got him."
5458420,5462260," Got him. All right. So, what we're going to do in here is a player."
5462260,5470900," Player joined. Yeah, player joined. I said player joined. And then, what we're going to do..."
5470900,5476740," We only want to send this kind of shit to the player."
5477460,5483460," But we don't have a socket anymore because we moved away out of that place where we had a socket of the player."
5483460,5489380," How do I get the socket of the player now? Fuck."
5489380,5496340," I can just associate this motherfucker with the player. Fuck you. Okay. This is just so fucking easy."
5496340,5499860," Look, look at that. Look at that. Look, look, look. Bam! I have a socket."
5503460,5509380," I've got a socket. I've got a freaking socket. All right. So, that means I can just do something like..."
5509380,5519540," So, it's an event. All right. So, in the ID... Fuck."
5519540,5524820," What if I actually..."
5526820,5530420," Okay. So, I don't really need to identify players by the socket."
5530420,5534020," Here, I already know the socket of the player."
5534020,5541300," Here, I can get the socket from the player. So, this is kind of a stupid map. Like, I don't need"
5541300,5548980," to do that. I need to do that. Yeah. No, I don't even need two maps. Look, look, look, look."
5548980,5556820," Within handling connections, I know that the socket of the player is this. I know that. And in here,"
5556820,5562420," in a separate tick, I have an instance of the player. I can get the instance of the player by ID,"
5562420,5566420," and the instance of the player has the socket. Like, I don't need two maps. I only need one."
5566420,5573540," This is actually kind of interesting. Right. So, at first, I thought I will need to... I, like,"
5574420,5578980," have a map from socket connection to the player. But, in fact, it's actually completely redundant."
5578980,5581300," You don't need that. You don't need that at all."
5581300,5586740," Wouldn't this be open to ID spoofing? No."
5586740,5598900," So, let me... Let me see. So, what do we have in here? 25, 25, 25, 25."
5604740,5608740," Are you enjoying Germany these days? I've never been in Germany. What are you talking about?"
5608740,5616100," All right. So, 25. What's that? So, it's saying something. Trailing Cola. Ah, okay."
5616100,5627860," Okay. 28. So, here we are setting... Okay. So, I have to set ID to the player. 31. All right. So,"
5627860,5636420," kind player joined. Ooh. Oh, yeah. Look at that. Since we said that event queue is player joined,"
5636420,5641460," and player joined has to be player joined, I can't... Like, it caught, like, a typo in here."
5641460,5654420," Right. So, 39 was the next thing, and we're deleting the ID. Yeah, boy. 47. Okay. So,"
5654420,5662900," here is an interesting thing. So, in event, we do have ID, which means I can do players get by ID. So,"
5662900,5672740," I get const player, but there is a potential risk of getting undefined. So, if I received an event"
5672740,5677860," for the ID of the player that doesn't... For the player that doesn't exist, right? So, what do I do in"
5677860,5683380," this case? There's nothing much I can do in this case. I suppose I can just skip this entire stuff,"
5683380,5691540," right? So, we're getting just like, yeah, whatever. Okay. And so, this player is going to be in a map"
5691540,5696580," because we're adding it right away, right? So, as soon as somebody joined, we're adding them,"
5696580,5707460," we're registering them, registering them, registering them, registering them in a table. So, now I can send"
5707460,5714740," ""hello"" to that player, right? So, just do ""player ws"", and ws is a part of the player. We're sending them ""hello""."
5714740,5723540," That's very cool. So, no value exists in the scope ID 51. Okay. So, 51 ID, it has to be the player ID."
5724660,5730420," All right, that's pretty cool. So, the next thing we have to do..."
5730420,5734820," Next thing we have to do..."
5736500,5743620," We need to restore the entirety of the state for the player. So, we got some subs, by the way. It's..."
5743620,5751140," What? Let me see. Yes, Jacques Betan. Thank you so much for Twitch Prime. Also,"
5751140,5759780," Gigantify with a emote. I don't know what it is. It's a new feature of Twitch. I don't know what it means."
5759780,5764980," MrRealmGrinder, thank you so much for Twitch Prime. Hello, MrZozin. Hello, MrRealmGrinder."
5764980,5773860," All right, it's pretty cool. So, what we want to do? We kind of want to maybe iterate through"
5773860,5781780," all of the players, right? So, let ""player of players"". Oh, man. Now, it also has to be..."
5781780,5786740," This is very inconvenient. So, it's a map. I need to iterate a map."
5787940,5796020," Fuck. Can I do some... Oh, I can do ""for each"". What is it giving? It gives me a value. Look at that."
5796020,5804980," So, I can do something like ""other player"". Right, ""other player"". And in here, I can maybe..."
5804980,5816820," to the current player. So, maybe I should rename it to ""joint player"". Right, so this is a ""joint player""."
5816820,5821140," And this is a ""joint player"". So, I don't confuse it with ""other players""."
5821140,5827220," ""joint player"". So, we have a ""joint player"". We're sending them ""hello"", assigning them their IDs."
5827220,5831940," And then, we're iterating through the rest of the players. So, ""other player""."
5831940,5837060," But we also have to be really careful. We only want to do that if the ""other player"" ID"
5837060,5844100," ""not equal to the ""joint player"" ID. Right. So, then, what we're going to be doing..."
5844100,5848180," Then, what we're going to be doing... We're going to be essentially sending"
5850580,5856500," the following thing. ""Stringify""."
5856500,5864260," We're going to be sending ""kind player_joint"". So, this is basically the part where I said we're"
5864260,5869540," replaying all of these sort of events that happened before. Not all of them, but we're basically sending"
5869540,5877620," them the ""player_joint"" events for each player that already exists. So, that's basically the idea here, right?"
5877620,5885060," So, ""player_joint"". Right, and here is going to be ""id"". ""other player_id""."
5886020,5896180," Right, and then we have ""x"", ""xy"", ""y"". Here's an interesting thing. Wait, wait, wait, wait, wait, wait, wait."
5896180,5902660," We don't send the position over with the ""hello"" message."
5902660,5912660," What if... Okay, ""hello"" just assigns... ""hello"" just assigns the ID,"
5914340,5918660," but ""player_joint"" actually gives you the state of the player."
5918660,5926020," We might as well just send ""player_joint"" for the joint player itself,"
5926020,5928980," so they know where they are located."
5928980,5934740," So, that's pretty cool."
5934740,5941140," So..."
5942900,5948420," Oh yeah, I think that's good. So, and also we'll still have to"
5948420,5956500," send this event to every other player. Right, we'll have to send it to every other player,"
5956500,5965780," but this is where we'll need to check when the other player id not equal to joint player id. Right,"
5965780,5974740," to joint player id. We have to now send other player ws send. It's a little bit confusing, right,"
5974740,5978980," so I'm a real bit afraid that maybe I'm going to confuse myself, but whatever, we're going to debug though."
5978980,5988420," So, and we don't even have to do that, we can just send that event. Right, we can just send that event."
5990020,5997860," Interestingly, this is a little bit of redundant. This value is not going to change on each iteration,"
5997860,6004420," it's going to stay the same. Maybe we can do something like event string and just factor this"
6004420,6009460," stuff out into event string, like so. Yeah, so that's a little bit better."
6010020,6015940," So, that's a little bit complicated, but maybe it's going to work out. It compiles though, it compiles."
6015940,6023140," All right, let's give it a try. I don't know, so it's probably going to crash,"
6023140,6027380," but this is good because if it crashes, it will give us more information about what the is going on."
6028420,6034900," Which is always good, which is always good. I really like that. More information, more information."
6034900,6043940," Okay, let's go. Boom. Player zero connected, player zero disconnected. Okay, so we received bogus amogus"
6043940,6049620," messages. Received bogus amogus message from the... Why hello is a bogus amogus message, motherflipper?"
6050900,6063380," How is that, bro? Is that because hello is now... Okay, let me see. Let me take a look at the client mts."
6063380,6076580," Yeah, we're specifically checking for hello and hello... Yeah, it's correct, I suppose. I suppose it is correct."
6080660,6089220," So, maybe I need to do some other thing. So, let me rebuild everything from scratch one more time."
6089220,6097540," Okay, is it the recompile? Okay, that seems to be good. No, it's still considered bogus amogus,"
6097540,6107300," even though it is not. His number is wrong. Oh yeah, that's true. Damn, and even... Oh my god, freaking"
6107300,6112180," TypeScript. Okay, okay, it's fine. Thank you. Thank you so much. Okay, connected as a player three. That's"
6112180,6120420," pretty cool. So, and I suppose since we're going to be receiving the messages, I think we can try to"
6120420,6127380," do the following thing. All right, so here we're going to be expecting the ""is player joined"" message,"
6127380,6132340," right? So, this is what we're expecting here. It's going to be event data. Oh, just a message."
6132340,6143220," So, and if we receive something else that is not player joined at that specific state, this is a bogus"
6143220,6148820," amogus message, right? So, we don't really care about that. Okay, so what we're gonna do..."
6149620,6155220," what we're gonna do... What if we maintain the same kind of..."
6155220,6162900," So, it doesn't... why don't you like... declared but never used to. Okay, so we don't need that stuff."
6162900,6169780," What if we maintain the same kind of table, right? So, essentially players, which is going to be a map"
6170340,6177460," from... yeah, so we should create it right away from something like this, right? So, I'm gonna do new."
6177460,6185540," So, we're gonna have a player, by the way. We don't have a player."
6185540,6199780," So, let me... let me see. Can I move the player? I can't. It has a socket chat."
6200340,6206740," The player is not associated with the socket on the client side. On the client side,"
6206740,6213620," we have only one socket. We don't have a socket per player. We... How can we share this kind of"
6213620,6228580," can we just, like, factor out this stuff?"
6241060,6242020," Is that going to work?"
6242020,6249140," All right, so what errors do we have in here? So, client... and then..."
6249140,6253940," OP, exactly. We're doing OP, proper OOP."
6253940,6257300," O, O, O, O, O, O, O, O, O, P."
6257300,6264100," Okay, so what do we have in here? So, flycheck."
6265220,6272740," And here we'll import types for sure. So, it's going to be player from... come on, JS, come on."
6272740,6286740," All right, so... and in here, every time we are receiving player joins, what we're going to be doing"
6286740,6297380," is essentially player's message ID, and in here we're going to just do ID, message ID,"
6297380,6301060," X, message X,"
6301060,6304660," Y, message Y."
6304660,6316100," Okay, so it compiles."
6316100,6316820," Ah, fuck."
6316820,6321700," Property doesn't exist in player with... really? Are you fucking serious, Mitch?"
6323940,6330180," How? But it's a... ah, I know why. Because it's a freaking typescript."
6330180,6334100," Yeah, boy. Compiles. Compiles."
6334100,6336180," All right, let's restart this shit."
6336180,6343140," Honestly, like, we don't have a way to know what players have connected... wait a fucking second."
6345780,6352500," If this works correctly, that means at any given moment we already have a list of the players,"
6352500,6355540," and we know their positions, we can already fucking draw them."
6355540,6358020," Chat, we can already... we can see them."
6358020,6362420," Chat, we can fucking see them."
6362420,6365380," We just need to implement the code."
6365380,6367620," Fucking canvas time."
6367620,6370980," Fucking right, let's go, let's fucking go."
6370980,6377940," Okay, so we already have a canvas. So, let's do game canvas, and we're going to do document."
6377940,6386020," Get element by ID is not. Right, so it's going to be game."
6386020,6390980," And in here, game can be undefined or not."
6390980,6395860," Canvas equal undefined. I think it returns undefined in case of a failure."
6395860,6396980," Oh, it returns null. Okay."
6398740,6400100," Throw new error."
6400100,6406100," No element with ID game."
6406100,6407380," Yeah."
6407380,6409700," Here's the thing."
6409700,6414660," We won't be able to get context here because it has to be HTML canvas thing."
6414660,6420340," So, we have to cast it to HTML canvas element or null, right?"
6421060,6425140," And only then we'll be able to do get context 2D."
6425140,6428580," Const ctx."
6428580,6435380," And if ctx is equal to null, we're going to throw an error yet again."
6435380,6439700," 2D canvas is not supported."
6440660,6447380," All right. So, ctx. I would like to set the ctx to the size of this world."
6447380,6450100," Don't we have a size of the world or something?"
6450100,6454100," Damn. We already have a size of... We literally can do that."
6454100,6455300," So, look, look, look, look, look."
6455300,6457700," I can even probably do it somewhere here."
6457700,6459140," Game canvas."
6460980,6462580," So, and it's synchronized between..."
6462580,6464020," Like, we share a lot of code."
6464020,6465060," Well, not that much code."
6465060,6469860," But, yeah, we basically share the model, the data model between server and the client."
6469860,6470980," And you can clearly see that."
6470980,6471620," I really like that."
6471620,6475460," So, it's going to be common world width."
6475460,6476660," All right."
6476660,6477860," And this is height."
6477860,6479380," This is height."
6479380,6479780," There we go."
6479780,6480820," Look at that, look at that."
6480820,6486020," So, that's pretty poggers, my new friend."
6486020,6486980," That's pretty poggers."
6486980,6489620," So, everything seems to be fine."
6489620,6490820," Okay."
6490820,6493380," Let me try to refresh this entire thing."
6493380,6494900," And do we have a canvas?"
6494900,6495140," Okay."
6495140,6497940," So, this is the canvas and the size of the canvas."
6497940,6499220," I didn't see that."
6499220,6503940," Is 800 by 600, which is the size of the world."
6503940,6506180," Perfect."
6506180,6507380," Perfecto."
6508660,6508900," Okay."
6508900,6510100," So, let's go to the console."
6510100,6517380," And now we want to organize the rendering in the sheets."
6517380,6523460," So, here we have a request animation frame window."
6523460,6525300," Can you just..."
6525300,6525540," Yeah."
6525540,6527220," This is a request animation frame."
6527220,6531380," So, and we can't specify the timeout."
6531380,6531700," Yeah."
6531700,6533460," So, we have to have something like a frame."
6533460,6536020," Okay."
6536020,6537860," Frame like this."
6537860,6539860," And it accepts the timeout."
6539860,6545620," So, we need to keep track of the previous timeout."
6545620,6548660," Otherwise, we won't be able to know the delta time, Chad."
6548660,6552260," So, we won't be able to know the delta time."
6552260,6553700," So, we need to keep track of this thing."
6553700,6556580," So, that means we need to waste one frame."
6556580,6558180," I know that it's too wasteful."
6558180,6562820," But we must waste one single first frame."
6562820,6564900," So, we know the previous timeout."
6564900,6568020," Not really timeout, but timestamp."
6568020,6569300," I think it's called timestamp."
6569300,6570580," So, we need to waste it."
6570580,6573700," So, we know this kind of stuff, the delta time."
6573700,6578100," So, let's call it timestamp."
6578100,6579060," It's timestamp."
6579060,6584900," And we're going to just do something like this."
6584900,6589700," So, we're going to say previous timestamp is equal to the timestamp."
6589700,6598660," And we're going to reschedule requestAnimationFrame one more time."
6598660,6599220," Look at that."
6599860,6602580," So, in here, Chad, what we can do."
6602580,6608100," We can finally compute delta time, which is the current timestamp minus the previous timestamp."
6608100,6610980," But all of that is a motherfucking millisecond."
6610980,6612740," So, we have to divide it by a thousand."
6612740,6615060," And also, for some reason, this thing complains."
6615060,6617060," I don't know why the fuck it complains."
6617060,6618340," Because it doesn't know what it is."
6618340,6619140," It's a number."
6619140,6620660," All right."
6620660,6624740," So, and after that, we need to save the previous timestamp again."
6624740,6627380," And we need to reschedule the frame yet again."
6627380,6628580," Look at that."
6629300,6633300," And in here, you can safely draw all of your stupid players."
6633300,6637540," Mike Tyson's script."
6637540,6638980," Yeah, that's what MTS stands for."
6638980,6649860," It's just like if it crashes, it just bites your ear off instantly."
6649860,6651700," That's how it works."
6651700,6653380," Mike Tyson's script."
6653380,6653700," Anyway."
6653700,6658740," So, what we need to do, we need to iterate"
6658740,6659780," through all the players."
6659780,6660020," All right."
6660020,6661060," So, I'm going to take the players."
6661060,6663540," For each."
6663540,6667700," So, we have a callback."
6667700,6668420," So, the callback."
6668420,6669220," Okay."
6669220,6670580," It first puts the value."
6670580,6671860," So, that means we have players."
6671860,6676020," And in here, we just need to render them."
6676020,6680980," Suppose the first thing we want to do, we want to clean everything up."
6680980,6682500," So, let's do feel style."
6682500,6682500," So, let's do feel style."
6682500,6686340," Feel style equal to white."
6686340,6688660," And then we're going to do ctx feel erect."
6688660,6690660," Chat, chat, chat."
6690660,6692180," Do you feel erect?"
6692180,6694180," Oh, got it."
6694180,6697860," So, and what the fuck is going on?"
6697860,6698580," Emacs."
6698580,6699380," You scare me."
6700340,6700660," Okay."
6700660,6707300," So, after we cleaned everything up, I want to set the color to red."
6707300,6710420," Actually, I want different players to have different colors, right?"
6710420,6715780," So, we probably have to add the color as a part of the state of the player."
6715780,6717220," If you know what I'm talking about, right?"
6717220,6718820," So, we'll have to kind of do that."
6718820,6720100," There's no way around that."
6720100,6724420," So, anyways."
6724420,6729620," So, let me do ctx feel erect."
6729620,6731540," And we know the position of the player."
6731540,6733300," So, we can do player x, player y."
6733300,6735380," Player x and player y."
6735380,6737300," And do we know the size of the player?"
6737300,6740100," I think if we're going to be doing interaction with the player,"
6740100,6742100," so maybe they'll be able to hit to each other."
6742100,6744500," The server also has to know the size of the player."
6744500,6746980," So, that means it has to be part of the shared state, I think."
6748820,6751140," I think, I think, I think, I think."
6751140,6754500," So, let's go to the common mts."
6754500,6758260," And we're going to do export const player size."
6758260,6759860," It's not going to be as big as your mom."
6759860,6762100," But, yeah."
6762100,6763700," So, I think it's going to be small."
6763700,6764820," Maybe 30, right?"
6764820,6766020," So, let's put it like this in here."
6766020,6767140," So, it's going to be a common."
6767140,6768980," Did I export it?"
6768980,6769220," Okay."
6769220,6770900," Common player size."
6770900,6772740," Common player size."
6772740,6773780," Eyes."
6773780,6774500," Not eyes."
6774500,6774980," Size."
6774980,6776500," Right."
6776500,6776740," Okay."
6777860,6779220," Oh, fuck, it doesn't work."
6779220,6781460," Why it doesn't export everything properly?"
6781460,6781940," Didn't this?"
6781940,6783140," Oh, I forgot to save."
6783140,6783860," Chat."
6783860,6785060," I forgot to save."
6785060,6785940," All right."
6785940,6788180," Okay."
6788180,6790020," We don't even use data time in here."
6790020,6790420," Fuck."
6790420,6791140," I don't mean, whatever."
6791140,6792820," Cool."
6792820,6795620," So, theoretically, it should already kind of work."
6795620,6798900," So, let me restart the server."
6798900,6801380," And I'm going to try to refresh the whole thing."
6807860,6825460," I just connected from two different browsers."
6825460,6826180," Just like that."
6826180,6829060," I can now maybe do another one."
6830660,6832980," So, okay."
6832980,6835300," And now there's three of them."
6835300,6836180," All right."
6836180,6839300," So, now let's go ahead and close this one."
6839300,6842020," Ah, we don't handle the disconnect."
6842020,6842260," Okay."
6842260,6845460," So, they're not notified on disconnection."
6845460,6846820," Damn."
6846820,6848020," All right."
6848020,6849700," So, let's make a small break."
6849700,6853780," And after the small break, we're going to add the rest of the events and stuff like that."
6853780,6854020," Right."
6854020,6856500," So, we only need to notify about disconnecting."
6856500,6859140," And we also need to introduce the movement."
6859140,6859380," Right."
6859380,6862740," So, the ultimate part is just like being able to move around."
6862740,6863940," Right."
6863940,6866340," And I think it shouldn't be that difficult."
6866340,6872020," So, the real question is that when I'm moving, right, when I'm moving,"
6872020,6878900," how often do I notify about the updates of the state of other players?"
6878900,6881940," How often do you do that?"
6882660,6883940," It's a very interesting question, actually."
6883940,6885300," So, we'll see."
6885300,6886340," I need to think a little bit."
6886340,6887140," So, let's make some work."
6887140,6888180," Okay."
6888180,6891860," So, let's notify the players when somebody disconnects."
6891860,6892260," Right."
6892260,6895700," So, we'll need to create another message, actually."
6895700,6898180," So, let's go into the common MTS."
6898180,6900020," So, player joined."
6900020,6903620," Let's do something like player left."
6903620,6904820," All right."
6904820,6905540," Create a place."
6905540,6908180," Joint left."
6910980,6914260," What's interesting is that we don't really need to know the position of the left player"
6914260,6915460," because it's already gone."
6915460,6919780," So, yeah, we don't need to have that."
6919780,6922500," So, that's pretty convenient."
6923300,6930420," And now, on the server, when, I suppose, when close..."
6930420,6930580," Okay."
6930580,6931780," So, the player disconnected."
6931780,6933140," We deleted this thing."
6933140,6935300," We deleted this thing."
6935300,6941220," And I think what we need to do, we need to basically schedule this event."
6942100,6948260," So, player left, player left, id."
6948260,6949540," Right."
6949540,6951780," So, that should work, I think."
6951780,6954020," Does it even work?"
6954020,6954420," Okay."
6954420,6956020," So, ah, yeah."
6956020,6957300," So, this is what I'm talking about."
6957300,6960500," So, we have to do something like player left."
6961140,6964820," So, maybe it would be better to have an alias for this thing."
6964820,6973220," Something like event, where we could just say, okay, expert type event like this."
6973220,6973460," Right."
6973460,6974660," So, that's basically..."
6974660,6977620," The more events we're going to have, the more things we're going to put in here."
6977620,6978500," All right."
6978500,6979620," I think that makes sense."
6979620,6981620," So, and..."
6981620,6983140," Yeah."
6983140,6984900," So, this is going to be event."
6984900,6985140," Okay."
6985140,6986260," So, that seems to be compounding."
6986260,6987300," Okay."
6987300,6993460," And then here, in the tick, in the tick, if we receive player left,"
6993460,7000660," I suppose what we have to do, we have to just send that event to everybody."
7000660,7007700," So, it doesn't make any sense to get the player itself by id because it's already removed from the table."
7007700,7009460," We already unregistered that."
7009460,7014980," So, the only thing that is left in here is to maybe iterate through all the players."
7015140,7018660," And just forward that message to them."
7018660,7021220," Just forward that message to them."
7021220,7031700," So, the player has the ws and we're going to be sending, you know, the JSON stringify the event itself."
7031700,7033620," But, I mean, we can cache that."
7033620,7038740," We can just, like, cache event string, like so, event string."
7038740,7042820," Because we don't really want to call stringify on each iteration for each player."
7042820,7044180," It's kind of a wasteful little bit."
7045140,7045540," Right."
7045540,7046420," It's kind of wasteful."
7046420,7048980," So, and yeah."
7048980,7050100," That's about it."
7050100,7050740," Does it compound?"
7050740,7052820," I think it seems to be compounded."
7052820,7055220," So, on the client, we also have to handle that."
7056020,7061620," So, if, else if, I would say."
7061620,7062580," Else if."
7062580,7066820," All right."
7066820,7069860," Common is player left."
7069860,7072260," Neighbors are doing something."
7072260,7073620," It's almost 2 a.m."
7073620,7075380," And these motherfuckers are doing something."
7075380,7077700," So, we're going to do players."
7077700,7081940," Delete."
7081940,7084980," Message ID."
7084980,7086260," Okay."
7086260,7091460," Let's give it a try."
7092260,7093780," So, we probably need to restart the server."
7093780,7098740," Okay."
7098740,7106100," Okay."
7120660,7121060," All right."
7121060,7123060," So, it's just like we notify them."
7123060,7125540," So, all right."
7125540,7126100," That's pretty cool."
7126100,7127620," That's pretty cool."
7127620,7128020," Pretty cool."
7128020,7132420," So, we need to move around and shit."
7132420,7136180," So, the way I usually model moving around."
7136180,7137700," Right."
7137700,7139300," So, let's start with the model."
7139300,7139540," Right."
7139540,7144420," Because it's going to be the same between client and server."
7145460,7148740," So, I usually have like four booleans."
7148740,7150020," Like moving left."
7150020,7152900," And it's like a boolean in here."
7152900,7155380," Moving right."
7155380,7156740," Moving up."
7156740,7157860," And moving down."
7157860,7163700," So, and on each update of the player."
7163700,7165140," On each update of the player."
7165140,7167860," I just check whether we're moving left, right or not."
7167860,7171460," And just accumulating the velocity vector."
7171460,7173860," And then updating the position of the player based on that."
7173860,7176180," So, yeah."
7176180,7181860," But I think it would be much better to just have a direction thinking."
7181860,7182420," Right."
7182420,7184100," Just have a direction thinking."
7186500,7190100," And it's going to be basically, we're going to have four directions."
7190100,7195300," Left, right, up and down."
7195300,7197460," Right."
7197460,7203540," And I think, if I remember correctly, TypeScript allows you to do these kind of things."
7203540,7209220," So, you can have like typed direction and just something like boolean."
7209220,7211780," I think you can do something like this."
7214180,7214820," Oh, yeah."
7214820,7217140," Oh, it's, it's kind of stupid."
7217140,7220740," You kind of have to say key in direction."
7220740,7224820," Or maybe just, just key in direction."
7224820,7227940," Moving is missing type."
7227940,7229540," So, where is it complaining?"
7229540,7231460," Oh, it's complaining on the server, by the way."
7231460,7234100," It's complaining at 25."
7234100,7236260," Ah, okay."
7236260,7237700," So, it's actually kind of good."
7237700,7237940," Right."
7237940,7241940," So, it's complaining that I created the player, but I didn't initialize the moving."
7243060,7243460," Right."
7243460,7245940," So, it's a little bit better to have it like that."
7245940,7248100," So, then it's more abstract."
7248100,7252340," And if you add more direction in here, you don't have to modify this part anymore."
7252340,7254340," So, I think it's a little bit more convenient."
7254340,7256820," So, moving here."
7256820,7262980," And we need to set all of the directions to left, right."
7262980,7266580," So, you'll have to modify this part, but the compiler will tell you to modify it."
7266580,7271620," So, it's actually very, very much easy that way."
7271620,7273860," False."
7273860,7274420," Boom."
7274420,7275460," Look at that."
7275460,7277540," Can your vim do that?"
7277540,7279460," Can your vim do that?"
7279460,7280660," All right."
7280660,7281860," So, what do we have in here?"
7281860,7282580," So, the client."
7282580,7283620," Client is interesting."
7283620,7285700," So, 34."
7285700,7286900," Aha."
7286900,7288100," We have to do the same."
7288100,7288980," Look at that shit."
7288980,7290020," We have to do the same."
7290020,7292340," So, I might as well even copy paste some stuff."
7292340,7292900," Right."
7292900,7298180," So, that's the beauty of sharing the code in a statically typed language."
7298180,7299380," You updated the model."
7299380,7304260," The compiler forces you to update both client and server."
7304260,7306580," Can your JavaScript do that?"
7306580,7308500," I don't fucking think so."
7308500,7312260," You will only find out about that in a runtime in production."
7312260,7316020," Sorry."
7316020,7319060," I'm sorry for being extra annoying today."
7321860,7322260," Anyways."
7322260,7325780," What I was doing."
7325780,7327060," So, we have this kind of shit."
7327060,7327300," Right."
7327300,7331140," And I suppose."
7331140,7332420," Suppose."
7332420,7333380," We can introduce."
7333380,7339700," We can introduce."
7339700,7342340," A new event."
7342340,7343380," That."
7343380,7345380," Updates."
7345380,7346340," One of the directions."
7346340,7351620," So, essentially."
7351860,7352740," Let me show you."
7352740,7352820," Let me show you."
7352820,7355780," Expert function."
7355780,7357300," Player."
7357300,7360180," Moving."
7360180,7362500," Not function."
7362500,7362980," Interface."
7362980,7363460," I'm sorry."
7363460,7364260," It's an interface."
7364260,7367700," And obviously, we need to have a kind."
7367700,7367940," Right."
7367940,7369620," So, the kind is one of a kind."
7369620,7372660," So, this is the kind."
7372660,7374580," Id."
7374580,7374740," Right."
7374740,7376900," So, we need to identify who's moving."
7376900,7378580," Who's moving."
7378580,7379300," And moving."
7379300,7381140," Will."
7381140,7382900," Notify you."
7382900,7385460," That one of the fields of moving."
7385460,7387300," Have changed."
7387300,7389540," It doesn't tell you that the new position."
7389540,7390020," All right."
7390020,7391140," It just tells you that."
7391140,7391540," Okay."
7391540,7391940," Player."
7391940,7393300," Start moving."
7393300,7394980," Or maybe we're also going to."
7394980,7397860," Use the same event for stopping moving."
7397860,7398100," Right."
7398100,7399540," So, maybe we're going to say something like."
7399540,7399940," Start."
7399940,7400980," Boolean."
7400980,7401220," Right."
7401220,7403300," It will tell you whether a player started moving."
7403300,7404740," Or stopped moving."
7404740,7405860," So, if it started moving."
7405860,7408660," You have to set that moving part to true."
7408660,7409780," If it stopped moving."
7409780,7411060," You have to set it to false."
7411060,7412180," It's sort of like a delta."
7412180,7414500," Specifically on the moving bits."
7414500,7415380," Right."
7415380,7416020," That's what it is."
7416020,7418180," So, you have moving."
7418180,7418900," The id."
7418900,7419620," The start."
7419620,7422020," And you also need to have the direction."
7422020,7422340," Right."
7422340,7424820," So, this is going to be the direction."
7426260,7426660," Okay."
7426660,7427700," Okay."
7427700,7428020," Okay."
7428020,7431860," So, and that's one of the events."
7431860,7440420," That's one of the events that's going to be sent by the player."
7440420,7442100," So, this one is rather interesting."
7442100,7450500," Yeah."
7452100,7456420," So, we'll have to force the player to set their own id."
7456420,7458580," I think that's what we'll have to do."
7458580,7460020," But, I think I'm fine with that."
7460020,7461220," Anyways."
7461220,7461620," Anyways."
7461620,7461940," Anyways."
7461940,7462260," Anyways."
7462260,7462900," Anyways."
7462900,7467860," So, let's go ahead and just replace left with moving."
7467860,7471060," So, we have more fields in here."
7471060,7471540," Right."
7471540,7474100," So, we'll have id, which is a number."
7474100,7474740," Okay."
7474740,7478020," So, we have start, which is a boolean."
7478020,7479780," We don't really have is boolean."
7480660,7482180," We have to introduce that."
7482180,7484980," And we also have a direction."
7484980,7486580," And we don't have is direction."
7486580,7488420," So, we also have to implement that."
7488420,7491540," Right."
7491540,7495380," So, and I think implementing all of these things is going to be very beneficial for us."
7495380,7495540," Yeah."
7495540,7496580," We don't have boolean."
7496580,7496900," Okay."
7496900,7498180," Implementing this boolean is easy."
7498180,7499220," Look, look, look."
7499220,7500740," Just look."
7500740,7502740," Number boolean."
7502740,7504100," Boom."
7504100,7504820," Implemented."
7504820,7507860," You don't need templates if you can copy paste."
7507860,7508660," Trust me, chat."
7509540,7510100," Anyways."
7510100,7511300," So, is direction."
7511300,7514180," So, somehow we need to check."
7514180,7519540," We need to check that this string is one of those."
7519540,7523140," But we want to check that in a very generic way."
7523140,7527060," So, if we modify the direction, we don't forget modify is direction."
7528020,7529300," So, let me, let me see."
7529300,7531300," So, here we have arg, which is any."
7531300,7533860," And this arg is direction."
7533860,7536980," So, how can we do that?"
7536980,7539940," How can we do that?"
7541380,7543140," I have an interesting idea."
7543140,7543940," Look."
7543940,7548580," In a client, we keep referring to this thing."
7548580,7556260," What if I factor this thing out into moving, like so."
7557140,7560180," So, it's going to be interface moving."
7560180,7565380," So, it doesn't like something in here."
7565380,7568100," Oh, it was not an interface."
7568100,7571700," Yeah, you have to do stupid shit like that."
7571700,7572100," Yeah, yeah."
7572100,7573300," So, this is what you have to do."
7573300,7574260," Right."
7574260,7576980," So, you have moving."
7576980,7582900," And then, we can create something like default moving."
7582900,7589620," Default moving, which is basically everything set to false in here."
7589620,7591060," Look at that."
7591060,7598340," So, then later, it is super easy for you to do something like common default moving."
7598340,7600820," Right."
7600820,7602100," So, you can do that on a client."
7602100,7603700," You can do that on a server as well."
7603700,7606340," So, we factored out this specific value."
7606340,7608820," But we didn't do that for just no reason."
7608820,7619380," We can now use this specific table to check whether a particular string is a direction string."
7619380,7623140," Because that string is going to be present as a key within that table."
7623140,7628100," So, that's actually pretty convenient, I think."
7628100,7628340," Right."
7628340,7631140," So, we can do something like default moving, arg."
7631780,7634420," And it's supposed to be it should not be undefined."
7634420,7636660," Not equal undefined or something."
7636660,7638740," But I mean, it doesn't type check."
7638740,7641860," But we can actually do something like as direction."
7641860,7644420," And I think it tap checks."
7644420,7644980," Yeah, there we go."
7644980,7647140," So, that's a pretty convenient way to do that."
7648420,7651220," So, yeah, that's pretty cool."
7651220,7656900," So, and that's how we verify that the string is a correct direction."
7656900,7658820," So, all right, that's pretty useful."
7658820,7664180," Okay, so we can do ""isPlayerMoving"" and stuff like that."
7667060,7670660," So, if you have physics-based movement, do you calculate that for each player?"
7670660,7672820," Only for your own player?"
7672820,7677220," And just let the others be 3D coordinates that exist in the world?"
7677220,7680020," First of all, we are in 2D coordinates, first of all."
7682420,7685780," So, whether we calculate it for our everybody?"
7685780,7691380," My idea is everybody maintains the state of the game."
7691380,7694580," Server maintains the current state of the game."
7694580,7698500," All of the clients maintain the state of the game and occasionally just sync it up."
7700820,7708180," So, essentially, server and client should run the same code that simulates the entirety of the world."
7708180,7712420," So, everyone simulates everything."
7712420,7716740," So, that's basically how I see that."
7716740,7723380," Maybe it's not the right way to do that."
7723380,7725140," Again, I never developed anything like that."
7725140,7727860," But this is something that I want to try right now."
7731380,7734900," So, I plan to do CSP for reconciliation interpolation."
7734900,7736420," I have no idea what these words mean."
7736420,7737860," Anyway."
7737860,7740420," So, let me see."
7740420,7745380," So, when we are receiving join, is player moving?"
7745380,7750420," This one is rather interesting."
7750420,7751300," So, I have an idea."
7751300,7754100," I want to implement in a common module."
7754100,7757060," In a common module, I want to implement a function ""updatePlayer"","
7757060,7758580," which accepts the player."
7758580,7760900," which accepts the player and also accepts the delta time."
7760900,7762180," Right."
7762180,7764100," And it's going to be shared between client and the server."
7764100,7766660," And the client and the server are probably going to be using different delta times."
7766660,7768740," And we have to take delta time into account."
7768740,7770500," Right."
7770500,7772180," So, what we're going to be doing in here is"
7773220,7777140," we need to iterate all of that stuff."
7777140,7777860," Okay."
7777860,7779780," So, we need another table in here."
7779780,7780820," I want to have a table."
7780820,7784020," Direction."
7784020,7786980," Direction vectors."
7786980,7787700," Right."
7787700,7793460," So, and it's going to be a thing where the key is a direction."
7793460,7796020," Direction."
7796020,7799140," But the value is sort of like a vector."
7799140,7800900," So, I want to use a simple vector."
7800900,7801540," Vector2."
7801540,7805220," Which is going to be an interface."
7808020,7809540," Maybe it could be something like this."
7809540,7811220," I wonder what's the difference between type"
7811220,7816340," full and interface full."
7816340,7819220," There's obviously a difference between them."
7819220,7821700," But I can't figure out which one."
7821700,7822180," So, whatever."
7822180,7825460," So, it's going to be x number, y number."
7826100,7826740," Something like this."
7826740,7828500," So, we have that."
7828500,7832100," And in here, I should be able to define all of the vectors."
7832100,7834660," So, left."
7834660,7835700," So, we're moving to the left."
7835700,7839060," So, it's x minus 1, y, 0."
7839060,7839860," So, we have that."
7839860,7844020," So, then right is 1."
7844020,7852820," Then 0, minus 1, 1."
7853460,7854740," We can even realign."
7854740,7858180," Can you do that?"
7858180,7859940," I fucking think so."
7859940,7860260," Anyway."
7860260,7861540," So, we have direction vectors."
7861540,7863380," And the way I want to do that."
7863380,7867380," How do I iterate an object?"
7867380,7869460," How do I iterate an object?"
7869460,7871140," I think I do it like that."
7871140,7878500," So, it's maybe dir in direction vectors."
7878500,7882900," Direction vectors."
7882900,7888580," And if player moving in that direction."
7888580,7890660," So, what's up with that?"
7890660,7895700," Oh, this is an annoying part of TypeScript, right?"
7895700,7896340," You can't."
7896340,7898820," Yeah."
7898820,7900260," You have to do some stupid shit."
7900260,7902740," Like, let dir directions."
7902740,7903060," Yeah."
7905860,7906340," Anyways."
7906340,7913860," So, if it's moving, we need to keep track of delta x, right?"
7913860,7916580," So, it's going to be 0 and this one is going to be 0."
7916580,7926420," So, in here, essentially, plus direction vectors, direction x, yeah, and this is y."
7926420,7928260," So, we're just iterating."
7928260,7933620," We're just checking all of the direction where player is potentially moving and we're accumulating the"
7933620,7934500," velocity vector."
7934500,7940340," And after that, we're taking the player and we add dx multiplied obviously by delta time."
7940340,7941380," So, that's it."
7941380,7943860," So, this is the piece of code that is very important."
7943860,7949140," And I expect to run this piece of code on both client and server, right?"
7949140,7950180," It's going to be the same logic."
7950180,7956580," If I modify something within this piece of code, that will affect the physics simulation on everybody."
7956580,7958500," Client, server, doesn't matter."
7958500,7960020," It's the shared logic."
7960020,7965700," That's how they know that they're simulating the same thing, by running the same code."
7965700,7971620," But if I were implementing that in a proper programming language like C, C++ or Rust,"
7971620,7975060," I would probably compile it down to WebAssembly, right?"
7975060,7976740," So, it should be the same."
7977380,7980260," So, and I don't want to modify the same piece of code in two places."
7980260,7984420," So, we have that."
7984420,7986180," So, that's pretty cool."
7986180,7990020," Anyways."
7990020,7991460," So,"
7991460,7997940," when the player is moving, when the player is moving."
7997940,8000420," All right."
8000420,8002660," So, let's now handle the messages."
8002660,8005300," So, this should be the server chat."
8005300,8006260," We're looking at the server."
8007700,8008500," So, this is..."
8008500,8011300," We are looking at the connection callback."
8011300,8013140," So, this is not a tick."
8013140,8015540," So, here at this point, we're just accumulating."
8015540,8021220," We're just accumulating the events that we're going to handle on the tick."
8021220,8022980," That's what we're doing here."
8022980,8024740," Cool."
8024740,8029620," So, on the message, we have a raw data."
8029620,8031140," I have no idea what the fuck is that."
8031140,8033460," So, it's probably this stuff."
8033460,8034580," So, this is the data."
8034580,8038900," And I suppose the thing I can do in here is just parse that data."
8038900,8039220," All right."
8039220,8040740," And this is going to be a message."
8040740,8044980," So, and I should be able now to check."
8044980,8050180," Common is player moving."
8050180,8055940," So, I expect the client to send player moving message, which just contains information about"
8055940,8061620," the ID, whether you started moving or stopped moving, and the direction where you started or"
8061620,8062420," stopped moving."
8062980,8063300," Okay."
8063300,8069220," So, if this is a correct message, if this is a correct message, we're going to be..."
8069220,8072500," Yeah, we're going to add it into the event queue."
8072500,8074820," We're going to add it into the event queue."
8074820,8075460," Here is the thing."
8075460,8078420," How do we know?"
8078420,8087860," We need to verify that the ID that is sent in that message equal to the ID, to the correct ID."
8088420,8094580," Imagine if some client sent a player moving, but used somebody's else ID."
8094580,8098180," So, this is something that we need to check, actually."
8098180,8107940," So, if message ID is not equal to the player ID in here, I suppose we have to kick that person out."
8107940,8108500," Right."
8108500,8110500," So, we're going to just literally do WS close."
8110500,8123140," So, we can do something like ""console player ID tried to cheat"
8123140,8131460," by sending message this one""."
8133140,8135780," So, and we instantly close and we don't do anything."
8135780,8138260," Otherwise, right, otherwise..."
8138260,8142180," So, we just schedule that message, right?"
8142180,8148660," So, we do ""queue"", ""event queue"", ""event queue"", ""push"", and just straight up..."
8148660,8150100," Yeah, just put it in there."
8150100,8152980," Since it's called ""event"", that's fine."
8152980,8154100," All right."
8154100,8159620," If we encounter something else, we can say that this message is ""bogus amogus""."
8160180,8165700," Right, so ""received bogus amogus message from client"","
8165700,8170820," and we're instantly closing that client."
8170820,8172580," Fuck that client."
8172580,8173460," Fuck that client."
8173460,8175380," Just closing them up."
8175380,8182980," So, we can also specify the ID of that client, so we know what the fuck is going on."
8182980,8183300," All right."
8185300,8186420," So, yeah."
8186420,8187860," Okay."
8187860,8190500," So, we collected it into ""event queue""."
8190500,8192580," Now, we're going to be handling this thing."
8192580,8192980," All right."
8192980,8199060," So, ""case player moving"", right."
8199060,8199860," So, that's what it is."
8199860,8205460," And in here, we need to find the corresponding player."
8205460,8213300," So, we can do ""message id const player players get""."
8213300,8219620," If somehow we got an ID that is not a player, there's something really wrong going on here."
8219620,8222260," But, I mean, there's nothing much we can do in this case."
8222260,8226580," We can't even ban anyone because we don't even have a socket, right, because we didn't get anyone."
8226580,8229300," So, in that case, I can just only skip this entire thing."
8229300,8230100," All right."
8230100,8231380," So, we're going to be just skipping that."
8231380,8233300," So, once we get the player."
8233300,8241380," So, what we have to do, we have to take its moving and then, depending on the direction,"
8241380,8244020," we either start or stop moving."
8244020,8245620," That's what we do."
8248180,8250260," We either start or stop moving."
8250260,8257940," And after that, I suppose, we need to modify the rest of the mother flippers."
8257940,8267780," So, for each player, we just do ""player ws send"", yeah, literally ""event string""."
8267780,8271380," And let's actually just take this kind of stuff in here."
8271380,8274020," So, we're just sending everyone."
8276980,8280420," So, we're just sending that to everyone."
8280420,8281380," Is that progress?"
8281380,8282420," I think, I think it's pretty progress."
8282420,8283380," So, let's compile it."
8283380,8284980," Well, it almost compiles, okay."
8284980,8289460," Yeah, 89, 89."
8289460,8290980," Oh, it's a semicolon, okay."
8290980,8293220," Jesus, bro, okay."
8293220,8298740," So, ""row data"" is not assignable to parameter."
8298740,8305540," So, there's a kind of a difference between freaking ""on"" and ""messages""."
8306340,8309780," What if I do ""add event listener"" instead?"
8309780,8311300," Is that something different?"
8311300,8313300," So, ""fly check mode""."
8313300,8314740," ""fly check mode"" is not enabled, right?"
8314740,8315940," So, it doesn't like data."
8315940,8318660," And in ""event listener"", yeah."
8318660,8319860," So, this is ""event""."
8319860,8324820," And inside of the event, we can, yeah, we can just take the data."
8324820,8329380," Yeah, I should probably use ""add event listener""."
8329380,8330820," So, what you don't like in here."
8330820,8333140," ""Data is not assignable""."
8333140,8334820," Can I do ""to string"" in that case?"
8334820,8335780," Okay."
8335780,8338980," So, ""data is data""."
8338980,8341780," I mean, it's, for fuck's sake."
8341780,8344660," It's one of the strings, but whatever."
8345700,8347620," So, ""message"", I see."
8347620,8355460," We need to know, we need to now add ""player moving"" to one of the events."
8355460,8357700," ""player moving"" is now one of the events."
8358420,8360340," So, now this thing should compile."
8360340,8360660," Okay."
8360660,8361940," So, ""90""."
8361940,8363460," So, what's up with that?"
8363460,8366740," Oh, it's actually ""event""."
8366740,8368820," ""event""."
8368820,8370580," ""event""."
8370580,8372580," All right, ""compile""."
8372580,8378260," So, it's not going to do anything particularly interesting, per se, honestly."
8378260,8384100," Because we're not updating the players."
8384100,8385860," We're not updating the players."
8387300,8388340," But I think we should."
8388340,8388660," Okay."
8388660,8395380," So, in the tick, after we handled all the events in the buffer that we're accumulating in the callbacks"
8395380,8403220," from the web circuits, after this entire handling, what we have to do is to do the physical simulation."
8403220,8404660," We have to do the physical simulation."
8404660,8405540," We take all of the players."
8405540,8408020," I want to just do four each of them."
8408020,8409300," So, this is the player."
8409300,8413460," And in here, we just do the common algorithm between the client and the server, right?"
8413460,8415540," So, we update the player, like so."
8415540,8416820," And we have to cover the delta time."
8416820,8419700," So, we know the server FPS, right?"
8419700,8425140," So, I assume the delta time to be in seconds, not in milliseconds."
8425140,8432100," So, that means in here, I have to divide it by, you know, one over server FPS, right?"
8432100,8432900," Server FPS."
8432900,8434580," Do I need to know the server FPS on the client?"
8434580,8435380," I don't think so."
8435380,8436900," Actually, I don't think so."
8436900,8441700," Right, so, setTimeout is a motherfucker, it takes in milliseconds."
8441700,8446260," But here, I assume in seconds, because it makes it a little bit easier to do mathematical computations."
8446260,8449620," So, yeah, that's basically what's going on here."
8449620,8450980," So, we're just updating these things."
8452340,8453540," And, yeah."
8453540,8460020," So, you know what's interesting, actually?"
8460020,8468660," It would be kind of nice."
8469940,8479060," So, we're sending player moving to all of the players to notify that somebody started moving."
8479060,8488820," But it would be also kind of cool to use that event as sort of like a keyframe for the movement."
8489700,8492020," So, what I mean is that, listen, listen, listen."
8492020,8495700," Let me see."
8495700,8499060," Player moving."
8499060,8503540," What if it also contained the current player position?"
8503540,8507940," What if it also contained the current player position?"
8507940,8515060," So, essentially, you receive an event that says player started moving."
8515780,8520260," And also, you receive its current position, so you can synchronize it."
8520260,8526980," So, when the player stops moving, you receive the position where the player was when it stopped moving."
8526980,8532100," You don't receive their position between the events when it starts moving and stops moving,"
8532100,8535620," but you receive their position on these keyframes."
8535620,8537700," For the rest of the stuff, you kind of interpolate."
8537700,8539300," Yo!"
8539300,8543220," I was thinking, how often do we synchronize all the states?"
8543220,8545780," What if we only synchronize on key events?"
8545780,8550260," And on just movement and wandering around and stuff like that?"
8550260,8552020," We just assume like a simulation."
8552020,8554500," Yo!"
8554500,8555460," This is actually kind of cool."
8555460,8562020," And since we're using the same code for simulating on both client and server,"
8562020,8564340," it can be kind of similar."
8564340,8565380," They can be close."
8565380,8566260," They're going to be close."
8566260,8568340," Should be okay."
8568340,8568580," Yeah."
8569140,8577220," So, for the situations when the two players move continuously for a very long time without"
8577220,8580580," synchronization, we can do a very interesting thing."
8580580,8590660," What if we just randomly pick a pair of the players and just randomly synchronize them?"
8590660,8591220," Every tick."
8591220,8596180," Not everyone with everyone, but a random pair each tick."
8596180,8603140," So, we synchronize the positions on key events, right?"
8603140,8607700," So, when key event happens, that player says, okay, I'm currently at that position."
8607700,8612180," And also, once in a while, we randomly pick a pair and we just synchronize them."
8612740,8615940," Yeah, it kind of goes into decentralization and stuff like that, right?"
8615940,8621780," So, yeah, that's kind of interesting."
8621780,8628820," But the fact that we're using this event for both"
8628820,8638660," notifying the server that client starts moving and also for notifying clients that somebody starts"
8638660,8640980," moving. It's kind of concerning, right?"
8640980,8644580," So, because look, you have to supply an ID."
8644580,8646980," ID is only needed when we notify the clients."
8646980,8652180," The server doesn't give a shit about ID because it knows the ID of that client."
8652180,8657380," And this is the reason why, by the way, we do this weird validation with bogus amogus messages, right?"
8657380,8659620," So, that's the reason why we do that."
8659620,8663220," But now, we also edit X."
8663220,8669220," So, that means the player can lie about not only their ID, but also about their position."
8669220,8670820," So, we also need to validate that."
8670820,8674500," But do we need to validate that?"
8674500,8675940," That's the real question in here."
8675940,8677940," Do we need to validate that?"
8677940,8682980," Or maybe it has to be two separate messages."
8685380,8693460," The one that is sent from the client to the server that doesn't contain, you know, ID, X and Y because"
8693460,8694900," server already knows them."
8694900,8701300," And the one that is sent from server to the rest of the clients that contains ID, X and Y."
8701300,8707540," I think the code is trying to tell us that these two things should be separate messages."
8707540,8713060," This should be like, okay, so this is the thing that you sent from the client to the server to notify."
8713060,8717140," Okay, I'm starting to move in that direction or stopping moving in that direction."
8717140,8721940," And this is the one that server sends to..."
8721940,8722660," Yeah, I'm moving."
8722660,8723220," Yeah, why not?"
8723220,8728980," So, I'm moving."
8737700,8740420," Right, so, like, you kind of need that, right, because..."
8740420,8746340," So, when you send it from client to the server, that is information that server"
8746340,8749860," already fucking knows about you from just your connection."
8749860,8752260," You don't need to send that."
8752260,8758980," If you force people to send that, you introduce more surface area for line and bugs and stuff like that."
8758980,8760100," These things should be separate."
8760980,8764660," Okay, so, I think this tab has to be separate."
8764660,8766420," That actually kind of makes sense."
8766420,8769620," All right, so, and in here, let's do..."
8769620,8773140," Clear place, player moving."
8773140,8774420," I'm moving."
8774420,8777940," I'm a fire in Malaysia."
8777940,8784260," Oh, by the way, I also need to add X and Y in here."
8784260,8787060," Okay, so, it's going to be X and this is going to be Y."
8787060,8788580," All right."
8788580,8793620," Okay, so, this is a separate thing."
8793620,8799860," Yeah, I'm a moving."
8799860,8807860," Okay, now, in a server, when we receive a message, we're not receiving is player moving."
8807860,8808340," We don't care."
8808340,8810660," We're receiving is I'm a moving."
8810660,8813300," Right, and that means we don't even have to verify."
8813300,8815300," Look, message doesn't even contain ID."
8815300,8822900," And in here, what we have to do, we have to send a kind player moving."
8822900,8826740," And we can specify the ID."
8826740,8828020," It's the ID of this thing."
8828020,8831940," X and no, no, no, it has to be taken from the player."
8831940,8836340," Right, so player X, Y player Y."
8836340,8840020," And what does the rest of this stuff start?"
8840020,8841780," is the message start."
8841780,8847060," Honestly, we could have extended player moving as I'm a moving."
8847060,8849940," But I think it's not a productive way to think about it."
8849940,8852260," Because it may change in the future."
8853220,8855460," So, this is direction and this is direction."
8855460,8857460," Yeah, there we go."
8857460,8867620," So, server receives I'm a moving and then transforms it into player moving and handles it on the next tick."
8869300,8871380," That's a good way to think about it."
8871380,8872900," And that's a very good way to think about it."
8872900,8873540," I really like that."
8873540,8885300," What's interesting is that the client sends I'm moving and it will receive back player moving with its ID to confirm that server actually, you know, agrees."
8885300,8888180," Right, so it confirms the server receives that message."
8888180,8889540," Right."
8889540,8894660," So, I'm sure how the random reconciliation will work on long key presses."
8894660,8895940," I'm interested to find out."
8895940,8899140," Yeah, it's kind of interesting."
8899140,8901220," But I don't think I'm going to be implementing it today."
8901220,8903220," Right, so we're probably going to implement it a little bit later."
8904020,8907140," Okay, so what else do we have in here?"
8907140,8908340," So, does it compile?"
8908340,8909460," It seems to be compiled."
8909460,8914340," So, I need to update the player, the client specifically."
8914340,8915300," I need to update the client."
8915300,8917780," So, when..."
8917780,8920660," Yeah, when I receive..."
8920660,8922980," I also need to receive the..."
8922980,8926580," ""Is player moving?"""
8926580,8928020," Right, ""Is player moving?"""
8928020,8932100," When the player is moving, what I have to do is essentially"
8933140,8934260," get the player ID."
8934260,8936660," Right, so I need to get the player's ID."
8936660,8937780," Who's currently moving?"
8937780,8940420," So, it's going to be ""players get message ID""."
8940420,8941780," So, this is the client already."
8941780,8944580," Right, on the client, we receive player moving."
8944580,8946660," We get the player associated with that ID."
8946660,8950980," Right, and we updating their movement."
8950980,8956580," So, it's going to be ""message direction start""."
8956580,8960340," Right, and it doesn't like something in here."
8960340,8962260," Oh, because we never checked if the player"
8962260,8966180," is undefined, so player undefined."
8966180,8967140," Okay."
8967140,8973140," So, if servers send us an ID of the player that we do not recognize,"
8973140,8976900," there's some bug with the server or some bug with the client."
8976900,8981780," At that point, I guess we received a bogus amogus message yet again."
8982580,8988500," We can maybe elaborate what exactly is wrong in here."
8988500,8999380," We don't know anything about player with the ID of the message ID."
8999380,9002580," Right, so bogus amogus message."
9004420,9010260," So, if it's equal to none, it still doesn't like something in here."
9010260,9015300," Possibly undefined, but didn't I check if it's undefined?"
9015300,9018180," I probably have to do return, right?"
9018180,9021220," So, because this is, yeah."
9021220,9024180," So, in case we just return in here, there we go."
9024180,9025140," Everything's fine."
9025140,9028900," Yeah, we don't have to delete anything and all this thing."
9028900,9031860," Right, so here we stop moving or stopping moving."
9031860,9032740," It doesn't really matter."
9032740,9036980," But message on top of that contains x and y."
9036980,9043140," So, that means for that specific player, we can just synchronize their x and y."
9043140,9049860," Right, so we received the message that indicates whether the player started moving or stopped moving."
9049860,9054900," It contains x and y of that player from the authority, from the server,"
9054900,9056420," and we synchronize it instantly."
9056420,9058900," So, this is the point at which we're synchronizing this stuff."
9060740,9066980," All right, so, and in here, as we render the players, as we render the players,"
9066980,9072580," look, look, we're iterating them, and nothing really stops us to update them,"
9072580,9076100," right, because we have the same code that the server uses to update them."
9076100,9079300," Right, we can do the player, and we can use data time."
9079300,9081220," Finally, the useful data time."
9081220,9084100," So, finally, the useful data time."
9084100,9086180," It does compile, it seems to be compile, actually."
9088260,9096740," So, okay, we can get notified by the movement, but we don't know how to send that we're moving."
9096740,9099700," Right, so we need to handle the key process."
9099700,9101140," Right, let me go to raycasting."
9101140,9104500," Right, let me go to raycasting."
9104500,9109460," And in raycasting, so this is what we'll need in here."
9109460,9113140," I think I'm going to copy paste this entire thing, right, from the raycaster."
9114580,9120820," So, in here, when I'm moving up, you know what?"
9120820,9122660," Can I have a mapping?"
9122660,9125300," Something like key bindings."
9125300,9127460," Key bindings."
9127460,9130900," Direction keys."
9132100,9135140," Right, so here we have a key in direction."
9135140,9139460," Right, and direction is a type from the common."
9139460,9140980," Emacs."
9140980,9142180," Could you, could you please stop?"
9142180,9142980," Thank you very much."
9142980,9143540," Okay."
9143540,9145860," So, and in here we're going to have a string."
9145860,9147060," Right."
9147060,9150580," And so, essentially, what I can do, I can say that"
9151380,9155300," left is arrow left."
9155300,9158580," Boom."
9158580,9162340," Up, boom."
9162340,9165780," And could replace up, down, boom."
9165780,9167300," Something like that."
9167300,9174740," So now, when I get the code, I can do direction keys, ecode."
9175700,9182500," Right, and so this is the, actually, I'm gonna need it."
9182500,9184500," So, it has to be the other way around, right."
9184500,9187060," So, we have to, you know, do something like this."
9187060,9188740," Look, look, look, look."
9192180,9194900," Can your Vim do that?"
9194900,9199380," Can your Vim do that?"
9199380,9208340," Chat, for those who's, who was sleeping, I'm gonna, I'm gonna show you one more time."
9208340,9209140," Look, look, look."
9209140,9214260," Can your Vim do that?"
9219140,9221860," So here, so essentially, this is just that."
9221860,9227620," I suppose this has to be just a string into directions."
9227620,9232500," My intelligence can do that."
9232500,9233140," Okay, whatever."
9233140,9240980," So, it's string, it refers to a type, but it's used as a key value."
9240980,9246580," Can you do something like this?"
9246580,9247620," Oh, hell yeah."
9248260,9253780," So, it also, direction, locally, but not exported."
9253780,9255780," Okay, so let's go here."
9255780,9258660," So, let's export all that stuff."
9258660,9260820," Okay, so this is the key."
9260820,9264420," Okay, so we have direction keys."
9264420,9274900," So now, we can do direction and if direction is not equal to null."
9276580,9281380," What do we do, we are about to send something very important."
9281380,9287220," So, first of all, I think we have to, depending on our player,"
9287220,9292980," depending on our player, we could just get..."
9297700,9309540," Alright, let's go ahead and just do the sending send json string define and we're going to have a kind which is ama moving."
9309540,9312420," What do we have in there in ama moving?"
9312420,9313860," We have start."
9313860,9317300," So, since key down, it is start, in fact."
9318580,9326820," And direction, direction is direction though we can just call this thing direction."
9326820,9330260," Is it fine?"
9330260,9332820," What you don't like in here?"
9335220,9336980," No value exists in the scope."
9336980,9341140," Are you fucking serious?"
9341140,9344100," So, you don't like something..."
9344100,9346980," Oh, it's undefined actually."
9346980,9348340," Okay, undefined."
9348340,9352260," Oh, it's too many equals."
9356660,9357940," Why doesn't it compile?"
9357940,9359300," This is javascript, right?"
9359300,9361620," So, you're supposed to write like that in javascript, right?"
9361620,9363620," So, this is a valid javascript."
9363620,9366180," The more equals you have, the better, right?"
9366180,9367780," So, the stronger typed it is."
9367780,9369300," Right?"
9369300,9371060," That's how it works."
9371060,9373140," Okay."
9373140,9374980," So, we need something like this."
9376180,9384900," And on a key app, up, not app, up, we have to just put false in there, right?"
9384900,9388180," It's kind of the same, but just false."
9388180,9388740," Does it compile?"
9388740,9390100," It doesn't even fucking compile."
9390100,9390420," Okay."
9390420,9391860," So, something about the players."
9391860,9395620," 4, uh-huh, 14."
9395620,9395940," Okay."
9395940,9396980," So, everything compiles."
9396980,9399060," All right."
9399060,9405860," So, I don't see what else do we need in here, honestly."
9406180,9407620," I don't see what else do we need in here."
9407620,9409540," I think that's basically it."
9409540,9411460," I feel like that's basically it."
9411460,9413700," Okay."
9413700,9418420," Um, it didn't work."
9418420,9419940," Okay, let me take a look at the console."
9419940,9422420," Um..."
9422420,9427140," Perl has this..."
9427140,9430900," I think this is matching the regular expression, if I remember correctly."
9430900,9432660," I programmed a little bit in Perl."
9433220,9438500," On one of the jobs, we had Perl as part of the tooling."
9438500,9438980," Yeah."
9438980,9440340," So, I kind of vaguely remember that."
9440340,9443460," Kind of vaguely remember that."
9443460,9443940," All right."
9443940,9446340," So, something is sus."
9446340,9449140," Something is sus."
9449140,9452660," So, here is the arrow."
9452660,9455060," It really didn't work, honestly."
9456180,9458980," And we didn't even receive any new messages."
9458980,9462180," So, it really didn't send them."
9462180,9470980," So, we didn't send them."
9470980,9472900," And the server didn't receive them."
9472900,9476580," Uh, we don't even log that."
9476580,9476900," Right."
9476900,9481300," So, I think on the server, we have to at least try to log that."
9481300,9482900," Um, so..."
9482900,9487140," Received message"
9487140,9490180," from player"
9490180,9492820," id."
9492820,9495220," And the message is"
9495220,9497380," message."
9497380,9498580," All right."
9499220,9501460," So, this is something that we have to do in here."
9501460,9503700," All right."
9503700,9505700," Okay."
9505700,9506740," And if I go up."
9506740,9509620," Received message object."
9509620,9512180," It didn't even render it properly."
9512180,9512580," Yeah."
9512580,9515060," So, probably have to do something like this."
9515060,9517940," Uh-huh."
9517940,9521220," Received message, blah blah blah."
9521220,9526340," One more time."
9526340,9528740," Wait."
9528740,9530180," Oh, shit."
9530180,9535460," It works."
9535460,9536900," It worked for up and down."
9536900,9540980," But then it doesn't work for left and right."
9540980,9542820," Yo, it works."
9542820,9544180," It's a lie."
9546020,9546500," Okay."
9546500,9547460," That's very interesting."
9547460,9550580," So, for left and right, it didn't work."
9550580,9555540," So, direction keys."
9555540,9556420," Let me see."
9556420,9557700," So, maybe you fucked up something."
9557700,9560500," So, ray casting."
9560500,9563540," You only scrolled the page."
9563540,9564180," Ow, fuck."
9564180,9564660," Okay."
9564660,9565860," So, I just scrolled the page."
9565860,9566900," It didn't actually work."
9566900,9568100," Yeah, yeah."
9568100,9568340," Okay."
9568340,9568740," Thank you."
9568740,9569220," Thank you so much."
9569220,9570820," It's a fake one."
9570820,9575460," All right."
9576020,9583220," So, we did, on the server, we did receive armor moving."
9583220,9583940," Right."
9583940,9585220," We did, in fact, receive."
9585220,9586980," We logged that and stuff like that."
9586980,9589060," And then we moved into here."
9589060,9590820," Player moving."
9590820,9591940," When the player moving,"
9591940,9595060," we get the players."
9595940,9597700," we updated this stuff."
9597700,9603060," And we want to send this thing back to everyone."
9603060,9606580," When the client said prediction."
9606580,9609220," It's already, we're already implementing it."
9609220,9615060," So, this is bizarre."
9615060,9615940," I don't understand."
9615940,9620260," Like, it should add that to the event, but we didn't receive it in here."
9620260,9620740," All right."
9620740,9634260," So, let's say, I received event event."
9634260,9636260," So, let me see."
9636260,9639060," I'm going to restart this thing."
9644180,9645540," It's horrible to test the debug."
9645540,9645860," True."
9645860,9649300," Yeah, we received event."
9649300,9650260," Everything's fine."
9650260,9655780," Then, event string."
9655780,9659940," So, I don't see us sending them."
9659940,9661860," Like, why didn't we receive it back?"
9662740,9663860," That's the real question."
9663860,9666100," We should have received it back."
9666100,9668500," So, I don't see any problem."
9668500,9674740," I don't see any problem."
9674740,9675300," Right."
9675300,9677460," So, everything is correct in here."
9677460,9678740," So, we're sending it back."
9678740,9680900," So, that means something in the client."
9680900,9682820," Right."
9682820,9684900," So, is player moving?"
9684900,9687620," So, we get the player."
9687620,9690180," All right."
9690180,9692260," So, maybe we should log this thing in here."
9692740,9698420," Let's actually log all of the messages we received."
9698420,9701220," Received."
9701220,9704260," Message."
9704260,9705300," Message."
9705300,9707060," All right."
9707060,9710660," So, maybe something is wrong in here."
9710660,9714900," Okay."
9714900,9715940," We're receiving them."
9715940,9717140," We're actually receiving them."
9719140,9726900," Are we actually updating shit?"
9726900,9728260," That's the real question."
9728260,9729300," Maybe..."
9729300,9730820," Oh, by the way."
9730820,9732260," I can probably see that even."
9732260,9738340," They're not updating."
9738340,9742180," And the reason why they're not updating is because I'm a dummy dum-dum."
9747540,9749540," It's equal to one for fuck's sake."
9749540,9750580," All right."
9750580,9751860," So, probably have to..."
9751860,9753220," Let's introduce player spin."
9753220,9755540," It was moving."
9755540,9757300," It was just moving very slowly."
9757300,9760100," Okay."
9760100,9761860," So, maybe something like this."
9761860,9763380," All right."
9763380,9763780," Let's go."
9772500,9772900," Okay."
9772900,9773620," It is updating."
9773620,9776260," All right."
9776260,9776740," Look at that."
9776740,9779220," Look at that."
9779220,9779780," Look at that."
9779780,9783380," So, it's moving and stuff."
9783380,9786340," And now, the moment of truth."
9791220,9793540," So, local host."
9793540,9798980," All right."
9798980,9799940," That's very interesting."
9799940,9802020," It's updating all of them."
9802020,9805540," I think..."
9805540,9808020," Damn, this is dumb."
9808020,9809540," Close lol."
9809540,9809780," Yeah."
9809780,9816340," I swear to god, if this is because of some stupid shit, like..."
9816900,9817220," Okay."
9817220,9822180," In this specific case, which player does it return to?"
9822180,9823060," Does it refer to?"
9823060,9825460," Does it refer to this one?"
9825460,9828180," Or does it refer to this one?"
9833620,9835700," So, does this player shadow this one?"
9835700,9842820," Other player, other player."
9842820,9846820," Oh, no, no, no."
9846820,9847460," Wait a second."
9847460,9849620," This should not be the case."
9849620,9852580," Yeah."
9852580,9853780," So, here's fine."
9853780,9855620," It is shadowed."
9855620,9855860," Like..."
9855860,9856020," Yeah."
9856020,9856980," That would make sense to me."
9856980,9859300," Okay."
9859300,9862500," So, this one is shadowed."
9862500,9864260," So, here we're just updating the player."
9864260,9864340," Okay."
9864340,9865860," So, maybe it's something with the clients."
9865860,9871860," For each player..."
9871860,9884260," So, maybe it's not using ID correctly."
9884260,9885220," All right."
9885220,9887300," Let me take a look at what ID is it using."
9891700,9895620," So, this is ID 1."
9895620,9896820," And in here..."
9896820,9903540," What do we have in here?"
9903540,9905300," Let's refocus."
9905300,9908660," Yeah, it's ID 0."
9908660,9912260," But why are they sharing..."
9912260,9925540," This is so stupid."
9925540,9927940," Because we don't clone this shit."
9927940,9932660," Remember how we introduced this default moving and being smug?"
9932660,9933060," It's like..."
9933060,9934740," Oh my god."
9934740,9935460," This is so dumb."
9935460,9938180," But I mean, luckily we have a direction vector."
9938180,9940740," So, we can just go ahead and replace this thing."
9940740,9942020," Right."
9942020,9945140," So, instead of doing that, we have direction vectors."
9945140,9946820," And they're not going to change."
9946820,9948180," So, we can use that instead."
9948180,9949540," All right."
9949540,9951220," So, that was dumb."
9951220,9954980," But I'm in streaming already for almost four hours."
9954980,9958020," So, I think it's fine for me to be dumb."
9960820,9961140," Right."
9961140,9962020," Where is this?"
9962020,9963140," So, we don't have default."
9963140,9964180," Why don't you show me..."
9964180,9965540," Yeah."
9965540,9966820," So, this is what I'm talking about."
9966820,9969620," So, this is going to be left."
9969620,9972660," So, we have to have separate things in here."
9972660,9975460," Right, up and down."
9975460,9980100," And this is the server, of course."
9980100,9982020," And in here, default."
9982020,9986020," Okay."
9986020,9987220," Everything seems to be compounded."
9987220,9987460," Cool."
9987460,9992420," All right."
9992420,9992980," So, what do we have?"
9992980,9995220," Are we moving around?"
9995220,9995780," Are we moving?"
9995780,9996340," Are we gucci?"
9996340,9997060," Are we tamaguchi?"
9997060,9998900," Where seems to be tamaguchi actually, chat?"
9998900,10001460," Let's create a second one."
10001460,10004740," Hello."
10004740,10006180," Ah!"
10010100,10010980," Okay."
10010980,10012660," Very cool."
10012660,10021860," So, I want them to have like different colors and shit, honestly."
10021860,10025460," I think we could randomize the colors."
10025460,10028260," Deploy to your mom."
10028260,10030580," I'm actually a little bit scared to deploy to my mom."
10030580,10030740," Okay."
10030740,10032660," So, let's..."
10032660,10034660," It's so fucking fun."
10034660,10036340," It's just like, yeah, it disappears as well."
10040100,10041380," I'm going to close that."
10041380,10044500," Damn, this is so cool."
10044500,10046660," It's a little laggy, but meh."
10046660,10047700," Yeah."
10047700,10051300," It is what it is."
10051300,10055860," It's also on my machine, because my machine kind of lags a little bit as well."
10055860,10057220," All right."
10057220,10059700," So, that seems to be gucci."
10059700,10060100," You know what?"
10060100,10062020," I want to kind of commit whatever I have in here."
10062020,10063780," All right."
10063780,10064820," So, git init."
10066420,10066740," Yeah."
10066740,10075220," So, maybe git ignore node modules, like so."
10075220,10077140," And..."
10077140,10079620," Do we need everything?"
10079620,10080980," I think we need everything."
10080980,10081380," Okay."
10081380,10083060," So, let's actually commit everything just in case."
10083060,10084500," And golden source maps, why not?"
10084500,10086100," Right."
10086100,10089060," Ready, set, go."
10089620,10092500," And I don't have anywhere to push, so it's fine."
10092500,10094500," Okay."
10094500,10097700," So, let me think."
10097700,10100660," We need to add colors, I suppose."
10100660,10107540," We need to have colors."
10107540,10108980," So, this is going to be common."
10108980,10112900," MTS and interface player."
10114340,10115540," So, we can actually..."
10115540,10120260," We can make the server assign style to you."
10120260,10122740," HSV is a good idea."
10122740,10126820," So, let's not let the clients decide their color."
10126820,10130100," Let's let the server, because it will just make it easier to validate, right?"
10130100,10134260," So, because it's not the string that we receive from the client that we have to"
10134260,10136020," make sure that it's safe and stuff like that."
10136020,10139700," It's like one of the predefined string from the server, so you can kind of trust it."
10140500,10142980," So, let's call it style, right?"
10142980,10144020," So, it's going to be style."
10144020,10147460," And let's go to the server."
10147460,10148420," And in here..."
10148420,10158740," So, we're going to have flycheckmod next, flycheck next, next, yeah, there we go."
10158740,10160740," So, style."
10160740,10162500," Let's say random style."
10162500,10166580," So, this is going to be a function"
10168980,10171060," that just returned you a new string."
10171060,10173140," So, it's going to be HSV, right?"
10173140,10174980," So, HSV..."
10174980,10180100," CSS style HSV."
10180100,10181460," So, let me see."
10181460,10187380," So, I would say HSL."
10187380,10188500," That's fine."
10188500,10190900," All right."
10190900,10193460," So, it's also in % that you don't even put..."
10193460,10195620," Yeah."
10196660,10199540," So, the first one is Hue, which is in degrees, I suppose."
10199540,10201700," And then the rest of the stuff is in %."
10201700,10202740," Right."
10202740,10208580," So, the thing that we're going to randomize is Math is the degrees."
10208580,10212180," Multiply it in 360."
10212180,10214820," And I suppose also I want to do MathLore."
10214820,10217140," All right."
10217140,10219220," So, that's the one thing that we're going to do in here."
10219220,10220740," And then the rest of the stuff."
10220740,10221620," So, saturation."
10221620,10225380," Let's make it saturated to 80% and lightness."
10225380,10230020," Lightness, let's set to 50%."
10230020,10230340," All right."
10230340,10231380," So, this is going to be that."
10231380,10233860," So, does it compile?"
10233860,10236900," 41 something doesn't like."
10236900,10240420," So, what's up with that?"
10240420,10241140," What's up with that?"
10241140,10242100," I don't understand, bro."
10243380,10245540," There's no sign of the parameter player with circuit."
10245540,10247540," Style is incompatible."
10247540,10248580," There's no sort of number."
10248580,10250660," String."
10250660,10253220," Cool."
10253220,10254100," So, now it's client."
10254100,10256500," Put it down."
10256500,10265860," So, I suppose player_joint has to be part of the player_joint."
10265860,10266180," Okay."
10266180,10268580," Player_joint."
10268580,10270500," Style."
10270500,10271700," String."
10271700,10272900," Yeah."
10272900,10276180," And I should not forget, by the way, to add this."
10276180,10282420," Again, if only type script just generated this kind of stuff for me automatically."
10282420,10283540," It's not that hard."
10283540,10285220," Like, it's not even that much code."
10285220,10286500," Bruh."
10286500,10293380," I'm pretty sure there is a very, very good and strong excuse to not do that."
10293380,10294180," I'm pretty sure."
10295300,10296900," So, hsl."
10296900,10298100," What do you say in hsl?"
10298100,10298660," Why are you saying?"
10298660,10299380," Are you trolling me?"
10299380,10303860," So, oh, hsl."
10303860,10304100," Yeah."
10304100,10306420," What else do we have?"
10306420,10310740," So, client, client, client, client, client, client, client."
10310740,10311700," What is that?"
10311700,10314580," 42 style."
10314580,10316580," So, we are receiving that in here."
10316580,10320980," So, this is going to be style message style."
10320980,10321460," Let's go."
10321460,10322900," Cool."
10324020,10326580," And on the server, yet again, 43."
10326580,10330340," So, push event."
10330340,10331860," Aha."
10331860,10333460," I see."
10333460,10336180," Let's do const."
10336180,10337860," Style."
10337860,10340180," Style."
10340180,10344980," Aha."
10344980,10346420," And here, style."
10346420,10349220," Compiles."
10349780,10351220," So, now we have styles."
10351220,10354900," And on the client, when we are rendering this entire stuff,"
10354900,10361940," what we're doing, we're setting player style as the fill style."
10361940,10363940," So, that's how we do that."
10367940,10370180," TS with runtime checks, runtime script."
10370180,10385700," You can actually kind of feel that TypeScript was created by computer scientists."
10385700,10389860," So, they take correctness over convenience every fucking time, every single time."
10390420,10390740," Right."
10390740,10393300," So, for them, correctness is way more important than convenience."
10393300,10396420," It's actually kind of funny."
10396420,10401540," So, unlike JS, true."
10401540,10403540," True, true, true."
10403540,10406660," I'm checking this number."
10406660,10407060," Okay."
10407060,10408020," So, let me see."
10408020,10409540," Thank you so much, common."
10411700,10412980," We can actually do something like."
10412980,10415380," Let's do a string."
10415380,10416580," Stern."
10416580,10419220," Is number."
10419220,10424580," Number, string, boom."
10424580,10425540," Okay."
10425540,10427780," That's pretty cool."
10427780,10432340," Let's restart the server."
10432340,10433140," Let's restart the server."
10433140,10445060," Okay, so it looks like a bogus amogus message."
10445060,10448020," Yeah, so it's a bogus amogus."
10448020,10455780," So, we received an object, which is player joined, and we didn't receive the style."
10455780,10460900," Yeah, player joined, which is kind of weird."
10462260,10465300," So, I swear to God, if this is the cache."
10465300,10466340," All right."
10466340,10467860," So, yeah."
10467860,10468980," So, this is the style."
10468980,10469780," Everything's fine."
10469780,10474180," What if the random style is white?"
10474180,10476180," No, it will never happen."
10476180,10481940," So, we are using HSL."
10481940,10483620," We're not using RGB."
10483620,10486340," We're using HSL."
10486340,10489220," So, what HSL stands for?"
10489220,10491380," HSL stands for hue."
10491380,10495700," Hue, saturation, saturation, value."
10495700,10501620," Hue is a specific pure color."
10501620,10504500," It's a specific pure color."
10504500,10506340," White is not a color, actually, by the way."
10506340,10509460," So, it's a specific pure color, like in rainbow."
10509460,10510820," Right?"
10510820,10514180," Well, light, lightness, whatever."
10515700,10520260," saturation, saturation is how much of that color you have."
10520260,10524020," And lightness is how bright it is."
10524020,10530500," To encode white color in this color system, hue doesn't matter."
10530500,10532420," You can put whatever hue you want."
10533220,10540100," saturation, the amount of color, has to be zero and lightness has to be 100%."
10540100,10544660," This is how you encode white color in this system."
10545460,10556660," Now, look, we always set saturation to 80%, we always set lightness, brightness to 50%, and we only randomize the hue, the pure color."
10557380,10561540," With this kind of setup, it is impossible to get white."
10561540,10562980," At all."
10562980,10563540," At all."
10563540,10564420," It is by design."
10564420,10567540," Lightness is alpha."
10567540,10568420," No, it's not alpha."
10568420,10570020," It's brightness."
10570020,10571380," Actually."
10571380,10573700," You guys never worked with HSL?"
10573700,10574020," Really?"
10574020,10576500," Okay, well, let me actually start up an inkscape."
10576500,10580660," Like, learn how to work with HSL."
10580660,10584980," HSL is really convenient for humans to reason about."
10584980,10586740," RGB is for computers."
10586740,10590900," This is how computers store the color."
10590900,10595300," But for a human being to reason about color, you better use HSV."
10595300,10596100," I'm telling you."
10596100,10600260," Right, so let's actually take this kind of thing."
10600260,10602340," Some sort of background."
10602340,10604980," Right, and here I have HSV."
10604980,10607460," Right, HSL, HSV, it doesn't really matter."
10607460,10611140," So, this works slightly differently, but the principle is the same."
10611140,10614340," Look, I'm increasing the amount of color."
10615060,10616820," It becomes super saturated."
10616820,10619140," I decrease the amount of color."
10619140,10620820," It basically goes towards white."
10620820,10623620," I change the value."
10623620,10625460," It becomes darker, brighter."
10625460,10630500," But then I can fixate the amount of color and the brightness of the color."
10630500,10632580," And then pick the specific hue."
10632580,10635540," This is how you work."
10635540,10639140," This is how hue, saturation, value, lightness..."
10639140,10640820," They're slightly different, but it doesn't matter."
10640820,10642500," Alpha, as you can see here, is a separate thing."
10643060,10645140," So, this is how this model works."
10645140,10648900," If you're designing something or if you're drawing something,"
10648900,10651700," this is how you want to reason about the color."
10651700,10653060," Not in terms of RGB."
10653060,10654580," Because this is way more convenient."
10654580,10657700," Because again, you will never get a white color in here."
10657700,10663940," So, we fixate saturation and lightness and we randomize only this part."
10663940,10665140," We randomize only this part."
10665140,10668020," As you can see on this part, you don't have any white color."
10668020,10668660," Does it make sense?"
10668660,10673540," What's the technical difference between HSV and HSV?"
10673540,10674580," So, I don't remember, honestly."
10674580,10678100," I really don't remember."
10678100,10687220," But usually, the third one is responsible for how bright or dark or something."
10687220,10689540," There are some differences, but I don't remember them."
10689540,10690900," So, yeah."
10690900,10692420," In here, it should not matter."
10692420,10693140," It should not happen."
10695140,10695380," Yeah."
10695380,10696660," I also use them interchangeably."
10696660,10701140," Okay."
10701140,10702900," So, I think there's something with the cache."
10702900,10704580," So, player join."
10704580,10705940," Did we receive the style?"
10705940,10707620," We still didn't receive the style."
10707620,10709140," So, what was the problem, by the way?"
10709140,10709860," What was the problem?"
10710820,10711300," Oh, yeah."
10711300,10716900," This player join style string."
10716900,10719620," Oh, I didn't restart."
10719620,10720020," So, okay."
10720020,10722660," So, we went on a tangent a little bit."
10722660,10724980," Okay."
10724980,10726420," So, did we receive shit?"
10726420,10730820," We still didn't receive the message."
10730820,10732180," Where is the style?"
10732180,10733620," So, did we forget to recompile?"
10733620,10735620," All right."
10735620,10736820," So, let's take a look at the server."
10736820,10738500," On the connection."
10739460,10739780," Okay."
10739780,10741060," So, here is the player."
10741060,10745220," And then we queue player join."
10745220,10748580," Am I going insane, chat?"
10748580,10753140," Maybe it didn't recompile."
10753140,10756820," All right."
10756820,10764020," Why don't you send the style?"
10764020,10765940," Where is the style?"
10765940,10768180," So, it's an old player joined."
10768180,10769380," What the fuck is wrong with you?"
10769380,10772020," It's..."
10772020,10777540," I construct one of the player joins manually."
10777540,10782900," Yeah."
10782900,10786580," This is a very dangerous thing."
10786580,10789060," This is a place where you can shoot your leg."
10789060,10793940," So, there is no way to, like, at compile time to know that you need to modify this place."
10793940,10796580," This is a very dangerous one."
10796580,10797460," So, style."
10797460,10799300," Style."
10799300,10804340," Make this place more type safe."
10804340,10805380," Yeah."
10805380,10806980," All right."
10814580,10814980," Okay."
10814980,10815380," Here it is."
10815380,10815780," All right."
10815780,10817940," Very cool."
10817940,10824260," All right."
10824260,10826980," I don't like this color."
10826980,10827380," Yeah."
10827380,10828340," It's a little bit better."
10828340,10834020," Go away."
10837220,10847140," One of the things I want to try to do, by the way, I want to limit the boundary where you can move."
10847140,10850500," Okay."
10853380,10854980," add style to the player."
10854980,10858420," Wrap around."
10858420,10860020," We can try to wrap around, actually."
10860020,10866740," So, but the wrap around is going to be kind of dumb, if that's okay with everyone."
10866740,10871300," So, I can try to do..."
10874020,10875140," Now, where is the update?"
10875140,10889940," So, can I just do something like..."
10889940,10893460," world width."
10893460,10896420," World height."
10896420,10898260," All right."
10898260,10898740," Is it compiled?"
10898740,10899780," Seems to be compiled."
10899780,10900100," Cool."
10900100,10900820," Let's restart it."
10903620,10906100," So, essentially here..."
10906100,10908740," It didn't work."
10908740,10912420," Excuse me."
10912420,10917460," Okay."
10917460,10920020," Did it?"
10920020,10921620," Okay."
10921620,10929220," I'm doing the correct thing."
10929220,10930020," I'm already tired."
10930020,10932820," Doing very stupid shit."
10933620,10935540," I'm going to do here..."
10935540,10939780," Plus."
10939780,10945700," What is it called?"
10945700,10947220," World width."
10947220,10948820," Come on."
10948820,10956260," World height."
10956260,10959380," World height."
10959380,10959940," Okay."
10959940,10959940," Okay."
10959940,10968020," Oh my god."
10968020,10969060," It's that mode."
10969060,10971860," Fucking javascript."
10971860,10977060," You implemented it as fmod and you couldn't even implement it properly."
10977060,10977620," It's so dumb."
10977620,10979220," Anyways."
10979220,10979780," Okay."
10979780,10982340," So, proper mode."
10982340,10985220," This is where to go."
10985220,10985860," JavaScript."
10985860,10992740," Okay."
10992740,11000740," So, this one is going to be..."
11004340,11016420," A, number, B, number, number, number, number, a plus b plus b plus b."
11016420,11016660," All right."
11016660,11018340," Let's go."
11018340,11021780," Cool."
11021780,11025140," Okay."
11025140,11025860," It's kind of dumb."
11027060,11028580," It kind of teleports it."
11028580,11028980," Right."
11028980,11032660," So, but I think it's reasonable enough."
11032660,11036340," Okay."
11036340,11043300," Okay."
11043300,11044740," So, let me see."
11044740,11053460," It's kind of cool that now I only modified the common part and it's automatically applied to server and the client."
11053460,11058580," So, let's try to do the next thing."
11058580,11064740," Wrap around the place."
11064740,11066900," Okay."
11066900,11071060," So, my server is actually kind of weak."
11071060,11074020," So, let's try to limit the amount of connections that you can have."
11074020,11075460," All right."
11075460,11076900," So, let's limit the amount of connections."
11076900,11080100," How many connections do we want to see?"
11080100,11081380," How many connections do we want to see?"
11081380,11082820," So, server MTS."
11082820,11086660," Sixty-nine connections."
11086660,11087620," Sounds good."
11087620,11087940," Right."
11087940,11092180," So, const server connection,"
11092180,11094020," const server limit."
11094020,11095780," Sixty-nine."
11095780,11097060," Sixty-nine connections."
11097060,11100980," So, on..."
11100980,11101780," What is it called?"
11101780,11103780," All right."
11109380,11111460," Man, I don't remember."
11111460,11118180," So, when we join, it's connection."
11118180,11118660," It's..."
11118660,11118900," Yeah."
11118900,11120500," Yeah, here it is."
11120500,11123060," Okay."
11123060,11129780," When you got the connection, if player's size..."
11129780,11132020," Is it function?"
11132020,11132660," It's a number."
11132660,11139860," If player's size is greater or equal to the server limit."
11139860,11143140," We'll just do WS close."
11143140,11147060," And just return."
11147060,11149220," So, we're not going to even say anything."
11149220,11149460," Right."
11149460,11150180," So, just like..."
11150180,11152260," Disconnect."
11152260,11155380," Sixty-nine percent."
11155380,11157540," Ten percent."
11157540,11157860," Yeah."
11159060,11162660," So, I don't really know if it will be able to handle this many connections, so..."
11162660,11165940," Okay."
11165940,11169860," So, let me see if it's still working."
11169860,11173460," Put them in the queue."
11173460,11175620," I don't know."
11175620,11176660," It's a good idea or not."
11177700,11178020," All right."
11178020,11178660," Anyway."
11178660,11181300," So, let me maybe go to your mom."
11181300,11182180," All right."
11182180,11183060," Let's go to your mom."
11183060,11184900," SSH your mom."
11184900,11190420," So, I don't even have tmux."
11190420,11192980," So, what do I have in here?"
11192980,11193300," Git."
11193300,11194740," All right."
11194740,11195220," Let's go."
11195220,11196980," Did I commit that?"
11196980,11198100," I didn't even commit that."
11199700,11203460," Limit the amount of connections."
11203460,11204740," That's what we have."
11204740,11208100," So, what's the name of this thing?"
11208100,11209220," What's the name of this thing?"
11209220,11214180," So, I want to do git commit multiplayer game prototype."
11214180,11214420," Right."
11214420,11216580," So, we initialized an empty repo in here."
11216580,11218820," Multiplayer game prototype."
11218820,11220980," So, if we take a look at the status."
11220980,11223380," There is no commit on the branch master."
11223380,11225460," I think here we have a branch main."
11226500,11227140," Right."
11227140,11229380," So, yeah."
11229380,11230340," Let's see what we can do."
11230340,11236100," So, I'm going to do add remote name."
11236100,11238260," It's going to be origin."
11238260,11240340," And your URL is going to be your mom."
11240340,11242500," And within your mom, we're going to have git."
11242500,11246740," And this multiplayer game prototype."
11246740,11248580," Can I just copy paste this thing in here?"
11248580,11252100," So, that's basically how you can do that."
11252100,11253300," So, yeah."
11253300,11254180," This is the default."
11254740,11256900," And now you can just push that."
11256900,11258500," So, I'm pushing over SSH."
11258500,11263620," So, in here, I think I can just check out main branch."
11263620,11266100," And I've got the source code."
11266100,11270020," So, I just pushed git over SSH."
11270020,11273620," You don't need any git servers or githubs or anything like that."
11273620,11277380," You can push git push over fucking SSH."
11277380,11279620," That's how it works."
11279620,11280580," That's how git works."
11280580,11282100," You don't need any git or anything."
11282100,11284340," Just like buy VPS and you can host your share there."
11284340,11292500," The repo is now in your mom."
11292500,11292980," Exactly."
11292980,11295060," We pushed the repo into your mom."
11295060,11295300," Okay."
11295300,11296980," So, let's actually install all the dependencies."
11296980,11299140," Let's install all the dependencies."
11301540,11302340," Okay."
11302340,11306660," So, can I now maybe take a look at the package in JSON."
11306660,11312660," So, we don't really have a building process."
11312660,11312900," Right."
11312900,11314500," So, we don't really have a building process."
11314500,11320420," I want to just start bin.tsc."
11320420,11324660," Well, I mean, it already has everything."
11324660,11324900," Right."
11324900,11325940," So, it already has everything."
11325940,11331220," Interestingly, so there's a little bit of a problem in here."
11331220,11334580," Node modules."
11334580,11335940," Yeah."
11335940,11340180," I don't want to allow you to do that."
11343380,11354740," Now, I wonder if you can do something like this."
11354740,11356580," No, you can't really."
11356580,11356820," Okay."
11356820,11358740," So, you can't really go back in here."
11358740,11362340," You can only go forward into node modules."
11362340,11362660," Right."
11362660,11364260," So, you can only do this kind of shit."
11365620,11371140," So, one of the things we can try to do in here, chat, is let me see."
11371140,11379620," ""Node modules bin https server help file""."
11379620,11388980," So, it's something like, yeah, ""show directory listing""."
11388980,11390100," I think that's what it is."
11390100,11391940," So, ""watch.js""."
11393620,11397700," And in here, I'm going to set just ""d false""."
11397700,11400420," Yeah, etc, etc shadow."
11400420,11403780," But, I mean, I'm running under non-roots users."
11403780,11405460," So, you won't be able to get anything anyway."
11405460,11412260," And there's nothing sensitive on that server anyway."
11412260,11414340," So, even if it gets hacked, I will just remove it."
11414340,11417380," So, it's not that big of a deal on this one."
11417380,11422580," It sounds like a code, but I mean, it's true."
11424340,11425140," It's actually true."
11425140,11426500," Okay."
11426500,11427460," So, if I try to..."
11427460,11429460," Oh, look at that."
11429460,11430580," It's a 403."
11430580,11432180," That's so cool."
11432180,11434900," So, if you disable listings, it's just 403."
11434900,11437300," It's kind of funny."
11437300,11442260," So, at the same time, if I do something like bin..."
11445140,11448260," I might actually move every..."
11448260,11448820," Ah, whatever."
11448820,11452020," Like, I mean, you get access to node modules, so what?"
11452020,11452740," So, who cares?"
11452740,11455380," So, who actually cares?"
11455380,11463460," So, what's interesting is that if you disconnect it, there's no information that you disconnected or"
11463460,11464020," anything like that."
11464020,11465300," So, there's no info on that."
11467220,11470420," So, we probably need to implement that, but I'm already streaming for like four hours."
11470420,11471940," So, I think I'm not going to be doing that."
11471940,11473300," All right."
11473300,11475700," So, let me do the following thing."
11475700,11477380," Let me do the following thing I'm going to do."
11480740,11486500," Oh, we also specify the address in here as 127.0.0.1, so you won't be able to see anything."
11486500,11488900," All right."
11488900,11497860," So, can I just remove this entire thing?"
11497860,11500020," You know what?"
11500020,11506340," I feel like I need to have my own command line to start the HTTP server."
11506340,11508820," I think that's what I need to do."
11510500,11511620," So, let's do it like this."
11511620,11514820," So, the port is going to be that."
11514820,11517460," The address, let's not specify address."
11517460,11521380," I don't remember what is as, but I'm going to leave it just in case."
11521380,11523780," So, this is going to be that."
11523780,11526180," This is going to be that."
11526180,11527140," This is going to be that."
11527140,11528180," Right."
11528180,11531860," So, this is my thing in here, which I'm running."
11531860,11534660," Node modules bin."
11534660,11536260," All right."
11536260,11540660," Is it going to show anyone's IP addresses?"
11540660,11541540," I'm actually not sure."
11541540,11545380," I'm actually not sure if it's going to show anyone's IP addresses, but whatever."
11545380,11550900," So, now I'm going to cut SSH config."
11552180,11553780," I'm probably going to regret doing that, but."
11553780,11556100," So, let's go."
11556100,11560820," Oh, it's actually 6969."
11560820,11562100," So, we have to add that manually."
11562100,11564020," All right."
11566420,11568500," well, I mean, just do HTTP then."
11568500,11570500," Okay."
11570500,11571220," It works."
11571220,11572580," It actually fucking works."
11572580,11574420," So, try to connect there."
11574420,11577220," And I just want to see if I see your IPs."
11577220,11583460," So, I know that it tries to connect to localhost."
11583460,11584180," It doesn't really matter."
11584900,11586100," So, oh."
11586100,11589060," Joined."
11589060,11591860," Okay."
11591860,11593300," Joined point."
11593300,11595860," Oh, I can't see IPs because it doesn't log anything."
11595860,11596980," So, that's fine."
11596980,11597300," All right."
11597300,11599140," So, yeah."
11599140,11600420," I completely forgot about that."
11600420,11605220," So, I think this minus like S means that like it don't log anything."
11605220,11605940," Right."
11605940,11606980," So, that's totally fine."
11606980,11608100," I can live with that."
11608100,11614100," We probably need to change some shit in here because the client doesn't really."
11615220,11615460," Yeah."
11615460,11617780," The problem with the client is that it connects to localhost."
11617780,11620340," So, that's a huge problem here."
11620340,11624740," Unable to connect."
11624740,11625300," That's fine."
11625300,11627700," That's expected actually."
11627700,11628900," So, I disabled it."
11628900,11631540," All right."
11631540,11632340," So, let's give it a try."
11632340,11634980," So, I'm going to just like literally put the..."
11634980,11638500," Where is my SSH config?"
11641380,11641700," All right."
11641700,11643620," So, we won't be able to just copy paste this stuff."
11643620,11647060," We're going to just headcode a lot of shit in here."
11647060,11648260," All right."
11648260,11649140," So, it doesn't matter."
11649140,11654100," So, this is that."
11654100,11656420," Localhost."
11656420,11656820," Okay."
11656820,11660660," And now to the server."
11660660,11661540," MTS."
11661540,11665220," Set FT type script."
11666100,11669140," I'm modifying source code like right in the production."
11669140,11669380," Right."
11669380,11670260," That's what I'm doing."
11670260,11672500," Localhost."
11672500,11673220," Okay."
11673220,11674420," So, can I just do that?"
11674420,11679780," So, I don't think we don't have any localhosts anymore."
11679780,11681540," TSC."
11681540,11681780," All right."
11681780,11685220," So, node bin TSC."
11688500,11688820," Okay."
11688820,11690340," So, that recompiled server."
11690340,11692740," MGS."
11692740,11694580," All right."
11694580,11696340," So, web sockets."
11696340,11702260," Well, no."
11702260,11703860," Where is the other localhost?"
11703860,11707860," Maybe the server..."
11707860,11708980," I think it's going to be fine."
11708980,11709860," I think it's going to be fine."
11709860,11710180," Whatever."
11710180,11711700," All right."
11711700,11713860," So, HTTP server."
11713860,11715140," Start in HTTP server."
11715140,11719540," Starting the npm run server."
11719540,11727700," I can see you guys already enjoying it."
11727700,11730340," I don't even know where I am."
11730340,11732980," Holy shit."
11732980,11734980," Okay."
11734980,11736180," I can see myself."
11736180,11737380," I think I can see myself."
11741700,11751780," This is so fucking funny."
11751780,11754900," All right."
11754900,11755140," All right."
11755140,11755380," All right."
11755380,11756500," I'm stopping everything."
11756500,11758100," Everything is stopped."
11758100,11759700," Everything is stopped."
11759700,11762180," Right."
11762180,11763460," All right."
11763460,11768180," So, let's actually maybe reduce the amount of connections,"
11768180,11769700," because I think it's too much of the people."
11770260,11771460," So, it doesn't make any sense."
11771460,11773940," MTS."
11773940,11777060," So, a server limit."
11777060,11778820," Let's say we're going to have five people."
11778820,11779780," All right."
11779780,11783860," Let's rerun this entire thing."
11783860,11786820," Let's run the server and..."
11786820,11792100," Will I be able to actually even connect?"
11792100,11794980," I think I won't be able to even see anything."
11794980,11796900," Well, I mean..."
11799380,11799700," Yeah."
11799700,11801620," Yeah."
11801620,11803300," So, this limitation is too much."
11803300,11803540," Right."
11803540,11804500," So, it's just like..."
11804500,11806500," Yeah."
11806500,11807780," We won't be able to see anything."
11807780,11808900," All right."
11808900,11810100," But that was fun."
11810100,11810660," That was fun."
11810660,11812900," So, yeah."
11812900,11813620," Let's kill this."
11813620,11814260," Let's kill this."
11814260,11816900," All right."
11816900,11819540," So, let's run it one more time locally."
11819540,11819860," All right."
11819860,11822980," So, locally, it is going to be..."
11822980,11824900," Let's run server."
11827860,11834740," Obviously, I slapped this together in like four hours without knowing what the fuck I'm doing."
11834740,11835060," Okay."
11835060,11837940," So, obviously, it's not perfect by any means."
11837940,11844820," But now, we can try to figure out what kind of problems we have with this kind of system."
11844820,11847140," And yeah, improve it even further."
11847140,11853540," So, I just wanted to make like a quick proof of concept of the idea that I want to implement for the game."
11853540,11854740," And yeah."
11854740,11858740," So, we'll see where I'm going to move from there."
11858740,11862980," So, the next session is probably going to be integration with the main game."
11862980,11863300," Right."
11863300,11864420," All right."
11864420,11865300," I hope that was fun."
11865300,11867220," Thanks, everyone who's watching me right now."
11867220,11868580," I really appreciate that."
11868580,11869380," Have a good one."
11869380,11873780," And I'll see you all on the next recreation programming session with Ahu Amista Azuzu."
11873780,11875700," Love you."
