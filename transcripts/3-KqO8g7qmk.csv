start,end,text
640,7280," looks like we're live hello everyone and welcome to yet another recreational programming session"
7280,14240," with a mr zosen let's make a little bit of an announcement and officially start the stream"
14240,18480," hello hello everyone welcome welcome welcome how are you guys doing today how are you guys doing"
18480,23440," today really glad to see you all today forgot to open my discord so we have to wait a little bit"
23440,30400," uh before we can make an announcement an epic announcement um right just a second right because"
30400,36560," the uh the discord needs to recompute the layout and stuff like that that is a very difficult task"
36560,43760," as you can see impossible computer science task uh let's do a red circle live on twitch and what"
43760,51280," are we doing today on twitch adult at television website today we are doing uh typescript and"
51280,56720," service workers that's right so we today we are being a web devs i'm gonna give the link to where"
56720,62240," we're doing all of that twitch.tv/todding and i'm gonna ping everyone who's interested in being pinged"
62240,68240," and there we go the stream has officially started the stream has officially started so today i would"
68240,76480," like to uh take a look at an old project of mine which is called emo jam right so uh it's emo jam and"
76480,82800," it's just a single i would say static website right so it is static because it doesn't really have any"
82800,88960," back end it does everything on the front end so it's static in that sense for some reason it doesn't"
88960,95840," really work uh i don't really know why uh i think it is broken uh yeah i think it is literally broken i"
95840,100640," just checked it before the stream and it was working and maybe that's what we're going to be doing today"
100640,105280," right we're going to be fixing it today that is bizarre right i literally checked it before the"
105280,114560," stream so um all right so let me let me see what does it say in console uh could not initialize"
114560,121840," webgl oh that is very interesting so it it's supposed to use open like webgl ah"
126880,135280," okay i literally disabled uh hardware acceleration uh just to check whether that potentially makes the"
135280,139520," uh twitch go faster right"
139520,147200," so let me actually go to two settings i hope i'm not going to expose anything sensitive so i'm going to"
147200,154880," quickly go to my settings and i'm going to enable it i didn't freaking expect that apparently uh disabling"
154880,162720," hardware acceleration actually disables the um you know everything oh boy all right so let's actually"
162720,170960," go to uh sorting github emote gem right so hopefully it uh already in uh in initialized uh webgl and this"
170960,176080," is how it looks like so the point of this entire thing right so the point is this entire thing is to"
176080,183120," animate uh the emotes right so you have a static emote uh something like that so let's actually do something"
183120,189120," like this and for instance i can take keg w right i can drag and drop keg w and as you can see in here"
189120,195280," you have some sort of like different filters right so for example hope you can make it automatically hope"
195280,202720," or uh you can make it automatically bounce right or make a circle uh make a slide and stuff like that so"
202720,208240," do these kind of things uh right so by the way you can find this thing uh by this link if you're interested"
208240,212880," right so i'm gonna copy paste it in the chat and for people on youtube it is going to be in the"
212880,220000," description as usual right so and then you can run a gif right you can turn this entire thing into a gif"
220000,225360," you can then download that gif and you can do whatever you want with it you can upload it to bttv"
225360,232000," and stuff like that uh right so yeah so and what's cool about this entire thing it is completely"
232640,239680," serverless and it is actually serverless in the sense that it doesn't have any backend right so"
239680,245440," it can work completely on your machine it does all the processing on your machine right so the animations"
245440,253200," webgl and stuff like that and it even renders gif on your machine so we're using uh gif.js uh which is"
253200,262000," actually like um generates gif format byte by byte right it doesn't use any internal like browser api or"
262000,267520," anything like that it just generates it byte by byte and it it is completely client-side application"
267520,276000," it is a completely uh client-side application um right and um here's an interesting thing"
277520,284720," it doesn't work when the internet doesn't work so that's kind of the problem right uh even though"
284720,293360," it's completely client-side it kind it can't work uh without the internet but as far as i know in"
293360,302320," today's modern web it is allegedly not a problem because of so-called service workers have you guys heard"
302320,310240," about service workers have you guys heard of it uh right so essentially service workers are essentially"
310240,317200," act as proxy servers that sit between web applications the browser and the network when"
317200,323200," available they are intended among other things to enable the creation of effective offline experiences"
323200,328800," intercept network requests and take appropriate actions based on whether the network is available"
328800,334400," and update assets residing on the server they will also allow access to push notification and background"
334400,345040," sync apis um right so and essentially they actually enable you to use your website when the internet is"
345040,349760," completely down right so there are a couple of examples we discussed that on our discord server by the"
349760,356720," way so there was a discussion the entire topic sort of like got born out of all discussion on discord server"
356720,362240," right so for people who ask me how do i come up with the topics for my streams i just like talk on the"
362240,367120," internet uh with different people on discord server maybe on social media i get an idea i put it to my"
367120,373120," to-do list and eventually get to that idea uh right so quite a lot of topics like actually"
373120,380160," emerged out of the discord conversation that we do on our discord server so it's actually quite cool right"
384080,390240," so and essentially one of the application that was um that popped up during the conversation is squish"
390240,395200," all right so we can take a look at that application so it's something for images i forgot what it does"
395200,402960," actually right uh so what does it do uh so it resizes the image images right so it does something with"
402960,407680," the images it doesn't really matter what so you you basically drag and drop image there it resizes or"
407680,412080," optimizes them or something like that i don't really know what it does we can try to actually do that"
412080,418080," so let's actually take uh maybe you debate it and i'm gonna just drag and drop this into i think"
418080,424960," and uh what it allows me to do it just allows me to do some things right that's pretty cool so it"
424960,431040," doesn't really matter so this thing works without the internet uh right before the stream right right"
431040,437680," after i announced uh that i'm gonna be doing this stream i just realized how the fuck i'm gonna be"
437680,438480," testing this"
438480,447680," i'm streaming from one pc that requires internet connection"
447680,456800," if i need to make a website virtual books i don't have that many resources to have a virtual machine and"
456800,467120," docker and stuff like that like yikes so uh right so dev tools right so there is something with dev tools"
467120,475840," that we could probably use uh right so how can i simulate the lack of the network so is this something"
475840,483840," in um in in here right so let's actually take a look at the application uh all right and"
485840,491360," you can make offline from dev tools okay so how do i do that uh so does anybody know"
491360,503440," or drop down no throttling on the network tab uh all right so no throttling"
505840,517760," what what how is that oh offline so we're completely offline okay so if i refresh this entire thing it"
517760,526960," seems to be working so we can try the same thing in here right so uh that's a really weird place to put"
526960,535040," such functionality in uh all right so offline right so we're completely offline and i'm gonna refresh this"
535040,542480," entire thing and as you can see it cannot work uh without any internet and this one uh can work okay"
542480,548000," so i learned something i actually learned something that's actually pretty cool uh but you know how i"
548000,552320," wanted to test that right before the stream i want you to actually redirect it to some sort of like a"
552320,558960," non-existing proxy right which also potentially may work so we can actually take a look at that right so"
558960,564560," i'm gonna just do it like this uh right thank you thank you for for letting me know about this offline"
564560,573920," feature so my idea was to just start chromium right uh with a proxy uh server and just redirect that proxy to"
573920,583440," some local host to maybe 69 69 right so this is supposed to be like a socks uh five uh it's not six it's five"
583440,591280," right so this proxy does not exist on my machine so hopefully uh that will create a situation uh which"
591280,600400," doesn't work so i have to uh it didn't work uh so i suppose this is because i have some other tabs"
600960,609200," opened in uh in here so okay so it's not going to work uh without completely restarting my uh my browser"
609200,615200," because i have some other things all right so uh the dev tools it is then right so we're going to be"
615200,622240," using dev tools so dev tools are definitely better to to test all that stuff okay uh so you forgot to"
622240,630960," take down your 69 69 prox so i don't really have 69 69 prox so um right okay so i need to recover my"
630960,636640," knowledge on how to work with emote gem right so i still have a clone of this thing in here do i have"
636640,641600," some changes in here uh i don't really have any particular changes so there is a ripple effect i don't"
641600,649200," remember if i actually merged it so let me take the latest changes in here uh apparently i merged something"
649200,655280," right so origin master there we go anything can do that so apparently some time ago i was doing some"
655280,661360," some changes that i actually merged so how are we supposed to use this i don't remember uh we're"
661360,668640," supposed to do npm install as i think uh i can just do that and probably it's not needed because everything"
668640,676160," is already installed uh somebody asks you wrote shader code too not entirely some of the shaders were"
676160,682560," contributed to me but majority of the stuff yes a majority of the stuff i wrote uh shaders for of"
682560,687680," course so there are so-called filters right so they're not really called shaders they're called"
687680,694960," filters uh all right and the filter uh is essentially like a structure uh so there's some parameters in"
694960,702560," here the duration of the animation uh and uh two strings that we have in here is a vertex and fragment shader"
702560,707760," and this is how you literally write them uh right so essentially here's the vertex shader and that's"
707760,714080," literally the shader uh that you put in here and the fragment shader majority of them i wrote majority"
714080,718560," of them i wrote but some of them of course they were contributed by uh by people so i accepted them"
718560,726880," so there's quite a few uh quite a few filters in here so how you're supposed to actually uh constantly"
726880,732960," modify so you're supposed to run the uh typescript compiler in the watch mode and edit files and"
732960,738960," they will be automatically compiled into the js all right so these are js versions of this entire things"
738960,745760," we're not using bundlers we're not using any of that zoomer we're going really old school uh right so"
745760,752960," which i mean it's not a particularly complicated application we don't really need anything super"
752960,761600," complicated that's why we're going old school so somebody asks why is duration string i don't remember"
761600,769040," right so i don't remember maybe because um it's has some sort of a format or something like that i"
769040,775680," i don't remember honestly we'll see we'll see all right so let's go ahead and maybe start the um"
776240,785920," the typescript compiler so emote gem emote gem i'm gonna go to the readme thank you so much past me for"
785920,791680," providing instructions on how to quickly set this thing up uh because i usually quite often forget"
791680,800720," right so i quite often forget so on top of that we're supposed to like um run a server so python 3m http"
800720,807920," server 69 r69 right so of course that's the only port that you need in your life you don't need any"
807920,815840," other ports in fact you can actually close all the other ports in your uh in your firewall uh there"
815840,821680," we go so we're running this entire thing locally speaking of how can you run this uh you know service"
821680,831280," without internet you just have a local copy but that's how that's how we do that very easy um right"
831280,838240," so yes so yes so yes okay so we have a local copy that's pretty cool so i suppose now we need to go"
838240,846960," ahead and read how do you do service workers how do you do service workers uh that's a very interesting"
846960,852960," question uh service workers concept and usage a service worker is an event driven worker"
852960,861040," okay so it's a more specific kind of another concept which is worker"
861040,868880," right so it's a so is event driven worker a worker interface to the web a workers appear represents a"
868880,874480," background as that can be created via script which can send messages back to its creator"
876160,879440," wait a freaking second does javascript has threats"
879440,889680," does it have threats holy shit anyway so we have some sort of threads apparently uh we have some sort"
889680,898960," of threats uh and uh service workers api er just like kind of threats and they can be communicated by"
898960,906080," sending some messages and stuff like that is that is that an actor model holy fucking shit is it's all"
906080,913520," almost like erlang did they built in erlang into the browser what oh fuck sorry"
913520,925680," uh so anyway so every time i i see um you know this idea oh we have a separate sort of thread"
925680,930960," and we're communicating through the messages i have this like you know reaction is that just like erlang holy"
930960,940960," because maybe when i was young it was like a huge meme right so like 10 years ago when i was 20 and"
940960,948080," was really into functional programming and all of this comp soary um actor models were like a very huge thing"
948080,954480," and everyone is was like was talking about actor models and how erlang is the future of like scalable distributed computing"
954480,960640," computing and everyone was trying to emulate erlang in their own uh language and stuff like that and"
960640,967360," it was just like holy you can send messages this is like erlang this is like erlang and all of the comp soys were like"
967360,969040," poor poor erlang"
971520,976240," but that was 10 years ago so it was just like everybody forget about all that so"
976240,987840," so anyway i think i'm just old i think i'm just old"
987840,996480," anyways so uh it's just like a different kind of workers server focus can't import javascript"
996480,1003600," module dynamically and import will throw if it is called in a service worker global scope static import"
1003600,1006640," so you can do imports in a browser this day"
1006640,1019280," listen listen i'm a veteran web dev like literally i was developing web applications and ironically for"
1019280,1028800," internet explorer six and ironically yes i am web dev but i'm a veteran web dev i didn't know that you can"
1028800,1037440," finally import things in the browser i thought you need something like um browserify any epic boomers in"
1037440,1044240," the chat who remembers browserify who remembers this shit hmm who remembers this shit"
1047440,1051280," nobody remembers this okay anyway uh so"
1051280,1057360," you used to deploy using ftp exactly exactly"
1057360,1064800," uh so syntax commonly used dynamic import as a function like expression to allow"
1064800,1071680," loading an ecmas emacs script module asynchronously and dynamically into potential non-module environment"
1071680,1076000," oh you you have a separation of module and non-module environment holy"
1076000,1080240," shit"
1080240,1094400," anyways uh anyway uh so what else do we have in here some import registration a service worker is first"
1094400,1099600," registered using service worker container register"
1102960,1112160," we're off to a great start apparently okay so you need to register that uh the register method of the"
1112160,1120560," service worker register interface creates or updates a service worker registration for a given script url"
1121280,1131200," so you have to serve it by a url a successful if successful if successful a service worker registration ties the provided script url to a scope"
1131200,1138480," which is subsequently used for navigation uh matching you can call this method unconditionally from"
1139040,1145200," uh the control page uh you don't need to check whether there is an active registration okay"
1145200,1151920," uh there is a frequent confusion surrounding the meaning and use of scope like anything in web"
1151920,1162000," right i really like how in web they introduce a new thing and there is always some sort of confusion associated with it immediately"
1163200,1169600," it's like of course there is some sort of confusion of course it's web since the service worker can't"
1169600,1176240," have a scope broader than its own location only use the scope option when you need a scope that is narrower than the default"
1179200,1190160," okay okay so url oh my god are you serious my friend like it does it it needs a correct mime type"
1194080,1200640," fuck i'm using i'm using python server i'm using python server"
1200640,1209920," why do you expect a correct mime type from you like why do they make everything so goddamn complicated"
1209920,1215680," like you literally can't do web development without a web server these days it's insane"
1219120,1226560," it is insane my influence um so that probably means that we need a better web server somehow"
1226560,1232320," so as far as i know node has some sort of http server or something like that"
1232320,1241440," but maybe python server can actually like create a correct mind type so for instance for instance like we have"
1241440,1248000," uh yeah we have this kind of thing right so can i just take a look at the"
1250080,1257680," uh the network um right so i'm gonna refresh the syntax and when i take a look at this"
1257680,1265360," uh does it have a mime type the content okay so it sets a content type application javascript"
1265360,1272240," automatically so okay python python server is capable of automatically detecting that that's actually super"
1272240,1278560," cool what the fuck all right i thought it's super dumb and just like doesn't do anything apparently it's"
1278560,1283600," smart enough to recognize different types of files and stuff like that okay so we can work that i'm"
1283600,1290160," actually super happy i'm actually super happy chat um okay so we have to register some sort of um"
1290160,1300400," thing in here some sort of a thing so can i go to squash app is there any way to take a look at the"
1300400,1309920," register service workers of a particular application application application you know um i got working"
1309920,1316960," then it made i need to open pc man fm pc man okay so now we're good to go application"
1316960,1325840," uh service workers holy you you just can apparently you just can uh and here is the registered service"
1325840,1330960," worker so they they literally just create a service worker here uh in here which is actually kind of"
1330960,1343040," cool so you have assets you have assets uh and minified okay fair enough fair enough and this entire"
1343040,1355040," shit is minified okay uh i wonder if there's like any other examples but but anyway so let's go ahead and try to register"
1355040,1360480," register something chat uh right so let's go ahead and try to register something so let's see let's see"
1360480,1370000," uh maybe um when we are so there is the index js right so there's the index js but we are doing"
1370000,1376160," typescript so we're supposed to be using index ts so here we go here is the index ts"
1377120,1384640," uh so window on load so this is what we have okay so what we're supposed to do we supposed to do service"
1384640,1397120," worker container service worker container would you look at that yo and we can register can we register"
1397680,1402800," i set register and do you have a method it doesn't even have a method for that"
1402800,1408960," uh register yeah you can register but it doesn't autocomplete that for me because"
1408960,1422320," me apparently uh and uh let's actually do service worker js service worker js so which kind of means that"
1422320,1429760," we probably need to have something like service worker worker cs and what can we do in here let's"
1429760,1441040," actually put console log uh hello uh from service worker all right so this is like a waving"
1441040,1450080," waving stick man uh so this is what we're doing here okay so uh as far as i know we have a watcher we have a"
1450080,1459760," watcher so it doesn't have a register uh does not exist am i am i an idiot register register okay property"
1459760,1468560," register does not exist on type new uh service worker container service worker container is there any"
1468560,1483760," any examples on how to do that uh oh okay so you need to check uh whether you why is chat like that hello chat"
1483760,1496800," hello hello everyone um so service worker in navigator right so you have to take the navigator service worker"
1496800,1504480," register this thing and it returns you a promise it returns you a promise okay so let's go ahead and"
1504480,1513200," see if we can work with that uh navigator okay do you have a service worker you do can you register for me"
1513200,1524320," you can uh right so let's do service worker uh j s all right so we have so registration okay so and that's the"
1524320,1534000," promise and uh we may probably do some stuff in here so what do usually people do in here so then registration"
1534000,1539040," in case of registration uh service worker registration succeeded you print the registration in case of an"
1539040,1546160," error you want to print that um okay so and you also need to check that service workers are not supported"
1546160,1551280," maybe this is something that we also want to check in here yeah why not well let's go ahead and check that"
1551280,1556880," so we want to check that so we want to support all the browsers right we we do care about backward"
1556880,1566000," compatibility we do care about that so and uh here we can do something like um something like error"
1566000,1576960," um service uh service workers are not supported in this browser so we're going to just log that but we're not going to register anything"
1576960,1583600," anything we're just log in there but not register anything so registry registration"
1583600,1597360," so console look um registered a server service worker and uh we probably want to do a registration"
1597360,1604960," registration so in case of an error um we're going to do something like that and this is going to be"
1604960,1615680," the console and uh could not uh register a service worker because of an error and go so it is as"
1615680,1621760," simple as that do we have any compilation errors uh expression expected so i'm not quite sure what the"
1621760,1629360," fuck do you want from me um so i suppose oh yeah so this is essentially yeah i see what's going on"
1629360,1636560," i mean this is supposed to be like two separate things right so then uh so what do we have in here"
1636560,1644000," so triple r this is not something that you want to have maybe i can enable flight check mode yeah so that"
1644000,1652560," seems to be that seems to be good that seems to be good so let's go ahead and uh see if we can uh register"
1652560,1662160," a new thing in here all right so i'm gonna open le console and let's go okay so bad response fetching"
1662160,1667680," the script could not register service worker fail to register for scope uh with script service worker a"
1667680,1675600," bad http response code okay that's very interesting so i would expect since we have like um service worker ts i"
1675600,1681600," would expect it to automatically create a service worker and it in fact did uh so i don't quite"
1681600,1689680," understand why you're telling me that uh oh it's ah i see what's going on right so i completely forgot"
1689680,1697840," that index ts it's actually inside of js right so it has to be something like that right so it has to be"
1697840,1705120," something like that you see uh you see uh you see i do i'm doing web dev right so this is basically web dev"
1705120,1712480," isn't it uh i think it is actually uh all right so i'm encountering some problems and stuff like that"
1712480,1720800," we just registered a service worker hello from service for it works this is our first service worker"
1725600,1732720," holy shit and registration actually has some stuff in here so just push manager and stuff like that"
1732720,1736880," and uh yeah so that's that's pretty cool thanks everyone for watching"
1736880,1750160," so i suppose like this is not enough for um right uh for you know making it work without the um"
1752160,1758560," without the http server right so let's actually just try to uh do offline uh all right and i've"
1758560,1764160," tried to refresh this entire thing uh yeah it says no internet so we probably have to register"
1764160,1769120," something within the service worker right so we have to register something the following code if"
1769120,1775280," included in example html at the root site would apply exactly the same page as an example above"
1775280,1781600," remember the scope when included uses the pages location as its base it probably doesn't really matter in"
1781600,1787200," our particular case so there's something yeah so they provide the scope i didn't think we need"
1787200,1792160," to care about the scope right i'm gonna just omit that there's become confusion surrounding dominion"
1792160,1798080," you already said that didn't you already said that there is a confusion about the scope like"
1798080,1809680," okay uh specification okay so you can also unregister uh all right so we we did the registration at this"
1809680,1817600," point uh download install and activate at this point your service worker will observe the following um"
1817600,1824560," the following life cycle observe download install activate the service worker is immediately downloaded"
1824560,1831760," when a user first accesses a server worker controlled site page after that it is updated when navigation to"
1832320,1840720," an in scope page occurs uh an event is fired on the service worker and it hasn't been downloaded in the"
1840720,1848320," last 24 hours installation attempted when the downloaded file is found to be new uh either different to an"
1848320,1853920," existed service worker bytewise compared our first service worker encountered for the page site so this is"
1853920,1860240," some sort of a technicalities of how the service worker is updated and stuff like that i'm not sure if i'm"
1860240,1865840," really interested you know what i'm interested in what should i put into the service worker right"
1865840,1874400," it is cool and all right so you have some sort of a javascript which is a service worker you can update"
1874400,1880240," that javascript and the browser is gonna just like you know recache it and do different things it is cool"
1880240,1886800," it is pretty epic but what exactly do i put into that goddamn service worker what exactly do i put there"
1886800,1892160," so that's a very interesting question i have no idea so we need to find an exam an example"
1892160,1898640," uh so service workers are also intended to be used for such things as background data synchronization"
1898640,1906240," responding to resource requests from other origins receiving centralized updates to expensive to calculate data such as"
1906240,1913760," geolocation and gyroscope so multiple pages can make use of one uh set of data client-side compiling and"
1913760,1920320," dependency management blah blah blah that's pretty cool uh so and there is some um okay so background"
1920320,1926800," synchronization startup a service worker even when no users are at the uh at this site so caches can be"
1926800,1934080," updated reaction to push notification entering geo geo fence geo fence i don't know how to properly pronounce"
1934080,1943760," that um that is pretty cool so yeah so specification of the service workers right service workers nightly"
1943760,1950640," so the only thing i'm interested in what do i put into"
1951760,1958480," service working in here so so far i just put console log but that is apparently not enough and well i mean"
1958480,1965520," reading that would be a little bit of an overkill we're reading that would be a little bit of overkill"
1965520,1974560," so all right so maybe we can steal some ideas from squish but it has a minified"
1975280,1983200," uh service worker uh service worker right so which is not particularly useful in my opinion in my opinion"
1983200,1988960," so let's take a look at the network uh maybe we may want to take a look at the sources right there"
1988960,1999040," should be some sort of a service workers in here so where is this service worker let's take a look at the"
1999040,2006160," network and the refresh oh yeah i could have just done uh application service worker i completely forgot how"
2006160,2016560," to do that all right so uh service worker js service worker js so okay so there is a pretty printing game"
2016560,2025840," that's pretty cool um okay so there is a lot of stuff in here um let me see let me see so you define"
2025840,2031920," some it's probably oh yeah it's one of these like modules and shit uh it's one of these modules"
2031920,2047680," uh-huh oh this is interesting add event listener activate event listener message yo"
2050720,2061440," that is that is rather interesting okay so service worker events maybe that's what we have to do right"
2061440,2067200," so maybe we have to take a look at what kind of events you can do uh so using service workers um is"
2067200,2076160," that what we need um because it's might be one of these things that we already looked at the premise of"
2076160,2087920," so so add event uh listener okay oh i remember installing shit i do remember that so you have a self"
2087920,2099120," is is this really is like is self like a valid word within within that thing uh event wait until"
2101440,2103200," so add resources to cash"
2103200,2108320," uh executable event"
2108320,2115680," all right so let's let's just give it a try let's just around and find out like because this is how"
2115680,2121040," you learn programming remember how i said how you learn programming right you just around and until we"
2121040,2127840," find out right so let's just see so can we have self is that a thing that we can have apparently it is a"
2127840,2134240," thing i thought wait a second javascript people what's the difference between self and this"
2134240,2141520," javascript people are you okay"
2141520,2149920," javascript people did somebody hurt you well just you you can you can be honest with me right like"
2149920,2158160," did somebody hurt you um so what what's wrong you can tell me everything right like sure"
2158160,2164800," anyways"
2164800,2172320," um so uh let's go ahead and just like maybe add uh event listener"
2174400,2182320," hello i like i was not doing javascript for one year and you polluted this language with all sorts of"
2182320,2189200," like service workers self and stuff like that you're like like children you're bringing all of these"
2189200,2192400," toys into your world like why are you doing all of that"
2197440,2203680," i'm freaking out i'm freaking out i'm freaking out anyways uh so we have something like install"
2203680,2214240," right and in here we have an event okay so there's uh um an event called installation an event called"
2214240,2225920," installation so uh pog looks like we installed something i have no idea"
2228000,2237360," what that means but here is an object the browser the browser sent us"
2237360,2239120," there we go"
2239120,2249760," so let me let me see so this is uh the service worker the service to worker oh the service to worker"
2250400,2262240," um and let me go to network uh we're not offline no throttling no throttling is allowed let's take a look at"
2262240,2262960," the console"
2262960,2274720," uh all right so that's very interesting so we didn't really get any installation or anything like that we can"
2274720,2283440," take a look at maybe application and here we have a service worker a service to worker"
2283440,2286560," right so and it's still an old one"
2286560,2294880," it didn't update it right so you you want to tell me that it didn't update the service worker the service"
2294880,2303680," worker uh okay so here is an updated service worker um so maybe if i control f"
2303680,2309040," so where is the cache thing you like disable cache so the cache is disabled"
2309920,2320480," but the cache is disabled uh right so that's kind of weird all right so let me let me see uh let's try to"
2320480,2326640," maybe unregister this motherfucker right so can we even delete it so it's it shows like two errors or"
2326640,2333200," something that's really okay so maybe it's not that really interesting for us uh so we just unregistered"
2333200,2339680," and we're gonna refresh this entire thing and it's registered again and poog looks like we installed"
2339680,2344000," something i have no idea what that means but here is an object the browser sent us okay so let's take a"
2344000,2354160," look install um all right all right all right so type install to nothing particularly interesting but"
2354160,2362080," we can now sort of like catch different sort of events right we can catch different sort of events"
2362080,2368160," and if i refresh the browser right so if i refresh the browser it's not installed anymore so install is"
2368160,2377840," when the um the serviced worker is first sort of installed right it's first installed it would be kind"
2377840,2383680," of cool to have a list of all of the possible events here we add an install event listening to the"
2383680,2389360," service worker hence self and then chain an extendable event wait until method onto the"
2389360,2394800," event this ensures that the service worker will not install until the code inside when until had"
2394800,2402080," successfully occurred i have no idea what the is going on with all of that but okay uh all right"
2402080,2409760," custom responses to requests so you can attach fetch event listener to the service worker then call the"
2409760,2416640," respond with the response method method on the event to hijack our http responders and update them with your own"
2416640,2417200," content"
2417200,2431600," so we can start by responding with the response because the rl matches uh that of the network request in each"
2431600,2440880," this is probably what we want chat holy"
2440880,2446480," so but is it going to occur on when you call like fetch"
2446480,2454560," or is it going to occur on any request made by the browser even if i just click in here and press enter"
2454560,2459200," does that count as the fetch does that count as the fetch"
2459200,2470320," probably i don't freaking know um so yeah so and this is how i suppose you interject uh so yes it does"
2470320,2476000," people say that fetch is any request might made by the browser that is actually pretty cool okay"
2478400,2486240," all right so that's edit complexity and i personally don't like edit complexity in fact i absolutely hate"
2486240,2491440," this entire idea and this entire web and stuff like that the only reason why i do that is because"
2491440,2499280," i want my web application to work offline if i uh had an option to like make it work offline without"
2499280,2507840," doing all of this crazy which it is i'm calling for what it is it's crazy uh i would happily pick that"
2507840,2509520," right so yeah"
2509520,2517760," just saying i think i think i need to state that up front right so i'm doing that not because i think"
2517760,2525120," it's cool or because i enjoy it but because i have no choice right so like anything in web by so by the"
2525120,2533200," way like nobody does anything in web because it's cool but because we have no choice like literally"
2533200,2540000," that's literally the only reason we use web not because we like it but because we have no choice and"
2540000,2550080," let me tell you if you say that you like it i have bad news for you uh have you heard about capital of sweden"
2551200,2565040," yes you have a stockholm syndrome i'm sorry so um anyway um"
2565040,2572000," let's see so we need to add the listener"
2575520,2578800," uh self add event listener"
2578800,2586640," so fetch let's do fetch event"
2586640,2589360," console"
2589360,2603360," pog the user uh made a request here it is and we're gonna do event"
2604240,2607760," i wonder if it's also going to contain all of the cookies probably"
2607760,2610960," you can probably do man in the middle"
2610960,2615520," you can probably do man in the middle"
2615520,2619200," so let's actually try to refresh all of that and"
2619200,2622720," if i refresh this entire thing as you can see it probably"
2622720,2625200," yeah it probably doesn't do"
2625200,2627440," shit because the service to worker"
2628000,2630720," the service worker is um an old one"
2630720,2632880," yes it's it's an old one"
2632880,2634960," i wonder if i can"
2634960,2641120," i'll just do that so what's that actually oh you can update it you can just update it so i should have"
2641120,2645840," actually clicked update i didn't i didn't notice that all right so what we have in here"
2645840,2652960," registered a service worker pogo looks like okay so that's that's fine uh all right so it keeps"
2652960,2661520," keeps well i mean it's it's from the client it's sort of from the client um so that looks fine but i"
2662640,2667600," honestly we don't really even do any"
2667600,2670320," any things in here"
2670320,2679360," so i'm i keep refreshing this entire thing but it doesn't really say that it can't like caught fetch"
2679360,2684960," right it doesn't really say that it caught fetch uh which is a little bit sus in my opinion i don't"
2684960,2688800," don't really know why it doesn't tell me that uh all right so"
2688800,2694160," it didn't uh catch the fetch and what's funny is that we don't really do"
2694160,2700160," fetch that often actually at all i don't think we do fetch at all"
2700160,2707440," um but yeah so what if i simply make the network offline i don't think it's going to do anything"
2707440,2711440," right i don't think it's going to do anything so i'm going to just refresh this entire thing and"
2711440,2717680," yeah as you can see uh it didn't really do anything but uh non-js files deprecated or"
2717680,2724000," something like that so that uh wasn't doing it that wasn't doing it so it's not how you do that"
2724000,2729600," okay so we probably have to continue reading probably have to continue reading this madness"
2732000,2741280," so using registers okay um so you probably have to do this like event respond with right so event respond"
2741280,2753520," booth uh but we never actually get an opportunity to to catch that uh cache first uh cache first"
2754960,2761520," so matches the particular request uh caches so there is an object called caches"
2761520,2770240," and then you can oh this is actually kind of cool oh so you can basically forward this entire thing"
2770240,2778480," recovering failed requests uh is this thing is great when there is a match in a service worker cache but"
2778480,2784720," what about uh cases when there isn't a match if we didn't provide any kind of failure handling our"
2784720,2790960," promise would resolve with undefined and we wouldn't get anything returned after testing"
2790960,2796640," uh the response from the cache will be so there is some sort of object called caches right and it"
2796640,2800720," feels like it's built in because as you can see we we didn't really create it anywhere uh"
2800720,2807600," right so let me take a look cache yeah okay so it is a thing uh and it's a cache storage so storage for"
2807600,2818880," cache objects um and all right so you can match a certain requesting for oh okay so that"
2818880,2826320," that's very interesting so this is literally the stuff that you put into the fetch"
2826320,2833840," right so if you take a look at fetch uh you know function it accepts requesting for"
2833840,2840320," and give gives you promise response and gives you promise response and apparently there is a global"
2840320,2847360," object caches uh right object or global object caches that has a method match that accepts the same"
2847360,2854560," request and form that you put into the fetch uh right and then it responds with response that which is also"
2854560,2862320," result of the fetch so it's like they match together right so they match together so you can literally"
2862320,2867360," um okay i can see i can see how you can use them together that's actually pretty cool so there's"
2867360,2872400," additional um things that you can have in here so like a cache query options"
2872400,2883680," so yes yes yes okay so that's cool and by the way when i say it's cool it doesn't mean that i think"
2883680,2890320," this entire thing is cool is cool and i'm satisfied with the web when i say it's cool i mean like okay"
2890320,2895840," right so okay i acknowledge that it's a sign of acknowledgement not the sign of encouragement"
2895840,2902720," i do not encourage this crazy motherfucking shut okay right this is not an encouragement it's"
2902720,2907120," acknowledging okay i acknowledge that you can do things like that all right so"
2911360,2916320," disclaimer yeah exactly disclaimer"
2916320,2930480," uh all right so so event respond uh with uh so essentially we're trying to get something from the"
2930480,2936720," cache we're trying to take the event request from the cache if we found it we do that otherwise we do the"
2936720,2947200," fetch right so we do the fetch uh uh okay so but the problem is that we never managed to trigger the fetch"
2947200,2953360," um right so we never managed to trigger the uh the fetch it's cool that they can"
2955840,2961840," it's okay it's okay it's okay it's interesting that uh i can cache that right so but whenever we never"
2961840,2963280," actually triggered the the fetch"
2963280,2966320," shut up everyone"
2966320,2972320," uh so i think first we need to trigger the fetch"
2972320,2974960," right so first we need to trigger the fetch"
2976960,2982320," so i said it's it's it's an acknowledgement it's an acknowledgement i just acknowledge this thing"
2982320,2990960," um so make some js call fetch but isn't that something that i asked"
2990960,3000000," earlier isn't that something that they asked earlier i asked what is considered fetch is fetch considered the"
3000000,3010880," javascript call to fetch uh or um is it considered any request made by the browser even if i just like"
3010880,3016320," request the image and everyone said that yes it's any request so does that mean the chat"
3016320,3020880," debated me did you just lie to me"
3020880,3023040," you just"
3023600,3034400," uh we can try to do that right so let's actually try to fetch something uh so what can we fetch right"
3034400,3036240," so is there something we can fetch in here"
3036240,3044560," well i mean we can try to fetch the index html right so if i do"
3044560,3050240," index html just like fetch this and nothing happened apparently"
3052480,3060000," nothing happened even though in the worker in that worker uh so it's still pending though"
3060000,3065680," right it's still pending so does it mean so if i save that promise somewhere"
3065680,3072640," right it's already taken okay"
3072640,3082320," all right your mom it's fulfilled and i suppose uh right so here's the response we"
3082320,3087360," can take a look at the body it's a readable stream and within the readable stream i mean like okay so"
3087360,3096560," it's probably html whatever uh and let me let me see so there should be some sort of a console it"
3096560,3103360," yeah so there was no logs or anything and service worker so yeah fetch didn't do anything didn't log"
3103360,3108880," anything so uh yeah we never managed to trigger it even after doing a fetch"
3111120,3120320," even after doing a fetch so uh yep so service worker did not um catch that it didn't catch that"
3120320,3126640," so you know what i'm thinking you're thinking maybe it has something to do with this goddamn scope"
3126640,3134800," maybe it has to do something with that goddamn scope that we ignored and uh everyone was actually"
3134800,3142240," warning us about so maybe that's something that we have to do so register uh register register register"
3142240,3143840," register register register script"
3143840,3153680," so constern your register so what about the scope uh scope a string representing a url that defines a"
3153680,3160000," service worker registration scope that is what ranges of urls a server worker can control this is"
3160000,3167120," usually a relative url it is relative to the base url of the application by default the scope value of the"
3167120,3171360," service worker is set to the directory where the service worker script is located"
3173200,3181280," it's located in js it's located in js we put it in js so does that mean that the scope of this goddamn"
3181280,3185520," thingy is here why did they introduce the scope"
3185520,3192400," why they introduced the scope why the do you well probably some sort of like a security reason okay i'm"
3192400,3199680," not gonna argue with that i'm gonna argue with that so uh okay the example described here show uh to get a"
3199680,3204240," a better understanding of how service worker scope applies to pages the following example uses the"
3204240,3211920," default value scope by emitting it the service is located blah blah blah okay so the phone code uh"
3211920,3220720," at the root of the site would apply exactly uh okay so if the scope were included at the page uh with the"
3220720,3230320," javascript file uh the service worker would only apply to the uh resources at product i see so let's go ahead"
3230320,3239920," and maybe provide less scope let's provide a less scope uh to do to so i think that's kind of important"
3239920,3248800," um so this is scope uh so this is the scope and in the scope do i have to do dot slash or like i"
3248800,3255440," honestly want to do just slash indicating that it has to be uh you know at the root of the entire thing"
3255440,3260560," right so i'm not really sure about the dot slash so there is a frequent confusion surrounding the meaning"
3260560,3266480," of user scope since the service worker can't have a scope broader than its own location only use the scope"
3266480,3278240," option when you need a scope that is narrower than the default um so so we need to do the narrower scope"
3278240,3286720," the narrow i cannot make it broad broader right so i can only make it broader if i put the service"
3286720,3290800," worker javascript at the root of this entire thing seriously"
3290800,3302800," that is um maybe dot dot slash because it's relative we'll see okay so i'm gonna put it like that"
3302800,3310960," so i'm gonna just do it slash and let's go to the applications and uh unregister this mother flipper"
3310960,3317280," so everything compiles which is nice uh right so there's a couple of errors in here um there really"
3317280,3324880," matter i don't care so let's refresh this entire thing uh did it work okay so the path provided scope"
3324880,3331200," is not under the max scope allowed uh adjust the scope move the service worker script or use the service"
3333120,3341360," call it freaking cold it right i'm developing an intuition towards this web shed technologies like"
3341360,3349680," i'm i'm starting to feel it i'm starting to feel maybe it's just a pain in my ass but i feel like it's"
3349680,3354480," web sometimes it's hard to do it's kind of difficult to distinguish whether it's just pain in my ass or just web"
3355520,3366720," uh anyway so so essentially what we need to do um what we need to do maybe we can just move this entire"
3366720,3375360," thing to uh to the root but how can we configure ts"
3382640,3389600," that's my face when i when i need to do web literally okay so this is like a result of some"
3389600,3396480," tests i suppose why do you keep opening it emacs shut the fuck up emacs so there's something about js"
3396480,3403200," yeah so essentially you provide the output directory and the like here's the root directory and here is"
3403200,3411600," the output directory so i want to put everything into the js uh right so i want to put everything into the"
3411600,3418000," js but at the same time um the service workers need to be at the root"
3418000,3428400," they need to be at the root and which makes me hella sad which makes me hella sad one of the things i"
3428400,3433760," can do of course i can just take the service worker and put it in here right i'm gonna just copy"
3433760,3439520," paste this entire thing that's totally fine uh all right so and then i just say okay so we'll just put"
3439520,3444640," it in here i can do things like that right i can do things like that that's totally fine"
3444640,3451680," uh all right so we need to take a look at the application so that seems to be fine"
3451680,3457760," and i'm going to refresh this entire thing and that registered the serviced worker right the serviced worker"
3457760,3464960," and uh where is it located i'm pretty sure it's located at yeah as you can see well i mean you probably"
3464960,3471440," couldn't see it but it's located at the root so yeah we installed something uh we registered the service"
3471440,3486080," worker we registered the serviced worker and if now i just refresh this into oh"
3487040,3499440," okay i figured that shit out all by myself without using any chat gpt or any of that zoomer shit"
3499440,3510880," just logic logic facts in logic and reading documentation easy easy lemon squeezing"
3516000,3521680," uh okay so yeah essentially it's funny that it works even though i never really"
3521680,3531200," forwarded anywhere right so i never really forwarded that thing anywhere um so it's kind of funny actually"
3531200,3542480," so it just worked it just worked uh okay so let's take a look at the service worker so one of the things we"
3542480,3550000," what we need to do we need to do we need to somehow reconfigure um this thing to just to know"
3550000,3557760," treat that specific service worker differently um i'm not very sure how to do that right because"
3557760,3561120," we set the route to t s"
3561120,3570480," it's kind of painful on the line so i think movimux uh suggested in the chat to use some sort of sim links"
3571200,3579760," uh that's not a bad idea but how is it going to work in uh on windows right so yeah we'll have to think"
3579760,3584800," about that i'm already streaming for one hour uh right so i would like to i would like to make a"
3584800,3591840," small break and refill my cup of tea refill my cup of tea and uh after the break we're going to continue"
3591840,3600720," uh doing uh doing this stuff right we're gonna continue doing this stuff um um anyways um"
3600720,3608640," so where is the service worker okay again"
3608640,3616160," um so let's go and find the way we"
3618400,3625840," um handle this thing i think in the novic navigator right in a navigator if i do service worker"
3625840,3631440," uh i can do the following thing navigator"
3631440,3639680," um online right so there is this thing which is rather an interesting thing isn't it"
3640880,3645520," which is rather an interesting thing i wonder if we can do something like if not offline"
3645520,3648800," uh caches"
3648800,3659360," match"
3660240,3674000," what is this thing is that a feasible solution"
3680800,3685760," we can actually try to steal some code from school squash stinging"
3685760,3691760," return from a callback is that something that i didn't think it's something that"
3691760,3700400," uh so where is my description uh so here is the description i want to take a look at school squash"
3700400,3701120," one more time"
3701120,3709680," uh so event respond with okay so that's probably what we have to do events uh respond it's somebody"
3709680,3714560," suggested in the chat yeah yeah so i see i see you i see you because this is what i remember from"
3714560,3720800," the from the examples as well this is what i remember from the examples as well um"
3721520,3730240," application application service worker it is pretty printed we want to find okay so it's not pretty"
3730240,3739040," printed pretty printed please thank you very much do you have some like fetch"
3741760,3751920," ah gotcha gotcha gotcha uh what do we have uh why did you can i i just want to see the full thing"
3751920,3762480," uh okay so you do request url location origin uh so it does all of these things and it does respond"
3762480,3771120," right so it does respond um so it also sometimes returns things from a cache if it matches something"
3771760,3778160," uh otherwise a response redirect does it check for yeah so location origin"
3778160,3783600," there's only check for online or anything so"
3783600,3793360," yeah so i suppose it just like does different things for different urls for different situations"
3793360,3798240," even for different methods as you can see even for different methods it does some sort of like a"
3798960,3805760," exclusion for an editor right so if something article editors that otherwise respond with redirect to that"
3805760,3810560," so some of the features probably could be disabled right so you can yeah you can do quite a little bit"
3810560,3824880," of a logic in here um so that's pretty cool it's pretty cool um all right so let me see respond with"
3824880,3830160," does it does it have to be with a function right oh it's not really a function right so it's it's this stuff"
3830160,3843360," um events respond with uh respond with just that uh i would like to like i can't really do"
3843360,3850720," that stuff easily i can't even jump there so add event listener one of the listeners we have"
3851520,3858640," um is an event listener um is an event listener so if we look at event listener so different events"
3858640,3871280," uh nothing particularly special so it's not really typed properly in any way unfortunately so fetch event request"
3873520,3882080," all right all right index ts all right so let's enable that and you know what for the time of development i"
3882080,3894000," think i'm going to make uh a sim link uh a sim link to js so essentially i want to do i want to do"
3894000,3908160," uh s uh service uh service worker j s j s service worker j s so it's the other way around i can never"
3908160,3915360," remember in which order you have to provide those things all right so there we go so we can do uh like"
3915360,3919920," this so for for the sake of development i think i'm going to do it like that uh because i don't want to"
3919920,3925600," mess with typescript as as of right now uh all right so we'll get something so let's take a look"
3925600,3930480," at the console all right so we registered some workers and stuff like that which is pretty cool"
3930480,3934240," so we can take a look at the application we can take a look at the service worker"
3934240,3940880," so we do have all of the necessary things in here that is very cool that is very epic you know what it"
3940880,3954000," would be kind of nice to also log something uh right we are offline serving a request from the cache"
3955760,3974400," we are online uh we are online uh we are online online uh forwarding the request"
3974400,3978400," uh cons"
3981440,3986080," i mean it's a compiled language right it's a compiled language it's going to tell me that"
3986080,3991200," something is wrong in here don't worry about it chat don't even worry about it uh to be fair it's"
3991200,3998400," already telling me that something is wrong uh does not exist in the event yeah that's actually pretty"
3998400,4007600," bad it's actually pretty bad that i can't just use respond um with yeah that's kind of sad"
4008320,4014080," so because a typescript apparently doesn't have enough information about that um right so we can"
4014080,4022080," try to maybe search uh for different things in here what if i search for uh respond width right so who"
4022080,4032080," has a respond width so this is a fetch event event right extendable so maybe we need to cast this entire"
4032080,4037360," thing to fetch events so maybe this is one of the same things we can do so let's say fetch"
4038320,4049600," event event all right so and now this thing should work but it didn't actually all right so oh yeah"
4049600,4058720," you need to like include web workers or something like that uh can i just say import uh web workers"
4059920,4066720," all right so is this how you do that i don't remember right uh how do you import things how do you import"
4066720,4071440," things um yeah this is not how you import things ah"
4071440,4079040," so i forgot how to import things so type script import web workers"
4079040,4087440," using dependencies on top of dependencies not really uh right so this is some of the like existing"
4087440,4091920," modules and modules in there i just forgot how to import things in typescript um"
4091920,4104240," so import uh import everything uh from okay so can i import fetch event from"
4104240,4114800," web worker so we do have web worker uh in here right is that enough almost almost i cannot use imports"
4114800,4123440," export or module augmentation uh when module is none yeah that's kind of weird because the only thing i need"
4123440,4131520," is the typings right the typing so i probably have to do something like this"
4131520,4142160," uh yeah so doesn't really matter doesn't really matter um so essentially it it thinks that i want to create like"
4142160,4149840," modules and stuff like that but i only care about the uh these things the the typings so i want to on the"
4149840,4150720," import typings"
4150720,4158320," uh i think you want oh yeah yeah so it's probably ts config yeah that's right"
4158320,4167920," yeah okay so it is a thing so it's probably i want to add one of the this thing uh web worker thank"
4167920,4173600," you thank you thank you thank you so much uh so i think you want to change in this ts contract yeah"
4173600,4182320," yeah you're right uh so let me see i probably uh have to of course get to read uh of the center i"
4182320,4184320," think i don't think it's particularly neat"
4188480,4197760," fuck me holy shit okay um that was uh overloading something something overloading"
4197760,4206240," oof uh argument of fetch is not assignable to parameter dedicated worker global scope event map"
4207120,4215840," okay okay so jesus is that what you want all right still that didn't really work um"
4215840,4221200," yeah"
4221200,4224800," so fetch"
4224800,4229280," yeah fetch event apparently is not assignable in here"
4230800,4237120," okay so it doesn't really prevent us from compiling this entire thing right so because the end result"
4237120,4242400," is still going to be generated because that's kind of the point of typescript even if something"
4242400,4247920," doesn't compile it doesn't mean that you are not going to be able to you know generate it so"
4252400,4256880," you can cast it inside the listener scope that's also a good idea i think that's one of the things"
4256880,4267360," i can do right so just do as um so let's actually see can i do something like event can i shadow things"
4267360,4277120," is shadowing names okay in javascript um is shadowing things okay uh it's it's not particularly okay all"
4277120,4285120," right uh we can uh we can maybe even do something like e because some languages are okay with shadowing"
4285120,4292240," all right they are in fact okay uh so argument promise undefined is not assignable to parameter"
4292240,4300640," oh this one is actually pretty cool okay so this thing this thing uh may return undefined"
4300640,4306400," and this is something that actually typescript helped us with uh right because respond with"
4307120,4316320," uh accepts promise response right as you can see it accepts promise response but um this thing uh like"
4316320,4324080," cache match returns promise response undefined in case of something is not available in there so what we"
4324080,4329840," probably have to do we probably have to do something like then uh all right so this is going to be response"
4331040,4341920," and i suppose i suppose i suppose yeah we can actually probably want to do something like like this"
4341920,4352480," uh response undefined and this is something like that so if response undefined is that how we check for"
4352480,4358800," undefined right so we we can return something else um right we can try to return something else"
4361040,4369120," um typescript stops the compilation when errors or it creates the javascript file despite errors"
4369120,4375600," the second one it creates uh javascript despite the errors because it wants you to be able to"
4375600,4383520," transition to typescript smoothly uh right so essentially you can't just take easily your javascript"
4383520,4389440," mess and start using typescript because it's not going to work because it's going to be a lot of errors"
4389440,4395840," so because of that it just allows you to generate with errors right so just because something doesn't"
4395840,4400320," match the types at compile time it doesn't mean that it's not going to work at runtime it may work at"
4400320,4407680," runtime because it's a dynamic language i guess that that's the idea um i guess that's the idea"
4407680,4416160," so yes yes yes yes so if it's undefined we have to i suppose return something else but i'm not"
4416160,4422720," pretty sure what we have to return so can i fabricate the response right can i fabricate the response"
4422720,4432400," uh otherwise we just return response uh though we can do something like not equal and instantly return"
4432400,4442480," that otherwise uh new response um interestingly maybe it is possible to construct a response can i just"
4442480,4453760," construct a response uh all right so let me see let me see um so javascript new response"
4453760,4464800," new response new response is that the thing that you can just do is there the thing you can just do"
4465680,4477920," there you can try to serve something um so a boolean indicating okay so there is some sort of a"
4477920,4486720," constructor body oh you can just create a body if anybody of the response this can be null uh and options"
4486720,4493680," what are the options what are the options you can return the status okay uh so we can maybe do something"
4493680,4508960," like this new response um and then status uh so this is going to be like the text uh 404 right so this is the"
4508960,4519680," the status um headers do we want to have any headers so status text um yeah that's fine so my blob blob is a body"
4519680,4528560," but i suppose i should be able to just put the text in there right so i don't see a constructor though"
4530160,4532000," so so maybe this is the body"
4532000,4541520," so this is just an interface oh here it is so body body in it so what is body in it it's a blob"
4541520,4547840," buffered form data and it's okay so it could be a string so uh the body could be a string so that's"
4547840,4554000," totally fine i'm happy with that so yeah well we just want to have something right so we just want to have"
4554000,4565040," something doesn't really matter um okay so expected something else i don't quite understand what it"
4565040,4571600," expects from me maybe i forgot to semicolon here so 17 um yeah"
4571600,4583840," is that that is weird my friend like what do you want from me so i thought then accepts what okay so it"
4583840,4592240," accepts function and and everything what did i what did i miss exactly uh what did i miss i don't"
4592240,4607120," quite understand so it's not equal to undef um so what one more oh yeah okay all right holy it fully"
4607120,4613680," compiles look at that fully compiles so isn't that poggers so i wonder if it's going to work"
4613680,4616800," work i wonder if it's going to work so"
4616800,4627120," all right so let me let me see let me see so we need to go to the application and unregister this entire"
4627120,4636080," thing and let's just refresh it is registered yet again so pog looks like blah blah blah and yeah we"
4636080,4643520," are online forwarding the request we are online and we're forwarding the request which is kind of cool okay"
4643520,4649920," okay so let's go to network and we're going to go offline so i'm going to try to refresh this entire thing"
4649920,4651040," so let's do console"
4651040,4656800," uh it worked"
4656800,4668720," let me tell you it actually worked i mean it actually worked uh so we just didn't have anything in the cache"
4670080,4675600," we just didn't have anything in the cache but it worked and i suppose the reason why we didn't"
4675600,4683280," have anything in the well we disabled the cache look at that i thought right so i thought i said disable"
4683280,4691280," the cache but i mean it didn't yeah so we didn't work um one of the things we can do in here we can"
4691280,4702080," literally do something like um i don't know um so you are offline lol"
4702080,4709200," or or uh and in in here we can just return something like this"
4709200,4717600," so and let's actually go to no throttling uh right so we save this entire thing um"
4718240,4724160," and uh what else do we need we need to go to application and unregister this entire thing"
4724160,4730560," let's refresh everything seems to be working everything seems to be twerking uh offline and"
4730560,4736480," we're going to refresh this entire thing it's not even html god damn well i mean okay that was close"
4736480,4745280," uh so i suppose we need to set the content type or mime or something like that right we can actually look"
4745280,4752480," up what kind of options can we have in there so status uh you can only have status you you can have"
4752480,4761280," response type um basic yeah you have to do that through headers you have to do that through headers"
4761280,4770240," and it's an interface and i have to append them like that all right let's see okay so i can have headers"
4770240,4777360," which is const new headers right so this is going to be like that and one of the headers i want to"
4777360,4791760," add in here is content type so that one is going to be text html headers headers is that how we do that"
4791760,4800800," is that how i do that i think that's how we do that so yeah there's a compile it seems to be compiling it is"
4800800,4808800," seems to compile uh application application and register uh where's the network"
4811840,4819520," refresh refresh refresh and so it registered everything right so it registered everything"
4819520,4826640," go to offline refresh you are flying low forehead forehead"
4826640,4838720," you are offline so it's okay that's actually pretty cool so you can have like an entire logic in here"
4838720,4848240," that renders html templates i mean how is that different from just responding from a server but"
4848240,4853040," locally on your computer right so we're basically writing like a back end but inside of the browser"
4853040,4860640," right so this is the back end inside of the browser so the problem here is that the cache didn't freaking"
4860640,4867680," work so why the cache didn't work we explicitly disabled the cache right so if we go to the network"
4867680,4875200," yeah we we enabled the cache we enabled the cache so why it didn't work so maybe we have to explicitly"
4875200,4883840," put stuff into the cache uh i kind of remember that some of the examples put stuff into the cache"
4883840,4890480," uh write the cached manually yeah so maybe one of the things we have to do so we are online"
4891280,4898480," um let's take a look at the caches uh thingy it's a cache storage"
4898480,4909280," match open right so you can't really put anything in here so you can delete you can check whether"
4909280,4918720," something is within the cache uh so then you can all right so you have keys you can match you can open"
4919440,4921520," so but you can't really put anything in there"
4921520,4930960," uh you can open the cache okay so you can open the cache to write something in there so this is very"
4930960,4935120," interesting so somebody actually said very interesting thing okay so you can open it"
4935120,4944800," and within the cache you can add it aha and you can add you add the request in four though provide the"
4944800,4949920," storage mechanism for request response object pairs that are cached for example as part of the service"
4949920,4955120," worker life cycle know that the the cache interface is exposed to windows scope as well as workers you"
4955120,4959760," don't have to use it in conjunction with service worker even though it is defined as a service worker"
4960800,4970720," all right so um it is i'm kind of it's kind of strange that you have to add request info but not"
4970720,4980800," a response info so okay so here's the put okay um it's it's funny that i have to do that explicitly"
4980800,4989680," all right it's funny that i have to do that explicitly but it's fine um so let me see we can do something like"
4989680,4999280," then uh and here we have a response all right so here is the uh response uh then"
4999280,5002800," what we want to do we want to open cache"
5002800,5010720," uh so we definitely probably want to use some like a sink await thing but i'm too"
5010720,5016160," old-fashioned to do that i'm sorry all right so let's open the cache why does it"
5017120,5023520," and this is like why do you have to provide the name ah wait wait a second do you have"
5023520,5033280," do you have like separate caches like what is the name what's up with the name"
5033280,5040480," i don't understand cache storage i i need more information so there was an example"
5041760,5055920," so caches uh open version two okay so fetch respond with cache first uh if you have that return that"
5055920,5066320," uh fetch request uh put this is actually a little bit better so i suppose this is your sort of like a local"
5066320,5071040," caches right so you have a cache of version one and then when you upgrade your application you're"
5071040,5079840," probably going to use a different name for the cache so it's basic okay i see what's going on in here"
5080480,5087840," i see what's going on here i see what's going on here actually very cool actually very cool"
5087840,5092800," okay"
5092800,5097600," well and by cool"
5100480,5105200," i just acknowledge okay you can do that i do not encourage any of this show"
5105200,5124720," then um right so we have the cache right so we just open it so this is the cache yeah this is not"
5124720,5129200," particularly convenient right so this is not particularly convenient what we want to probably"
5129200,5134320," do we want to have like a function all right so we probably want to have like a function but it's a"
5134320,5142480," sync function right so um and what we want to do in here is essentially just a response"
5142480,5150800," and we await for that response in here uh we just await for that response but then we take the cache"
5151360,5160960," cache is open uh version one we also await for this entire thing right we also await and uh now"
5160960,5166080," all right so there's that uh so this is the function but we also have to kind of call it"
5166080,5176720," uh all right so can we do cache put and we what we do we put uh event uh request uh and a response"
5179680,5187280," uh put event request response so this entire thing um it yeah it checks within the cache so they actually"
5187280,5192160," organize this entire thing a little bit better i kind of like how they organize this entire stuff"
5192160,5198560," uh i do kind of like it but maybe maybe that's fine"
5201120,5209600," uh all right so does it compile it doesn't really compile uh so do i have to do it like that"
5209600,5214960," uh-huh i can't really do it like that"
5214960,5223120," so what they do so oh yeah this entire thing is supposed to return"
5225360,5231360," yeah we're supposed to return response i see what's going on yeah okay so that makes sense oh"
5231360,5239360," supposed to return a response there a response there so is it too much that i'm like"
5239360,5247040," you know checking like constantly adding that to the cache even though it's not particularly mean that's"
5247040,5253680," fine it's probably fine all right so let's give it a try i think we're ready to finally give it a try"
5253680,5262560," so no throttling uh the application the application unregister all right so let's refresh so here's the"
5262560,5268080," mod jam everything is registered so here we have this thing i'm going to refresh this entire thing and"
5268080,5273680," uh so no js i don't know what the is that um so the fetch event"
5275120,5283680," oof the fetch event for resulted in the network error a respond whose body is locked cannot be respond to"
5283680,5284320," requests"
5284320,5293040," i probably fucked something up uh probably fucked something up i can see what's going on um so"
5293040,5300000," something something is locked in here okay so let's maybe take the the code that they had in here so i think"
5300000,5308880," it's a pretty good code uh all right so put in cache and then cache first and so on and so forth um need"
5308880,5317600," to clone it like an example do they clone it i don't see the cloning though oh okay so cache it first"
5317600,5329040," yeah okay i see i didn't notice the clone okay that makes sense um so when they put it or you just clone it"
5329760,5337200," all right all right all right all right that also makes sense i suppose that also makes sense so now"
5337200,5339120," i'm gonna unregister this entire thing i think"
5339120,5350160," let's refresh everything seems good everything seems fine uh and now we're gonna disable the network we're"
5350160,5368000," gonna go to console first try first try mother flip us first try absolutely epic so it works offline"
5368000,5376320," it it just works offline we can even like go ahead and render this entire thing all right so i'm rendering"
5379200,5388720," oh so uncode syntax error in gif worker the fuck ah"
5388720,5402400," ah i see this is interesting because this yes okay that's very funny i know what the fuck is going on okay"
5402400,5415440," so gif workers are loaded they are loaded dynamically by give js right so give uh worker yeah there we go so they"
5415440,5424320," refer to this thing via the string literal they load it dynamically um so they never had an opportunity to be cached"
5426480,5435680," that is very fascinating so i don't think we can solve that i don't think we can solve that um without"
5435680,5441840," modifying the gif right so the gif.js needs to be modified to solve that right so it always need to"
5441840,5451600," um you know cache it somehow we can put some sort of a hack essentially when index.js is loaded just always"
5451600,5459120," load give uh gif worker dot gs to just put it in a cache uh we can put this kind of hack but i mean"
5459120,5464640," apart from that we can only try to modify how gif works um"
5467520,5473440," manual fetch them classic web dev hack yeah uh exactly but uh essentially let me actually go"
5473440,5482640," back to the network right so let's make it uh online all right we're gonna refresh this entire thing"
5482640,5491200," now i'm gonna try to render all right so we are rendering everything there's no errors everything's"
5491200,5498480," fine i suppose we cached uh the entire thing now we can go offline we're going offline we're refreshing"
5498480,5505520," this entire thing uh right so the console says we are offline that's pretty cool and now if i try to"
5505520,5512960," render this entire thing it is rendering so everything works fine um okay so we can just give it a try we can"
5512960,5519120," just try to do that um so yeah"
5519120,5530160," isn't there some sort of a preload in html we're not as already said before it wasn't listening correctly"
5530160,5538000," we're not loading this thing directly it is loaded dynamically by gif.js not from html not from html"
5539600,5549760," so uh let me see what we can do we can just thatch uh gif gs um gif worker gs like this"
5549760,5554800," that's it"
5554800,5568960," um that's actually kind of funny um and now i wonder how can i clean up the cache i probably can"
5570480,5575200," uh just take the storage um cache storage"
5575200,5586640," cache oh i can yo i can see all of the cache chat in here what the fuck can i clean it up okay i can"
5586640,5596800," delete it uh all right all right all right so yes yes yes um it's the network yeah application"
5597520,5604240," what i want to do i want to nuke the service worker all right and essentially i want to refresh"
5604240,5615120," the center i think uh okay so there is no internet but this is because we are offline we are offline now"
5615120,5626800," and the gif worker was fetched the gif worker was fetched uh we can take a look at the cache storage"
5627520,5631120," uh we don't already have i don't see the cache storage where's the cache storage"
5631120,5638800," here it is uh do we have we already have gif worker even though we never directly really used it"
5638800,5647840," so now i'm going to disable the network i'm going to go offline i'm going offline so we're offline i'm"
5647840,5654400," refreshing this entire thing it refreshed successfully it refreshed absolutely successfully and now i can try"
5654400,5659200," to render it and is it rendering i think it is rendering i didn't see yeah it is rendering so it's"
5659200,5666240," successfully so we basically prefetch this entire thing uh effectively putting it into the uh into the"
5666240,5675920," cache and now this entire thing works completely offline we achieved the epic victory royale uh right so we"
5675920,5689760," can do something like then um and then we can say console log um prefetched uh give worker js like so"
5689760,5698000," okay now i know how this entire thing works it's a bit convoluted right it's a bit convoluted for what i"
5698000,5703360," want it right so yeah if you take a look at the service worker"
5703360,5712560," so you have to register this thing you have to handle these events and stuff like that and it's"
5712560,5719360," surprising that you have to manipulate the cache yourself for some reason i thought when i'm uh"
5719920,5727600," basically addressing the caches objects right so cache global caches object i thought that this is the cache"
5727600,5734080," of the browser you know what i'm talking about like the browser has its own cache right the browser has its"
5734080,5740320," own cache so i thought every time i query something it puts it in a cache i didn't know that in case of the"
5740320,5750720," service worker i have to manipulate the cache manually it's kind of funny how a lot of the browser functionality"
5750720,5758880," gets moved on the shoulders of the front-end devs i have a strange feeling that in 10 years"
5758880,5764640," the web like front-end developers would have to implement the entire browser in javascript"
5767040,5773760," so essentially the browser is going to become so lightweight it's going to be just a downloader of"
5773760,5782320," programs and the websites will ship their version of the browser written entirely in javascript"
5782320,5785600," and whatever is called browser is going to just like execute it"
5785600,5788000," uh right"
5788000,5796560," you know what i'm talking about because like this is the functionality of the browser that i would expect"
5796560,5800480," right right to write so the browser is supposed to do this cache logic but now"
5800480,5804800," i'm the one who's doing that cache logic so that was moved on me"
5804800,5811680," right so the more and more things that browsers were doing themselves are moving to the front end"
5811680,5819680," so what's the end goal what's the end game of this process"
5821120,5828720," the end game is that the browsers are going to be just package measures just downloaders of other browsers"
5828720,5837680," right so i guess maybe that's that's the end goal right so because the only reason people"
5837680,5845680," use web is because of its distribution abilities right nobody uses web because javascript is somehow"
5845680,5852320," such a cool language that everybody loves no no no no everybody loves javascript because web has great"
5852320,5860080," distribution ability not the other way around right so um you can replace javascript with any language"
5860080,5866240," it and it doesn't change the situation we don't use web for javascript nobody uses web for javascript"
5866240,5874800," if you do again the capital of sweden um so we used web for its great distribution abilities"
5874800,5882560," and i suppose the the end game is to just strip off this entire stuff down to just the distribution abilities"
5883280,5887040," i think i think i think that's what it is i think that's the end game"
5887040,5896560," which is not that bad of a bad game end game the only bad thing about it is that um"
5896560,5905280," like only a few big corporation or corporations can be in control of all of the standards for all of that"
5906080,5911280," um which is kind of like dangerous for the entire ecosystem but i don't know we'll see we'll see"
5911280,5917120," okay that was an interesting stream all right it was surprisingly interesting stream"
5917120,5923520," so i intentionally didn't read anything about service workers well i mean i kind of knew that"
5923520,5929200," they're basically proxies that run on your browser but that's about it so i just wanted to see"
5929840,5936720," um how much time will it take for me to you know understand how to use this entire api and i suppose"
5936720,5943760," if you just approach it slowly uh and logically all right slowly gathering all the necessary"
5943760,5950080," information you can get the gist of this entire thing you can understand it um right that's pretty"
5950080,5955840," cool i guess that's it for today thanks everyone who's watching me right now i really appreciate"
5955840,5965280," that have a good one and see you all in the next recreation programming session with a mr azuzin i love you all"
